# 07ì¥: ì–´ë…¸í…Œì´ì…˜ ìƒì„¸ - Part 1

**[ë‹¤ìŒ: Part 2 â†’](07-2-ì–´ë…¸í…Œì´ì…˜ìƒì„¸-Part2.md)** | **[ëª©ì°¨ë¡œ ëŒì•„ê°€ê¸°](../README.md)**

---

## ğŸ“š í•™ìŠµ ëª©í‘œ

ì´ ì¥ì„ ë§ˆì¹˜ë©´ ë‹¤ìŒì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- [ ] @Component, @Service, @Repository, @Controllerì˜ ì°¨ì´ì™€ ì—­í• ì„ ì´í•´í•œë‹¤
- [ ] @Configurationê³¼ @Beanì˜ ë™ì‘ ì›ë¦¬ë¥¼ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤
- [ ] @ComponentScanì˜ ë‹¤ì–‘í•œ ì˜µì…˜ì„ í™œìš©í•  ìˆ˜ ìˆë‹¤
- [ ] @Autowired, @Qualifier, @Primaryì˜ ì°¨ì´ë¥¼ ì´í•´í•œë‹¤
- [ ] ì»¤ìŠ¤í…€ ì–´ë…¸í…Œì´ì…˜ì„ ë§Œë“¤ê³  ë©”íƒ€ ì–´ë…¸í…Œì´ì…˜ì„ í™œìš©í•  ìˆ˜ ìˆë‹¤

**ë‚œì´ë„**: â­â­â­â­â˜† (ì¤‘ìƒê¸‰)
**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 3ì‹œê°„
**ì„ í–‰ í•™ìŠµ**: 03ì¥(IoC), 04ì¥(DI)

---

## ğŸ¤” ì™œ ì–´ë…¸í…Œì´ì…˜ ìƒì„¸ í•™ìŠµì´ í•„ìš”í•œê°€?

### ë¬¸ì œ ìƒí™©

**ì–´ë…¸í…Œì´ì…˜ì„ ì œëŒ€ë¡œ ì´í•´í•˜ì§€ ëª»í•˜ê³  ì‚¬ìš©í•˜ëŠ” ê²½ìš°**:

```java
// âŒ ì˜ëª»ëœ ì‚¬ìš©: ì—­í• ì— ë§ì§€ ì•ŠëŠ” ì–´ë…¸í…Œì´ì…˜
@Controller  // ì›¹ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì•„ë‹Œë° @Controller ì‚¬ìš©
public class EmailValidator {
    // ë‹¨ìˆœ ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ì¸ë° @Controller?
}

@Service  // Serviceê°€ ì•„ë‹Œë° @Service ì‚¬ìš©
public class UserEntity {
    // ì—”í‹°í‹° í´ë˜ìŠ¤ì¸ë° @Service?
}

// âŒ @Configuration ì—†ì´ @Bean ì‚¬ìš©
@Component  // @Configurationì´ ì•„ë‹Œ @Component
public class AppConfig {

    @Bean
    public ServiceA serviceA() {
        return new ServiceA(serviceB());  // ì‹±ê¸€í†¤ ë³´ì¥ ì•ˆ ë¨!
    }

    @Bean
    public ServiceB serviceB() {
        return new ServiceB();
    }
}
```

**ì¸¡ì • ê°€ëŠ¥í•œ ë¬¸ì œì **:
- âŒ **ì½”ë“œ ê°€ë…ì„±**: ì˜ëª»ëœ ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ì˜ë„ íŒŒì•… ì–´ë ¤ì›€
- âŒ **ë²„ê·¸ ë°œìƒë¥ **: @Configuration vs @Component í˜¼ë™ â†’ ë²„ê·¸ 20%
- âŒ **ì„±ëŠ¥ ë¬¸ì œ**: ë¶ˆí•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” â†’ ì‹œì‘ ì‹œê°„ 30% ì¦ê°€
- âŒ **ìœ ì§€ë³´ìˆ˜**: ì–´ë…¸í…Œì´ì…˜ ì˜ë¯¸ ë¶ˆëª…í™• â†’ ìœ ì§€ë³´ìˆ˜ ì‹œê°„ 2ë°°

### í•´ê²°ì±…: ì˜¬ë°”ë¥¸ ì–´ë…¸í…Œì´ì…˜ ì‚¬ìš©

```java
// âœ… ì˜¬ë°”ë¥¸ ì‚¬ìš©
@Component  // ë²”ìš© ì»´í¬ë„ŒíŠ¸
public class EmailValidator {
    // ìœ í‹¸ë¦¬í‹° â†’ @Component
}

@Service  // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
public class UserService {
    // ì„œë¹„ìŠ¤ ê³„ì¸µ â†’ @Service
}

@Repository  // ë°ì´í„° ì ‘ê·¼
public class UserRepository {
    // ë¦¬í¬ì§€í† ë¦¬ ê³„ì¸µ â†’ @Repository
}

@Controller  // ì›¹ ìš”ì²­ ì²˜ë¦¬
public class UserController {
    // ì»¨íŠ¸ë¡¤ëŸ¬ ê³„ì¸µ â†’ @Controller
}

@Configuration  // ì„¤ì • í´ë˜ìŠ¤
public class AppConfig {

    @Bean
    public ServiceA serviceA() {
        return new ServiceA(serviceB());  // ì‹±ê¸€í†¤ ë³´ì¥!
    }

    @Bean
    public ServiceB serviceB() {
        return new ServiceB();
    }
}
```

**ê°œì„  íš¨ê³¼**:
- âœ… **ì½”ë“œ ê°€ë…ì„±**: ì—­í• ì´ ëª…í™• â†’ ì´í•´ ì‹œê°„ 70% ë‹¨ì¶•
- âœ… **ë²„ê·¸ ê°ì†Œ**: ì˜¬ë°”ë¥¸ ì‚¬ìš© â†’ ë²„ê·¸ ë°œìƒë¥  80% ê°ì†Œ
- âœ… **ì„±ëŠ¥ í–¥ìƒ**: íš¨ìœ¨ì ì¸ ìŠ¤ìº” â†’ ì‹œì‘ ì‹œê°„ ì •ìƒí™”
- âœ… **ìœ ì§€ë³´ìˆ˜**: ëª…í™•í•œ ì˜ë¯¸ â†’ ìœ ì§€ë³´ìˆ˜ ì‹œê°„ 50% ë‹¨ì¶•

---

## ğŸŒŸ ì‹¤ìƒí™œ ë¹„ìœ  5ê°€ì§€

### ë¹„ìœ  1: íšŒì‚¬ì˜ ëª…í•¨ (ì§ê¸‰ í‘œì‹œ) ğŸ’¼

**ì–´ë…¸í…Œì´ì…˜ = ëª…í•¨ì˜ ì§ê¸‰**:
- @Component = ì¼ë°˜ ì§ì› (ë²”ìš©)
- @Service = ë¶€ì„œì¥ (ë¹„ì¦ˆë‹ˆìŠ¤ ë‹´ë‹¹)
- @Repository = ìë£Œì‹¤ ë‹´ë‹¹ (ë°ì´í„° ê´€ë¦¬)
- @Controller = ì ‘ìˆ˜ ë‹´ë‹¹ (ì™¸ë¶€ ì‘ëŒ€)

ëª…í•¨ì„ ë³´ë©´ ì—­í• ì„ ë°”ë¡œ ì•Œ ìˆ˜ ìˆë“¯ì´, ì–´ë…¸í…Œì´ì…˜ì„ ë³´ë©´ í´ë˜ìŠ¤ì˜ ì—­í• ì„ ë°”ë¡œ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```java
@Service  // "ì €ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë‹´ë‹¹ì…ë‹ˆë‹¤"
public class OrderService { }

@Repository  // "ì €ëŠ” ë°ì´í„° ê´€ë¦¬ ë‹´ë‹¹ì…ë‹ˆë‹¤"
public class OrderRepository { }

@Controller  // "ì €ëŠ” ê³ ê° ì‘ëŒ€ ë‹´ë‹¹ì…ë‹ˆë‹¤"
public class OrderController { }
```

### ë¹„ìœ  2: ë„ë¡œì˜ êµí†µ í‘œì§€íŒ ğŸš—

**ì–´ë…¸í…Œì´ì…˜ = êµí†µ í‘œì§€íŒ**:
- @Component: ì¼ë°˜ ë„ë¡œ í‘œì§€
- @Service: ì£¼ìœ ì†Œ í‘œì§€
- @Repository: ì£¼ì°¨ì¥ í‘œì§€
- @Controller: í†¨ê²Œì´íŠ¸ í‘œì§€

í‘œì§€íŒì„ ë³´ë©´ ì–´ë””ë¡œ ê°€ì•¼ í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆë“¯ì´, ì–´ë…¸í…Œì´ì…˜ì„ ë³´ë©´ ì–´ë–¤ ì—­í• ì¸ì§€ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ë¹„ìœ  3: ë°°ë‹¬ì˜ë¯¼ì¡± ì•±ì˜ ì¹´í…Œê³ ë¦¬ ğŸ”

**ì–´ë…¸í…Œì´ì…˜ = ìŒì‹ì  ì¹´í…Œê³ ë¦¬**:
- @Component: ê¸°íƒ€
- @Service: ë ˆìŠ¤í† ë‘ (ìš”ë¦¬ ì œê³µ)
- @Repository: ì°½ê³  (ì¬ë£Œ ë³´ê´€)
- @Controller: ì£¼ë¬¸ ì ‘ìˆ˜ (ì†ë‹˜ ì‘ëŒ€)

ì¹´í…Œê³ ë¦¬ë¥¼ ë³´ë©´ ìŒì‹ì  ì¢…ë¥˜ë¥¼ ì•Œ ìˆ˜ ìˆë“¯ì´, ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ í´ë˜ìŠ¤ ì—­í• ì„ ë¶„ë¥˜í•©ë‹ˆë‹¤.

```java
@Service  // ì£¼ë¬¸ ì²˜ë¦¬ ë¡œì§ (ë ˆìŠ¤í† ë‘)
public class OrderService {
    public Order createOrder() {
        // ìš”ë¦¬ (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)
    }
}

@Repository  // ì£¼ë¬¸ ë°ì´í„° ì €ì¥ (ì°½ê³ )
public class OrderRepository {
    public void save(Order order) {
        // ì €ì¥ (ë°ì´í„° ê´€ë¦¬)
    }
}
```

### ë¹„ìœ  4: ë³‘ì›ì˜ ì§„ë£Œê³¼ ğŸ¥

**ì–´ë…¸í…Œì´ì…˜ = ì§„ë£Œê³¼ í‘œì‹œ**:
- @Component: ì¼ë°˜ ì˜ë£Œì§„
- @Service: ë‚´ê³¼ (ì§„ë£Œ ë‹´ë‹¹)
- @Repository: ì˜ë¬´ê¸°ë¡ì‹¤ (ê¸°ë¡ ê´€ë¦¬)
- @Controller: ì ‘ìˆ˜ì°½êµ¬ (í™˜ì ì‘ëŒ€)

ì§„ë£Œê³¼ë¥¼ ë³´ë©´ ì–´ë””ë¡œ ê°€ì•¼ í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆë“¯ì´, ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ì±…ì„ì„ êµ¬ë¶„í•©ë‹ˆë‹¤.

### ë¹„ìœ  5: ê³µí•­ì˜ ì•ˆë‚´ í‘œì‹œ âœˆï¸

**ì–´ë…¸í…Œì´ì…˜ = ê³µí•­ ì•ˆë‚´**:
- @Component: ì¼ë°˜ ì‹œì„¤
- @Service: ë©´ì„¸ì  (ì„œë¹„ìŠ¤ ì œê³µ)
- @Repository: ìˆ˜í•˜ë¬¼ ë³´ê´€ì†Œ (ë¬¼í’ˆ ê´€ë¦¬)
- @Controller: ì²´í¬ì¸ ì¹´ìš´í„° (ê³ ê° ì ‘ìˆ˜)

ê³µí•­ ì•ˆë‚´ë¥¼ ë³´ë©´ ëª©ì ì§€ë¥¼ ì°¾ì„ ìˆ˜ ìˆë“¯ì´, ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ì½”ë“œ êµ¬ì¡°ë¥¼ íŒŒì•…í•©ë‹ˆë‹¤.

---

## ğŸ’¡ í•µì‹¬ ê°œë…

### ê°œë… 1: Stereotype ì–´ë…¸í…Œì´ì…˜ ê³„ì¸µ

#### ì´ˆë“±í•™ìƒë„ ì´í•´í•˜ëŠ” ì„¤ëª…
> "Springì˜ ì–´ë…¸í…Œì´ì…˜ì€ 'ë‚˜ëŠ” ì´ëŸ° ì—­í• ì´ì—ìš”!'ë¼ê³  ì•Œë ¤ì£¼ëŠ” ìŠ¤í‹°ì»¤ì˜ˆìš”. @ServiceëŠ” 'ì¼ì„ í•˜ëŠ” ê³³', @RepositoryëŠ” 'ë¬¼ê±´ì„ ë³´ê´€í•˜ëŠ” ê³³', @ControllerëŠ” 'ì†ë‹˜ì„ ë§ì´í•˜ëŠ” ê³³'ì´ì—ìš”."

#### ì¤‘ê¸‰ ê°œë°œìë¥¼ ìœ„í•œ ì„¤ëª…
> "Stereotype ì–´ë…¸í…Œì´ì…˜ì€ @Componentë¥¼ ë©”íƒ€ ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ê°€ì§€ëŠ” íŠ¹ìˆ˜í™”ëœ ì–´ë…¸í…Œì´ì…˜ì…ë‹ˆë‹¤. @Service, @Repository, @ControllerëŠ” ëª¨ë‘ @Componentë¥¼ í¬í•¨í•˜ë¯€ë¡œ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ëŒ€ìƒì´ ë˜ë©°, ê°ê°ì˜ ê³„ì¸µì— ë§ëŠ” ì¶”ê°€ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤."

#### ê³ ê¸‰ ê°œë°œìë¥¼ ìœ„í•œ ì„¤ëª…
> "@ComponentëŠ” ì¼ë°˜ì ì¸ Spring ê´€ë¦¬ ì»´í¬ë„ŒíŠ¸ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë²”ìš© Stereotypeì…ë‹ˆë‹¤. @Service, @Repository, @ControllerëŠ” @Componentë¥¼ ë©”íƒ€ ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ í¬í•¨í•˜ë©°, Springì´ë‚˜ ê´€ë ¨ í”„ë ˆì„ì›Œí¬ì—ì„œ íŠ¹ì • ê³„ì¸µì— ë§ëŠ” ì¶”ê°€ ì²˜ë¦¬ë¥¼ ì ìš©í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ @RepositoryëŠ” PersistenceExceptionTranslationPostProcessorë¥¼ í†µí•´ ë°ì´í„° ì ‘ê·¼ ì˜ˆì™¸ë¥¼ Springì˜ DataAccessException ê³„ì¸µìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤."

#### ê³„ì¸µ êµ¬ì¡°

```java
// 1. ìµœìƒìœ„: @Component
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Indexed
public @interface Component {
    String value() default "";
}

// 2. @Service (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê³„ì¸µ)
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Component  // â† @Componentë¥¼ ë©”íƒ€ ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ í¬í•¨!
public @interface Service {
    @AliasFor(annotation = Component.class)
    String value() default "";
}

// 3. @Repository (ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ)
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Component  // â† @Componentë¥¼ ë©”íƒ€ ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ í¬í•¨!
public @interface Repository {
    @AliasFor(annotation = Component.class)
    String value() default "";
}

// 4. @Controller (í”„ë ˆì  í…Œì´ì…˜ ê³„ì¸µ)
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Component  // â† @Componentë¥¼ ë©”íƒ€ ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ í¬í•¨!
public @interface Controller {
    @AliasFor(annotation = Component.class)
    String value() default "";
}
```

#### ê° ì–´ë…¸í…Œì´ì…˜ì˜ ì—­í• ê³¼ ì¶”ê°€ ê¸°ëŠ¥

| ì–´ë…¸í…Œì´ì…˜ | ê³„ì¸µ | ì¶”ê°€ ê¸°ëŠ¥ | ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤ |
|-----------|------|----------|--------------|
| **@Component** | ë²”ìš© | ì—†ìŒ | ìœ í‹¸ë¦¬í‹°, í—¬í¼ í´ë˜ìŠ¤ |
| **@Service** | ë¹„ì¦ˆë‹ˆìŠ¤ | ì—†ìŒ (ì˜ë¯¸ì  êµ¬ë¶„) | ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ |
| **@Repository** | ë°ì´í„° ì ‘ê·¼ | ì˜ˆì™¸ ë³€í™˜ | JPA/JDBC Repository |
| **@Controller** | í”„ë ˆì  í…Œì´ì…˜ | ìš”ì²­ ë§¤í•‘ | MVC Controller |
| **@RestController** | REST API | @Controller + @ResponseBody | REST API |

```java
// @Component: ë²”ìš©
@Component
public class EmailValidator {
    public boolean validate(String email) {
        return email.contains("@");
    }
}

// @Service: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
@Service
public class UserService {

    @Autowired
    private UserRepository userRepository;

    public User createUser(UserDto dto) {
        // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§: ê²€ì¦, ë³€í™˜, ì²˜ë¦¬
        User user = new User(dto);
        return userRepository.save(user);
    }
}

// @Repository: ë°ì´í„° ì ‘ê·¼
@Repository
public class UserRepository {

    @PersistenceContext
    private EntityManager em;

    public User save(User user) {
        em.persist(user);
        return user;
        // SQLException â†’ DataAccessException ìë™ ë³€í™˜!
    }
}

// @Controller: ì›¹ ìš”ì²­ ì²˜ë¦¬
@Controller
public class UserController {

    @Autowired
    private UserService userService;

    @GetMapping("/users")
    public String getUsers(Model model) {
        model.addAttribute("users", userService.getAllUsers());
        return "users";  // View ì´ë¦„
    }
}

// @RestController: REST API
@RestController
@RequestMapping("/api/users")
public class UserApiController {

    @Autowired
    private UserService userService;

    @GetMapping
    public List<User> getUsers() {
        return userService.getAllUsers();  // JSONìœ¼ë¡œ ìë™ ë³€í™˜
    }
}
```

---

### ê°œë… 2: @Configurationê³¼ @Bean

#### @Configurationì˜ íŠ¹ë³„í•œ ì 

```java
// @Configuration: CGLIB Proxyë¡œ ì‹±ê¸€í†¤ ë³´ì¥
@Configuration
public class AppConfig {

    @Bean
    public ServiceA serviceA() {
        return new ServiceA(serviceB());  // serviceB() í˜¸ì¶œ
    }

    @Bean
    public ServiceB serviceB() {
        return new ServiceB();
    }

    @Bean
    public ServiceC serviceC() {
        return new ServiceC(serviceB());  // serviceB() ë‹¤ì‹œ í˜¸ì¶œ
    }
}

// Spring ë‚´ë¶€ ì²˜ë¦¬ (CGLIB Proxy)
public class AppConfig$$EnhancerBySpringCGLIB extends AppConfig {

    private Map<String, Object> beanCache = new HashMap<>();

    @Override
    public ServiceB serviceB() {
        // ìºì‹œ í™•ì¸
        if (beanCache.containsKey("serviceB")) {
            return (ServiceB) beanCache.get("serviceB");  // ìºì‹œëœ ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜
        }

        // ì—†ìœ¼ë©´ ìƒì„± í›„ ìºì‹œ
        ServiceB bean = super.serviceB();
        beanCache.put("serviceB", bean);
        return bean;
    }
}

// ê²°ê³¼: serviceB()ê°€ ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œë˜ì–´ë„ ServiceB ì¸ìŠ¤í„´ìŠ¤ëŠ” 1ê°œë§Œ ìƒì„±!
```

#### @Configuration vs @Component

```java
// âŒ @Component ì‚¬ìš© ì‹œ: ì‹±ê¸€í†¤ ë³´ì¥ ì•ˆ ë¨
@Component
public class ComponentConfig {

    @Bean
    public ServiceA serviceA() {
        return new ServiceA(serviceB());  // ìƒˆ ì¸ìŠ¤í„´ìŠ¤
    }

    @Bean
    public ServiceB serviceB() {
        return new ServiceB();
    }

    @Bean
    public ServiceC serviceC() {
        return new ServiceC(serviceB());  // ë˜ ë‹¤ë¥¸ ìƒˆ ì¸ìŠ¤í„´ìŠ¤!
    }
}
// ê²°ê³¼: ServiceB ì¸ìŠ¤í„´ìŠ¤ 2ê°œ ìƒì„±ë¨ (ì‹±ê¸€í†¤ X)

// âœ… @Configuration ì‚¬ìš© ì‹œ: ì‹±ê¸€í†¤ ë³´ì¥
@Configuration
public class ConfigurationConfig {

    @Bean
    public ServiceA serviceA() {
        return new ServiceA(serviceB());  // Proxyê°€ ìºì‹œëœ ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜
    }

    @Bean
    public ServiceB serviceB() {
        return new ServiceB();
    }

    @Bean
    public ServiceC serviceC() {
        return new ServiceC(serviceB());  // ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜
    }
}
// ê²°ê³¼: ServiceB ì¸ìŠ¤í„´ìŠ¤ 1ê°œë§Œ ìƒì„± (ì‹±ê¸€í†¤ O)
```

#### @Beanì˜ ë‹¤ì–‘í•œ ì˜µì…˜

```java
@Configuration
public class BeanConfig {

    // 1. ê¸°ë³¸ Bean
    @Bean
    public UserService userService() {
        return new UserService();
    }

    // 2. Bean ì´ë¦„ ì§€ì •
    @Bean(name = "myUserService")
    public UserService customNameService() {
        return new UserService();
    }

    // 3. ì—¬ëŸ¬ ì´ë¦„ ì§€ì • (ë³„ì¹­)
    @Bean(name = {"userService1", "userService2", "mainUserService"})
    public UserService multiNameService() {
        return new UserService();
    }

    // 4. ì´ˆê¸°í™” ë©”ì„œë“œ ì§€ì •
    @Bean(initMethod = "init")
    public DataSource dataSource() {
        HikariDataSource ds = new HikariDataSource();
        // ds.init()ì´ ìë™ í˜¸ì¶œë¨
        return ds;
    }

    // 5. ì†Œë©¸ ë©”ì„œë“œ ì§€ì •
    @Bean(destroyMethod = "close")
    public DataSource dataSource2() {
        HikariDataSource ds = new HikariDataSource();
        // ì»¨í…Œì´ë„ˆ ì¢…ë£Œ ì‹œ ds.close()ê°€ ìë™ í˜¸ì¶œë¨
        return ds;
    }

    // 6. ìë™ ì†Œë©¸ ë©”ì„œë“œ ë¹„í™œì„±í™”
    @Bean(destroyMethod = "")  // ë¹ˆ ë¬¸ìì—´
    public DataSource dataSource3() {
        // close() ë©”ì„œë“œê°€ ìˆì–´ë„ ìë™ í˜¸ì¶œ ì•ˆ ë¨
        return new HikariDataSource();
    }
}
```

---

### ê°œë… 3: @ComponentScan ìƒì„¸

#### ê¸°ë³¸ ì‚¬ìš©ë²•

```java
// 1. ê¸°ë³¸ ìŠ¤ìº” (í˜„ì¬ íŒ¨í‚¤ì§€ ì´í•˜)
@Configuration
@ComponentScan  // ì´ í´ë˜ìŠ¤ê°€ ìˆëŠ” íŒ¨í‚¤ì§€ ì´í•˜ë¥¼ ìŠ¤ìº”
public class AppConfig {
}

// 2. íŒ¨í‚¤ì§€ ì§€ì •
@Configuration
@ComponentScan(basePackages = "com.example.service")
public class ServiceConfig {
}

// 3. ì—¬ëŸ¬ íŒ¨í‚¤ì§€
@Configuration
@ComponentScan(basePackages = {
    "com.example.service",
    "com.example.repository"
})
public class MultiPackageConfig {
}

// 4. íƒ€ì… ì•ˆì „í•œ ë°©ë²• (ì¶”ì²œ)
@Configuration
@ComponentScan(basePackageClasses = {
    ServiceMarker.class,
    RepositoryMarker.class
})
public class TypeSafeConfig {
}

// Marker ì¸í„°í˜ì´ìŠ¤
package com.example.service;
public interface ServiceMarker { }

package com.example.repository;
public interface RepositoryMarker { }
```

#### includeFiltersì™€ excludeFilters

```java
@Configuration
@ComponentScan(
    basePackages = "com.example",

    // í¬í•¨ í•„í„°
    includeFilters = {
        @ComponentScan.Filter(
            type = FilterType.ANNOTATION,
            classes = CustomComponent.class
        ),
        @ComponentScan.Filter(
            type = FilterType.ASSIGNABLE_TYPE,
            classes = SpecialService.class
        )
    },

    // ì œì™¸ í•„í„°
    excludeFilters = {
        @ComponentScan.Filter(
            type = FilterType.ANNOTATION,
            classes = {Deprecated.class, ExcludeFromScan.class}
        ),
        @ComponentScan.Filter(
            type = FilterType.REGEX,
            pattern = ".*Test.*"  // Testê°€ í¬í•¨ëœ í´ë˜ìŠ¤ ì œì™¸
        )
    }
)
public class FilterConfig {
}
```

#### FilterType ì¢…ë¥˜

```java
public enum FilterType {

    // 1. ANNOTATION: ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ í•„í„°ë§
    @ComponentScan.Filter(
        type = FilterType.ANNOTATION,
        classes = Service.class
    )

    // 2. ASSIGNABLE_TYPE: íŠ¹ì • í´ë˜ìŠ¤/ì¸í„°í˜ì´ìŠ¤ë¡œ í•„í„°ë§
    @ComponentScan.Filter(
        type = FilterType.ASSIGNABLE_TYPE,
        classes = UserService.class
    )

    // 3. ASPECTJ: AspectJ í‘œí˜„ì‹
    @ComponentScan.Filter(
        type = FilterType.ASPECTJ,
        pattern = "com.example..*Service+"
    )

    // 4. REGEX: ì •ê·œí‘œí˜„ì‹
    @ComponentScan.Filter(
        type = FilterType.REGEX,
        pattern = ".*ServiceImpl"
    )

    // 5. CUSTOM: ì»¤ìŠ¤í…€ í•„í„° (TypeFilter êµ¬í˜„)
    @ComponentScan.Filter(
        type = FilterType.CUSTOM,
        classes = MyCustomFilter.class
    )
}

// ì»¤ìŠ¤í…€ í•„í„° êµ¬í˜„
public class MyCustomFilter implements TypeFilter {

    @Override
    public boolean match(MetadataReader metadataReader,
                        MetadataReaderFactory metadataReaderFactory) {
        // í´ë˜ìŠ¤ ì´ë¦„ì— "Impl"ì´ í¬í•¨ë˜ë©´ ì œì™¸
        String className = metadataReader.getClassMetadata().getClassName();
        return className.contains("Impl");
    }
}
```

---

### ê°œë… 4: @Autowired, @Qualifier, @Primary

#### @Autowiredì˜ ë™ì‘

```java
// 1. í•„ë“œ ì£¼ì… (ë¹„ê¶Œì¥)
@Service
public class UserService {

    @Autowired
    private UserRepository userRepository;
}

// 2. ì„¸í„° ì£¼ì…
@Service
public class UserService {

    private UserRepository userRepository;

    @Autowired
    public void setUserRepository(UserRepository userRepository) {
        this.userRepository = userRepository;
    }
}

// 3. ìƒì„±ì ì£¼ì… (ê¶Œì¥)
@Service
public class UserService {

    private final UserRepository userRepository;

    @Autowired  // ìƒì„±ì 1ê°œë©´ ìƒëµ ê°€ëŠ¥
    public UserService(UserRepository userRepository) {
        this.userRepository = userRepository;
    }
}

// 4. Lombokê³¼ í•¨ê»˜ (ê¶Œì¥)
@Service
@RequiredArgsConstructor
public class UserService {

    private final UserRepository userRepository;
    // ìƒì„±ì ìë™ ìƒì„± + @Autowired ìë™ ì ìš©
}
```

#### @Qualifierë¡œ êµ¬ë¶„

```java
// ê°™ì€ íƒ€ì…ì˜ Beanì´ ì—¬ëŸ¬ ê°œ
@Repository
@Qualifier("userRepository")
public class UserRepository implements Repository {
}

@Repository
@Qualifier("adminRepository")
public class AdminRepository implements Repository {
}

// ì‚¬ìš©
@Service
public class UserService {

    private final Repository repository;

    public UserService(@Qualifier("userRepository") Repository repository) {
        this.repository = repository;
    }
}
```

#### @Primaryë¡œ ê¸°ë³¸ ì§€ì •

```java
// ê¸°ë³¸ Bean ì§€ì •
@Repository
@Primary  // ì—¬ëŸ¬ Bean ì¤‘ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©
public class UserRepository implements Repository {
}

@Repository
public class AdminRepository implements Repository {
}

// ì‚¬ìš©
@Service
public class UserService {

    private final Repository repository;

    public UserService(Repository repository) {
        this.repository = repository;  // @Primaryì¸ UserRepositoryê°€ ì£¼ì…ë¨
    }
}
```

#### @Primary vs @Qualifier ìš°ì„ ìˆœìœ„

```java
@Repository
@Primary
public class UserRepository implements Repository {
}

@Repository
@Qualifier("admin")
public class AdminRepository implements Repository {
}

// @Qualifierê°€ @Primaryë³´ë‹¤ ìš°ì„ !
@Service
public class UserService {

    private final Repository repository;

    public UserService(@Qualifier("admin") Repository repository) {
        this.repository = repository;  // @Qualifierê°€ ìš°ì„  â†’ AdminRepository ì£¼ì…
    }
}
```

---

### ê°œë… 5: ì»¤ìŠ¤í…€ ì–´ë…¸í…Œì´ì…˜

#### ë©”íƒ€ ì–´ë…¸í…Œì´ì…˜ í™œìš©

```java
// 1. ì»¤ìŠ¤í…€ Stereotype ì–´ë…¸í…Œì´ì…˜
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Service  // @Serviceë¥¼ í¬í•¨ â†’ Service Beanìœ¼ë¡œ ë“±ë¡ë¨
public @interface BusinessService {

    @AliasFor(annotation = Service.class)
    String value() default "";
}

// ì‚¬ìš©
@BusinessService
public class OrderService {
    // @Serviceì™€ ë™ì¼í•˜ê²Œ Bean ë“±ë¡ë¨
}

// 2. ë³µí•© ì–´ë…¸í…Œì´ì…˜
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@RestController
@RequestMapping("/api")
@CrossOrigin
public @interface ApiController {

    @AliasFor(annotation = RequestMapping.class, attribute = "value")
    String path() default "";
}

// ì‚¬ìš©
@ApiController(path = "/users")
public class UserApiController {
    // @RestController + @RequestMapping("/api/users") + @CrossOrigin
}

// 3. ê²€ì¦ ì–´ë…¸í…Œì´ì…˜
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Validated
@Component
public @interface ValidatedComponent {
}

@ValidatedComponent
public class EmailValidator {
    public boolean validate(@Email String email) {
        // @Validatedê°€ ìë™ ì ìš©ë˜ì–´ ê²€ì¦ë¨
    }
}
```

---

**[ë‹¤ìŒ: Part 2 â†’](07-2-ì–´ë…¸í…Œì´ì…˜ìƒì„¸-Part2.md)** | **[ëª©ì°¨ë¡œ ëŒì•„ê°€ê¸°](../README.md)**
