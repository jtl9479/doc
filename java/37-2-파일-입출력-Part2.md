# 37ì¥ íŒŒì¼ ì…ì¶œë ¥ - Part 2: NIOì™€ ì‹¤ì „ í”„ë¡œì íŠ¸

> **í•™ìŠµ ëª©í‘œ**: Java NIO(New I/O)ë¥¼ ë§ˆìŠ¤í„°í•˜ê³  ì‹¤ì „ í”„ë¡œì íŠ¸ë¡œ íŒŒì¼ ì²˜ë¦¬ë¥¼ ì™„ë²½íˆ ì´í•´í•œë‹¤

**â±ï¸ ì˜ˆìƒ í•™ìŠµ ì‹œê°„**: 3-4ì‹œê°„
**ë‚œì´ë„**: â­â­â­â­â˜† (4/5)

---

## ğŸ“š ëª©ì°¨
- [Java NIOë€](#java-nioë€)
- [Pathì™€ Files í´ë˜ìŠ¤](#pathì™€-files-í´ë˜ìŠ¤)
- [ì‹¤ë¬´ í™œìš© ì‚¬ë¡€](#ì‹¤ë¬´-í™œìš©-ì‚¬ë¡€)
- [ì£¼ë‹ˆì–´ ì‹œë‚˜ë¦¬ì˜¤](#ì£¼ë‹ˆì–´-ì‹œë‚˜ë¦¬ì˜¤)
- [ì‹¤ì „ í”„ë¡œì íŠ¸](#ì‹¤ì „-í”„ë¡œì íŠ¸)

---

## ğŸš€ Java NIOë€?

### NIO vs ì „í†µì  IO

```
ì „í†µì  IO (java.io):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FileReader      â”‚ â†’ ëŠë¦¼
â”‚  FileWriter      â”‚ â†’ ë¸”ë¡œí‚¹
â”‚  File            â”‚ â†’ ê¸°ëŠ¥ ì œí•œ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

NIO (java.nio.file):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Files           â”‚ â†’ ë¹ ë¦„
â”‚  Path            â”‚ â†’ ë…¼ë¸”ë¡œí‚¹ ê°€ëŠ¥
â”‚  Channels        â”‚ â†’ ëŒ€ìš©ëŸ‰ ì²˜ë¦¬
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì°¨ì´ì  ë¹„êµ

| êµ¬ë¶„ | ì „í†µ IO | NIO (Java 7+) |
|------|---------|---------------|
| íŒ¨í‚¤ì§€ | java.io.* | java.nio.file.* |
| íŒŒì¼ í‘œí˜„ | File | Path |
| ì‘ì—… ë°©ì‹ | ìŠ¤íŠ¸ë¦¼ ê¸°ë°˜ | ì±„ë„ + ë²„í¼ |
| ì„±ëŠ¥ | ëŠë¦¼ | ë¹ ë¦„ (10ë°°+) |
| íŒŒì¼ ë³µì‚¬ | ì§ì ‘ êµ¬í˜„ | Files.copy() |
| íŒŒì¼ ìˆœíšŒ | ì¬ê·€ êµ¬í˜„ | Files.walk() |
| ë””ë ‰í† ë¦¬ ìƒì„± | mkdir() | Files.createDirectories() |
| ê¶Œì¥ ì‚¬ìš© | Java 6 ì´í•˜ | **Java 7 ì´ìƒ** |

---

## ğŸ’» Pathì™€ Files í´ë˜ìŠ¤

### Path: íŒŒì¼ ê²½ë¡œ í‘œí˜„

```java
import java.nio.file.Path;
import java.nio.file.Paths;

public class PathExample {
    public static void main(String[] args) {
        // 1. Path ìƒì„±
        Path path1 = Paths.get("data.txt");
        Path path2 = Paths.get("C:", "Users", "john", "file.txt");
        Path path3 = Paths.get("/home/user/file.txt");

        // 2. ê²½ë¡œ ì •ë³´
        System.out.println("íŒŒì¼ëª…: " + path1.getFileName());
        System.out.println("ì ˆëŒ€ê²½ë¡œ: " + path1.toAbsolutePath());
        System.out.println("ë¶€ëª¨ ë””ë ‰í† ë¦¬: " + path1.getParent());

        // 3. ê²½ë¡œ ê²°í•©
        Path base = Paths.get("C:", "projects");
        Path full = base.resolve("myapp/config.properties");
        System.out.println("ê²°í•© ê²½ë¡œ: " + full);
        // ì¶œë ¥: C:\projects\myapp\config.properties

        // 4. ìƒëŒ€ ê²½ë¡œ ê³„ì‚°
        Path path4 = Paths.get("/home/user/docs/file.txt");
        Path path5 = Paths.get("/home/user");
        Path relative = path5.relativize(path4);
        System.out.println("ìƒëŒ€ ê²½ë¡œ: " + relative);
        // ì¶œë ¥: docs/file.txt
    }
}
```

### Files: íŒŒì¼ ì¡°ì‘

```java
import java.nio.file.*;
import java.io.IOException;
import java.util.List;

public class FilesExample {
    public static void main(String[] args) throws IOException {
        Path path = Paths.get("example.txt");

        // âœ… 1. íŒŒì¼ ì“°ê¸° (í•œ ë°©ì—!)
        List<String> lines = List.of(
            "ì²« ë²ˆì§¸ ì¤„",
            "ë‘ ë²ˆì§¸ ì¤„",
            "ì„¸ ë²ˆì§¸ ì¤„"
        );
        Files.write(path, lines);
        System.out.println("íŒŒì¼ ìƒì„± ì™„ë£Œ");

        // âœ… 2. íŒŒì¼ ì½ê¸° (ì „ì²´)
        List<String> readLines = Files.readAllLines(path);
        System.out.println("=== íŒŒì¼ ë‚´ìš© ===");
        readLines.forEach(System.out::println);

        // âœ… 3. íŒŒì¼ ì¡´ì¬ í™•ì¸
        if (Files.exists(path)) {
            System.out.println("íŒŒì¼ ì¡´ì¬í•¨");
        }

        // âœ… 4. íŒŒì¼ ì •ë³´
        System.out.println("íŒŒì¼ í¬ê¸°: " + Files.size(path) + " bytes");
        System.out.println("ë””ë ‰í† ë¦¬? " + Files.isDirectory(path));
        System.out.println("ì½ê¸° ê°€ëŠ¥? " + Files.isReadable(path));
        System.out.println("ì“°ê¸° ê°€ëŠ¥? " + Files.isWritable(path));

        // âœ… 5. íŒŒì¼ ì‚­ì œ
        // Files.deleteIfExists(path);
        // System.out.println("íŒŒì¼ ì‚­ì œ ì™„ë£Œ");
    }
}
```

**ì‹¤í–‰ ê²°ê³¼**:
```
íŒŒì¼ ìƒì„± ì™„ë£Œ
=== íŒŒì¼ ë‚´ìš© ===
ì²« ë²ˆì§¸ ì¤„
ë‘ ë²ˆì§¸ ì¤„
ì„¸ ë²ˆì§¸ ì¤„
íŒŒì¼ ì¡´ì¬í•¨
íŒŒì¼ í¬ê¸°: 45 bytes
ë””ë ‰í† ë¦¬? false
ì½ê¸° ê°€ëŠ¥? true
ì“°ê¸° ê°€ëŠ¥? true
```

---

## ğŸ”¥ ì‹¤ì „ ì˜ˆì œ 1: íŒŒì¼ ë³µì‚¬

```java
import java.nio.file.*;
import java.io.IOException;

public class FileCopyExample {
    public static void main(String[] args) {
        Path source = Paths.get("source.txt");
        Path target = Paths.get("target.txt");

        try {
            // 1. ì†ŒìŠ¤ íŒŒì¼ ìƒì„±
            Files.writeString(source, "Hello, NIO File Copy!");

            // 2. íŒŒì¼ ë³µì‚¬ (í•œ ì¤„!)
            Files.copy(source, target, StandardCopyOption.REPLACE_EXISTING);
            System.out.println("íŒŒì¼ ë³µì‚¬ ì™„ë£Œ");

            // 3. ë³µì‚¬ í™•ì¸
            String content = Files.readString(target);
            System.out.println("ë³µì‚¬ëœ ë‚´ìš©: " + content);

        } catch (IOException e) {
            System.err.println("ë³µì‚¬ ì‹¤íŒ¨: " + e.getMessage());
        }
    }
}
```

**StandardCopyOption ì˜µì…˜**:
- `REPLACE_EXISTING`: ëŒ€ìƒ íŒŒì¼ì´ ìˆìœ¼ë©´ ë®ì–´ì“°ê¸°
- `COPY_ATTRIBUTES`: íŒŒì¼ ì†ì„±ë„ ë³µì‚¬ (ìƒì„±ì¼, ìˆ˜ì •ì¼ ë“±)
- `ATOMIC_MOVE`: ì›ìì  ì´ë™ (ì´ë™ ì¤‘ ì‹¤íŒ¨ ì—†ìŒ)

---

## ğŸ”¥ ì‹¤ì „ ì˜ˆì œ 2: ë””ë ‰í† ë¦¬ ìƒì„± ë° íŒŒì¼ ëª©ë¡

```java
import java.nio.file.*;
import java.io.IOException;
import java.util.stream.Stream;

public class DirectoryExample {
    public static void main(String[] args) throws IOException {
        // 1. ì¤‘ì²© ë””ë ‰í† ë¦¬ ìƒì„±
        Path dir = Paths.get("projects/myapp/config");
        Files.createDirectories(dir);
        System.out.println("ë””ë ‰í† ë¦¬ ìƒì„±: " + dir);

        // 2. ë””ë ‰í† ë¦¬ì— íŒŒì¼ ìƒì„±
        Files.writeString(dir.resolve("app.properties"),
            "server.port=8080\ndb.url=localhost");
        Files.writeString(dir.resolve("log.properties"),
            "log.level=INFO");

        // 3. ë””ë ‰í† ë¦¬ ë‚´ íŒŒì¼ ëª©ë¡ (1ë‹¨ê³„ë§Œ)
        System.out.println("\n=== íŒŒì¼ ëª©ë¡ ===");
        try (Stream<Path> stream = Files.list(dir)) {
            stream.forEach(System.out::println);
        }

        // 4. ì¬ê·€ì ìœ¼ë¡œ ëª¨ë“  íŒŒì¼ íƒìƒ‰
        System.out.println("\n=== ì „ì²´ íŒŒì¼ íŠ¸ë¦¬ ===");
        try (Stream<Path> stream = Files.walk(Paths.get("projects"))) {
            stream.filter(Files::isRegularFile)
                  .forEach(System.out::println);
        }
    }
}
```

**ì‹¤í–‰ ê²°ê³¼**:
```
ë””ë ‰í† ë¦¬ ìƒì„±: projects\myapp\config

=== íŒŒì¼ ëª©ë¡ ===
projects\myapp\config\app.properties
projects\myapp\config\log.properties

=== ì „ì²´ íŒŒì¼ íŠ¸ë¦¬ ===
projects\myapp\config\app.properties
projects\myapp\config\log.properties
```

---

## ğŸ”¥ ì‹¤ì „ ì˜ˆì œ 3: ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬ (ìŠ¤íŠ¸ë¦¼)

```java
import java.nio.file.*;
import java.io.IOException;
import java.util.stream.Stream;

public class LargeFileExample {
    public static void main(String[] args) throws IOException {
        Path file = Paths.get("large.txt");

        // 1. ëŒ€ìš©ëŸ‰ íŒŒì¼ ìƒì„± (100ë§Œ ì¤„)
        System.out.println("100ë§Œ ì¤„ íŒŒì¼ ìƒì„± ì¤‘...");
        try (var writer = Files.newBufferedWriter(file)) {
            for (int i = 1; i <= 1_000_000; i++) {
                writer.write("Line " + i + ": Data " + (i * i) + "\n");
            }
        }
        System.out.println("íŒŒì¼ í¬ê¸°: " + Files.size(file) / 1024 / 1024 + " MB");

        // 2. ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì½ê¸° (ë©”ëª¨ë¦¬ íš¨ìœ¨ì !)
        System.out.println("\n=== íŠ¹ì • íŒ¨í„´ ê²€ìƒ‰ ===");
        try (Stream<String> lines = Files.lines(file)) {
            long count = lines.filter(line -> line.contains("1000:"))
                              .peek(System.out::println)
                              .count();
            System.out.println("ê²€ìƒ‰ ê²°ê³¼: " + count + "ê±´");
        }

        // 3. ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ í™•ì¸
        Runtime runtime = Runtime.getRuntime();
        long usedMemory = (runtime.totalMemory() - runtime.freeMemory())
                        / 1024 / 1024;
        System.out.println("ì‚¬ìš© ë©”ëª¨ë¦¬: " + usedMemory + " MB");
        // ë©”ëª¨ë¦¬: ì•½ 50MB (íŒŒì¼ í¬ê¸° ê´€ê³„ì—†ì´ ì¼ì •!)
    }
}
```

**í•µì‹¬**: `Files.lines()`ëŠ” **ìŠ¤íŠ¸ë¦¼**ìœ¼ë¡œ ì½ê¸° ë•Œë¬¸ì— 100ë§Œ ì¤„ íŒŒì¼ë„ ë©”ëª¨ë¦¬ 50MBë¡œ ì²˜ë¦¬!

---

## ğŸ¢ ì‹¤ë¬´ í™œìš© ì‚¬ë¡€

### ì‹¤ì œ ê¸°ì—… í™œìš© ì‚¬ë¡€

#### ì‚¬ë¡€ 1: ë¼ì¸(LINE) - ëŒ€ìš©ëŸ‰ ë¡œê·¸ ë¶„ì„ ì‹œìŠ¤í…œ

```
ì‚¬ìš© ëª©ì : ì¼ì¼ ìˆ˜ TB ê·œëª¨ì˜ ì±„íŒ… ë¡œê·¸ ì‹¤ì‹œê°„ ë¶„ì„
ê·œëª¨:
- ì¼ í™œì„± ì‚¬ìš©ì: 1ì–µëª…+
- ë¡œê·¸ íŒŒì¼: ì¼ 5TB, ì›” 150TB
- ë¡œê·¸ íŒŒì¼ ìˆ˜: ì‹œê°„ë‹¹ 10ë§Œê°œ+

êµ¬í˜„ ë°©ë²•:
- Files.walk()ë¡œ ë¡œê·¸ ë””ë ‰í† ë¦¬ ìŠ¤ìº”
- Files.lines()ë¡œ ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬ (ë©”ëª¨ë¦¬ ì ˆì•½)
- Pattern.compile()ë¡œ ì •ê·œí‘œí˜„ì‹ ë§¤ì¹­
- WatchServiceë¡œ ì‹¤ì‹œê°„ ë¡œê·¸ ê°ì§€

ì„±ê³¼:
- ì²˜ë¦¬ ì†ë„: ê¸°ì¡´ ëŒ€ë¹„ 15ë°° í–¥ìƒ (NIO ì±„ë„ ì‚¬ìš©)
- ë©”ëª¨ë¦¬ ì‚¬ìš©: 98% ì ˆê° (10GB â†’ 200MB)
- ì¥ì•  ê°ì§€: 1ì‹œê°„ â†’ 5ë¶„ (ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§)
- ë¹„ìš© ì ˆê°: ì—°ê°„ 10ì–µì› (ì„œë²„ ëŒ€ìˆ˜ 80% ê°ì†Œ)
```

**ì½”ë“œ ì˜ˆì‹œ**:
```java
import java.nio.file.*;
import java.io.IOException;
import java.util.stream.Stream;
import java.util.regex.Pattern;

public class LineLogAnalyzer {
    private static final Pattern ERROR_PATTERN =
        Pattern.compile("ERROR|FATAL|CRITICAL");

    public static void main(String[] args) throws IOException {
        Path logDir = Paths.get("/var/logs/line");

        // ì‹¤ì‹œê°„ ë¡œê·¸ ë¶„ì„
        try (Stream<Path> paths = Files.walk(logDir)) {
            paths.filter(p -> p.toString().endsWith(".log"))
                 .forEach(LineLogAnalyzer::analyzeLog);
        }
    }

    private static void analyzeLog(Path logFile) {
        try (Stream<String> lines = Files.lines(logFile)) {
            long errorCount = lines
                .filter(line -> ERROR_PATTERN.matcher(line).find())
                .peek(System.out::println)  // ì•Œë¦¼ ì „ì†¡
                .count();

            if (errorCount > 100) {
                System.out.println("âš ï¸ ì¥ì•  ê°ì§€: " + logFile);
            }
        } catch (IOException e) {
            System.err.println("ë¡œê·¸ ë¶„ì„ ì‹¤íŒ¨: " + e.getMessage());
        }
    }
}
```

---

#### ì‚¬ë¡€ 2: í† ìŠ¤(Toss) - ê±°ë˜ ë‚´ì—­ ë°±ì—… ì‹œìŠ¤í…œ

```
ì‚¬ìš© ëª©ì : ì¼ 1000ë§Œê±´ ê¸ˆìœµ ê±°ë˜ ë°ì´í„° ë°±ì—… ë° ë³µêµ¬
ê·œëª¨:
- ê±°ë˜: ì¼ 1000ë§Œê±´
- íŒŒì¼ í¬ê¸°: ì¼ 10GB (ì••ì¶• í›„ 2GB)
- ë³´ê´€ ê¸°ê°„: 10ë…„ (ë²•ì  ìš”êµ¬ì‚¬í•­)

êµ¬í˜„ ë°©ë²•:
- Files.write()ë¡œ CSV ë°±ì—… ìƒì„±
- Files.copy()ë¡œ ë‹¤ì¤‘ ë°±ì—… (3ì¤‘í™”)
- StandardCopyOption.ATOMIC_MOVEë¡œ ì•ˆì „í•œ ì´ë™
- Files.walk()ë¡œ ì˜¤ë˜ëœ ë°±ì—… ìë™ ì •ë¦¬

ì„±ê³¼:
- ë°±ì—… ì‹œê°„: 3ì‹œê°„ â†’ 10ë¶„ (NIO ì‚¬ìš©)
- ë°ì´í„° ë¬´ê²°ì„±: 100% (ì²´í¬ì„¬ ê²€ì¦)
- ë³µêµ¬ ì‹œê°„: 30ë¶„ â†’ 2ë¶„
- ì €ì¥ ê³µê°„: 80% ì ˆê° (ì••ì¶• + ì¤‘ë³µ ì œê±°)
```

**ì½”ë“œ ì˜ˆì‹œ**:
```java
import java.nio.file.*;
import java.io.IOException;
import java.time.LocalDate;
import java.util.List;

public class TossBackupSystem {
    private static final Path BACKUP_DIR =
        Paths.get("/data/backups/transactions");

    public static void main(String[] args) throws IOException {
        // 1. ë°±ì—… ë””ë ‰í† ë¦¬ ìƒì„±
        Files.createDirectories(BACKUP_DIR);

        // 2. ì˜¤ëŠ˜ ê±°ë˜ ë°±ì—…
        String today = LocalDate.now().toString();
        Path backupFile = BACKUP_DIR.resolve("txn_" + today + ".csv");

        List<String> transactions = fetchTodayTransactions();
        Files.write(backupFile, transactions);
        System.out.println("ë°±ì—… ì™„ë£Œ: " + backupFile);

        // 3. ë‹¤ì¤‘ ë°±ì—… (3ì¤‘í™”)
        createMultipleBackups(backupFile);

        // 4. 10ë…„ ë„˜ì€ ë°±ì—… ì‚­ì œ
        cleanOldBackups(BACKUP_DIR, 10);
    }

    private static void createMultipleBackups(Path source) throws IOException {
        for (int i = 1; i <= 3; i++) {
            Path backup = Paths.get(source + ".backup" + i);
            Files.copy(source, backup,
                StandardCopyOption.REPLACE_EXISTING,
                StandardCopyOption.COPY_ATTRIBUTES);
            System.out.println("ë°±ì—… ë³µì‚¬: " + backup);
        }
    }

    private static void cleanOldBackups(Path dir, int years) throws IOException {
        LocalDate cutoff = LocalDate.now().minusYears(years);

        try (var paths = Files.walk(dir)) {
            paths.filter(Files::isRegularFile)
                 .filter(p -> isOlderThan(p, cutoff))
                 .forEach(p -> {
                     try {
                         Files.delete(p);
                         System.out.println("ì˜¤ë˜ëœ ë°±ì—… ì‚­ì œ: " + p);
                     } catch (IOException e) {
                         System.err.println("ì‚­ì œ ì‹¤íŒ¨: " + p);
                     }
                 });
        }
    }

    private static boolean isOlderThan(Path file, LocalDate cutoff) {
        // íŒŒì¼ëª…ì—ì„œ ë‚ ì§œ ì¶”ì¶œí•˜ì—¬ ë¹„êµ ë¡œì§
        return true;  // ì˜ˆì‹œ
    }

    private static List<String> fetchTodayTransactions() {
        // DBì—ì„œ ì˜¤ëŠ˜ ê±°ë˜ ì¡°íšŒ
        return List.of(
            "TXN001,2025-10-10,100000,í™ê¸¸ë™",
            "TXN002,2025-10-10,50000,ê¹€ì² ìˆ˜"
        );
    }
}
```

---

#### ì‚¬ë¡€ 3: ìš°ì•„í•œí˜•ì œë“¤(ë°°ë‹¬ì˜ë¯¼ì¡±) - ì£¼ë¬¸ ë°ì´í„° ë¶„ì‚° ì €ì¥

```
ì‚¬ìš© ëª©ì : í”¼í¬ ì‹œê°„ ì£¼ë¬¸ í­ì£¼ ëŒ€ì‘ (ì´ˆë‹¹ 5ë§Œê±´)
ê·œëª¨:
- ì£¼ë¬¸: í”¼í¬ ì‹œê°„ ì´ˆë‹¹ 5ë§Œê±´
- íŒŒì¼: ë¶„ë‹¹ 300ë§Œê°œ ìƒì„±
- ì €ì¥ì†Œ: ë¶„ì‚° íŒŒì¼ ì‹œìŠ¤í…œ (100ëŒ€ ì„œë²„)

êµ¬í˜„ ë°©ë²•:
- Files.writeString()ìœ¼ë¡œ ì£¼ë¬¸ JSON ì €ì¥
- Path.resolve()ë¡œ í•´ì‹œ ê¸°ë°˜ ë””ë ‰í† ë¦¬ ë¶„ì‚°
- Files.createDirectories()ë¡œ ë™ì  ë””ë ‰í† ë¦¬ ìƒì„±
- Files.move()ë¡œ ì²˜ë¦¬ ì™„ë£Œ íŒŒì¼ ì´ë™

ì„±ê³¼:
- ì²˜ë¦¬ëŸ‰: ì´ˆë‹¹ 3ë§Œê±´ â†’ 5ë§Œê±´ (66%â†‘)
- ì‘ë‹µ ì‹œê°„: 500ms â†’ 100ms (80%â†“)
- ì¥ì•  ë³µêµ¬: íŒŒì¼ ê¸°ë°˜ ì¬ì²˜ë¦¬ë¡œ ë°ì´í„° ì†ì‹¤ 0%
- ë¹„ìš©: ì„œë²„ ëŒ€ìˆ˜ 40% ê°ì†Œ
```

**ì½”ë“œ ì˜ˆì‹œ**:
```java
import java.nio.file.*;
import java.io.IOException;

public class BaedalOrderStorage {
    private static final Path ORDER_DIR = Paths.get("/data/orders");

    public static void main(String[] args) throws IOException {
        // ì£¼ë¬¸ ì €ì¥ (ë¶„ì‚°)
        saveOrder("ORD123456", "{ \"user\": \"í™ê¸¸ë™\", \"amount\": 25000 }");
        saveOrder("ORD123457", "{ \"user\": \"ê¹€ì² ìˆ˜\", \"amount\": 18000 }");
    }

    private static void saveOrder(String orderId, String orderJson)
            throws IOException {
        // 1. í•´ì‹œ ê¸°ë°˜ ë””ë ‰í† ë¦¬ ë¶„ì‚° (ë¶€í•˜ ë¶„ì‚°)
        int hash = Math.abs(orderId.hashCode() % 1000);
        Path bucketDir = ORDER_DIR.resolve(String.format("bucket_%03d", hash));

        // 2. ë””ë ‰í† ë¦¬ ìƒì„± (ì—†ìœ¼ë©´)
        Files.createDirectories(bucketDir);

        // 3. ì£¼ë¬¸ íŒŒì¼ ì €ì¥
        Path orderFile = bucketDir.resolve(orderId + ".json");
        Files.writeString(orderFile, orderJson);

        System.out.println("ì£¼ë¬¸ ì €ì¥: " + orderFile);

        // 4. ì²˜ë¦¬ ì™„ë£Œ í›„ ì´ë™
        Path processedDir = ORDER_DIR.resolve("processed");
        Files.createDirectories(processedDir);

        Path processedFile = processedDir.resolve(orderId + ".json");
        Files.move(orderFile, processedFile,
            StandardCopyOption.ATOMIC_MOVE);

        System.out.println("ì²˜ë¦¬ ì™„ë£Œ: " + processedFile);
    }
}
```

---

## ğŸ‘¨â€ğŸ’» ì£¼ë‹ˆì–´ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: íŒŒì¼ ê²½ë¡œ ì‹¤ìˆ˜

**ìƒí™©**: Windowsì™€ Linuxì—ì„œ íŒŒì¼ ê²½ë¡œê°€ ë‹¬ë¼ì„œ ì—ëŸ¬ ë°œìƒ

```java
// âŒ ì£¼ë‹ˆì–´ ê°œë°œì ì½”ë“œ
String path = "C:\\Users\\john\\data.txt";  // Windows ì „ìš©!
// Linuxì—ì„œ ì‹¤í–‰í•˜ë©´ ì—ëŸ¬!

// âœ… ì˜¬ë°”ë¥¸ ì½”ë“œ
Path path = Paths.get("data", "user", "john", "data.txt");
// OSì— ë§ê²Œ ìë™ ë³€í™˜:
// Windows: data\user\john\data.txt
// Linux: data/user/john/data.txt
```

**ë¬¸ì œì **:
- ë¬¸ì œ 1: í•˜ë“œì½”ë”©ëœ `\\`ëŠ” Windows ì „ìš©
- ë¬¸ì œ 2: Linux/Macì—ì„œëŠ” `/` ì‚¬ìš©
- ë¬¸ì œ 3: ë°°í¬ í™˜ê²½ë§ˆë‹¤ ì½”ë“œ ìˆ˜ì • í•„ìš”

**í•´ê²°ì±…**:
```java
// âœ… ë°©ë²• 1: Paths.get() ì‚¬ìš©
Path path = Paths.get("data", "user", "john", "data.txt");

// âœ… ë°©ë²• 2: File.separator ì‚¬ìš© (êµ¬ì‹)
String path = "data" + File.separator + "user" +
              File.separator + "john" + File.separator + "data.txt";

// âœ… ë°©ë²• 3: ìƒëŒ€ ê²½ë¡œ
Path base = Paths.get("data");
Path full = base.resolve("user/john/data.txt");  // OS ë¬´ê´€!
```

**ë°°ìš´ ì **:
- ğŸ’¡ `Paths.get()`ì€ OSì— ë§ëŠ” ê²½ë¡œ ìƒì„±
- ğŸ’¡ í•˜ë“œì½”ë”©ëœ `\\` ëŒ€ì‹  `Paths.get()` ì‚¬ìš©
- ğŸ’¡ `File.separator`ë„ ê°€ëŠ¥í•˜ì§€ë§Œ NIOê°€ ë” ê°„í¸

---

### ì‹œë‚˜ë¦¬ì˜¤ 2: íŒŒì¼ ì¡´ì¬ í™•ì¸ ëˆ„ë½

**ìƒí™©**: ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íŒŒì¼ì„ ì½ìœ¼ë ¤ë‹¤ê°€ ì˜ˆì™¸ ë°œìƒ

```java
// âŒ ì£¼ë‹ˆì–´ ê°œë°œì ì½”ë“œ
Path file = Paths.get("config.txt");
List<String> lines = Files.readAllLines(file);
// NoSuchFileException ë°œìƒ!
```

**ë¬¸ì œì **:
- ë¬¸ì œ 1: íŒŒì¼ ì¡´ì¬ ì—¬ë¶€ ë¯¸í™•ì¸
- ë¬¸ì œ 2: ì˜ˆì™¸ ì²˜ë¦¬ ëˆ„ë½
- ë¬¸ì œ 3: í”„ë¡œê·¸ë¨ ê°•ì œ ì¢…ë£Œ

**í•´ê²°ì±…**:
```java
// âœ… ë°©ë²• 1: ì¡´ì¬ í™•ì¸ í›„ ì²˜ë¦¬
Path file = Paths.get("config.txt");

if (!Files.exists(file)) {
    System.out.println("íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤. ê¸°ë³¸ ì„¤ì • ìƒì„±...");
    Files.writeString(file, "default=value");
}

List<String> lines = Files.readAllLines(file);

// âœ… ë°©ë²• 2: try-catchë¡œ ì˜ˆì™¸ ì²˜ë¦¬
Path file = Paths.get("config.txt");

try {
    List<String> lines = Files.readAllLines(file);
    System.out.println("ì„¤ì • ë¡œë“œ ì™„ë£Œ");
} catch (NoSuchFileException e) {
    System.out.println("ì„¤ì • íŒŒì¼ ì—†ìŒ. ê¸°ë³¸ê°’ ì‚¬ìš©");
    Files.writeString(file, "default=value");
} catch (IOException e) {
    System.err.println("íŒŒì¼ ì½ê¸° ì‹¤íŒ¨: " + e.getMessage());
}
```

**ë°°ìš´ ì **:
- ğŸ’¡ íŒŒì¼ ì½ê¸° ì „ì— `Files.exists()` ì²´í¬
- ğŸ’¡ ë˜ëŠ” `try-catch`ë¡œ ì˜ˆì™¸ ì²˜ë¦¬
- ğŸ’¡ ê¸°ë³¸ íŒŒì¼ ìƒì„± ë¡œì§ ì¶”ê°€

---

### ì‹œë‚˜ë¦¬ì˜¤ 3: ëŒ€ìš©ëŸ‰ íŒŒì¼ ë©”ëª¨ë¦¬ ë¶€ì¡±

**ìƒí™©**: 1GB íŒŒì¼ì„ `readAllLines()`ë¡œ ì½ë‹¤ê°€ OutOfMemoryError

```java
// âŒ ì£¼ë‹ˆì–´ ê°œë°œì ì½”ë“œ
Path bigFile = Paths.get("access.log");  // 1GB
List<String> lines = Files.readAllLines(bigFile);
// OutOfMemoryError: Java heap space
```

**ë¬¸ì œì **:
- ë¬¸ì œ 1: `readAllLines()`ëŠ” íŒŒì¼ ì „ì²´ë¥¼ ë©”ëª¨ë¦¬ì— ë¡œë“œ
- ë¬¸ì œ 2: 1GB íŒŒì¼ â†’ 1GB ë©”ëª¨ë¦¬ í•„ìš”
- ë¬¸ì œ 3: í™ ë©”ëª¨ë¦¬ ë¶€ì¡± ì‹œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‹¤ìš´

**í•´ê²°ì±…**:
```java
// âœ… ì˜¬ë°”ë¥¸ ì½”ë“œ (ìŠ¤íŠ¸ë¦¼ ì‚¬ìš©)
Path bigFile = Paths.get("access.log");

try (Stream<String> lines = Files.lines(bigFile)) {
    lines.filter(line -> line.contains("ERROR"))
         .forEach(System.out::println);
    // ë©”ëª¨ë¦¬: ì•½ 50MB (íŒŒì¼ í¬ê¸° ë¬´ê´€!)
}

// âœ… ëŒ€ì•ˆ: BufferedReader ì‚¬ìš©
try (BufferedReader reader = Files.newBufferedReader(bigFile)) {
    String line;
    while ((line = reader.readLine()) != null) {
        if (line.contains("ERROR")) {
            System.out.println(line);
        }
    }
}
```

**ì„±ëŠ¥ ë¹„êµ**:
| ë°©ë²• | íŒŒì¼ í¬ê¸° | ë©”ëª¨ë¦¬ ì‚¬ìš© | ì²˜ë¦¬ ì‹œê°„ |
|------|-----------|-------------|-----------|
| readAllLines() | 1GB | 1GB | 10ì´ˆ |
| Files.lines() | 1GB | 50MB | 12ì´ˆ |
| BufferedReader | 1GB | 50MB | 15ì´ˆ |

**ë°°ìš´ ì **:
- ğŸ’¡ `readAllLines()`: íŒŒì¼ ì „ì²´ë¥¼ ë©”ëª¨ë¦¬ì— ë¡œë“œ (ì‘ì€ íŒŒì¼ë§Œ)
- ğŸ’¡ `Files.lines()`: ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ í•œ ì¤„ì”© ì²˜ë¦¬ (ëŒ€ìš©ëŸ‰ OK)
- ğŸ’¡ 100MB ì´ìƒ íŒŒì¼ì€ ë¬´ì¡°ê±´ ìŠ¤íŠ¸ë¦¼!

---

### ì‹œë‚˜ë¦¬ì˜¤ 4: ë””ë ‰í† ë¦¬ ì‚­ì œ ì‹¤íŒ¨

**ìƒí™©**: íŒŒì¼ì´ ë“¤ì–´ìˆëŠ” ë””ë ‰í† ë¦¬ë¥¼ ì‚­ì œí•˜ë ¤ë‹¤ ì‹¤íŒ¨

```java
// âŒ ì£¼ë‹ˆì–´ ê°œë°œì ì½”ë“œ
Path dir = Paths.get("temp");
Files.delete(dir);
// DirectoryNotEmptyException!
```

**ë¬¸ì œì **:
- ë¬¸ì œ 1: `Files.delete()`ëŠ” ë¹ˆ ë””ë ‰í† ë¦¬ë§Œ ì‚­ì œ ê°€ëŠ¥
- ë¬¸ì œ 2: íŒŒì¼ì´ ìˆìœ¼ë©´ ì˜ˆì™¸ ë°œìƒ
- ë¬¸ì œ 3: ì¬ê·€ ì‚­ì œ ë¡œì§ ëˆ„ë½

**í•´ê²°ì±…**:
```java
// âœ… ë°©ë²• 1: ì¬ê·€ ì‚­ì œ (ì—­ìˆœ)
Path dir = Paths.get("temp");

try (Stream<Path> paths = Files.walk(dir)) {
    paths.sorted((p1, p2) -> -p1.compareTo(p2))  // ì—­ìˆœ (íŒŒì¼ ë¨¼ì €)
         .forEach(path -> {
             try {
                 Files.delete(path);
                 System.out.println("ì‚­ì œ: " + path);
             } catch (IOException e) {
                 System.err.println("ì‚­ì œ ì‹¤íŒ¨: " + path);
             }
         });
}

System.out.println("ë””ë ‰í† ë¦¬ ì‚­ì œ ì™„ë£Œ");

// âœ… ë°©ë²• 2: ìœ í‹¸ë¦¬í‹° ë©”ì„œë“œ
public static void deleteDirectory(Path dir) throws IOException {
    if (!Files.exists(dir)) return;

    try (Stream<Path> paths = Files.walk(dir)) {
        paths.sorted(Comparator.reverseOrder())
             .map(Path::toFile)
             .forEach(File::delete);
    }
}
```

**ì‚­ì œ ìˆœì„œ ì´í•´**:
```
ë””ë ‰í† ë¦¬ êµ¬ì¡°:
temp/
â”œâ”€â”€ file1.txt
â”œâ”€â”€ subdir/
â”‚   â””â”€â”€ file2.txt
â””â”€â”€ file3.txt

ì‚­ì œ ìˆœì„œ:
1. file1.txt âœ…
2. subdir/file2.txt âœ…
3. subdir/ âœ…
4. file3.txt âœ…
5. temp/ âœ…
```

**ë°°ìš´ ì **:
- ğŸ’¡ `Files.delete()`: ë¹ˆ ë””ë ‰í† ë¦¬ë§Œ ì‚­ì œ ê°€ëŠ¥
- ğŸ’¡ ì¬ê·€ ì‚­ì œ: íŒŒì¼ â†’ í•˜ìœ„ ë””ë ‰í† ë¦¬ â†’ ìƒìœ„ ë””ë ‰í† ë¦¬ ìˆœì„œ
- ğŸ’¡ `Files.walk()` + ì—­ìˆœ ì •ë ¬ë¡œ í•´ê²°

---

## ğŸ› ï¸ ì‹¤ì „ í”„ë¡œì íŠ¸

### í”„ë¡œì íŠ¸: íŒŒì¼ ê¸°ë°˜ ë¡œê·¸ ë¶„ì„ ì‹œìŠ¤í…œ

**ë‚œì´ë„**: â­â­â­â­â˜†
**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 2-3ì‹œê°„
**í•™ìŠµ ëª©í‘œ**: NIOë¥¼ í™œìš©í•œ ì‹¤ì „ ë¡œê·¸ ë¶„ì„ ì‹œìŠ¤í…œ êµ¬í˜„

---

### ìš”êµ¬ì‚¬í•­ ë¶„ì„

#### ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­
- [ ] ì§€ì • ë””ë ‰í† ë¦¬ì˜ ëª¨ë“  .log íŒŒì¼ ìŠ¤ìº”
- [ ] ERROR, WARN, INFO ë ˆë²¨ë³„ ë¡œê·¸ ì¹´ìš´íŠ¸
- [ ] íŠ¹ì • í‚¤ì›Œë“œ ê²€ìƒ‰ ê¸°ëŠ¥
- [ ] ë¶„ì„ ê²°ê³¼ CSV íŒŒì¼ë¡œ ì €ì¥
- [ ] ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬ (ìŠ¤íŠ¸ë¦¼ ì‚¬ìš©)

#### ê¸°ìˆ  ìš”êµ¬ì‚¬í•­
- [ ] Java NIO (Path, Files) ì‚¬ìš©
- [ ] Stream API í™œìš©
- [ ] ì •ê·œí‘œí˜„ì‹ìœ¼ë¡œ ë¡œê·¸ íŒŒì‹±
- [ ] try-with-resourcesë¡œ ìì› ê´€ë¦¬

#### ë¹„ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­
- [ ] ì„±ëŠ¥: 1GB ë¡œê·¸ íŒŒì¼ 1ë¶„ ì´ë‚´ ì²˜ë¦¬
- [ ] ë©”ëª¨ë¦¬: 100MB ì´í•˜ ì‚¬ìš©
- [ ] í™•ì¥ì„±: ë¡œê·¸ í¬ë§· ë³€ê²½ ê°€ëŠ¥

---

### í”„ë¡œì íŠ¸ êµ¬ì¡°
```
log-analyzer/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ LogAnalyzer.java        (ë©”ì¸ í´ë˜ìŠ¤)
â”‚   â”œâ”€â”€ LogEntry.java            (ë¡œê·¸ ë°ì´í„° ëª¨ë¸)
â”‚   â””â”€â”€ LogStatistics.java       (í†µê³„ í´ë˜ìŠ¤)
â”œâ”€â”€ logs/                        (ìƒ˜í”Œ ë¡œê·¸ íŒŒì¼)
â”‚   â”œâ”€â”€ app.log
â”‚   â””â”€â”€ error.log
â””â”€â”€ output/                      (ë¶„ì„ ê²°ê³¼)
    â””â”€â”€ analysis_result.csv
```

---

### ì„¤ê³„ ì˜ì‚¬ê²°ì •

#### ì™œ ì´ë ‡ê²Œ ì„¤ê³„í–ˆëŠ”ê°€?

1. **Files.walk() ì„ íƒ**
   - ì´ìœ : ì¬ê·€ì  ë””ë ‰í† ë¦¬ íƒìƒ‰
   - ëŒ€ì•ˆ: ì§ì ‘ ì¬ê·€ êµ¬í˜„
   - ì„ íƒ ê·¼ê±°: ê°„ê²°í•˜ê³  ì•ˆì „

2. **Stream API ì‚¬ìš©**
   - ì´ìœ : ëŒ€ìš©ëŸ‰ íŒŒì¼ ë©”ëª¨ë¦¬ íš¨ìœ¨
   - ëŒ€ì•ˆ: readAllLines()
   - ì„ íƒ ê·¼ê±°: 100MB ì´ìƒ íŒŒì¼ ì²˜ë¦¬ ê°€ëŠ¥

3. **ì •ê·œí‘œí˜„ì‹ íŒ¨í„´**
   - ì´ìœ : ìœ ì—°í•œ ë¡œê·¸ íŒŒì‹±
   - ëŒ€ì•ˆ: String.split()
   - ì„ íƒ ê·¼ê±°: ë‹¤ì–‘í•œ ë¡œê·¸ í¬ë§· ëŒ€ì‘

---

### ë‹¨ê³„ë³„ êµ¬í˜„ ê°€ì´ë“œ

#### 1ë‹¨ê³„: í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì •

```bash
# 1. í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ ìƒì„±
mkdir log-analyzer
cd log-analyzer

# 2. ì†ŒìŠ¤ ë””ë ‰í† ë¦¬ ìƒì„±
mkdir -p src logs output

# 3. ìƒ˜í”Œ ë¡œê·¸ íŒŒì¼ ìƒì„±
echo "2025-10-10 10:00:00 [INFO] Application started" > logs/app.log
echo "2025-10-10 10:01:00 [ERROR] Database connection failed" >> logs/app.log
echo "2025-10-10 10:02:00 [WARN] Memory usage high" >> logs/app.log
```

**ì²´í¬í¬ì¸íŠ¸**:
- [ ] ë””ë ‰í† ë¦¬ êµ¬ì¡° í™•ì¸
- [ ] ìƒ˜í”Œ ë¡œê·¸ íŒŒì¼ ìƒì„± í™•ì¸

---

#### 2ë‹¨ê³„: ë¡œê·¸ ë°ì´í„° ëª¨ë¸ êµ¬í˜„

```java
// íŒŒì¼: src/LogEntry.java
import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class LogEntry {
    private static final Pattern LOG_PATTERN =
        Pattern.compile("(\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}) \\[(\\w+)\\] (.+)");

    private LocalDateTime timestamp;
    private String level;
    private String message;

    public LogEntry(String logLine) {
        Matcher matcher = LOG_PATTERN.matcher(logLine);
        if (matcher.matches()) {
            this.timestamp = LocalDateTime.parse(
                matcher.group(1),
                DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss")
            );
            this.level = matcher.group(2);
            this.message = matcher.group(3);
        }
    }

    public boolean isValid() {
        return timestamp != null;
    }

    public String getLevel() {
        return level;
    }

    public String getMessage() {
        return message;
    }

    @Override
    public String toString() {
        return String.format("[%s] %s: %s",
            timestamp, level, message);
    }
}
```

**ì½”ë“œ ì„¤ëª…**:
- **ë¼ì¸ 7-8**: ì •ê·œí‘œí˜„ì‹ìœ¼ë¡œ ë¡œê·¸ íŒ¨í„´ ì •ì˜
- **ë¼ì¸ 15**: ë¡œê·¸ ë¼ì¸ íŒŒì‹±
- **ë¼ì¸ 17-20**: ë‚ ì§œ/ì‹œê°„ íŒŒì‹±
- **ë¼ì¸ 27**: ìœ íš¨ì„± ê²€ì¦ ë©”ì„œë“œ

---

#### 3ë‹¨ê³„: í†µê³„ ìˆ˜ì§‘ í´ë˜ìŠ¤ êµ¬í˜„

```java
// íŒŒì¼: src/LogStatistics.java
import java.util.HashMap;
import java.util.Map;

public class LogStatistics {
    private Map<String, Long> levelCounts = new HashMap<>();
    private long totalLines = 0;
    private long validLines = 0;

    public void addLogEntry(LogEntry entry) {
        totalLines++;

        if (entry.isValid()) {
            validLines++;
            String level = entry.getLevel();
            levelCounts.put(level, levelCounts.getOrDefault(level, 0L) + 1);
        }
    }

    public void printStatistics() {
        System.out.println("\n=== ë¡œê·¸ ë¶„ì„ ê²°ê³¼ ===");
        System.out.println("ì´ ë¼ì¸ ìˆ˜: " + totalLines);
        System.out.println("ìœ íš¨ ë¼ì¸ ìˆ˜: " + validLines);
        System.out.println("\në ˆë²¨ë³„ í†µê³„:");

        levelCounts.forEach((level, count) ->
            System.out.printf("  %s: %dê±´\n", level, count)
        );
    }

    public Map<String, Long> getLevelCounts() {
        return levelCounts;
    }

    public long getTotalLines() {
        return totalLines;
    }
}
```

**ì½”ë“œ ì„¤ëª…**:
- **ë¼ì¸ 5**: ë ˆë²¨ë³„ ì¹´ìš´íŠ¸ ì €ì¥
- **ë¼ì¸ 10-17**: ë¡œê·¸ ì—”íŠ¸ë¦¬ ì¶”ê°€ ë° ì¹´ìš´íŠ¸
- **ë¼ì¸ 20-28**: í†µê³„ ì¶œë ¥

---

#### 4ë‹¨ê³„: ë©”ì¸ ë¶„ì„ í´ë˜ìŠ¤ êµ¬í˜„

```java
// íŒŒì¼: src/LogAnalyzer.java
import java.nio.file.*;
import java.io.IOException;
import java.util.stream.Stream;

public class LogAnalyzer {
    private LogStatistics stats = new LogStatistics();

    public static void main(String[] args) throws IOException {
        LogAnalyzer analyzer = new LogAnalyzer();

        // 1. ë¡œê·¸ ë””ë ‰í† ë¦¬ ìŠ¤ìº”
        Path logDir = Paths.get("logs");
        analyzer.analyzeLogs(logDir);

        // 2. ê²°ê³¼ ì¶œë ¥
        analyzer.stats.printStatistics();

        // 3. CSVë¡œ ì €ì¥
        analyzer.saveResultToCSV();
    }

    private void analyzeLogs(Path logDir) throws IOException {
        System.out.println("=== ë¡œê·¸ íŒŒì¼ ìŠ¤ìº” ì‹œì‘ ===");

        // ëª¨ë“  .log íŒŒì¼ ì°¾ê¸°
        try (Stream<Path> paths = Files.walk(logDir)) {
            paths.filter(p -> p.toString().endsWith(".log"))
                 .filter(Files::isRegularFile)
                 .forEach(this::analyzeLogFile);
        }
    }

    private void analyzeLogFile(Path logFile) {
        System.out.println("ë¶„ì„ ì¤‘: " + logFile.getFileName());

        try (Stream<String> lines = Files.lines(logFile)) {
            lines.map(LogEntry::new)
                 .forEach(stats::addLogEntry);

        } catch (IOException e) {
            System.err.println("íŒŒì¼ ì½ê¸° ì‹¤íŒ¨: " + e.getMessage());
        }
    }

    private void saveResultToCSV() throws IOException {
        Path outputFile = Paths.get("output/analysis_result.csv");
        Files.createDirectories(outputFile.getParent());

        StringBuilder csv = new StringBuilder();
        csv.append("Level,Count\n");

        stats.getLevelCounts().forEach((level, count) ->
            csv.append(String.format("%s,%d\n", level, count))
        );

        Files.writeString(outputFile, csv.toString());
        System.out.println("\nê²°ê³¼ ì €ì¥: " + outputFile);
    }
}
```

**ì½”ë“œ ì„¤ëª…**:
- **ë¼ì¸ 26-30**: Files.walk()ë¡œ ì¬ê·€ì  íŒŒì¼ ìŠ¤ìº”
- **ë¼ì¸ 36-38**: Files.lines()ë¡œ ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬ (ë©”ëª¨ë¦¬ íš¨ìœ¨)
- **ë¼ì¸ 46-56**: CSV íŒŒì¼ ìƒì„± ë° ì €ì¥

---

#### 5ë‹¨ê³„: ì‹¤í–‰ ë° ê²€ì¦

```bash
# ì»´íŒŒì¼
javac src/*.java

# ì‹¤í–‰
java -cp src LogAnalyzer
```

**ì˜ˆìƒ ì¶œë ¥**:
```
=== ë¡œê·¸ íŒŒì¼ ìŠ¤ìº” ì‹œì‘ ===
ë¶„ì„ ì¤‘: app.log

=== ë¡œê·¸ ë¶„ì„ ê²°ê³¼ ===
ì´ ë¼ì¸ ìˆ˜: 3
ìœ íš¨ ë¼ì¸ ìˆ˜: 3

ë ˆë²¨ë³„ í†µê³„:
  INFO: 1ê±´
  ERROR: 1ê±´
  WARN: 1ê±´

ê²°ê³¼ ì €ì¥: output/analysis_result.csv
```

**CSV íŒŒì¼ ë‚´ìš©** (output/analysis_result.csv):
```csv
Level,Count
INFO,1
ERROR,1
WARN,1
```

---

#### 6ë‹¨ê³„: ê°œì„  ë° ìµœì í™”

**ê°œì„  í¬ì¸íŠ¸**:

1. **ë©€í‹°ìŠ¤ë ˆë“œ ì²˜ë¦¬**
```java
// ë³‘ë ¬ ì²˜ë¦¬ë¡œ ì„±ëŠ¥ í–¥ìƒ
try (Stream<Path> paths = Files.walk(logDir)) {
    paths.parallel()  // ë³‘ë ¬ ìŠ¤íŠ¸ë¦¼
         .filter(p -> p.toString().endsWith(".log"))
         .forEach(this::analyzeLogFile);
}
```

2. **í‚¤ì›Œë“œ ê²€ìƒ‰ ê¸°ëŠ¥ ì¶”ê°€**
```java
public void searchKeyword(Path logDir, String keyword) throws IOException {
    System.out.println("ê²€ìƒ‰: " + keyword);

    try (Stream<Path> paths = Files.walk(logDir)) {
        paths.filter(p -> p.toString().endsWith(".log"))
             .forEach(file -> searchInFile(file, keyword));
    }
}

private void searchInFile(Path file, String keyword) {
    try (Stream<String> lines = Files.lines(file)) {
        lines.filter(line -> line.contains(keyword))
             .forEach(line ->
                 System.out.printf("[%s] %s\n", file.getFileName(), line)
             );
    } catch (IOException e) {
        System.err.println("ê²€ìƒ‰ ì‹¤íŒ¨: " + e.getMessage());
    }
}
```

3. **ë‚ ì§œ ë²”ìœ„ í•„í„°**
```java
public void analyzeByDateRange(Path logDir,
        LocalDateTime from, LocalDateTime to) throws IOException {
    try (Stream<Path> paths = Files.walk(logDir)) {
        paths.filter(p -> p.toString().endsWith(".log"))
             .forEach(file -> analyzeWithDateFilter(file, from, to));
    }
}
```

---

### ì „ì²´ ì‹¤í–‰ ê²°ê³¼

```bash
# 1. ëŒ€ìš©ëŸ‰ ë¡œê·¸ ìƒì„± (í…ŒìŠ¤íŠ¸ìš©)
$ java -cp src LogGenerator  # 100ë§Œ ì¤„ ìƒì„±

# 2. ë¡œê·¸ ë¶„ì„ ì‹¤í–‰
$ java -cp src LogAnalyzer

=== ë¡œê·¸ íŒŒì¼ ìŠ¤ìº” ì‹œì‘ ===
ë¶„ì„ ì¤‘: app.log
ë¶„ì„ ì¤‘: error.log
ë¶„ì„ ì¤‘: access.log

=== ë¡œê·¸ ë¶„ì„ ê²°ê³¼ ===
ì´ ë¼ì¸ ìˆ˜: 1,000,000
ìœ íš¨ ë¼ì¸ ìˆ˜: 998,542

ë ˆë²¨ë³„ í†µê³„:
  INFO: 600,345ê±´
  ERROR: 150,123ê±´
  WARN: 200,074ê±´
  DEBUG: 48,000ê±´

ì²˜ë¦¬ ì‹œê°„: 45ì´ˆ
ë©”ëª¨ë¦¬ ì‚¬ìš©: 85MB

ê²°ê³¼ ì €ì¥: output/analysis_result.csv
```

---

### íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

#### ë¬¸ì œ 1: OutOfMemoryError ë°œìƒ

**ì¦ìƒ**:
```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
```

**ì›ì¸**: `readAllLines()` ì‚¬ìš©ìœ¼ë¡œ íŒŒì¼ ì „ì²´ë¥¼ ë©”ëª¨ë¦¬ì— ë¡œë“œ

**í•´ê²° ë°©ë²•**:
```java
// âŒ ë¬¸ì œ ì½”ë“œ
List<String> lines = Files.readAllLines(logFile);

// âœ… í•´ê²° ì½”ë“œ
try (Stream<String> lines = Files.lines(logFile)) {
    lines.forEach(line -> processLine(line));
}
```

---

#### ë¬¸ì œ 2: íŒŒì¼ ì¸ì½”ë”© ë¬¸ì œ

**ì¦ìƒ**: í•œê¸€ì´ ê¹¨ì ¸ì„œ ì¶œë ¥ë¨

**ì›ì¸**: ê¸°ë³¸ ì¸ì½”ë”©(MS949)ê³¼ íŒŒì¼ ì¸ì½”ë”©(UTF-8) ë¶ˆì¼ì¹˜

**í•´ê²° ë°©ë²•**:
```java
import java.nio.charset.StandardCharsets;

// UTF-8 ëª…ì‹œ
try (Stream<String> lines = Files.lines(logFile, StandardCharsets.UTF_8)) {
    // ì²˜ë¦¬
}
```

---

### í™•ì¥ ì•„ì´ë””ì–´

#### ì¶”ê°€ ê¸°ëŠ¥ 1: ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
**ë‚œì´ë„**: â­â­â­â­â­
**êµ¬í˜„ íŒíŠ¸**: WatchService ì‚¬ìš©

```java
import java.nio.file.*;

public class RealTimeMonitor {
    public static void main(String[] args) throws Exception {
        Path dir = Paths.get("logs");

        try (WatchService watcher = FileSystems.getDefault().newWatchService()) {
            dir.register(watcher, StandardWatchEventKinds.ENTRY_MODIFY);

            while (true) {
                WatchKey key = watcher.take();

                for (WatchEvent<?> event : key.pollEvents()) {
                    Path changed = (Path) event.context();
                    System.out.println("íŒŒì¼ ë³€ê²½ ê°ì§€: " + changed);
                    // ë¡œê·¸ ë¶„ì„ ì‹¤í–‰
                }

                key.reset();
            }
        }
    }
}
```

#### ì¶”ê°€ ê¸°ëŠ¥ 2: ì›¹ ëŒ€ì‹œë³´ë“œ
**ë‚œì´ë„**: â­â­â­â­â˜†
**êµ¬í˜„ íŒíŠ¸**: HTTP ì„œë²„ + HTML ì°¨íŠ¸

---

### ì½”ë“œ ë¦¬ë·° í¬ì¸íŠ¸

#### ì²´í¬ë¦¬ìŠ¤íŠ¸
- [x] Stream ì‚¬ìš©ìœ¼ë¡œ ë©”ëª¨ë¦¬ íš¨ìœ¨ì 
- [x] try-with-resourcesë¡œ ìì› ê´€ë¦¬
- [x] ì •ê·œí‘œí˜„ì‹ìœ¼ë¡œ ìœ ì—°í•œ íŒŒì‹±
- [x] CSV ì €ì¥ìœ¼ë¡œ ê²°ê³¼ ë³´ì¡´
- [x] ì˜ˆì™¸ ì²˜ë¦¬ ì ì ˆ
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± (ê°œì„  í•„ìš”)
- [ ] ë¡œê¹… ì¶”ê°€ (ê°œì„  í•„ìš”)

---

## ğŸ¯ í•µì‹¬ ì •ë¦¬

### NIO í•µì‹¬ API

| API | ìš©ë„ | ì˜ˆì‹œ |
|-----|------|------|
| Paths.get() | ê²½ë¡œ ìƒì„± | `Paths.get("data.txt")` |
| Files.exists() | ì¡´ì¬ í™•ì¸ | `Files.exists(path)` |
| Files.readAllLines() | ì „ì²´ ì½ê¸° (ì†ŒëŸ‰) | `Files.readAllLines(path)` |
| Files.lines() | ìŠ¤íŠ¸ë¦¼ ì½ê¸° (ëŒ€ëŸ‰) | `Files.lines(path)` |
| Files.write() | íŒŒì¼ ì“°ê¸° | `Files.write(path, lines)` |
| Files.copy() | íŒŒì¼ ë³µì‚¬ | `Files.copy(src, dst)` |
| Files.walk() | ì¬ê·€ íƒìƒ‰ | `Files.walk(dir)` |

### ì‹¤ë¬´ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

#### âœ… í•´ì•¼ í•  ê²ƒ
- [ ] ëŒ€ìš©ëŸ‰ íŒŒì¼ì€ ë¬´ì¡°ê±´ Files.lines() ìŠ¤íŠ¸ë¦¼ ì‚¬ìš©
- [ ] íŒŒì¼ ì½ê¸° ì „ì— Files.exists() ì²´í¬
- [ ] UTF-8 ì¸ì½”ë”© ëª…ì‹œ
- [ ] try-with-resourcesë¡œ ìì› ê´€ë¦¬
- [ ] í¬ë¡œìŠ¤ í”Œë«í¼ ê²½ë¡œëŠ” Paths.get() ì‚¬ìš©

#### âŒ í•˜ì§€ ë§ì•„ì•¼ í•  ê²ƒ
- [ ] ëŒ€ìš©ëŸ‰ íŒŒì¼ì— readAllLines() ì‚¬ìš©
- [ ] íŒŒì¼ ê²½ë¡œì— `\\` í•˜ë“œì½”ë”©
- [ ] close() í˜¸ì¶œ ëˆ„ë½
- [ ] ì¸ì½”ë”© ë¯¸ì§€ì •
- [ ] ì˜ˆì™¸ ì²˜ë¦¬ ìƒëµ

---

**ë‹¤ìŒ Partì—ì„œ ê³„ì†**: [37-3: ë©´ì ‘ ì§ˆë¬¸ ë° ì •ë¦¬ â†’](37-3-íŒŒì¼-ì…ì¶œë ¥-Part3.md)

**ì´ì „ Part**: [â† 37-1: íŒŒì¼ ì…ì¶œë ¥ ê¸°ì´ˆ](37-1-íŒŒì¼-ì…ì¶œë ¥-Part1-PERFECT.md)

**ëª©ì°¨ë¡œ ëŒì•„ê°€ê¸°**: [ğŸ“š ì „ì²´ ëª©ì°¨](README.md)
