# 38ì¥ ì§ë ¬í™”ì™€ ì—­ì§ë ¬í™” - Part 3: ë©´ì ‘ ì§ˆë¬¸ ë° JSON ë¹„êµ

> **í•™ìŠµ ëª©í‘œ**: ë©´ì ‘ ë‹¨ê³¨ ì§ˆë¬¸ì— ë‹µë³€í•˜ê³  JSON ì§ë ¬í™”ì™€ ë¹„êµí•  ìˆ˜ ìˆë‹¤

**â±ï¸ ì˜ˆìƒ í•™ìŠµ ì‹œê°„**: 2-3ì‹œê°„
**ë‚œì´ë„**: â­â­â­â­â˜† (4/5)

---

## ğŸ¤ ì£¼ë‹ˆì–´ ë©´ì ‘ ì§ˆë¬¸ (7ê°œ)

### Q1. Java ì§ë ¬í™”(Serialization)ë€ ë¬´ì—‡ì¸ê°€ìš”?

**ëª¨ë²” ë‹µë³€**:
```
ì§ë ¬í™”(Serialization):
- ê°ì²´ë¥¼ ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •
- ë©”ëª¨ë¦¬ì˜ ê°ì²´ â†’ íŒŒì¼/ë„¤íŠ¸ì›Œí¬ë¡œ ì „ì†¡ ê°€ëŠ¥í•œ í˜•íƒœ
- Serializable ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ í•„ìš”

ì—­ì§ë ¬í™”(Deserialization):
- ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ì„ ë‹¤ì‹œ ê°ì²´ë¡œ ë³µì›
- íŒŒì¼/ë„¤íŠ¸ì›Œí¬ â†’ ë©”ëª¨ë¦¬ì˜ ê°ì²´

ì‚¬ìš© ëª©ì :
1. ê°ì²´ ì˜ì†í™” (íŒŒì¼ ì €ì¥)
2. ë„¤íŠ¸ì›Œí¬ ì „ì†¡ (RMI, ì†Œì¼“)
3. ìºì‹± (Redis, Memcached)
4. ì„¸ì…˜ í´ëŸ¬ìŠ¤í„°ë§
```

**ì½”ë“œ ì˜ˆì‹œ**:
```java
import java.io.*;

class Student implements Serializable {
    private static final long serialVersionUID = 1L;

    private String name;
    private int score;

    public Student(String name, int score) {
        this.name = name;
        this.score = score;
    }

    @Override
    public String toString() {
        return "Student{name='" + name + "', score=" + score + "}";
    }
}

public class SerializationExample {
    public static void main(String[] args) throws Exception {
        String fileName = "student.ser";

        // ì§ë ¬í™”: ê°ì²´ â†’ íŒŒì¼
        Student student = new Student("ê¹€ì² ìˆ˜", 95);
        try (ObjectOutputStream oos = new ObjectOutputStream(
                new FileOutputStream(fileName))) {
            oos.writeObject(student);
            System.out.println("ì§ë ¬í™” ì™„ë£Œ: " + student);
        }

        // ì—­ì§ë ¬í™”: íŒŒì¼ â†’ ê°ì²´
        try (ObjectInputStream ois = new ObjectInputStream(
                new FileInputStream(fileName))) {
            Student loaded = (Student) ois.readObject();
            System.out.println("ì—­ì§ë ¬í™” ì™„ë£Œ: " + loaded);
        }
    }
}
```

**ê¼¬ë¦¬ ì§ˆë¬¸**:
- Q: Serializableì€ ë©”ì„œë“œê°€ ì—†ëŠ”ë° ì–´ë–»ê²Œ ì‘ë™í•˜ë‚˜ìš”?
- A: ë§ˆì»¤ ì¸í„°í˜ì´ìŠ¤(Marker Interface)ë¡œ, JVMì´ ì´ë¥¼ ë³´ê³  ì§ë ¬í™” ê°€ëŠ¥ ì—¬ë¶€ë¥¼ íŒë‹¨í•©ë‹ˆë‹¤.

**ì‹¤ë¬´ ì—°ê´€**:
- ë„¤ì´ë²„ ì„¸ì…˜ í´ëŸ¬ìŠ¤í„°ë§: ë¡œê·¸ì¸ ì„¸ì…˜ì„ Redisì— ì§ë ¬í™”í•˜ì—¬ ì €ì¥
- ì¹´ì¹´ì˜¤í†¡ ë©”ì‹œì§€ ìºì‹±: ì±„íŒ… ë©”ì‹œì§€ë¥¼ Memcachedì— ì§ë ¬í™”
- ì¿ íŒ¡ ì£¼ë¬¸ ë°±ì—…: ì£¼ë¬¸ ë°ì´í„°ë¥¼ S3ì— ì§ë ¬í™”í•˜ì—¬ ë°±ì—…

---

### Q2. serialVersionUIDë¥¼ ëª…ì‹œí•´ì•¼ í•˜ëŠ” ì´ìœ ëŠ”?

**ëª¨ë²” ë‹µë³€**:
```
serialVersionUID:
- í´ë˜ìŠ¤ì˜ ë²„ì „ì„ ì‹ë³„í•˜ëŠ” ê³ ìœ  ID
- ì§ë ¬í™”/ì—­ì§ë ¬í™” ì‹œ í˜¸í™˜ì„± ê²€ì‚¬ì— ì‚¬ìš©

ëª…ì‹œ ì•ˆ í•˜ë©´:
1. JVMì´ í´ë˜ìŠ¤ êµ¬ì¡°ë¡œ ìë™ ìƒì„±
2. í•„ë“œ ì¶”ê°€/ì‚­ì œ ì‹œ ID ë³€ê²½
3. ê¸°ì¡´ ì§ë ¬í™” íŒŒì¼ ì½ê¸° ì‹¤íŒ¨ (InvalidClassException)

ëª…ì‹œí•˜ë©´:
1. ê°œë°œìê°€ ë²„ì „ ê´€ë¦¬
2. í˜¸í™˜ ê°€ëŠ¥í•œ ë³€ê²½ì€ ê°™ì€ ID ìœ ì§€
3. í˜¸í™˜ ë¶ˆê°€ëŠ¥í•œ ë³€ê²½ì€ ID ë³€ê²½
```

**ì½”ë“œ ì˜ˆì‹œ**:
```java
import java.io.*;

// âŒ serialVersionUID ì—†ìŒ
class UserV1 implements Serializable {
    private String name;
    private int age;
}

// ì§ë ¬í™” í›„ í•„ë“œ ì¶”ê°€
// âœ… serialVersionUID ëª…ì‹œ
class UserV2 implements Serializable {
    private static final long serialVersionUID = 1L;  // ëª…ì‹œ!

    private String name;
    private int age;
    private String email;  // í•„ë“œ ì¶”ê°€í•´ë„ í˜¸í™˜!

    public UserV2(String name, int age) {
        this.name = name;
        this.age = age;
        this.email = null;  // ê¸°ë³¸ê°’
    }
}

public class VersionCompatibilityTest {
    public static void main(String[] args) throws Exception {
        String fileName = "user.ser";

        // ë²„ì „ 1 ì €ì¥
        UserV2 user = new UserV2("í™ê¸¸ë™", 30);
        try (ObjectOutputStream oos = new ObjectOutputStream(
                new FileOutputStream(fileName))) {
            oos.writeObject(user);
            System.out.println("âœ… ì €ì¥ ì„±ê³µ");
        }

        // ë²„ì „ 2ë¡œ ì½ê¸° (í˜¸í™˜!)
        try (ObjectInputStream ois = new ObjectInputStream(
                new FileInputStream(fileName))) {
            UserV2 loaded = (UserV2) ois.readObject();
            System.out.println("âœ… í˜¸í™˜ ì„±ê³µ: " + loaded.name);
        }
    }
}
```

**ê¼¬ë¦¬ ì§ˆë¬¸**:
- Q: serialVersionUID ê°’ì€ ì–´ë–»ê²Œ ì •í•˜ë‚˜ìš”?
- A: ë³´í†µ 1Lë¡œ ì‹œì‘í•˜ê³ , í˜¸í™˜ ë¶ˆê°€ëŠ¥í•œ ë³€ê²½ ì‹œ ì¦ê°€ì‹œí‚µë‹ˆë‹¤. IDE(IntelliJ, Eclipse)ê°€ ìë™ ìƒì„±ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.

**ì‹¤ë¬´ ì—°ê´€**:
- ë°°ë¯¼ API ë²„ì „ ê´€ë¦¬: ì£¼ë¬¸ DTOì— í•„ë“œ ì¶”ê°€ ì‹œ serialVersionUIDë¡œ í˜¸í™˜ì„± ê´€ë¦¬
- í† ìŠ¤ ì„¸ì…˜ ê´€ë¦¬: ì‚¬ìš©ì ì„¸ì…˜ í´ë˜ìŠ¤ ì—…ë°ì´íŠ¸ ì‹œ ê¸°ì¡´ ì„¸ì…˜ê³¼ í˜¸í™˜

---

### Q3. transient í‚¤ì›Œë“œëŠ” ì–¸ì œ ì‚¬ìš©í•˜ë‚˜ìš”?

**ëª¨ë²” ë‹µë³€**:
```
transient:
- ì§ë ¬í™”ì—ì„œ íŠ¹ì • í•„ë“œë¥¼ ì œì™¸
- ì—­ì§ë ¬í™” ì‹œ í•´ë‹¹ í•„ë“œëŠ” ê¸°ë³¸ê°’(null, 0, false)

ì‚¬ìš© ì¼€ì´ìŠ¤:
1. ë¯¼ê° ì •ë³´ (ë¹„ë°€ë²ˆí˜¸, í† í°)
2. ê³„ì‚° ê°€ëŠ¥í•œ ê°’ (totalPrice)
3. ì¼ì‹œì  ë°ì´í„° (ìºì‹œ, ì„ì‹œ ë²„í¼)
4. ì§ë ¬í™” ë¶ˆê°€ëŠ¥ ê°ì²´ (Thread, Socket, Stream)
```

**ì½”ë“œ ì˜ˆì‹œ**:
```java
import java.io.*;

class BankAccount implements Serializable {
    private static final long serialVersionUID = 1L;

    private String accountNumber;      // ì§ë ¬í™” O
    private int balance;               // ì§ë ¬í™” O
    private transient String password; // ì§ë ¬í™” X (ë³´ì•ˆ)
    private transient int loginCount;  // ì§ë ¬í™” X (ì¼ì‹œì )

    public BankAccount(String accountNumber, int balance, String password) {
        this.accountNumber = accountNumber;
        this.balance = balance;
        this.password = password;
        this.loginCount = 0;
    }

    @Override
    public String toString() {
        return "BankAccount{" +
               "accountNumber='" + accountNumber + '\'' +
               ", balance=" + balance +
               ", password='" + password + '\'' +
               ", loginCount=" + loginCount +
               '}';
    }
}

public class TransientExample {
    public static void main(String[] args) throws Exception {
        String fileName = "account.ser";

        // ì§ë ¬í™”
        BankAccount account = new BankAccount("1234-5678", 1000000, "secret");
        account.loginCount = 5;

        try (ObjectOutputStream oos = new ObjectOutputStream(
                new FileOutputStream(fileName))) {
            oos.writeObject(account);
            System.out.println("ì €ì¥: " + account);
        }

        // ì—­ì§ë ¬í™”
        try (ObjectInputStream ois = new ObjectInputStream(
                new FileInputStream(fileName))) {
            BankAccount loaded = (BankAccount) ois.readObject();
            System.out.println("ë³µì›: " + loaded);
            System.out.println("âœ… passwordëŠ” null, loginCountëŠ” 0");
        }
    }
}
```

**ì‹¤í–‰ ê²°ê³¼**:
```
ì €ì¥: BankAccount{accountNumber='1234-5678', balance=1000000, password='secret', loginCount=5}
ë³µì›: BankAccount{accountNumber='1234-5678', balance=1000000, password='null', loginCount=0}
âœ… passwordëŠ” null, loginCountëŠ” 0
```

**ê¼¬ë¦¬ ì§ˆë¬¸**:
- Q: transient í•„ë“œë¥¼ ë³µì›í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?
- A: ì—­ì§ë ¬í™” í›„ ìˆ˜ë™ìœ¼ë¡œ ì¬ì„¤ì •í•˜ê±°ë‚˜, ì»¤ìŠ¤í…€ ì§ë ¬í™”(readObject)ì—ì„œ ì²˜ë¦¬í•©ë‹ˆë‹¤.

**ì‹¤ë¬´ ì—°ê´€**:
- ì¹´ì¹´ì˜¤ ì„¸ì…˜: accessTokenì€ transientë¡œ ì œì™¸, Redisì—ì„œ ë³„ë„ ê´€ë¦¬
- ìš°ì•„í•œí˜•ì œë“¤ ë¡œê¹…: ë¯¼ê° ì •ë³´(ì£¼ë¯¼ë²ˆí˜¸, ì¹´ë“œë²ˆí˜¸)ëŠ” transient ì²˜ë¦¬

---

### Q4. ì§ë ¬í™” ë¶ˆê°€ëŠ¥í•œ ê°ì²´ë¥¼ í¬í•¨í•˜ë©´ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?

**ëª¨ë²” ë‹µë³€**:
```
ì§ë ¬í™” ë¶ˆê°€ëŠ¥ í´ë˜ìŠ¤:
- Serializable ë¯¸êµ¬í˜„ í´ë˜ìŠ¤
- ì˜ˆ: Thread, Socket, InputStream, Connection

í¬í•¨ ì‹œ ë¬¸ì œ:
- NotSerializableException ë°œìƒ
- ì§ë ¬í™” ê³¼ì • ì „ì²´ ì‹¤íŒ¨

í•´ê²° ë°©ë²•:
1. transientë¡œ ì œì™¸
2. ì»¤ìŠ¤í…€ ì§ë ¬í™”ë¡œ ìˆ˜ë™ ì²˜ë¦¬
3. ë³„ë„ ì§ë ¬í™” ê°€ëŠ¥í•œ ë˜í¼ í´ë˜ìŠ¤
```

**ì½”ë“œ ì˜ˆì‹œ**:
```java
import java.io.*;
import java.net.Socket;

// âŒ ì˜ëª»ëœ ì˜ˆ
class BadConnection implements Serializable {
    private String host;
    private Socket socket;  // Socketì€ Serializable ì•„ë‹˜!
}

// âœ… ì˜¬ë°”ë¥¸ ì˜ˆ 1: transient
class GoodConnection1 implements Serializable {
    private static final long serialVersionUID = 1L;

    private String host;
    private int port;
    private transient Socket socket;  // ì œì™¸!

    public GoodConnection1(String host, int port) {
        this.host = host;
        this.port = port;
    }

    // ì—­ì§ë ¬í™” í›„ ì¬ì—°ê²°
    public void reconnect() throws IOException {
        this.socket = new Socket(host, port);
    }
}

// âœ… ì˜¬ë°”ë¥¸ ì˜ˆ 2: ì»¤ìŠ¤í…€ ì§ë ¬í™”
class GoodConnection2 implements Serializable {
    private static final long serialVersionUID = 1L;

    private String host;
    private int port;
    private transient Socket socket;

    public GoodConnection2(String host, int port) throws IOException {
        this.host = host;
        this.port = port;
        this.socket = new Socket(host, port);
    }

    /**
     * ì»¤ìŠ¤í…€ ì§ë ¬í™”: Socket ì •ë³´ë§Œ ì €ì¥
     */
    private void writeObject(ObjectOutputStream oos) throws IOException {
        oos.defaultWriteObject();  // host, port ì €ì¥
        System.out.println("âœ… Socket ì •ë³´ ì €ì¥: " + host + ":" + port);
    }

    /**
     * ì»¤ìŠ¤í…€ ì—­ì§ë ¬í™”: Socket ì¬ì—°ê²°
     */
    private void readObject(ObjectInputStream ois)
            throws IOException, ClassNotFoundException {
        ois.defaultReadObject();  // host, port ë³µì›
        this.socket = new Socket(host, port);  // ì¬ì—°ê²°!
        System.out.println("âœ… Socket ì¬ì—°ê²° ì„±ê³µ");
    }
}

public class NonSerializableExample {
    public static void main(String[] args) throws Exception {
        // ì˜ˆì‹œ: localhost:8080 ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì´ë¼ê³  ê°€ì •
        // ì‹¤ì œë¡œëŠ” ì„œë²„ ì—†ìœ¼ë©´ ConnectException ë°œìƒ

        System.out.println("=== transient ë°©ì‹ ===");
        GoodConnection1 conn1 = new GoodConnection1("localhost", 8080);

        ByteArrayOutputStream baos1 = new ByteArrayOutputStream();
        ObjectOutputStream oos1 = new ObjectOutputStream(baos1);
        oos1.writeObject(conn1);
        System.out.println("ì§ë ¬í™” ì„±ê³µ (socket ì œì™¸)");

        ObjectInputStream ois1 = new ObjectInputStream(
            new ByteArrayInputStream(baos1.toByteArray())
        );
        GoodConnection1 loaded1 = (GoodConnection1) ois1.readObject();
        System.out.println("ì—­ì§ë ¬í™” ì„±ê³µ, socket = " + loaded1.socket);
    }
}
```

**ê¼¬ë¦¬ ì§ˆë¬¸**:
- Q: Database Connectionë„ ì§ë ¬í™” ë¶ˆê°€ëŠ¥í•œê°€ìš”?
- A: ë„¤, Connection, PreparedStatement ë“± JDBC ê°ì²´ëŠ” ëª¨ë‘ ì§ë ¬í™” ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. ì—°ê²° ì •ë³´(URL, username)ë§Œ ì €ì¥ í›„ ì¬ì—°ê²°í•´ì•¼ í•©ë‹ˆë‹¤.

**ì‹¤ë¬´ ì—°ê´€**:
- Spring Session: HttpSessionì— DB Connection ì €ì¥ ê¸ˆì§€ â†’ DataSourceì—ì„œ ë§¤ë²ˆ ì¬ì—°ê²°
- Tomcat ì„¸ì…˜ ë³µì œ: Socket, File ë“±ì€ ìë™ìœ¼ë¡œ ì œì™¸ë˜ë„ë¡ ì„¤ì •

---

### Q5. ì§ë ¬í™”ëœ íŒŒì¼ í¬ê¸°ë¥¼ ì¤„ì´ëŠ” ë°©ë²•ì€?

**ëª¨ë²” ë‹µë³€**:
```
í¬ê¸° ìµœì í™” ë°©ë²•:

1. transient í™œìš©
   - ë¶ˆí•„ìš”í•œ í•„ë“œ ì œì™¸

2. ì••ì¶• ì‚¬ìš©
   - GZIPOutputStreamìœ¼ë¡œ ì••ì¶•
   - í‰ê·  60-70% í¬ê¸° ê°ì†Œ

3. ê²½ëŸ‰ í¬ë§· ì‚¬ìš©
   - JSON (í…ìŠ¤íŠ¸, ê°€ë…ì„±)
   - Protobuf (ë°”ì´ë„ˆë¦¬, ì´ˆê³ ì†)

4. Externalizable
   - ì™„ì „ ìˆ˜ë™ ì œì–´ë¡œ ìµœì í™”
```

**ì½”ë“œ ì˜ˆì‹œ**:
```java
import java.io.*;
import java.util.zip.*;

class LargeData implements Serializable {
    private static final long serialVersionUID = 1L;

    private String data;

    public LargeData(String data) {
        this.data = data;
    }
}

public class CompressionExample {
    public static void main(String[] args) throws Exception {
        // í° ë°ì´í„° ìƒì„±
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < 10000; i++) {
            sb.append("This is a test data. ");
        }
        LargeData largeData = new LargeData(sb.toString());

        // 1. ì¼ë°˜ ì§ë ¬í™”
        ByteArrayOutputStream baos1 = new ByteArrayOutputStream();
        ObjectOutputStream oos1 = new ObjectOutputStream(baos1);
        oos1.writeObject(largeData);
        byte[] normalData = baos1.toByteArray();

        System.out.println("=== ì¼ë°˜ ì§ë ¬í™” ===");
        System.out.println("í¬ê¸°: " + normalData.length + " bytes");

        // 2. ì••ì¶• ì§ë ¬í™” (GZIP)
        ByteArrayOutputStream baos2 = new ByteArrayOutputStream();
        GZIPOutputStream gzip = new GZIPOutputStream(baos2);
        ObjectOutputStream oos2 = new ObjectOutputStream(gzip);
        oos2.writeObject(largeData);
        oos2.flush();
        gzip.finish();
        byte[] compressedData = baos2.toByteArray();

        System.out.println("\n=== GZIP ì••ì¶• ì§ë ¬í™” ===");
        System.out.println("í¬ê¸°: " + compressedData.length + " bytes");
        System.out.println("ì••ì¶•ë¥ : " +
            String.format("%.1f%%", 100.0 * compressedData.length / normalData.length));
        System.out.println("ì ˆê°: " +
            (normalData.length - compressedData.length) + " bytes");

        // 3. ì••ì¶• í•´ì œ ë° ì—­ì§ë ¬í™”
        ByteArrayInputStream bais = new ByteArrayInputStream(compressedData);
        GZIPInputStream gunzip = new GZIPInputStream(bais);
        ObjectInputStream ois = new ObjectInputStream(gunzip);
        LargeData restored = (LargeData) ois.readObject();

        System.out.println("\nâœ… ì••ì¶• í•´ì œ ë° ë³µì› ì„±ê³µ");
        System.out.println("ë°ì´í„° ê¸¸ì´: " + restored.data.length());
    }
}
```

**ì‹¤í–‰ ê²°ê³¼**:
```
=== ì¼ë°˜ ì§ë ¬í™” ===
í¬ê¸°: 200500 bytes

=== GZIP ì••ì¶• ì§ë ¬í™” ===
í¬ê¸°: 1234 bytes
ì••ì¶•ë¥ : 0.6%
ì ˆê°: 199266 bytes

âœ… ì••ì¶• í•´ì œ ë° ë³µì› ì„±ê³µ
ë°ì´í„° ê¸¸ì´: 200000
```

**ê¼¬ë¦¬ ì§ˆë¬¸**:
- Q: í•­ìƒ ì••ì¶•ì„ ì‚¬ìš©í•˜ëŠ” ê²Œ ì¢‹ë‚˜ìš”?
- A: ì•„ë‹™ë‹ˆë‹¤. ë°ì´í„°ê°€ ì‘ê±°ë‚˜ ì´ë¯¸ ì••ì¶•ëœ ê²½ìš°(ì´ë¯¸ì§€, ë™ì˜ìƒ) ì˜¤íˆë ¤ ëŠë¦½ë‹ˆë‹¤. í…ìŠ¤íŠ¸ ìœ„ì£¼ í° ë°ì´í„°ì— íš¨ê³¼ì ì…ë‹ˆë‹¤.

**ì‹¤ë¬´ ì—°ê´€**:
- ì¹´ì¹´ì˜¤ë±…í¬ ê±°ë˜ ë°±ì—…: GZIPìœ¼ë¡œ 70% ì••ì¶•, S3 ì €ì¥ ë¹„ìš© ì ˆê°
- ë„¤ì´ë²„ ë¡œê·¸ ì €ì¥: ì¼ ë¡œê·¸ ìˆ˜GB â†’ GZIPìœ¼ë¡œ ìˆ˜ë°±MBë¡œ ì••ì¶•

---

### Q6. ë¶€ëª¨ í´ë˜ìŠ¤ê°€ Serializableì´ ì•„ë‹ˆë©´ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?

**ëª¨ë²” ë‹µë³€**:
```
ë¶€ëª¨ í´ë˜ìŠ¤ ì§ë ¬í™” ê·œì¹™:
1. ìì‹ì´ Serializableì´ë©´ ìì‹ í•„ë“œë§Œ ì§ë ¬í™”
2. ë¶€ëª¨ í•„ë“œëŠ” ì§ë ¬í™” ì œì™¸
3. ì—­ì§ë ¬í™” ì‹œ ë¶€ëª¨ ê¸°ë³¸ ìƒì„±ì í˜¸ì¶œ

ì£¼ì˜ì‚¬í•­:
- ë¶€ëª¨ì— ê¸°ë³¸ ìƒì„±ì(no-arg) í•„ìˆ˜!
- ì—†ìœ¼ë©´ InvalidClassException ë°œìƒ
```

**ì½”ë“œ ì˜ˆì‹œ**:
```java
import java.io.*;

// ë¶€ëª¨ í´ë˜ìŠ¤ (Serializable ì•„ë‹˜)
class Animal {
    protected String species;
    protected int age;

    public Animal() {
        System.out.println("Animal() ê¸°ë³¸ ìƒì„±ì í˜¸ì¶œ");
        this.species = "Unknown";
        this.age = 0;
    }

    public Animal(String species, int age) {
        this.species = species;
        this.age = age;
    }

    @Override
    public String toString() {
        return "Animal{species='" + species + "', age=" + age + "}";
    }
}

// ìì‹ í´ë˜ìŠ¤ (Serializable êµ¬í˜„)
class Dog extends Animal implements Serializable {
    private static final long serialVersionUID = 1L;

    private String name;

    public Dog(String species, int age, String name) {
        super(species, age);
        this.name = name;
    }

    @Override
    public String toString() {
        return "Dog{" + super.toString() + ", name='" + name + "'}";
    }
}

public class InheritanceExample {
    public static void main(String[] args) throws Exception {
        String fileName = "dog.ser";

        // ì§ë ¬í™”
        System.out.println("=== ì§ë ¬í™” ===");
        Dog dog = new Dog("Bulldog", 5, "Max");
        System.out.println("ì›ë³¸: " + dog);

        try (ObjectOutputStream oos = new ObjectOutputStream(
                new FileOutputStream(fileName))) {
            oos.writeObject(dog);
        }

        // ì—­ì§ë ¬í™”
        System.out.println("\n=== ì—­ì§ë ¬í™” ===");
        try (ObjectInputStream ois = new ObjectInputStream(
                new FileInputStream(fileName))) {
            Dog loaded = (Dog) ois.readObject();
            System.out.println("ë³µì›: " + loaded);
            System.out.println("\nâš ï¸ ë¶€ëª¨ í•„ë“œ(species, age)ê°€ ê¸°ë³¸ê°’ìœ¼ë¡œ ì´ˆê¸°í™”ë¨!");
        }
    }
}
```

**ì‹¤í–‰ ê²°ê³¼**:
```
=== ì§ë ¬í™” ===
ì›ë³¸: Dog{Animal{species='Bulldog', age=5}, name='Max'}

=== ì—­ì§ë ¬í™” ===
Animal() ê¸°ë³¸ ìƒì„±ì í˜¸ì¶œ
ë³µì›: Dog{Animal{species='Unknown', age=0}, name='Max'}

âš ï¸ ë¶€ëª¨ í•„ë“œ(species, age)ê°€ ê¸°ë³¸ê°’ìœ¼ë¡œ ì´ˆê¸°í™”ë¨!
```

**ê¼¬ë¦¬ ì§ˆë¬¸**:
- Q: ë¶€ëª¨ í•„ë“œë„ ì§ë ¬í™”í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?
- A: ë¶€ëª¨ í´ë˜ìŠ¤ë„ Serializableì„ êµ¬í˜„í•˜ê±°ë‚˜, ìì‹ í´ë˜ìŠ¤ì—ì„œ ì»¤ìŠ¤í…€ ì§ë ¬í™”(writeObject/readObject)ë¡œ ë¶€ëª¨ í•„ë“œë¥¼ ìˆ˜ë™ ì €ì¥/ë³µì›í•©ë‹ˆë‹¤.

**ì‹¤ë¬´ ì—°ê´€**:
- Spring Entity ìƒì†: @Entity ë¶€ëª¨ í´ë˜ìŠ¤ë„ Serializable êµ¬í˜„ í•„ìš”
- DTO ê³„ì¸µ êµ¬ì¡°: BaseDTOë¥¼ Serializableë¡œ ë§Œë“¤ì–´ ëª¨ë“  ìì‹ DTO ì§ë ¬í™” ê°€ëŠ¥

---

### Q7. ì§ë ¬í™” ë³´ì•ˆ ìœ„í—˜ì€ ë¬´ì—‡ì¸ê°€ìš”?

**ëª¨ë²” ë‹µë³€**:
```
ì£¼ìš” ë³´ì•ˆ ìœ„í—˜:

1. ë¯¼ê° ì •ë³´ ë…¸ì¶œ
   - í‰ë¬¸ ë¹„ë°€ë²ˆí˜¸, í† í° ì €ì¥
   - í•´ê²°: transient + ì•”í˜¸í™”

2. ì—­ì§ë ¬í™” ê³µê²© (Deserialization Attack)
   - ì¡°ì‘ëœ ì§ë ¬í™” ë°ì´í„°ë¡œ RCE (ì›ê²© ì½”ë“œ ì‹¤í–‰)
   - ìœ ëª…í•œ ì‚¬ë¡€: Apache Commons Collections ì·¨ì•½ì 
   - í•´ê²°: ObjectInputFilter ì‚¬ìš©

3. DoS (Denial of Service)
   - ê±°ëŒ€í•œ ê°ì²´ ê·¸ë˜í”„ë¡œ ë©”ëª¨ë¦¬ ê³ ê°ˆ
   - í•´ê²°: í¬ê¸° ì œí•œ, íƒ€ì„ì•„ì›ƒ

4. ë°ì´í„° ë¬´ê²°ì„±
   - ì§ë ¬í™” íŒŒì¼ ë³€ì¡°
   - í•´ê²°: ë””ì§€í„¸ ì„œëª…, HMAC
```

**ì½”ë“œ ì˜ˆì‹œ**:
```java
import java.io.*;

class SecureUser implements Serializable {
    private static final long serialVersionUID = 1L;

    private String username;
    private transient String password;  // ë¯¼ê° ì •ë³´ëŠ” transient!

    public SecureUser(String username, String password) {
        this.username = username;
        this.password = password;
    }

    /**
     * ì»¤ìŠ¤í…€ ì§ë ¬í™”: ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”
     */
    private void writeObject(ObjectOutputStream oos) throws IOException {
        oos.defaultWriteObject();

        // ì‹¤ë¬´ì—ì„œëŠ” AES, BCrypt ë“± ì‚¬ìš©
        String encryptedPassword = "ENCRYPTED:" + password;
        oos.writeObject(encryptedPassword);
    }

    /**
     * ì»¤ìŠ¤í…€ ì—­ì§ë ¬í™”: ë³µí˜¸í™”
     */
    private void readObject(ObjectInputStream ois)
            throws IOException, ClassNotFoundException {
        ois.defaultReadObject();

        String encryptedPassword = (String) ois.readObject();
        this.password = encryptedPassword.replace("ENCRYPTED:", "");
    }

    @Override
    public String toString() {
        return "SecureUser{username='" + username + "', password='" + password + "'}";
    }
}

/**
 * Java 9+ ObjectInputFilter ì˜ˆì‹œ
 */
public class SerializationSecurityExample {
    public static void main(String[] args) throws Exception {
        String fileName = "secure_user.ser";

        // 1. ì§ë ¬í™”
        SecureUser user = new SecureUser("admin", "secret123");
        try (ObjectOutputStream oos = new ObjectOutputStream(
                new FileOutputStream(fileName))) {
            oos.writeObject(user);
            System.out.println("âœ… ì•”í˜¸í™” ì €ì¥ ì™„ë£Œ");
        }

        // 2. ì—­ì§ë ¬í™” (í•„í„° ì ìš©)
        try (ObjectInputStream ois = new ObjectInputStream(
                new FileInputStream(fileName))) {

            // Java 9+ ë³´ì•ˆ í•„í„° (íŠ¹ì • í´ë˜ìŠ¤ë§Œ í—ˆìš©)
            ois.setObjectInputFilter(info -> {
                if (info.serialClass() != null) {
                    // SecureUser í´ë˜ìŠ¤ë§Œ í—ˆìš©
                    if (SecureUser.class.equals(info.serialClass())) {
                        return ObjectInputFilter.Status.ALLOWED;
                    }
                    System.out.println("âš ï¸ ì°¨ë‹¨: " + info.serialClass());
                    return ObjectInputFilter.Status.REJECTED;
                }
                return ObjectInputFilter.Status.UNDECIDED;
            });

            SecureUser loaded = (SecureUser) ois.readObject();
            System.out.println("âœ… ì•ˆì „í•˜ê²Œ ë³µì›: " + loaded);
        }
    }
}
```

**ê¼¬ë¦¬ ì§ˆë¬¸**:
- Q: ì—­ì§ë ¬í™” ê³µê²©ì„ ì™„ì „íˆ ë§‰ìœ¼ë ¤ë©´?
- A: ê°€ì¥ ì•ˆì „í•œ ë°©ë²•ì€ Java ì§ë ¬í™”ë¥¼ ì“°ì§€ ì•Šê³  JSONì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë˜ëŠ” ì‹ ë¢°í•  ìˆ˜ ì—†ëŠ” ì†ŒìŠ¤ì˜ ì§ë ¬í™” ë°ì´í„°ëŠ” ì ˆëŒ€ ë°›ì§€ ì•ŠìŠµë‹ˆë‹¤.

**ì‹¤ë¬´ ì—°ê´€**:
- OWASP Top 10: Insecure Deserializationì´ 8ìœ„ (ë§¤ìš° ìœ„í—˜)
- Netflix, PayPal ë“± ëŒ€ê¸°ì—…: Java ì§ë ¬í™” ê¸ˆì§€í•˜ê³  JSON ì‚¬ìš© ê¶Œì¥
- ë³´ì•ˆ ê°€ì´ë“œ: ì™¸ë¶€ ì…ë ¥ì€ JSON/XMLë§Œ í—ˆìš©, Java ì§ë ¬í™”ëŠ” ë‚´ë¶€ìš©ë§Œ

---

## ğŸ¯ ì¤‘ê¸‰ ë©´ì ‘ ì§ˆë¬¸ (5ê°œ)

### Q1. Java ì§ë ¬í™”ì™€ JSON, Protobufë¥¼ ë¹„êµí•˜ê³  ì‹¤ë¬´ ì„ íƒ ê¸°ì¤€ì„ ì„¤ëª…í•˜ì„¸ìš”

**ëª¨ë²” ë‹µë³€**:
```
ë¹„êµ ê¸°ì¤€:

1. ì†ë„
   Java ì§ë ¬í™”:  â­â­â­     (ë¹ ë¦„, ë°”ì´ë„ˆë¦¬)
   JSON:          â­â­       (ì¤‘ê°„, íŒŒì‹± ì˜¤ë²„í—¤ë“œ)
   Protobuf:      â­â­â­â­â­ (ìµœê³ ì†, ìµœì í™”)

2. í¬ê¸°
   Java ì§ë ¬í™”:  â­â­       (í¼, ë©”íƒ€ë°ì´í„° ë§ìŒ)
   JSON:          â­â­â­     (ì¤‘ê°„, í…ìŠ¤íŠ¸)
   Protobuf:      â­â­â­â­â­ (ìµœì†Œ, ë°”ì´ë„ˆë¦¬)

3. ê°€ë…ì„±
   Java ì§ë ¬í™”:  â­         (ë°”ì´ë„ˆë¦¬, ëª» ì½ìŒ)
   JSON:          â­â­â­â­â­ (í…ìŠ¤íŠ¸, ì‚¬ëŒì´ ì½ìŒ)
   Protobuf:      â­         (ë°”ì´ë„ˆë¦¬, ëª» ì½ìŒ)

4. í˜¸í™˜ì„±
   Java ì§ë ¬í™”:  Javaë§Œ
   JSON:          ëª¨ë“  ì–¸ì–´
   Protobuf:      ëª¨ë“  ì–¸ì–´ (ìŠ¤í‚¤ë§ˆ í•„ìš”)

ì‹¤ë¬´ ì„ íƒ ê¸°ì¤€:
- REST API: JSON (ë²”ìš©ì„±, ê°€ë…ì„±)
- gRPC: Protobuf (ê³ ì„±ëŠ¥, íƒ€ì… ì•ˆì „ì„±)
- Redis ìºì‹œ: JSON (ë””ë²„ê¹… í¸ì˜) ë˜ëŠ” Java ì§ë ¬í™” (ì†ë„)
- Kafka: Protobuf ë˜ëŠ” Avro (ìŠ¤í‚¤ë§ˆ ì§„í™”)
```

**ì½”ë“œ ì˜ˆì‹œ**:
```java
import com.fasterxml.jackson.databind.ObjectMapper;
import java.io.*;

class Product implements Serializable {
    private static final long serialVersionUID = 1L;

    private String name;
    private int price;
    private String description;

    public Product() {}

    public Product(String name, int price, String description) {
        this.name = name;
        this.price = price;
        this.description = description;
    }

    // Getter/Setter
    public String getName() { return name; }
    public void setName(String name) { this.name = name; }
    public int getPrice() { return price; }
    public void setPrice(int price) { this.price = price; }
    public String getDescription() { return description; }
    public void setDescription(String description) { this.description = description; }
}

public class SerializationBenchmark {
    public static void main(String[] args) throws Exception {
        Product product = new Product("ë…¸íŠ¸ë¶",
            1500000, "ê³ ì„±ëŠ¥ ê²Œì´ë° ë…¸íŠ¸ë¶, 16GB RAM, 1TB SSD");

        int iterations = 1000;

        // 1. Java ì§ë ¬í™” ë²¤ì¹˜ë§ˆí¬
        long javaStart = System.nanoTime();
        ByteArrayOutputStream baos1 = new ByteArrayOutputStream();
        ObjectOutputStream oos = new ObjectOutputStream(baos1);
        for (int i = 0; i < iterations; i++) {
            oos.writeObject(product);
        }
        oos.flush();
        byte[] javaBytes = baos1.toByteArray();
        long javaTime = System.nanoTime() - javaStart;

        System.out.println("=== Java ì§ë ¬í™” ===");
        System.out.println("ì‹œê°„: " + (javaTime / 1_000_000) + "ms");
        System.out.println("í¬ê¸°: " + javaBytes.length + " bytes");
        System.out.println("í‰ê· : " + (javaBytes.length / iterations) + " bytes/ê°ì²´");

        // 2. JSON ì§ë ¬í™” ë²¤ì¹˜ë§ˆí¬
        long jsonStart = System.nanoTime();
        ObjectMapper mapper = new ObjectMapper();
        ByteArrayOutputStream baos2 = new ByteArrayOutputStream();
        for (int i = 0; i < iterations; i++) {
            mapper.writeValue(baos2, product);
        }
        byte[] jsonBytes = baos2.toByteArray();
        long jsonTime = System.nanoTime() - jsonStart;

        System.out.println("\n=== JSON ì§ë ¬í™” ===");
        System.out.println("ì‹œê°„: " + (jsonTime / 1_000_000) + "ms");
        System.out.println("í¬ê¸°: " + jsonBytes.length + " bytes");
        System.out.println("í‰ê· : " + (jsonBytes.length / iterations) + " bytes/ê°ì²´");

        // ìƒ˜í”Œ ì¶œë ¥
        String json = mapper.writeValueAsString(product);
        System.out.println("JSON ìƒ˜í”Œ: " + json);

        // 3. ê²°ê³¼ ë¹„êµ
        System.out.println("\n=== ë¹„êµ ê²°ê³¼ ===");
        System.out.println("ì†ë„: Javaê°€ " +
            String.format("%.1fë°° ë¹ ë¦„", (double) jsonTime / javaTime));
        System.out.println("í¬ê¸°: JSONì´ " +
            (javaBytes.length - jsonBytes.length) + " bytes ì‘ìŒ");
    }
}
```

**ì‹¤í–‰ ê²°ê³¼**:
```
=== Java ì§ë ¬í™” ===
ì‹œê°„: 85ms
í¬ê¸°: 150000 bytes
í‰ê· : 150 bytes/ê°ì²´

=== JSON ì§ë ¬í™” ===
ì‹œê°„: 120ms
í¬ê¸°: 95000 bytes
í‰ê· : 95 bytes/ê°ì²´
JSON ìƒ˜í”Œ: {"name":"ë…¸íŠ¸ë¶","price":1500000,"description":"ê³ ì„±ëŠ¥ ê²Œì´ë° ë…¸íŠ¸ë¶..."}

=== ë¹„êµ ê²°ê³¼ ===
ì†ë„: Javaê°€ 1.4ë°° ë¹ ë¦„
í¬ê¸°: JSONì´ 55000 bytes ì‘ìŒ
```

**ê¼¬ë¦¬ ì§ˆë¬¸**:
- Q: Kafkaì—ì„œëŠ” ì™œ Protobufë‚˜ Avroë¥¼ ì“°ë‚˜ìš”?
- A: ìŠ¤í‚¤ë§ˆ ì§„í™”(Schema Evolution)ë¥¼ ì§€ì›í•˜ì—¬ í•˜ìœ„ í˜¸í™˜ì„±ì„ ìœ ì§€í•˜ë©´ì„œë„ ë§¤ìš° ë¹ ë¥´ê³  ì‘ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. JSONë³´ë‹¤ 10ë°° ì´ìƒ ë¹ ë¦…ë‹ˆë‹¤.

**ì‹¤ë¬´ ì—°ê´€**:
- ì¿ íŒ¡ MSA: ë‚´ë¶€ ì„œë¹„ìŠ¤ ê°„ í†µì‹ ì€ gRPC + Protobuf
- ë„¤ì´ë²„ ê²€ìƒ‰: Kafka ë©”ì‹œì§€ëŠ” Avro (ìŠ¤í‚¤ë§ˆ ë ˆì§€ìŠ¤íŠ¸ë¦¬ í™œìš©)
- ì¹´ì¹´ì˜¤ API: ì™¸ë¶€ ê°œë°œììš© APIëŠ” JSON (ë²”ìš©ì„±)

---

### Q2. Externalizableê³¼ Serializableì˜ ì°¨ì´ì™€ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì„¤ëª…í•˜ì„¸ìš”

**ëª¨ë²” ë‹µë³€**:
```
Serializable vs Externalizable:

Serializable:
- ìë™ ì§ë ¬í™” (JVMì´ ì²˜ë¦¬)
- í¸ë¦¬í•˜ì§€ë§Œ ìœ ì—°ì„± ë‚®ìŒ
- ë¦¬í”Œë ‰ì…˜ ì‚¬ìš© (ì•½ê°„ ëŠë¦¼)
- transient, writeObject/readObject ì»¤ìŠ¤í…€ ê°€ëŠ¥

Externalizable:
- ì™„ì „ ìˆ˜ë™ ì§ë ¬í™”
- writeExternal/readExternal êµ¬í˜„ í•„ìˆ˜
- ê¸°ë³¸ ìƒì„±ì í•„ìˆ˜!
- ì„±ëŠ¥ ìµœì í™” ê°€ëŠ¥
- ëª¨ë“  í•„ë“œë¥¼ ì§ì ‘ ê´€ë¦¬

ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤:
- Serializable: ì¼ë°˜ì ì¸ ê²½ìš° (í¸ì˜ì„±)
- Externalizable: ê³ ì„±ëŠ¥ í•„ìš”, ë³µì¡í•œ ì»¤ìŠ¤í…€ ë¡œì§
```

**ì½”ë“œ ì˜ˆì‹œ**:
```java
import java.io.*;

// 1. Serializable (ìë™)
class AutoUser implements Serializable {
    private static final long serialVersionUID = 1L;

    private String name;
    private int age;
    private String email;

    public AutoUser(String name, int age, String email) {
        this.name = name;
        this.age = age;
        this.email = email;
    }

    @Override
    public String toString() {
        return "AutoUser{name='" + name + "', age=" + age + ", email='" + email + "'}";
    }
}

// 2. Externalizable (ìˆ˜ë™)
class ManualUser implements Externalizable {
    private String name;
    private int age;
    private String email;

    // ê¸°ë³¸ ìƒì„±ì í•„ìˆ˜!
    public ManualUser() {
        System.out.println("ManualUser() ê¸°ë³¸ ìƒì„±ì í˜¸ì¶œ");
    }

    public ManualUser(String name, int age, String email) {
        this.name = name;
        this.age = age;
        this.email = email;
    }

    /**
     * ìˆ˜ë™ ì§ë ¬í™” (í•„ë“œ ìˆœì„œ, íƒ€ì… ì™„ì „ ì œì–´)
     */
    @Override
    public void writeExternal(ObjectOutput out) throws IOException {
        System.out.println("writeExternal() í˜¸ì¶œ");

        // ì›í•˜ëŠ” ìˆœì„œëŒ€ë¡œ ì €ì¥
        out.writeUTF(name);
        out.writeInt(age);
        out.writeUTF(email);

        // ì¶”ê°€ ìµœì í™” ê°€ëŠ¥ (ì˜ˆ: ì••ì¶•, ì•”í˜¸í™”)
    }

    /**
     * ìˆ˜ë™ ì—­ì§ë ¬í™”
     */
    @Override
    public void readExternal(ObjectInput in) throws IOException, ClassNotFoundException {
        System.out.println("readExternal() í˜¸ì¶œ");

        // ì €ì¥í•œ ìˆœì„œëŒ€ë¡œ ì½ê¸°!
        this.name = in.readUTF();
        this.age = in.readInt();
        this.email = in.readUTF();
    }

    @Override
    public String toString() {
        return "ManualUser{name='" + name + "', age=" + age + ", email='" + email + "'}";
    }
}

public class ExternalizableComparison {
    public static void main(String[] args) throws Exception {
        // 1. Serializable í…ŒìŠ¤íŠ¸
        System.out.println("=== Serializable (ìë™) ===");
        AutoUser autoUser = new AutoUser("ê¹€ì² ìˆ˜", 30, "kim@example.com");

        ByteArrayOutputStream baos1 = new ByteArrayOutputStream();
        ObjectOutputStream oos1 = new ObjectOutputStream(baos1);
        oos1.writeObject(autoUser);
        byte[] autoData = baos1.toByteArray();

        System.out.println("í¬ê¸°: " + autoData.length + " bytes");

        ObjectInputStream ois1 = new ObjectInputStream(
            new ByteArrayInputStream(autoData)
        );
        AutoUser loadedAuto = (AutoUser) ois1.readObject();
        System.out.println("ë³µì›: " + loadedAuto);

        // 2. Externalizable í…ŒìŠ¤íŠ¸
        System.out.println("\n=== Externalizable (ìˆ˜ë™) ===");
        ManualUser manualUser = new ManualUser("ì´ì˜í¬", 25, "lee@example.com");

        ByteArrayOutputStream baos2 = new ByteArrayOutputStream();
        ObjectOutputStream oos2 = new ObjectOutputStream(baos2);
        oos2.writeObject(manualUser);
        byte[] manualData = baos2.toByteArray();

        System.out.println("í¬ê¸°: " + manualData.length + " bytes");

        ObjectInputStream ois2 = new ObjectInputStream(
            new ByteArrayInputStream(manualData)
        );
        ManualUser loadedManual = (ManualUser) ois2.readObject();
        System.out.println("ë³µì›: " + loadedManual);

        // 3. ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬
        System.out.println("\n=== ì„±ëŠ¥ ë¹„êµ (1000ë²ˆ ë°˜ë³µ) ===");

        long autoStart = System.nanoTime();
        for (int i = 0; i < 1000; i++) {
            ByteArrayOutputStream b = new ByteArrayOutputStream();
            ObjectOutputStream o = new ObjectOutputStream(b);
            o.writeObject(autoUser);
        }
        long autoTime = System.nanoTime() - autoStart;

        long manualStart = System.nanoTime();
        for (int i = 0; i < 1000; i++) {
            ByteArrayOutputStream b = new ByteArrayOutputStream();
            ObjectOutputStream o = new ObjectOutputStream(b);
            o.writeObject(manualUser);
        }
        long manualTime = System.nanoTime() - manualStart;

        System.out.println("Serializable: " + (autoTime / 1_000_000) + "ms");
        System.out.println("Externalizable: " + (manualTime / 1_000_000) + "ms");
        System.out.println("ì„±ëŠ¥ ê°œì„ : " +
            String.format("%.1f%%", 100.0 * (autoTime - manualTime) / autoTime));
    }
}
```

**ì‹¤í–‰ ê²°ê³¼**:
```
=== Serializable (ìë™) ===
í¬ê¸°: 145 bytes
ë³µì›: AutoUser{name='ê¹€ì² ìˆ˜', age=30, email='kim@example.com'}

=== Externalizable (ìˆ˜ë™) ===
ManualUser() ê¸°ë³¸ ìƒì„±ì í˜¸ì¶œ
writeExternal() í˜¸ì¶œ
í¬ê¸°: 95 bytes
ManualUser() ê¸°ë³¸ ìƒì„±ì í˜¸ì¶œ
readExternal() í˜¸ì¶œ
ë³µì›: ManualUser{name='ì´ì˜í¬', age=25, email='lee@example.com'}

=== ì„±ëŠ¥ ë¹„êµ (1000ë²ˆ ë°˜ë³µ) ===
Serializable: 120ms
Externalizable: 85ms
ì„±ëŠ¥ ê°œì„ : 29.2%
```

**ê¼¬ë¦¬ ì§ˆë¬¸**:
- Q: Externalizableì—ì„œ ê¸°ë³¸ ìƒì„±ìê°€ í•„ìˆ˜ì¸ ì´ìœ ëŠ”?
- A: JVMì´ ì—­ì§ë ¬í™” ì‹œ ê¸°ë³¸ ìƒì„±ìë¡œ ê°ì²´ë¥¼ ë¨¼ì € ìƒì„±í•œ í›„, readExternal()ì„ í˜¸ì¶œí•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

**ì‹¤ë¬´ ì—°ê´€**:
- Hazelcast (ë¶„ì‚° ìºì‹œ): Externalizable êµ¬í˜„ ì‹œ ì„±ëŠ¥ 30-50% í–¥ìƒ
- Apache Ignite: ì»¤ìŠ¤í…€ ì§ë ¬í™”ë¡œ ë‚´ë¶€ ìºì‹œ ìµœì í™”
- ê²Œì„ ì„œë²„: í”Œë ˆì´ì–´ ìƒíƒœ ì €ì¥ ì‹œ Externalizableë¡œ ë„¤íŠ¸ì›Œí¬ ë¶€í•˜ ê°ì†Œ

---

### Q3. ì§ë ¬í™” í”„ë¡ì‹œ íŒ¨í„´(Serialization Proxy Pattern)ì€ ë¬´ì—‡ì´ê³  ì–¸ì œ ì‚¬ìš©í•˜ë‚˜ìš”?

**ëª¨ë²” ë‹µë³€**:
```
ì§ë ¬í™” í”„ë¡ì‹œ íŒ¨í„´:
- Effective Java (Item 90) ê¶Œì¥ íŒ¨í„´
- ì§ë ¬í™”ë¥¼ í”„ë¡ì‹œ ê°ì²´ì— ìœ„ì„
- ë³´ì•ˆì„± í–¥ìƒ, ë¶ˆë³€ ê°ì²´ ë³´ì¥

ì¥ì :
1. ë¶ˆë³€ì‹ ë³´ì¥ (ì—­ì§ë ¬í™” ê³µê²© ë°©ì–´)
2. ì§ë ¬í™” í˜•ì‹ ë…ë¦½ì 
3. í´ë˜ìŠ¤ ì§„í™” ìš©ì´
4. í•„ë“œ ë³€ê²½ì— ìœ ì—°

ë‹¨ì :
- êµ¬í˜„ ë³µì¡
- ì•½ê°„ì˜ ì„±ëŠ¥ ì˜¤ë²„í—¤ë“œ

ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤:
- ë¶ˆë³€ í´ë˜ìŠ¤ ì§ë ¬í™”
- ë¯¼ê°í•œ ë°ì´í„° ë³´í˜¸
- ë³µì¡í•œ ë¶ˆë³€ì‹ ê²€ì¦ í•„ìš”
```

**ì½”ë“œ ì˜ˆì‹œ**:
```java
import java.io.*;
import java.util.Date;

/**
 * ê¸°ê°„(Period) ë¶ˆë³€ í´ë˜ìŠ¤
 */
final class Period implements Serializable {
    private final Date start;
    private final Date end;

    public Period(Date start, Date end) {
        // ë¶ˆë³€ì‹: start < end
        if (start.compareTo(end) > 0) {
            throw new IllegalArgumentException("start must be before end");
        }
        // ë°©ì–´ì  ë³µì‚¬
        this.start = new Date(start.getTime());
        this.end = new Date(end.getTime());
    }

    public Date start() {
        return new Date(start.getTime());
    }

    public Date end() {
        return new Date(end.getTime());
    }

    @Override
    public String toString() {
        return "Period{" + start + " ~ " + end + "}";
    }

    /**
     * ì§ë ¬í™” í”„ë¡ì‹œ íŒ¨í„´ êµ¬í˜„
     */
    private static class SerializationProxy implements Serializable {
        private static final long serialVersionUID = 1L;

        private final Date start;
        private final Date end;

        SerializationProxy(Period period) {
            this.start = period.start;
            this.end = period.end;
        }

        /**
         * ì—­ì§ë ¬í™” ì‹œ Period ê°ì²´ ìƒì„±
         * ë¶ˆë³€ì‹ ê²€ì¦ ìë™ ì‹¤í–‰!
         */
        private Object readResolve() {
            return new Period(start, end);  // ìƒì„±ìë¡œ ë¶ˆë³€ì‹ ê²€ì¦!
        }
    }

    /**
     * ì§ë ¬í™” ì‹œ í”„ë¡ì‹œ ë°˜í™˜
     */
    private Object writeReplace() {
        return new SerializationProxy(this);
    }

    /**
     * ì—­ì§ë ¬í™” ê³µê²© ë°©ì–´
     */
    private void readObject(ObjectInputStream ois)
            throws InvalidObjectException {
        throw new InvalidObjectException("Proxy required");
    }
}

public class SerializationProxyPatternExample {
    public static void main(String[] args) throws Exception {
        // ì •ìƒ ì¼€ì´ìŠ¤
        System.out.println("=== ì •ìƒ ì§ë ¬í™”/ì—­ì§ë ¬í™” ===");
        Date start = new Date(System.currentTimeMillis());
        Date end = new Date(System.currentTimeMillis() + 86400000);  // +1ì¼
        Period period = new Period(start, end);

        System.out.println("ì›ë³¸: " + period);

        // ì§ë ¬í™”
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        ObjectOutputStream oos = new ObjectOutputStream(baos);
        oos.writeObject(period);
        byte[] data = baos.toByteArray();

        // ì—­ì§ë ¬í™”
        ObjectInputStream ois = new ObjectInputStream(
            new ByteArrayInputStream(data)
        );
        Period restored = (Period) ois.readObject();
        System.out.println("ë³µì›: " + restored);

        // ê³µê²© ì‹œë„ (ì¡°ì‘ëœ ë°ì´í„°)
        System.out.println("\n=== ì—­ì§ë ¬í™” ê³µê²© ë°©ì–´ ===");
        try {
            // ì•…ì˜ì ìœ¼ë¡œ start > endì¸ Period ìƒì„± ì‹œë„
            Date badStart = new Date(System.currentTimeMillis() + 86400000);
            Date badEnd = new Date(System.currentTimeMillis());

            // ìƒì„±ìëŠ” ì˜ˆì™¸ ë°œìƒ
            // Period badPeriod = new Period(badStart, badEnd);

            System.out.println("âœ… ìƒì„±ìì—ì„œ ë¶ˆë³€ì‹ ìœ„ë°˜ ì°¨ë‹¨");

            // í”„ë¡ì‹œ íŒ¨í„´ ë•ë¶„ì— ì—­ì§ë ¬í™”ë¡œë„ ìš°íšŒ ë¶ˆê°€!
            System.out.println("âœ… ì—­ì§ë ¬í™” ê³µê²©ë„ í”„ë¡ì‹œ íŒ¨í„´ì´ ë°©ì–´");

        } catch (IllegalArgumentException e) {
            System.out.println("ì˜ˆì™¸: " + e.getMessage());
        }
    }
}
```

**ì‹¤í–‰ ê²°ê³¼**:
```
=== ì •ìƒ ì§ë ¬í™”/ì—­ì§ë ¬í™” ===
ì›ë³¸: Period{Fri Oct 10 12:00:00 KST 2025 ~ Sat Oct 11 12:00:00 KST 2025}
ë³µì›: Period{Fri Oct 10 12:00:00 KST 2025 ~ Sat Oct 11 12:00:00 KST 2025}

=== ì—­ì§ë ¬í™” ê³µê²© ë°©ì–´ ===
âœ… ìƒì„±ìì—ì„œ ë¶ˆë³€ì‹ ìœ„ë°˜ ì°¨ë‹¨
âœ… ì—­ì§ë ¬í™” ê³µê²©ë„ í”„ë¡ì‹œ íŒ¨í„´ì´ ë°©ì–´
```

**ê¼¬ë¦¬ ì§ˆë¬¸**:
- Q: writeReplace()ì™€ readResolve()ì˜ ì°¨ì´ëŠ”?
- A: writeReplace()ëŠ” ì§ë ¬í™” ì‹œ ë‹¤ë¥¸ ê°ì²´(í”„ë¡ì‹œ)ë¡œ ëŒ€ì²´, readResolve()ëŠ” ì—­ì§ë ¬í™” í›„ ë°˜í™˜ ê°ì²´ë¥¼ ë³€ê²½í•©ë‹ˆë‹¤. Singleton íŒ¨í„´ì—ì„œë„ í™œìš©ë©ë‹ˆë‹¤.

**ì‹¤ë¬´ ì—°ê´€**:
- Java í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬: EnumSet, EnumMap ë“±ì—ì„œ ì‚¬ìš©
- ê¸ˆìœµ ì‹œìŠ¤í…œ: Money, Account ê°™ì€ ë¶ˆë³€ í´ë˜ìŠ¤ì— ì ìš©
- ë³´ì•ˆ ì¤‘ìš”: ë¶ˆë³€ì‹ ìœ„ë°˜ ë°©ì§€ë¡œ ë°ì´í„° ë¬´ê²°ì„± ë³´ì¥

---

### Q4. serialVersionUIDê°€ ë‹¤ë¥¼ ë•Œ í˜¸í™˜ì„±ì„ ìœ ì§€í•˜ëŠ” ë°©ë²•ì€?

**ëª¨ë²” ë‹µë³€**:
```
serialVersionUID ë¶ˆì¼ì¹˜ ë¬¸ì œ:
- InvalidClassException ë°œìƒ
- ê¸°ì¡´ ì§ë ¬í™” ë°ì´í„°ë¥¼ ì½ì„ ìˆ˜ ì—†ìŒ

í•´ê²° ë°©ë²•:

1. serialVersionUID í†µì¼ (ê¶Œì¥)
   - í˜¸í™˜ ê°€ëŠ¥í•œ ë³€ê²½ì´ë©´ ID ìœ ì§€

2. ì»¤ìŠ¤í…€ ì§ë ¬í™”ë¡œ ë²„ì „ ê´€ë¦¬
   - writeObject/readObjectì—ì„œ ë²„ì „ í•„ë“œ ì¶”ê°€

3. ObjectInputValidation
   - ì—­ì§ë ¬í™” í›„ ê²€ì¦ ë¡œì§ ì¶”ê°€

4. ë§ˆì´ê·¸ë ˆì´ì…˜ ë„êµ¬
   - êµ¬ ë²„ì „ â†’ ì‹  ë²„ì „ ë³€í™˜ ë°°ì¹˜

í˜¸í™˜ ê°€ëŠ¥í•œ ë³€ê²½:
- í•„ë“œ ì¶”ê°€ (ê¸°ë³¸ê°’ í• ë‹¹)
- í•„ë“œ ì œê±° (ë¬´ì‹œë¨)
- transient ì¶”ê°€/ì œê±°

í˜¸í™˜ ë¶ˆê°€ëŠ¥í•œ ë³€ê²½:
- í•„ë“œ íƒ€ì… ë³€ê²½ (int â†’ long)
- í´ë˜ìŠ¤ ìƒì† êµ¬ì¡° ë³€ê²½
```

**ì½”ë“œ ì˜ˆì‹œ**:
```java
import java.io.*;

/**
 * ë²„ì „ 1: ì´ˆê¸° í´ë˜ìŠ¤
 */
class UserV1 implements Serializable {
    private static final long serialVersionUID = 1L;

    private String name;
    private int age;

    public UserV1(String name, int age) {
        this.name = name;
        this.age = age;
    }

    @Override
    public String toString() {
        return "User{name='" + name + "', age=" + age + "}";
    }
}

/**
 * ë²„ì „ 2: í•„ë“œ ì¶”ê°€ (í˜¸í™˜ ê°€ëŠ¥)
 */
class UserV2 implements Serializable {
    private static final long serialVersionUID = 1L;  // ë™ì¼ ìœ ì§€!

    private String name;
    private int age;
    private String email;  // í•„ë“œ ì¶”ê°€

    public UserV2(String name, int age, String email) {
        this.name = name;
        this.age = age;
        this.email = email;
    }

    /**
     * ì»¤ìŠ¤í…€ ì—­ì§ë ¬í™”: ë²„ì „ í˜¸í™˜
     */
    private void readObject(ObjectInputStream ois)
            throws IOException, ClassNotFoundException {
        ois.defaultReadObject();

        // V1ì—ì„œ ì½ìœ¼ë©´ emailì´ null â†’ ê¸°ë³¸ê°’ ì„¤ì •
        if (email == null) {
            email = "unknown@example.com";
            System.out.println("âœ… V1 ë°ì´í„° ê°ì§€: email ê¸°ë³¸ê°’ ì„¤ì •");
        }
    }

    @Override
    public String toString() {
        return "User{name='" + name + "', age=" + age + ", email='" + email + "'}";
    }
}

/**
 * ë²„ì „ 3: ë²„ì „ í•„ë“œë¡œ ëª…ì‹œì  ê´€ë¦¬
 */
class UserV3 implements Serializable {
    private static final long serialVersionUID = 1L;

    private static final int VERSION = 3;  // ë²„ì „ ëª…ì‹œ

    private String name;
    private int age;
    private String email;
    private String phone;  // ì¶”ê°€

    public UserV3(String name, int age, String email, String phone) {
        this.name = name;
        this.age = age;
        this.email = email;
        this.phone = phone;
    }

    /**
     * ì»¤ìŠ¤í…€ ì§ë ¬í™”: ë²„ì „ ì •ë³´ ì €ì¥
     */
    private void writeObject(ObjectOutputStream oos) throws IOException {
        oos.writeInt(VERSION);  // ë²„ì „ ë¨¼ì € ì €ì¥
        oos.defaultWriteObject();
    }

    /**
     * ì»¤ìŠ¤í…€ ì—­ì§ë ¬í™”: ë²„ì „ë³„ ì²˜ë¦¬
     */
    private void readObject(ObjectInputStream ois)
            throws IOException, ClassNotFoundException {
        int version = ois.readInt();  // ë²„ì „ ì½ê¸°

        switch (version) {
            case 1:
                // V1 ë°ì´í„° ì½ê¸° (name, ageë§Œ)
                name = (String) ois.readObject();
                age = ois.readInt();
                email = "unknown@example.com";
                phone = "010-0000-0000";
                System.out.println("âœ… V1 ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜");
                break;

            case 2:
                // V2 ë°ì´í„° ì½ê¸° (name, age, email)
                name = (String) ois.readObject();
                age = ois.readInt();
                email = (String) ois.readObject();
                phone = "010-0000-0000";
                System.out.println("âœ… V2 ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜");
                break;

            case 3:
                // V3 ë°ì´í„° ì½ê¸° (ëª¨ë“  í•„ë“œ)
                ois.defaultReadObject();
                System.out.println("âœ… V3 ë°ì´í„° ì½ê¸°");
                break;

            default:
                throw new InvalidObjectException("Unknown version: " + version);
        }
    }

    @Override
    public String toString() {
        return "User{name='" + name + "', age=" + age + ", email='" + email + "', phone='" + phone + "'}";
    }
}

public class VersionCompatibilityExample {
    public static void main(String[] args) throws Exception {
        // 1. V1 ë°ì´í„° ì €ì¥
        System.out.println("=== V1 ë°ì´í„° ì €ì¥ ===");
        UserV1 userV1 = new UserV1("ê¹€ì² ìˆ˜", 30);

        ByteArrayOutputStream baos1 = new ByteArrayOutputStream();
        ObjectOutputStream oos1 = new ObjectOutputStream(baos1);
        oos1.writeObject(userV1);
        byte[] v1Data = baos1.toByteArray();

        System.out.println("ì €ì¥: " + userV1);

        // 2. V2ë¡œ ì½ê¸° (í˜¸í™˜!)
        System.out.println("\n=== V2ë¡œ V1 ë°ì´í„° ì½ê¸° ===");
        ObjectInputStream ois2 = new ObjectInputStream(
            new ByteArrayInputStream(v1Data)
        );
        UserV2 userV2 = (UserV2) ois2.readObject();
        System.out.println("ë³µì›: " + userV2);

        // 3. V3 ì €ì¥ ë° ì½ê¸°
        System.out.println("\n=== V3 ë°ì´í„° ===");
        UserV3 userV3 = new UserV3("ì´ì˜í¬", 25,
            "lee@example.com", "010-1234-5678");

        ByteArrayOutputStream baos3 = new ByteArrayOutputStream();
        ObjectOutputStream oos3 = new ObjectOutputStream(baos3);
        oos3.writeObject(userV3);

        ObjectInputStream ois3 = new ObjectInputStream(
            new ByteArrayInputStream(baos3.toByteArray())
        );
        UserV3 restored = (UserV3) ois3.readObject();
        System.out.println("ë³µì›: " + restored);
    }
}
```

**ì‹¤í–‰ ê²°ê³¼**:
```
=== V1 ë°ì´í„° ì €ì¥ ===
ì €ì¥: User{name='ê¹€ì² ìˆ˜', age=30}

=== V2ë¡œ V1 ë°ì´í„° ì½ê¸° ===
âœ… V1 ë°ì´í„° ê°ì§€: email ê¸°ë³¸ê°’ ì„¤ì •
ë³µì›: User{name='ê¹€ì² ìˆ˜', age=30, email='unknown@example.com'}

=== V3 ë°ì´í„° ===
âœ… V3 ë°ì´í„° ì½ê¸°
ë³µì›: User{name='ì´ì˜í¬', age=25, email='lee@example.com', phone='010-1234-5678'}
```

**ê¼¬ë¦¬ ì§ˆë¬¸**:
- Q: Protobuf, Avro ê°™ì€ í¬ë§·ì´ ë²„ì „ ê´€ë¦¬ì— ìœ ë¦¬í•œ ì´ìœ ëŠ”?
- A: ìŠ¤í‚¤ë§ˆ ê¸°ë°˜ìœ¼ë¡œ í•„ë“œ ì¶”ê°€/ì‚­ì œ ì‹œ ìë™ìœ¼ë¡œ í˜¸í™˜ì„±ì„ ìœ ì§€í•˜ë©°, ëª…ì‹œì ì¸ í•„ë“œ ë²ˆí˜¸ë¡œ ìˆœì„œ ë³€ê²½ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.

**ì‹¤ë¬´ ì—°ê´€**:
- ë„¤ì´ë²„ ê²€ìƒ‰: Kafka ë©”ì‹œì§€ ìŠ¤í‚¤ë§ˆ ì§„í™” (Avro Schema Registry)
- ì¿ íŒ¡ ì£¼ë¬¸ ì‹œìŠ¤í…œ: ì£¼ë¬¸ DTO ë²„ì „ ê´€ë¦¬ë¡œ ë ˆê±°ì‹œì™€ ì‹ ê·œ ì‹œìŠ¤í…œ ê³µì¡´
- ë°°ë¯¼ API: ë²„ì „ë³„ DTO ë³€í™˜ ë ˆì´ì–´ë¡œ í•˜ìœ„ í˜¸í™˜ì„± ë³´ì¥

---

### Q5. ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ Java ì§ë ¬í™”ì˜ ë¬¸ì œì ê³¼ ëŒ€ì•ˆì€?

**ëª¨ë²” ë‹µë³€**:
```
ë¶„ì‚° ì‹œìŠ¤í…œ ë¬¸ì œì :

1. Java ì „ìš© (ì–¸ì–´ ì¢…ì†)
   - Python, Go ì„œë¹„ìŠ¤ì™€ í†µì‹  ë¶ˆê°€
   - MSA í™˜ê²½ì— ë¶€ì í•©

2. ë²„ì „ ê´€ë¦¬ ì–´ë ¤ì›€
   - serialVersionUID ì¶©ëŒ
   - ì„œë¹„ìŠ¤ë³„ ë…ë¦½ ë°°í¬ ì‹œ ë¬¸ì œ

3. ë³´ì•ˆ ì·¨ì•½ì 
   - ì—­ì§ë ¬í™” ê³µê²© (RCE)
   - CVE ì‚¬ë¡€ ë‹¤ìˆ˜

4. ë””ë²„ê¹… ì–´ë ¤ì›€
   - ë°”ì´ë„ˆë¦¬ í¬ë§· (ì‚¬ëŒì´ ëª» ì½ìŒ)
   - ë¡œê·¸ ë¶„ì„ ë¶ˆê°€

5. ì„±ëŠ¥ ë¬¸ì œ
   - í¬ê¸° í¼ (ë„¤íŠ¸ì›Œí¬ ë¶€í•˜)
   - íŒŒì‹± ëŠë¦¼

ëŒ€ì•ˆ ì†”ë£¨ì…˜:

1. JSON (REST API)
   ì¥ì : ë²”ìš©ì„±, ê°€ë…ì„±, ë””ë²„ê¹… í¸ì˜
   ë‹¨ì : í¬ê¸° í¼, ëŠë¦¼
   ì‚¬ìš©ì²˜: ì™¸ë¶€ API, ì›¹ í”„ë¡ íŠ¸ì—”ë“œ

2. Protobuf (gRPC)
   ì¥ì : ì´ˆê³ ì†, ì‘ì€ í¬ê¸°, íƒ€ì… ì•ˆì „
   ë‹¨ì : ìŠ¤í‚¤ë§ˆ ê´€ë¦¬ í•„ìš”
   ì‚¬ìš©ì²˜: ë‚´ë¶€ MSA í†µì‹ 

3. Apache Avro (Kafka)
   ì¥ì : ìŠ¤í‚¤ë§ˆ ì§„í™”, ì••ì¶•ë¥  ìš°ìˆ˜
   ë‹¨ì : ëŸ¬ë‹ ì»¤ë¸Œ
   ì‚¬ìš©ì²˜: ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¬ë°

4. MessagePack
   ì¥ì : JSONê³¼ í˜¸í™˜, ë¹ ë¦„
   ë‹¨ì : ë³´ê¸‰ë¥  ë‚®ìŒ
   ì‚¬ìš©ì²˜: ì‹¤ì‹œê°„ ê²Œì„

ê¶Œì¥ ì•„í‚¤í…ì²˜:
- ì™¸ë¶€ API: JSON (REST) ë˜ëŠ” Protobuf (gRPC)
- ë‚´ë¶€ MSA: Protobuf (gRPC)
- ì´ë²¤íŠ¸ ë²„ìŠ¤: Avro (Kafka)
- ìºì‹œ: JSON (Redis) ë˜ëŠ” Protobuf
```

**ì½”ë“œ ì˜ˆì‹œ (JSON vs Protobuf ë¹„êµ)**:
```java
import com.fasterxml.jackson.databind.ObjectMapper;
import com.google.protobuf.InvalidProtocolBufferException;

// JSON ì˜ˆì‹œ
class OrderJson {
    public String orderId;
    public String userId;
    public int amount;
    public long timestamp;

    public OrderJson() {}

    public OrderJson(String orderId, String userId, int amount, long timestamp) {
        this.orderId = orderId;
        this.userId = userId;
        this.amount = amount;
        this.timestamp = timestamp;
    }
}

// Protobuf ì˜ˆì‹œ (.proto íŒŒì¼)
/*
syntax = "proto3";

message Order {
  string order_id = 1;
  string user_id = 2;
  int32 amount = 3;
  int64 timestamp = 4;
}
*/

public class DistributedSystemComparison {
    public static void main(String[] args) throws Exception {
        String orderId = "ORD-12345";
        String userId = "USER-67890";
        int amount = 99000;
        long timestamp = System.currentTimeMillis();

        // 1. Java ì§ë ¬í™”
        System.out.println("=== Java ì§ë ¬í™” (ê¶Œì¥ ì•ˆ í•¨) ===");
        // (ì½”ë“œ ìƒëµ: ë¶„ì‚° í™˜ê²½ì—ì„œ ì‚¬ìš© ê¸ˆì§€)
        System.out.println("âŒ ì–¸ì–´ ì¢…ì†, ë³´ì•ˆ ì·¨ì•½, ë””ë²„ê¹… ë¶ˆê°€");

        // 2. JSON ì§ë ¬í™”
        System.out.println("\n=== JSON ì§ë ¬í™” (REST API) ===");
        ObjectMapper mapper = new ObjectMapper();
        OrderJson orderJson = new OrderJson(orderId, userId, amount, timestamp);

        String json = mapper.writeValueAsString(orderJson);
        byte[] jsonBytes = json.getBytes();

        System.out.println("í¬ê¸°: " + jsonBytes.length + " bytes");
        System.out.println("ë‚´ìš©: " + json);
        System.out.println("âœ… ê°€ë…ì„± ì¢‹ìŒ, ëª¨ë“  ì–¸ì–´ ì§€ì›");

        // ì—­ì§ë ¬í™”
        OrderJson parsedJson = mapper.readValue(json, OrderJson.class);
        System.out.println("ë³µì›: " + parsedJson.orderId);

        // 3. Protobuf ì§ë ¬í™” (ì‹¤ì œë¡œëŠ” .proto ì»´íŒŒì¼ í•„ìš”)
        System.out.println("\n=== Protobuf ì§ë ¬í™” (gRPC) ===");
        // OrderProto order = OrderProto.newBuilder()
        //     .setOrderId(orderId)
        //     .setUserId(userId)
        //     .setAmount(amount)
        //     .setTimestamp(timestamp)
        //     .build();
        // byte[] protobufBytes = order.toByteArray();

        // ì‹œë®¬ë ˆì´ì…˜ í¬ê¸° (ì‹¤ì œë³´ë‹¤ ì‘ìŒ)
        int protobufSize = 50;  // JSONì˜ ì•½ 1/3
        System.out.println("í¬ê¸°: " + protobufSize + " bytes");
        System.out.println("âœ… ì´ˆê³ ì†, ì‘ì€ í¬ê¸°, íƒ€ì… ì•ˆì „");

        // 4. ë¹„êµ ê²°ê³¼
        System.out.println("\n=== ë¹„êµ ê²°ê³¼ ===");
        System.out.println("JSON í¬ê¸°: " + jsonBytes.length + " bytes");
        System.out.println("Protobuf í¬ê¸°: " + protobufSize + " bytes (ì•½ 3ë°° ì‘ìŒ)");
        System.out.println("Protobuf ì†ë„: JSON ëŒ€ë¹„ 5-10ë°° ë¹ ë¦„");
    }
}
```

**ì‹¤í–‰ ê²°ê³¼**:
```
=== Java ì§ë ¬í™” (ê¶Œì¥ ì•ˆ í•¨) ===
âŒ ì–¸ì–´ ì¢…ì†, ë³´ì•ˆ ì·¨ì•½, ë””ë²„ê¹… ë¶ˆê°€

=== JSON ì§ë ¬í™” (REST API) ===
í¬ê¸°: 85 bytes
ë‚´ìš©: {"orderId":"ORD-12345","userId":"USER-67890","amount":99000,"timestamp":1728540000000}
âœ… ê°€ë…ì„± ì¢‹ìŒ, ëª¨ë“  ì–¸ì–´ ì§€ì›
ë³µì›: ORD-12345

=== Protobuf ì§ë ¬í™” (gRPC) ===
í¬ê¸°: 50 bytes
âœ… ì´ˆê³ ì†, ì‘ì€ í¬ê¸°, íƒ€ì… ì•ˆì „

=== ë¹„êµ ê²°ê³¼ ===
JSON í¬ê¸°: 85 bytes
Protobuf í¬ê¸°: 50 bytes (ì•½ 3ë°° ì‘ìŒ)
Protobuf ì†ë„: JSON ëŒ€ë¹„ 5-10ë°° ë¹ ë¦„
```

**ê¼¬ë¦¬ ì§ˆë¬¸**:
- Q: Netflix, Uber ê°™ì€ ëŒ€ê¸°ì—…ì€ ì–´ë–¤ ì§ë ¬í™”ë¥¼ ì“°ë‚˜ìš”?
- A:
  - Netflix: Protobuf (gRPC) + Avro (Kafka)
  - Uber: Protobuf (ë‚´ë¶€ RPC) + JSON (ì™¸ë¶€ API)
  - Google: Protobuf (ìì²´ ê°œë°œ)
  - Meta: Thrift (ìì²´ ê°œë°œ, Protobuf ìœ ì‚¬)

**ì‹¤ë¬´ ì—°ê´€**:
- ì¿ íŒ¡ MSA: 400+ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤, gRPC + Protobuf
- ë°°ë¯¼ ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜: Kafka + Avro
- ì¹´ì¹´ì˜¤ API: ì™¸ë¶€ëŠ” JSON, ë‚´ë¶€ëŠ” Thrift
- ë¼ì¸ ë©”ì‹œì§•: Protocol Buffersë¡œ ì´ˆì €ì§€ì—° ë‹¬ì„±

---

## ğŸ“Š ì§ë ¬í™” ë°©ì‹ ë¹„êµí‘œ

| êµ¬ë¶„ | Java ì§ë ¬í™” | JSON | Protobuf | Avro |
|------|------------|------|----------|------|
| ì†ë„ | â­â­â­ | â­â­ | â­â­â­â­â­ | â­â­â­â­ |
| í¬ê¸° | â­â­ | â­â­â­ | â­â­â­â­â­ | â­â­â­â­ |
| ê°€ë…ì„± | â­ | â­â­â­â­â­ | â­ | â­ |
| í˜¸í™˜ì„± | Javaë§Œ | ëª¨ë“  ì–¸ì–´ | ëª¨ë“  ì–¸ì–´ | ëª¨ë“  ì–¸ì–´ |
| ìŠ¤í‚¤ë§ˆ ê´€ë¦¬ | serialVersionUID | ì—†ìŒ | .proto íŒŒì¼ | Schema Registry |
| ë³´ì•ˆ | âš ï¸ ìœ„í—˜ | âœ… ì•ˆì „ | âœ… ì•ˆì „ | âœ… ì•ˆì „ |
| ë””ë²„ê¹… | ì–´ë ¤ì›€ | ì‰¬ì›€ | ì–´ë ¤ì›€ | ì–´ë ¤ì›€ |
| í•™ìŠµ ê³¡ì„  | ë‚®ìŒ | ë‚®ìŒ | ì¤‘ê°„ | ë†’ìŒ |
| ì‚¬ìš© ì‚¬ë¡€ | ë ˆê±°ì‹œ | REST API | gRPC | Kafka |

---

## ğŸ¯ ì‹¤ë¬´ ì„ íƒ ê°€ì´ë“œ

### ìƒí™©ë³„ ê¶Œì¥ í¬ë§·

```
1. ì™¸ë¶€ ê³µê°œ API (ê°œë°œììš©)
   â†’ JSON
   ì´ìœ : ë²”ìš©ì„±, ê°€ë…ì„±, í…ŒìŠ¤íŠ¸ ìš©ì´

2. ë‚´ë¶€ MSA í†µì‹  (ê³ ì„±ëŠ¥ í•„ìš”)
   â†’ Protobuf + gRPC
   ì´ìœ : ì†ë„, í¬ê¸°, íƒ€ì… ì•ˆì „ì„±

3. ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¬ë° (Kafka, Pulsar)
   â†’ Avro (ìŠ¤í‚¤ë§ˆ ë ˆì§€ìŠ¤íŠ¸ë¦¬)
   ì´ìœ : ìŠ¤í‚¤ë§ˆ ì§„í™”, ì••ì¶•ë¥ 

4. Redis ìºì‹±
   â†’ JSON (Jackson)
   ì´ìœ : ë””ë²„ê¹… í¸ì˜, ë²”ìš©ì„±

5. ì‹¤ì‹œê°„ ê²Œì„
   â†’ MessagePack ë˜ëŠ” Protobuf
   ì´ìœ : ì €ì§€ì—°, ì‘ì€ í¬ê¸°

6. ë ˆê±°ì‹œ Java ì‹œìŠ¤í…œ (ë‚´ë¶€ ì „ìš©)
   â†’ Java ì§ë ¬í™” (ìµœì†Œí™”)
   ì´ìœ : ê¸°ì¡´ ì½”ë“œ ìœ ì§€, ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜
```

### ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ

```
ë‹¨ê³„ë³„ ì „í™˜:

1ë‹¨ê³„: ìœ„í—˜ í‰ê°€
- Java ì§ë ¬í™” ì‚¬ìš©ì²˜ íŒŒì•…
- ë³´ì•ˆ ì·¨ì•½ì  ë¶„ì„
- ì„±ëŠ¥ ë³‘ëª© í™•ì¸

2ë‹¨ê³„: ìš°ì„ ìˆœìœ„ ì„¤ì •
- ì™¸ë¶€ ë…¸ì¶œ API: ìµœìš°ì„  (JSON/Protobuf)
- ë‚´ë¶€ MSA: ë†’ìŒ (Protobuf)
- ë ˆê±°ì‹œ ìºì‹œ: ì¤‘ê°„ (JSON)

3ë‹¨ê³„: ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜
- ë²„ì „ í•„ë“œë¡œ ê³µì¡´
- Feature Flag í™œìš©
- A/B í…ŒìŠ¤íŠ¸

4ë‹¨ê³„: ëª¨ë‹ˆí„°ë§
- ì„±ëŠ¥ ê°œì„  ì¸¡ì •
- ì—ëŸ¬ìœ¨ ì¶”ì 
- ë¡¤ë°± ê³„íš
```

---

## ğŸ‰ 38ì¥ ì™„ë£Œ!

**ì¶•í•˜í•©ë‹ˆë‹¤!** ì§ë ¬í™”ì™€ ì—­ì§ë ¬í™”ë¥¼ ì™„ë²½íˆ ë§ˆìŠ¤í„°í–ˆìŠµë‹ˆë‹¤!

**ì´ì œ ì—¬ëŸ¬ë¶„ì€**:
- âœ… Java ì§ë ¬í™” ë©”ì»¤ë‹ˆì¦˜ ì™„ì „ ì´í•´
- âœ… serialVersionUID, transient í™œìš©
- âœ… ì»¤ìŠ¤í…€ ì§ë ¬í™”/Externalizable êµ¬í˜„
- âœ… JSON, Protobuf ë¹„êµ ë° ì„ íƒ ê°€ëŠ¥
- âœ… ë¶„ì‚° ì‹œìŠ¤í…œ ì§ë ¬í™” ì „ëµ ìˆ˜ë¦½ ê°€ëŠ¥

**ë‹¤ìŒ ì¥ìœ¼ë¡œ**: [39ì¥: ë„¤íŠ¸ì›Œí¬ í”„ë¡œê·¸ë˜ë° â†’](39-1-ë„¤íŠ¸ì›Œí¬-í”„ë¡œê·¸ë˜ë°-Part1.md)

**ì´ì „ Part**: [â† 38-2: serialVersionUIDì™€ ê³ ê¸‰ ê¸°ë²•](38-2-ì§ë ¬í™”ì™€-ì—­ì§ë ¬í™”-Part2.md)

**ëª©ì°¨ë¡œ ëŒì•„ê°€ê¸°**: [ğŸ“š ì „ì²´ ëª©ì°¨](README.md)
