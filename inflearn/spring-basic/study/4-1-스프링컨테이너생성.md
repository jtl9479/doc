# 4-1. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±

## ëª©ì°¨
1. [ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë€?](#ìŠ¤í”„ë§-ì»¨í…Œì´ë„ˆë€)
2. [ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„± ê³¼ì •](#ìŠ¤í”„ë§-ì»¨í…Œì´ë„ˆ-ìƒì„±-ê³¼ì •)
3. [ApplicationContextì˜ ì—­í• ](#applicationcontextì˜-ì—­í• )
4. [ì‹¤ìŠµ ì½”ë“œ](#ì‹¤ìŠµ-ì½”ë“œ)
5. [í•µì‹¬ ì •ë¦¬](#í•µì‹¬-ì •ë¦¬)

---

## ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë€?

**ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ(Spring Container)**ëŠ” ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì˜ í•µì‹¬ ê°œë…ìœ¼ë¡œ, **ê°ì²´(ë¹ˆ)ì˜ ìƒì„±, ê´€ë¦¬, ì˜ì¡´ì„± ì£¼ì…ì„ ìë™ìœ¼ë¡œ ì²˜ë¦¬**í•´ì£¼ëŠ” ì»¨í…Œì´ë„ˆì…ë‹ˆë‹¤.

### ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ í•µì‹¬ ì—­í• 

```mermaid
graph TB
    A[ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ] --> B[ê°ì²´ ìƒì„±]
    A --> C[ì˜ì¡´ì„± ì£¼ì…]
    A --> D[ìƒëª…ì£¼ê¸° ê´€ë¦¬]
    A --> E[ì„¤ì • ì •ë³´ ê´€ë¦¬]

    B --> F[AppConfig ì½ê¸°]
    C --> G[DI ìˆ˜í–‰]
    D --> H[ì´ˆê¸°í™”/ì†Œë©¸]
    E --> I[@Configuration/@Bean]
```

### ì£¼ìš” íŠ¹ì§•

1. **IoC (Inversion of Control) êµ¬í˜„**
   - ê°ì²´ ìƒì„±ê³¼ ê´€ë¦¬ì˜ ì£¼ì²´ê°€ ê°œë°œì â†’ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¡œ ì—­ì „
   - ê°œë°œìëŠ” ì„¤ì • ì •ë³´ë§Œ ì œê³µí•˜ë©´ ë¨

2. **DI (Dependency Injection) ìë™í™”**
   - ê°ì²´ ê°„ì˜ ì˜ì¡´ê´€ê³„ë¥¼ ìë™ìœ¼ë¡œ ì£¼ì…
   - ëŠìŠ¨í•œ ê²°í•©(Loose Coupling) ì‹¤í˜„

3. **ì‹±ê¸€í†¤ íŒ¨í„´ ì ìš©**
   - ê¸°ë³¸ì ìœ¼ë¡œ ë¹ˆì„ ì‹±ê¸€í†¤ìœ¼ë¡œ ê´€ë¦¬
   - ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±ê³¼ ì„±ëŠ¥ í–¥ìƒ

---

## ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„± ê³¼ì •

ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë‹¨ê³„ë¥¼ ê±°ì³ ìƒì„±ë©ë‹ˆë‹¤.

### 1ë‹¨ê³„: ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±

```java
// ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±
ApplicationContext applicationContext =
    new AnnotationConfigApplicationContext(AppConfig.class);
```

**ì½”ë“œ ì„¤ëª…:**
- `ApplicationContext`: ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ì¸í„°í˜ì´ìŠ¤
- `AnnotationConfigApplicationContext`: Java ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ ì„¤ì •ì„ ì‚¬ìš©í•˜ëŠ” êµ¬í˜„ì²´
- `AppConfig.class`: ìŠ¤í”„ë§ ë¹ˆ ì„¤ì • ì •ë³´ë¥¼ ë‹´ê³  ìˆëŠ” í´ë˜ìŠ¤

```mermaid
graph LR
    A[new AnnotationConfigApplicationContext] --> B[ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±]
    B --> C[ë¹ˆ ì €ì¥ì†Œ ì´ˆê¸°í™”]
    C --> D[ì„¤ì • ì •ë³´ ë¡œë”© ì¤€ë¹„]
```

### 2ë‹¨ê³„: ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡

ì»¨í…Œì´ë„ˆê°€ ìƒì„±ë˜ë©´ ì„¤ì • í´ë˜ìŠ¤(AppConfig)ë¥¼ ì½ì–´ì„œ ë¹ˆì„ ë“±ë¡í•©ë‹ˆë‹¤.

```java
@Configuration
public class AppConfig {

    @Bean
    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }

    @Bean
    public MemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }

    @Bean
    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository(), discountPolicy());
    }

    @Bean
    public DiscountPolicy discountPolicy() {
        return new RateDiscountPolicy();
    }
}
```

**ë¹ˆ ë“±ë¡ ê³¼ì •:**

```mermaid
sequenceDiagram
    participant Container as ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ
    participant Config as AppConfig
    participant BeanStore as ë¹ˆ ì €ì¥ì†Œ

    Container->>Config: @Configuration í´ë˜ìŠ¤ íƒìƒ‰
    Config->>Container: @Bean ë©”ì„œë“œ ëª©ë¡ ë°˜í™˜

    loop ê° @Bean ë©”ì„œë“œ
        Container->>Config: ë©”ì„œë“œ í˜¸ì¶œ
        Config->>Container: ê°ì²´ ë°˜í™˜
        Container->>BeanStore: ë¹ˆ ì´ë¦„ìœ¼ë¡œ ì €ì¥
    end
```

**ë¹ˆ ì €ì¥ì†Œ êµ¬ì¡°:**

| ë¹ˆ ì´ë¦„ | ë¹ˆ ê°ì²´ |
|---------|---------|
| memberService | MemberServiceImpl@x001 |
| memberRepository | MemoryMemberRepository@x002 |
| orderService | OrderServiceImpl@x003 |
| discountPolicy | RateDiscountPolicy@x004 |

**ì¤‘ìš” ê·œì¹™:**
- ë¹ˆ ì´ë¦„ì€ ê¸°ë³¸ì ìœ¼ë¡œ **ë©”ì„œë“œ ì´ë¦„**ì„ ì‚¬ìš©
- ë¹ˆ ì´ë¦„ì€ **í•­ìƒ ë‹¤ë¥¸ ì´ë¦„**ì„ ë¶€ì—¬í•´ì•¼ í•¨
- ê°™ì€ ì´ë¦„ì„ ë¶€ì—¬í•˜ë©´ ë‹¤ë¥¸ ë¹ˆì´ ë¬´ì‹œë˜ê±°ë‚˜ ê¸°ì¡´ ë¹ˆì„ ë®ì–´ë²„ë¦¼
- ìµœê·¼ ìŠ¤í”„ë§ì—ì„œëŠ” ê°™ì€ ì´ë¦„ì˜ ë¹ˆì´ ìˆìœ¼ë©´ **ì˜¤ë¥˜ë¥¼ ë°œìƒ**ì‹œí‚´

**ë¹ˆ ì´ë¦„ ì§ì ‘ ì§€ì •:**
```java
@Bean(name = "memberService2")
public MemberService memberService() {
    return new MemberServiceImpl(memberRepository());
}
```

### 3ë‹¨ê³„: ìŠ¤í”„ë§ ë¹ˆ ì˜ì¡´ê´€ê³„ ì„¤ì • - ì¤€ë¹„

```mermaid
graph TB
    subgraph "ì¤€ë¹„ ë‹¨ê³„"
    A[memberService] -.ì¤€ë¹„.-> B[memberRepository]
    C[orderService] -.ì¤€ë¹„.-> D[memberRepository]
    C -.ì¤€ë¹„.-> E[discountPolicy]
    end
```

ë¹ˆ ê°ì²´ê°€ ìƒì„±ë˜ê³ , ì˜ì¡´ê´€ê³„ ì£¼ì… ì¤€ë¹„ê°€ ì™„ë£Œë©ë‹ˆë‹¤.

### 4ë‹¨ê³„: ìŠ¤í”„ë§ ë¹ˆ ì˜ì¡´ê´€ê³„ ì„¤ì • - ì™„ë£Œ

```mermaid
graph TB
    subgraph "ì™„ë£Œ ë‹¨ê³„"
    A[memberService] -->|ì£¼ì…| B[memberRepository]
    C[orderService] -->|ì£¼ì…| D[memberRepository]
    C -->|ì£¼ì…| E[discountPolicy]
    end
```

**ì˜ì¡´ê´€ê³„ ì£¼ì… ê³¼ì •:**

```java
// ìŠ¤í”„ë§ì´ ìë™ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” ê³¼ì • (ê°œë…ì  í‘œí˜„)

// 1. memberRepository ë¹ˆ ìƒì„±
MemberRepository memberRepository = new MemoryMemberRepository();

// 2. memberService ë¹ˆ ìƒì„± ì‹œ ì˜ì¡´ì„± ì£¼ì…
MemberService memberService = new MemberServiceImpl(memberRepository);

// 3. discountPolicy ë¹ˆ ìƒì„±
DiscountPolicy discountPolicy = new RateDiscountPolicy();

// 4. orderService ë¹ˆ ìƒì„± ì‹œ ì˜ì¡´ì„± ì£¼ì…
OrderService orderService = new OrderServiceImpl(memberRepository, discountPolicy);
```

**ì¤‘ìš” í¬ì¸íŠ¸:**
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì„¤ì • ì •ë³´ë¥¼ ì°¸ê³ í•´ì„œ ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…(DI)í•¨
- ìƒì„±ì ì£¼ì…ì˜ ê²½ìš°, ë¹ˆ ìƒì„±ê³¼ ë™ì‹œì— ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ì¼ì–´ë‚¨
- Java ì½”ë“œë¡œ ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡í•˜ë©´ ìƒì„±ìë¥¼ í˜¸ì¶œí•˜ë©´ì„œ ì˜ì¡´ê´€ê³„ ì£¼ì…ë„ í•œë²ˆì— ì²˜ë¦¬

---

## ApplicationContextì˜ ì—­í• 

### ApplicationContext ê³„ì¸µ êµ¬ì¡°

```mermaid
graph TB
    A[BeanFactory] --> B[ApplicationContext]
    B --> C[AnnotationConfigApplicationContext]
    B --> D[GenericXmlApplicationContext]
    B --> E[GenericGroovyApplicationContext]

    style A fill:#f9f,stroke:#333
    style B fill:#bbf,stroke:#333
```

### ApplicationContext vs BeanFactory

| êµ¬ë¶„ | BeanFactory | ApplicationContext |
|------|-------------|-------------------|
| ê¸°ëŠ¥ | ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ìµœìƒìœ„ ì¸í„°í˜ì´ìŠ¤ | BeanFactory ê¸°ëŠ¥ + ë¶€ê°€ê¸°ëŠ¥ |
| ë¹ˆ ê´€ë¦¬ | ê¸°ë³¸ì ì¸ ë¹ˆ ì¡°íšŒ/ê´€ë¦¬ | ë¹ˆ ê´€ë¦¬ + êµ­ì œí™” + í™˜ê²½ë³€ìˆ˜ + ì´ë²¤íŠ¸ ë“± |
| ì‚¬ìš© | ê±°ì˜ ì‚¬ìš© ì•ˆí•¨ | ì‹¤ë¬´ì—ì„œ ì£¼ë¡œ ì‚¬ìš© |

### ApplicationContextê°€ ì œê³µí•˜ëŠ” ë¶€ê°€ê¸°ëŠ¥

```mermaid
graph LR
    A[ApplicationContext] --> B[MessageSource]
    A --> C[EnvironmentCapable]
    A --> D[ApplicationEventPublisher]
    A --> E[ResourceLoader]
    A --> F[BeanFactory]

    B --> G[êµ­ì œí™” ê¸°ëŠ¥]
    C --> H[í™˜ê²½ë³€ìˆ˜ ì²˜ë¦¬]
    D --> I[ì´ë²¤íŠ¸ ë°œí–‰/êµ¬ë…]
    E --> J[ë¦¬ì†ŒìŠ¤ ì¡°íšŒ]
    F --> K[ë¹ˆ ê´€ë¦¬]
```

---

## ì‹¤ìŠµ ì½”ë“œ

### ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„± í…ŒìŠ¤íŠ¸

```java
package hello.core.beanfind;

import hello.core.AppConfig;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

public class ApplicationContextInfoTest {

    AnnotationConfigApplicationContext ac =
        new AnnotationConfigApplicationContext(AppConfig.class);

    @Test
    @DisplayName("ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„± í™•ì¸")
    void createApplicationContext() {
        // ì»¨í…Œì´ë„ˆê°€ ì •ìƒì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸
        System.out.println("ac = " + ac);

        // ë¹ˆ ê°œìˆ˜ í™•ì¸
        int beanDefinitionCount = ac.getBeanDefinitionCount();
        System.out.println("ë¹ˆ ê°œìˆ˜ = " + beanDefinitionCount);
    }

    @Test
    @DisplayName("ë¹ˆ ì´ë¦„ ì¡°íšŒ")
    void findBeanByName() {
        String[] beanDefinitionNames = ac.getBeanDefinitionNames();

        System.out.println("=== ë“±ë¡ëœ ëª¨ë“  ë¹ˆ ì´ë¦„ ===");
        for (String beanName : beanDefinitionNames) {
            System.out.println("ë¹ˆ ì´ë¦„ = " + beanName);
        }
    }
}
```

**ì‹¤í–‰ ê²°ê³¼:**
```
ac = org.springframework.context.annotation.AnnotationConfigApplicationContext@...
ë¹ˆ ê°œìˆ˜ = 9

=== ë“±ë¡ëœ ëª¨ë“  ë¹ˆ ì´ë¦„ ===
ë¹ˆ ì´ë¦„ = org.springframework.context.annotation.internalConfigurationAnnotationProcessor
ë¹ˆ ì´ë¦„ = org.springframework.context.annotation.internalAutowiredAnnotationProcessor
ë¹ˆ ì´ë¦„ = org.springframework.context.event.internalEventListenerProcessor
ë¹ˆ ì´ë¦„ = org.springframework.context.event.internalEventListenerFactory
ë¹ˆ ì´ë¦„ = appConfig
ë¹ˆ ì´ë¦„ = memberService
ë¹ˆ ì´ë¦„ = memberRepository
ë¹ˆ ì´ë¦„ = orderService
ë¹ˆ ì´ë¦„ = discountPolicy
```

### ìŠ¤í”„ë§ ë¹ˆ ì‚¬ìš© ì˜ˆì œ

```java
package hello.core;

import hello.core.member.Grade;
import hello.core.member.Member;
import hello.core.member.MemberService;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

public class MemberApp {

    public static void main(String[] args) {
        // ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±
        ApplicationContext ac =
            new AnnotationConfigApplicationContext(AppConfig.class);

        // ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ë¹ˆ ì¡°íšŒ
        MemberService memberService =
            ac.getBean("memberService", MemberService.class);

        // íšŒì› ê°€ì…
        Member member = new Member(1L, "memberA", Grade.VIP);
        memberService.join(member);

        // íšŒì› ì¡°íšŒ
        Member findMember = memberService.findMember(1L);
        System.out.println("new member = " + member.getName());
        System.out.println("find Member = " + findMember.getName());
    }
}
```

**ì½”ë“œ ì‹¤í–‰ íë¦„:**

```mermaid
sequenceDiagram
    participant App as MemberApp
    participant AC as ApplicationContext
    participant MS as MemberService
    participant MR as MemberRepository

    App->>AC: new AnnotationConfigApplicationContext(AppConfig.class)
    AC->>AC: ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„± ë° ë¹ˆ ë“±ë¡

    App->>AC: getBean("memberService")
    AC->>App: MemberService ë¹ˆ ë°˜í™˜

    App->>MS: join(member)
    MS->>MR: save(member)
    MR->>MS: ì €ì¥ ì™„ë£Œ

    App->>MS: findMember(1L)
    MS->>MR: findById(1L)
    MR->>MS: Member ë°˜í™˜
    MS->>App: Member ë°˜í™˜
```

---

## í•µì‹¬ ì •ë¦¬

### 1. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„± ë°©ì‹

```java
// Java ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ ì„¤ì •
ApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);

// XML ê¸°ë°˜ ì„¤ì •
ApplicationContext ac = new GenericXmlApplicationContext("appConfig.xml");
```

### 2. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„± 4ë‹¨ê³„

1. **ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±**
   - AnnotationConfigApplicationContext ê°ì²´ ìƒì„±
   - ì„¤ì • ì •ë³´(AppConfig.class) ì „ë‹¬

2. **ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡**
   - @Beanì´ ë¶™ì€ ë©”ì„œë“œë¥¼ ëª¨ë‘ í˜¸ì¶œ
   - ë°˜í™˜ëœ ê°ì²´ë¥¼ ë¹ˆ ì´ë¦„ìœ¼ë¡œ ë¹ˆ ì €ì¥ì†Œì— ë“±ë¡

3. **ì˜ì¡´ê´€ê³„ ì£¼ì… ì¤€ë¹„**
   - ë¹ˆ ê°ì²´ ìƒì„± ì™„ë£Œ
   - ì˜ì¡´ê´€ê³„ ì°¸ì¡° ì¤€ë¹„

4. **ì˜ì¡´ê´€ê³„ ì£¼ì… ì™„ë£Œ**
   - ìƒì„±ìë¥¼ í†µí•´ ì‹¤ì œ ì˜ì¡´ê´€ê³„ ì£¼ì…
   - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì‚¬ìš© ì¤€ë¹„ ì™„ë£Œ

### 3. ì¤‘ìš” ê°œë…

**ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ:**
- `ApplicationContext`ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¼ í•¨
- ì¸í„°í˜ì´ìŠ¤ì´ë©°, ë‹¤ì–‘í•œ êµ¬í˜„ì²´ ì¡´ì¬
- `AnnotationConfigApplicationContext`ëŠ” Java ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ êµ¬í˜„ì²´

**ìŠ¤í”„ë§ ë¹ˆ:**
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ê°ì²´
- `@Bean` ì• ë…¸í…Œì´ì…˜ìœ¼ë¡œ ë“±ë¡
- ê¸°ë³¸ì ìœ¼ë¡œ ì‹±ê¸€í†¤ìœ¼ë¡œ ê´€ë¦¬

**ë¹ˆ ì´ë¦„:**
- ê¸°ë³¸ê°’: ë©”ì„œë“œ ì´ë¦„
- ì§ì ‘ ì§€ì •: `@Bean(name="ë¹ˆì´ë¦„")`
- **ë°˜ë“œì‹œ ìœ ì¼**í•´ì•¼ í•¨

### 4. ìŠ¤í”„ë§ì˜ í•µì‹¬ ê°€ì¹˜

```mermaid
graph TB
    A[ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ] --> B[ê°ì²´ ìƒì„± ìë™í™”]
    A --> C[ì˜ì¡´ê´€ê³„ ì£¼ì… ìë™í™”]
    A --> D[ìƒëª…ì£¼ê¸° ê´€ë¦¬]

    B --> E[ê°œë°œìëŠ” ì„¤ì •ë§Œ]
    C --> E
    D --> E

    E --> F[ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ì§‘ì¤‘]

    style F fill:#ff9,stroke:#333,stroke-width:4px
```

**ìŠ¤í”„ë§ì„ ì‚¬ìš©í•˜ë©´:**
- ê°ì²´ ìƒì„±ê³¼ ê´€ë¦¬ë¥¼ ìŠ¤í”„ë§ì´ ëŒ€ì‹  ì²˜ë¦¬
- ê°œë°œìëŠ” ì„¤ì • ì •ë³´ë§Œ ì œê³µ
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê°œë°œì— ì§‘ì¤‘ ê°€ëŠ¥
- ìœ ì§€ë³´ìˆ˜ì„±ê³¼ í…ŒìŠ¤íŠ¸ ìš©ì´ì„± í–¥ìƒ

### 5. ê¸°ì¡´ ë°©ì‹ vs ìŠ¤í”„ë§ ë°©ì‹

**ê¸°ì¡´ ë°©ì‹ (ìˆœìˆ˜ Java):**
```java
public class MemberApp {
    public static void main(String[] args) {
        AppConfig appConfig = new AppConfig();
        MemberService memberService = appConfig.memberService();
        // ì§ì ‘ ìƒì„±í•˜ê³  ê´€ë¦¬
    }
}
```

**ìŠ¤í”„ë§ ë°©ì‹:**
```java
public class MemberApp {
    public static void main(String[] args) {
        ApplicationContext ac =
            new AnnotationConfigApplicationContext(AppConfig.class);
        MemberService memberService = ac.getBean("memberService", MemberService.class);
        // ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ìƒì„±í•˜ê³  ê´€ë¦¬
    }
}
```

---

## ğŸ’¡ ì‹¬í™” ë‚´ìš©

<details>
<summary>ë” ì•Œì•„ë³´ê¸°</summary>

### ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ë‚´ë¶€ ë™ì‘ ì›ë¦¬

#### BeanDefinitionì„ í†µí•œ ì¶”ìƒí™”
ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì‹¤ì œë¡œ `BeanDefinition`ì´ë¼ëŠ” ë¹ˆ ë©”íƒ€ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤.

```java
// ë‚´ë¶€ì ìœ¼ë¡œ ì´ë ‡ê²Œ ë™ì‘
public class AnnotationConfigApplicationContext {
    private Map<String, BeanDefinition> beanDefinitionMap = new HashMap<>();

    public void register(Class<?> configClass) {
        // @Bean ë©”ì„œë“œë¥¼ ìŠ¤ìº”í•˜ì—¬ BeanDefinition ìƒì„±
        BeanDefinition bd = createBeanDefinition(configClass);
        beanDefinitionMap.put(beanName, bd);
    }
}
```

#### ì‹±ê¸€í†¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬
ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë¹ˆì„ ì‹±ê¸€í†¤ìœ¼ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.

```java
// ê°™ì€ ë¹ˆì„ ì—¬ëŸ¬ ë²ˆ ì¡°íšŒí•´ë„ í•­ìƒ ê°™ì€ ì¸ìŠ¤í„´ìŠ¤
MemberService service1 = ac.getBean("memberService", MemberService.class);
MemberService service2 = ac.getBean("memberService", MemberService.class);

System.out.println(service1 == service2); // true (ì‹±ê¸€í†¤)
```

### ì‹¤ë¬´ ì ìš© ì‚¬ë¡€

#### 1. ë‹¤ì¤‘ í”„ë¡œíŒŒì¼ í™˜ê²½ ì„¤ì •
```java
@Configuration
public class AppConfig {

    @Bean
    @Profile("dev")
    public DataSource devDataSource() {
        // ê°œë°œ í™˜ê²½ìš© DataSource
        return new H2DataSource();
    }

    @Bean
    @Profile("prod")
    public DataSource prodDataSource() {
        // ìš´ì˜ í™˜ê²½ìš© DataSource
        return new MySQLDataSource();
    }
}
```

#### 2. ì¡°ê±´ë¶€ ë¹ˆ ë“±ë¡
```java
@Configuration
public class AppConfig {

    @Bean
    @ConditionalOnProperty(name = "feature.enabled", havingValue = "true")
    public FeatureService featureService() {
        // ì„¤ì • ê°’ì— ë”°ë¼ ì¡°ê±´ë¶€ ë“±ë¡
        return new FeatureServiceImpl();
    }
}
```

#### 3. ì»¨í…Œì´ë„ˆ ì´ë²¤íŠ¸ í™œìš©
```java
@Component
public class ApplicationStartupListener {

    @EventListener(ContextRefreshedEvent.class)
    public void onApplicationStart() {
        // ì»¨í…Œì´ë„ˆ ì´ˆê¸°í™” ì™„ë£Œ í›„ ì‹¤í–‰
        System.out.println("ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì´ˆê¸°í™” ì™„ë£Œ!");
    }
}
```

### ì„±ëŠ¥ ìµœì í™”

#### Lazy Initialization
```java
@Configuration
public class AppConfig {

    @Bean
    @Lazy  // ì‹¤ì œ ì‚¬ìš© ì‹œì ì— ë¹ˆ ìƒì„±
    public HeavyService heavyService() {
        return new HeavyService();
    }
}
```

#### ë¹ˆ ìƒì„± ìˆœì„œ ì œì–´
```java
@Configuration
public class AppConfig {

    @Bean
    @DependsOn("dataSource")  // dataSourceê°€ ë¨¼ì € ìƒì„±ë˜ë„ë¡ ë³´ì¥
    public MemberService memberService() {
        return new MemberServiceImpl();
    }
}
```

### Anti-pattern ë° ì£¼ì˜ì‚¬í•­

**âŒ ì˜ëª»ëœ ì˜ˆ: ìˆœí™˜ ì°¸ì¡°**
```java
@Configuration
public class AppConfig {

    @Bean
    public ServiceA serviceA() {
        return new ServiceA(serviceB());  // ServiceB ì˜ì¡´
    }

    @Bean
    public ServiceB serviceB() {
        return new ServiceB(serviceA());  // ServiceA ì˜ì¡´ â†’ ìˆœí™˜ ì°¸ì¡°!
    }
}
```

**âœ… ì˜¬ë°”ë¥¸ ì˜ˆ: ì œ3ì˜ ê°ì²´ë¡œ ë¶„ë¦¬**
```java
@Configuration
public class AppConfig {

    @Bean
    public ServiceA serviceA(CommonDependency common) {
        return new ServiceA(common);
    }

    @Bean
    public ServiceB serviceB(CommonDependency common) {
        return new ServiceB(common);
    }

    @Bean
    public CommonDependency commonDependency() {
        return new CommonDependency();
    }
}
```

</details>

---

## ë©´ì ‘ ì§ˆë¬¸

### ì´ˆê¸‰ ê°œë°œì (Junior)

**Q1. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë€ ë¬´ì—‡ì´ë©°, ì™œ í•„ìš”í•œê°€ìš”?**
<details>
<summary>ë‹µì•ˆ ë³´ê¸°</summary>

ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ìŠ¤í”„ë§ ë¹ˆì˜ ìƒëª…ì£¼ê¸°ë¥¼ ê´€ë¦¬í•˜ê³  ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í•´ì£¼ëŠ” ê°ì²´ì…ë‹ˆë‹¤.

**í•„ìš”í•œ ì´ìœ :**
- ê°ì²´ ìƒì„±ê³¼ ê´€ë¦¬ë¥¼ ê°œë°œìê°€ ì•„ë‹Œ ì»¨í…Œì´ë„ˆê°€ ë‹´ë‹¹ (IoC)
- ì˜ì¡´ê´€ê³„ ì£¼ì…ì„ ìë™ìœ¼ë¡œ ì²˜ë¦¬ (DI)
- ì‹±ê¸€í†¤ íŒ¨í„´ì„ í†µí•œ ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±
- ê°œë°œìëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì—ë§Œ ì§‘ì¤‘ ê°€ëŠ¥

**ì˜ˆì‹œ:**
```java
// ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì—†ì´
MemberRepository repository = new MemoryMemberRepository();
MemberService service = new MemberServiceImpl(repository);

// ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì‚¬ìš©
ApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);
MemberService service = ac.getBean("memberService", MemberService.class);
```

</details>

**Q2. ApplicationContextì™€ BeanFactoryì˜ ì°¨ì´ëŠ” ë¬´ì—‡ì¸ê°€ìš”?**
<details>
<summary>ë‹µì•ˆ ë³´ê¸°</summary>

**BeanFactory:**
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ìµœìƒìœ„ ì¸í„°í˜ì´ìŠ¤
- ë¹ˆì„ ì¡°íšŒí•˜ê³  ê´€ë¦¬í•˜ëŠ” ê¸°ë³¸ ê¸°ëŠ¥ë§Œ ì œê³µ
- ì‹¤ë¬´ì—ì„œëŠ” ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ

**ApplicationContext:**
- BeanFactoryë¥¼ ìƒì†ë°›ì•„ í™•ì¥í•œ ì¸í„°í˜ì´ìŠ¤
- ë¹ˆ ê´€ë¦¬ + êµ­ì œí™”, í™˜ê²½ë³€ìˆ˜, ì´ë²¤íŠ¸, ë¦¬ì†ŒìŠ¤ ì¡°íšŒ ë“± ë¶€ê°€ ê¸°ëŠ¥ ì œê³µ
- ì‹¤ë¬´ì—ì„œ ì£¼ë¡œ ì‚¬ìš©

**ê´€ê³„:**
```
BeanFactory (ë¶€ëª¨)
    â†‘
    | ìƒì†
    |
ApplicationContext (ìì‹) â† ì‹¤ë¬´ì—ì„œ ì‚¬ìš©
```

</details>

**Q3. ìŠ¤í”„ë§ ë¹ˆì´ë€ ë¬´ì—‡ì´ê³ , ì–´ë–»ê²Œ ë“±ë¡í•˜ë‚˜ìš”?**
<details>
<summary>ë‹µì•ˆ ë³´ê¸°</summary>

**ìŠ¤í”„ë§ ë¹ˆ:**
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ê´€ë¦¬í•˜ëŠ” ìë°” ê°ì²´
- IoC(ì œì–´ì˜ ì—­ì „) ì›ì¹™ì— ë”°ë¼ ìŠ¤í”„ë§ì´ ìƒì„±í•˜ê³  ê´€ë¦¬

**ë“±ë¡ ë°©ë²•:**

1. **@Bean ìˆ˜ë™ ë“±ë¡:**
```java
@Configuration
public class AppConfig {
    @Bean
    public MemberService memberService() {
        return new MemberServiceImpl();
    }
}
```

2. **@Component ìë™ ë“±ë¡:**
```java
@Component
public class MemberServiceImpl implements MemberService {
    // ...
}
```

**ë¹ˆ ì¡°íšŒ:**
```java
MemberService service = ac.getBean("memberService", MemberService.class);
```

</details>

### ì¤‘ê¸‰ ê°œë°œì (Mid-Level)

**Q4. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ìƒì„± ê³¼ì •ì„ 4ë‹¨ê³„ë¡œ ì„¤ëª…í•´ì£¼ì„¸ìš”.**
<details>
<summary>ë‹µì•ˆ ë³´ê¸°</summary>

**1ë‹¨ê³„: ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±**
```java
ApplicationContext ac =
    new AnnotationConfigApplicationContext(AppConfig.class);
```
- ì»¨í…Œì´ë„ˆ ê°ì²´ ìƒì„±
- ë¹ˆ ì €ì¥ì†Œ ì´ˆê¸°í™”
- ì„¤ì • ì •ë³´(AppConfig.class) ë¡œë”©

**2ë‹¨ê³„: ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡**
- @Configuration í´ë˜ìŠ¤ ìŠ¤ìº”
- @Bean ë©”ì„œë“œ íƒìƒ‰
- ë°˜í™˜ëœ ê°ì²´ë¥¼ ë¹ˆ ì´ë¦„ìœ¼ë¡œ ë¹ˆ ì €ì¥ì†Œì— ë“±ë¡
- ë¹ˆ ì´ë¦„ì€ ê¸°ë³¸ì ìœ¼ë¡œ ë©”ì„œë“œ ì´ë¦„ ì‚¬ìš©

**3ë‹¨ê³„: ì˜ì¡´ê´€ê³„ ì£¼ì… ì¤€ë¹„**
- ëª¨ë“  ë¹ˆ ê°ì²´ ìƒì„± ì™„ë£Œ
- ì˜ì¡´ê´€ê³„ ì°¸ì¡° ì¤€ë¹„

**4ë‹¨ê³„: ì˜ì¡´ê´€ê³„ ì£¼ì… ì™„ë£Œ**
- ìƒì„±ìë¥¼ í†µí•´ ì‹¤ì œ ì˜ì¡´ê´€ê³„ ì£¼ì…
- Java Configì˜ ê²½ìš° ë¹ˆ ìƒì„±ê³¼ ë™ì‹œì— DI ìˆ˜í–‰
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì‚¬ìš© ì¤€ë¹„ ì™„ë£Œ

**ì¤‘ìš”:**
ìƒì„±ì ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ 2ë‹¨ê³„ì™€ 4ë‹¨ê³„ê°€ ë™ì‹œì— ì¼ì–´ë‚©ë‹ˆë‹¤.

</details>

**Q5. ë¹ˆ ì´ë¦„ ì¤‘ë³µ ì‹œ ì–´ë–¤ ì¼ì´ ë°œìƒí•˜ë‚˜ìš”? ì‹¤ë¬´ì—ì„œ ì–´ë–»ê²Œ ëŒ€ì‘í•˜ë‚˜ìš”?**
<details>
<summary>ë‹µì•ˆ ë³´ê¸°</summary>

**ë¹ˆ ì´ë¦„ ì¤‘ë³µ ì‹œ ë°œìƒí•˜ëŠ” ë¬¸ì œ:**

1. **ìˆ˜ë™ ë¹ˆ ë“±ë¡ ì¤‘ë³µ:**
```java
@Configuration
public class AppConfig {
    @Bean
    public MemberService memberService() {
        return new MemberServiceImpl();
    }

    @Bean
    public MemberService memberService() {  // ì»´íŒŒì¼ ì˜¤ë¥˜!
        return new MemberServiceImpl();
    }
}
```
â†’ ì»´íŒŒì¼ ë‹¨ê³„ì—ì„œ ì˜¤ë¥˜ ë°œìƒ (ê°™ì€ ë©”ì„œë“œëª…)

2. **ìë™ ë¹ˆ + ìˆ˜ë™ ë¹ˆ ì¤‘ë³µ:**
```java
@Component
class MemberService { }

@Configuration
class AppConfig {
    @Bean
    public MemberService memberService() { }  // ìˆ˜ë™ ë¹ˆì´ ìš°ì„ ê¶Œ
}
```
â†’ ìˆ˜ë™ ë¹ˆì´ ìë™ ë¹ˆì„ ì˜¤ë²„ë¼ì´ë”© (ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” ì˜¤ë¥˜ ë°œìƒ)

**ì‹¤ë¬´ ëŒ€ì‘ ë°©ë²•:**

1. **ëª…í™•í•œ ë¹ˆ ì´ë¦„ ë¶€ì—¬:**
```java
@Bean(name = "memberService")
@Bean(name = "orderService")
```

2. **@Qualifier ì‚¬ìš©:**
```java
@Bean
@Qualifier("mainMemberService")
public MemberService memberService1() { }

@Bean
@Qualifier("subMemberService")
public MemberService memberService2() { }
```

3. **@Primary ì‚¬ìš©:**
```java
@Bean
@Primary  // ìš°ì„ ìˆœìœ„ ì§€ì •
public MemberService mainMemberService() { }
```

</details>

**Q6. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì‹±ê¸€í†¤ì„ ì–´ë–»ê²Œ ë³´ì¥í•˜ë‚˜ìš”?**
<details>
<summary>ë‹µì•ˆ ë³´ê¸°</summary>

**ì‹±ê¸€í†¤ ë³´ì¥ ë°©ë²•:**

1. **ì‹±ê¸€í†¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬:**
```java
// ë‚´ë¶€ì ìœ¼ë¡œ Mapìœ¼ë¡œ ê´€ë¦¬
private Map<String, Object> singletonObjects = new ConcurrentHashMap<>();

public Object getBean(String name) {
    // ì´ë¯¸ ìƒì„±ëœ ë¹ˆì´ ìˆìœ¼ë©´ ë°˜í™˜
    if (singletonObjects.containsKey(name)) {
        return singletonObjects.get(name);
    }
    // ì—†ìœ¼ë©´ ìƒì„± í›„ ì €ì¥
    Object bean = createBean(name);
    singletonObjects.put(name, bean);
    return bean;
}
```

2. **CGLIB ë°”ì´íŠ¸ì½”ë“œ ì¡°ì‘:**
```java
@Configuration
public class AppConfig {
    @Bean
    public MemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }

    @Bean
    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());  // ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜
    }

    @Bean
    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository());  // ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜
    }
}
```

ìŠ¤í”„ë§ì€ @Configuration í´ë˜ìŠ¤ë¥¼ CGLIBìœ¼ë¡œ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ ë©”ì„œë“œ í˜¸ì¶œì„ ê°€ë¡œì±•ë‹ˆë‹¤.

**ê²€ì¦:**
```java
MemberService service1 = ac.getBean("memberService", MemberService.class);
MemberService service2 = ac.getBean("memberService", MemberService.class);
System.out.println(service1 == service2);  // true
```

**ì¥ì :**
- ë©”ëª¨ë¦¬ íš¨ìœ¨ì„± (ê°ì²´ 1ê°œë§Œ ìƒì„±)
- ê³µìœ  ê°ì²´ë¡œ ì¼ê´€ì„± ìœ ì§€
- ìŠ¤ë ˆë“œ ì•ˆì „ì„± ë³´ì¥ (ìŠ¤í”„ë§ì´ ê´€ë¦¬)

</details>

### ê³ ê¸‰ ê°œë°œì (Senior)

**Q7. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ í™•ì¥ í¬ì¸íŠ¸(BeanPostProcessor, BeanFactoryPostProcessor)ì— ëŒ€í•´ ì„¤ëª…í•˜ê³ , ì‹¤ë¬´ í™œìš© ì‚¬ë¡€ë¥¼ ë§ì”€í•´ì£¼ì„¸ìš”.**
<details>
<summary>ë‹µì•ˆ ë³´ê¸°</summary>

**BeanPostProcessor:**
ë¹ˆ ì´ˆê¸°í™” ì „í›„ì— ì»¤ìŠ¤í…€ ë¡œì§ì„ ì¶”ê°€í•  ìˆ˜ ìˆëŠ” í™•ì¥ í¬ì¸íŠ¸

```java
@Component
public class CustomBeanPostProcessor implements BeanPostProcessor {

    @Override
    public Object postProcessBeforeInitialization(Object bean, String beanName) {
        // ë¹ˆ ì´ˆê¸°í™” ì „ ì‹¤í–‰
        if (bean instanceof MemberService) {
            System.out.println("MemberService ì´ˆê¸°í™” ì „: " + beanName);
        }
        return bean;
    }

    @Override
    public Object postProcessAfterInitialization(Object bean, String beanName) {
        // ë¹ˆ ì´ˆê¸°í™” í›„ ì‹¤í–‰ (í”„ë¡ì‹œ ìƒì„± ê°€ëŠ¥)
        if (bean instanceof MemberService) {
            return Proxy.newProxyInstance(
                bean.getClass().getClassLoader(),
                bean.getClass().getInterfaces(),
                (proxy, method, args) -> {
                    System.out.println("ë©”ì„œë“œ í˜¸ì¶œ ì „: " + method.getName());
                    Object result = method.invoke(bean, args);
                    System.out.println("ë©”ì„œë“œ í˜¸ì¶œ í›„: " + method.getName());
                    return result;
                }
            );
        }
        return bean;
    }
}
```

**BeanFactoryPostProcessor:**
ë¹ˆ ì„¤ì • ë©”íƒ€ì •ë³´ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆëŠ” í™•ì¥ í¬ì¸íŠ¸

```java
@Component
public class CustomBeanFactoryPostProcessor implements BeanFactoryPostProcessor {

    @Override
    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {
        // ë¹ˆ ìƒì„± ì „, BeanDefinition ìˆ˜ì • ê°€ëŠ¥
        String[] beanNames = beanFactory.getBeanDefinitionNames();
        for (String beanName : beanNames) {
            BeanDefinition bd = beanFactory.getBeanDefinition(beanName);
            // ëª¨ë“  ë¹ˆì„ ì§€ì—° ì´ˆê¸°í™”ë¡œ ë³€ê²½
            bd.setLazyInit(true);
        }
    }
}
```

**ì‹¤ë¬´ í™œìš© ì‚¬ë¡€:**

1. **AOP êµ¬í˜„:**
   - Spring AOPëŠ” ë‚´ë¶€ì ìœ¼ë¡œ BeanPostProcessor ì‚¬ìš©
   - @Transactional, @Async ë“±ì˜ í”„ë¡ì‹œ ìƒì„±

2. **ìë™ ì„¤ì •:**
   - Spring Bootì˜ Auto Configuration
   - @ConfigurationProperties ë°”ì¸ë”©

3. **ë³´ì•ˆ:**
   - íŠ¹ì • ì• ë…¸í…Œì´ì…˜ì´ ìˆëŠ” ë¹ˆì— ë³´ì•ˆ ê²€ì‚¬ ë¡œì§ ì¶”ê°€
   - ë¯¼ê° ì •ë³´ ìë™ ì•”í˜¸í™”/ë³µí˜¸í™”

4. **ëª¨ë‹ˆí„°ë§:**
   - ëª¨ë“  ë¹ˆ í˜¸ì¶œì— ë¡œê¹…, ë©”íŠ¸ë¦­ ìˆ˜ì§‘
   - ì„±ëŠ¥ ì¸¡ì • ë° ì•Œë¦¼

**ì‹¤í–‰ ìˆœì„œ:**
```
BeanFactoryPostProcessor ì‹¤í–‰
    â†“
ë¹ˆ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
    â†“
BeanPostProcessor.postProcessBeforeInitialization
    â†“
ë¹ˆ ì´ˆê¸°í™” (@PostConstruct ë“±)
    â†“
BeanPostProcessor.postProcessAfterInitialization
    â†“
ë¹ˆ ì‚¬ìš© ê°€ëŠ¥
```

</details>

**Q8. ë©€í‹° ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ ìŠ¤í”„ë§ ë¹ˆì˜ ì‹±ê¸€í†¤ íŒ¨í„´ì´ ì•ˆì „í•œ ì´ìœ ì™€, ì£¼ì˜í•´ì•¼ í•  ì ì„ ì„¤ëª…í•´ì£¼ì„¸ìš”.**
<details>
<summary>ë‹µì•ˆ ë³´ê¸°</summary>

**ìŠ¤í”„ë§ ì‹±ê¸€í†¤ì´ ì•ˆì „í•œ ì´ìœ :**

1. **ë¶ˆë³€ ê°ì²´ ê¶Œì¥:**
```java
@Component
public class MemberService {
    private final MemberRepository memberRepository;  // final = ë¶ˆë³€

    @Autowired
    public MemberService(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }
}
```

2. **ìƒíƒœë¥¼ ê°€ì§€ì§€ ì•ŠìŒ (Stateless):**
```java
@Service
public class OrderService {
    // âœ… OK: ì˜ì¡´ì„± ì£¼ì…ëœ ë¶ˆë³€ í•„ë“œ
    private final MemberRepository memberRepository;

    public void createOrder(Long memberId) {
        // âœ… OK: ì§€ì—­ ë³€ìˆ˜ (ìŠ¤ë ˆë“œë§ˆë‹¤ ë…ë¦½ì )
        Member member = memberRepository.findById(memberId);
        Order order = new Order(member);
    }
}
```

**âŒ ì£¼ì˜í•´ì•¼ í•  ì :**

1. **ê³µìœ  í•„ë“œ ì‚¬ìš© ê¸ˆì§€:**
```java
@Service
public class OrderService {
    private int count = 0;  // âŒ ìœ„í—˜! ê³µìœ  í•„ë“œ

    public void createOrder() {
        count++;  // ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ ë™ì‹œì„± ë¬¸ì œ ë°œìƒ
    }
}
```

2. **í•´ê²° ë°©ë²•:**

**ë°©ë²• 1: ThreadLocal ì‚¬ìš©**
```java
@Service
public class OrderService {
    private ThreadLocal<Integer> count = ThreadLocal.withInitial(() -> 0);

    public void createOrder() {
        count.set(count.get() + 1);  // ê° ìŠ¤ë ˆë“œë§ˆë‹¤ ë…ë¦½ì 
    }
}
```

**ë°©ë²• 2: ë™ê¸°í™”**
```java
@Service
public class OrderService {
    private int count = 0;

    public synchronized void createOrder() {  // synchronized
        count++;
    }
}
```

**ë°©ë²• 3: Atomic í´ë˜ìŠ¤**
```java
@Service
public class OrderService {
    private AtomicInteger count = new AtomicInteger(0);

    public void createOrder() {
        count.incrementAndGet();  // ì›ìì  ì—°ì‚°
    }
}
```

**ë°©ë²• 4: ë¹ˆ ìŠ¤ì½”í”„ ë³€ê²½**
```java
@Service
@Scope("prototype")  // ìš”ì²­ë§ˆë‹¤ ìƒˆ ì¸ìŠ¤í„´ìŠ¤
public class OrderService {
    private int count = 0;  // ì´ì œ ì•ˆì „
}
```

**ì‹¤ë¬´ ê¶Œì¥ì‚¬í•­:**
```java
// âœ… ì˜¬ë°”ë¥¸ ì˜ˆ
@Service
public class OrderService {
    // ë¶ˆë³€ ì˜ì¡´ì„±
    private final MemberRepository memberRepository;
    private final DiscountPolicy discountPolicy;

    @Autowired
    public OrderService(MemberRepository memberRepository,
                       DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }

    public Order createOrder(Long memberId, String itemName, int itemPrice) {
        // ëª¨ë“  ë³€ìˆ˜ëŠ” ì§€ì—­ ë³€ìˆ˜ë¡œ ì„ ì–¸
        Member member = memberRepository.findById(memberId);
        int discountPrice = discountPolicy.discount(member, itemPrice);
        return new Order(memberId, itemName, itemPrice, discountPrice);
    }
}
```

**í•µì‹¬ ì›ì¹™:**
- ìŠ¤í”„ë§ ë¹ˆì€ ë¬´ìƒíƒœ(Stateless)ë¡œ ì„¤ê³„
- ê³µìœ  í•„ë“œëŠ” ì½ê¸° ì „ìš©ìœ¼ë¡œë§Œ ì‚¬ìš©
- ë³€ê²½ ê°€ëŠ¥í•œ ìƒíƒœëŠ” ì§€ì—­ ë³€ìˆ˜, íŒŒë¼ë¯¸í„°, ThreadLocal í™œìš©

</details>

---

## ë‹¤ìŒ í•™ìŠµ ì£¼ì œ

- ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ëª¨ë“  ë¹ˆ ì¡°íšŒ ë°©ë²•
- ìŠ¤í”„ë§ ë¹ˆ ì¡°íšŒ ê¸°ë³¸ ë°©ë²•
- ë™ì¼í•œ íƒ€ì…ì´ ë‘˜ ì´ìƒì¼ ë•Œ ì²˜ë¦¬ ë°©ë²•
- ìƒì† ê´€ê³„ ë¹ˆ ì¡°íšŒ ë°©ë²•
