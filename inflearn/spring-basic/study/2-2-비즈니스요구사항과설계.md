# 2-2. ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ê³¼ ì„¤ê³„

**ì¶œì²˜**: ì¸í”„ëŸ° - ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ ê¸°ë³¸í¸
**ê°•ì˜ ì‹œê°„**: ì•½ 5ë¶„
**ì‘ì„±ì¼**: 2025-01-23

---

## ğŸ“š ëª©ì°¨
1. [í•™ìŠµ ëª©í‘œ](#í•™ìŠµ-ëª©í‘œ)
2. [ì—°ê´€ ê°œë…](#-ì—°ê´€-ê°œë…)
3. [ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­](#ë¹„ì¦ˆë‹ˆìŠ¤-ìš”êµ¬ì‚¬í•­)
4. [ìš”êµ¬ì‚¬í•­ì˜ íŠ¹ì§•](#ìš”êµ¬ì‚¬í•­ì˜-íŠ¹ì§•)
5. [ì„¤ê³„ ì „ëµ](#ì„¤ê³„-ì „ëµ)
6. [ì •ë¦¬](#ì •ë¦¬)
7. [ë©´ì ‘ ì§ˆë¬¸](#ë©´ì ‘-ì§ˆë¬¸)

---

## í•™ìŠµ ëª©í‘œ

ì´ ì±•í„°ë¥¼ í•™ìŠµí•œ í›„ ë‹¤ìŒì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
- [ ] ì˜ˆì œ í”„ë¡œì íŠ¸ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ì„ ì´í•´í•œë‹¤
- [ ] ë¶ˆí™•ì‹¤í•œ ìš”êµ¬ì‚¬í•­ì„ ë‹¤ë£¨ëŠ” ì„¤ê³„ ì „ëµì„ ì´í•´í•œë‹¤
- [ ] ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•œ ìœ ì—°í•œ ì„¤ê³„ì˜ í•„ìš”ì„±ì„ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤
- [ ] ì—­í• ê³¼ êµ¬í˜„ì„ ë¶„ë¦¬í•˜ëŠ” ì´ìœ ë¥¼ ì´í•´í•œë‹¤

---

## ğŸ”— ì—°ê´€ ê°œë…

- **ì„ í–‰ í•™ìŠµ ê¶Œì¥**:
  - [2-1. í”„ë¡œì íŠ¸ ìƒì„±](./2-1-í”„ë¡œì íŠ¸ìƒì„±.md)
  - [1-3. ì¢‹ì€ ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì´ë€?](./1-3-ì¢‹ì€ê°ì²´ì§€í–¥í”„ë¡œê·¸ë˜ë°ì´ë€.md)
  - [1-4. ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ 5ê°€ì§€ ì›ì¹™(SOLID)](./1-4-ì¢‹ì€ê°ì²´ì§€í–¥ì„¤ê³„ì˜5ê°€ì§€ì›ì¹™SOLID.md)

- **í›„ì† í•™ìŠµ**:
  - [2-3. íšŒì› ë„ë©”ì¸ ì„¤ê³„](./2-3-íšŒì›ë„ë©”ì¸ì„¤ê³„.md)
  - [2-6. ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸ ì„¤ê³„](./2-6-ì£¼ë¬¸ê³¼í• ì¸ë„ë©”ì¸ì„¤ê³„.md)

- **ê´€ë ¨ ê°œë…**:
  - ë„ë©”ì¸ ì£¼ë„ ì„¤ê³„(DDD)
  - ì¸í„°í˜ì´ìŠ¤ì™€ ë‹¤í˜•ì„±
  - OCP(ê°œë°©-íì‡„ ì›ì¹™)
  - DIP(ì˜ì¡´ê´€ê³„ ì—­ì „ ì›ì¹™)

---

## ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­

> ğŸ“Œ **TL;DR**
> - íšŒì›: ê°€ì…, ì¡°íšŒ, ì¼ë°˜/VIP ë“±ê¸‰
> - ì£¼ë¬¸: íšŒì› ë“±ê¸‰ë³„ í• ì¸ ì •ì±… ì ìš©
> - í• ì¸: ì •ì±…ì´ ì•„ì§ ë¯¸í™•ì • (ë³€ê²½ ê°€ëŠ¥ì„± ë†’ìŒ)

### í•µì‹¬ ê°œë…

ì˜¨ë¼ì¸ ì‡¼í•‘ëª°ì˜ **íšŒì› ê´€ë¦¬**ì™€ **ì£¼ë¬¸ ë° í• ì¸ ì •ì±…**ì„ êµ¬í˜„í•˜ëŠ” ì˜ˆì œì…ë‹ˆë‹¤.

### ìƒì„¸ ì„¤ëª…

#### 1. íšŒì› ë„ë©”ì¸ ìš”êµ¬ì‚¬í•­

**íšŒì› ê¸°ëŠ¥**:
- íšŒì›ì„ ê°€ì…í•˜ê³  ì¡°íšŒí•  ìˆ˜ ìˆë‹¤

**íšŒì› ë“±ê¸‰**:
- íšŒì›ì€ **ì¼ë°˜(BASIC)**ê³¼ **VIP** ë‘ ê°€ì§€ ë“±ê¸‰ì´ ìˆë‹¤

**íšŒì› ë°ì´í„°**:
- íšŒì› ë°ì´í„°ëŠ” ìì²´ DBë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆê³ , ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ì—°ë™í•  ìˆ˜ ìˆë‹¤. **(ë¯¸í™•ì •)**

#### 2. ì£¼ë¬¸ê³¼ í• ì¸ ì •ì±… ìš”êµ¬ì‚¬í•­

**ì£¼ë¬¸ ê¸°ëŠ¥**:
- íšŒì›ì€ ìƒí’ˆì„ ì£¼ë¬¸í•  ìˆ˜ ìˆë‹¤

**í• ì¸ ì •ì±…**:
- íšŒì› ë“±ê¸‰ì— ë”°ë¼ í• ì¸ ì •ì±…ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤
- í• ì¸ ì •ì±…ì€ ëª¨ë“  VIPëŠ” **1000ì›ì„ í• ì¸**í•´ì£¼ëŠ” ê³ ì • ê¸ˆì•¡ í• ì¸ì„ ì ìš©í•´ë‹¬ë¼. **(ë‚˜ì¤‘ì— ë³€ê²½ ë  ìˆ˜ ìˆë‹¤)**
- í• ì¸ ì •ì±…ì€ **ë³€ê²½ ê°€ëŠ¥ì„±ì´ ë†’ë‹¤**. íšŒì‚¬ì˜ ê¸°ë³¸ í• ì¸ ì •ì±…ì„ ì•„ì§ ì •í•˜ì§€ ëª»í–ˆê³ , ì˜¤í”ˆ ì§ì „ê¹Œì§€ ê³ ë¯¼ì„ ë¯¸ë£¨ê³  ì‹¶ë‹¤. ìµœì•…ì˜ ê²½ìš° í• ì¸ì„ ì ìš©í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆë‹¤. **(ë¯¸í™•ì •)**

### ë‹¤ì´ì–´ê·¸ë¨

#### 1. ë„ë©”ì¸ í˜‘ë ¥ ê´€ê³„ (Domain Collaboration)

ë„ë©”ì¸ í˜‘ë ¥ ê´€ê³„ëŠ” **ë¹„ì¦ˆë‹ˆìŠ¤ ê´€ì **ì—ì„œ ê° ë„ë©”ì¸ì´ ì–´ë–»ê²Œ í˜‘ë ¥í•˜ëŠ”ì§€ ë³´ì—¬ì¤ë‹ˆë‹¤.

```mermaid
graph LR
    subgraph "íšŒì› ë„ë©”ì¸"
        A[íšŒì›]
        B[íšŒì› ì„œë¹„ìŠ¤]
        C[íšŒì› ì €ì¥ì†Œ]
    end

    subgraph "ì£¼ë¬¸ ë„ë©”ì¸"
        D[ì£¼ë¬¸]
        E[ì£¼ë¬¸ ì„œë¹„ìŠ¤]
        F[í• ì¸ ì •ì±…]
    end

    E -->|íšŒì› ì¡°íšŒ| B
    E -->|í• ì¸ ê³„ì‚°| F
    F -->|íšŒì› ë“±ê¸‰ í™•ì¸| A
    B -->|ì €ì¥/ì¡°íšŒ| C

    style C fill:#ffcccc
    style F fill:#ffcccc
```

**í˜‘ë ¥ íë¦„**:
1. ì£¼ë¬¸ ì„œë¹„ìŠ¤ê°€ ì£¼ë¬¸ì„ ì²˜ë¦¬í•˜ë ¤ë©´ íšŒì› ì •ë³´ê°€ í•„ìš”
2. íšŒì› ì„œë¹„ìŠ¤ë¥¼ í†µí•´ íšŒì›ì„ ì¡°íšŒ
3. í• ì¸ ì •ì±…ì— íšŒì› ë“±ê¸‰ì„ ì „ë‹¬í•˜ì—¬ í• ì¸ ê¸ˆì•¡ ê³„ì‚°
4. ìµœì¢… ì£¼ë¬¸ ê¸ˆì•¡ í™•ì •

#### 2. í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ (Class Diagram)

í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ì€ **ì„¤ê³„ ê´€ì **ì—ì„œ í´ë˜ìŠ¤ ê°„ì˜ ê´€ê³„ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.

```mermaid
classDiagram
    class Member {
        -Long id
        -String name
        -Grade grade
        +getId() Long
        +getName() String
        +getGrade() Grade
    }

    class Grade {
        <<enumeration>>
        BASIC
        VIP
    }

    class MemberService {
        -MemberRepository memberRepository
        +join(Member) void
        +findMember(Long) Member
    }

    class MemberRepository {
        <<interface>>
        +save(Member) void
        +findById(Long) Member
    }

    class MemoryMemberRepository {
        -Map~Long,Member~ store
        +save(Member) void
        +findById(Long) Member
    }

    class OrderService {
        -MemberRepository memberRepository
        -DiscountPolicy discountPolicy
        +createOrder(Long, String, int) Order
    }

    class Order {
        -Long memberId
        -String itemName
        -int itemPrice
        -int discountPrice
        +calculatePrice() int
    }

    class DiscountPolicy {
        <<interface>>
        +discount(Member, int) int
    }

    class FixDiscountPolicy {
        -int discountFixAmount
        +discount(Member, int) int
    }

    class RateDiscountPolicy {
        -int discountPercent
        +discount(Member, int) int
    }

    Member --> Grade
    MemberService --> MemberRepository
    MemberRepository <|.. MemoryMemberRepository
    OrderService --> MemberRepository
    OrderService --> DiscountPolicy
    OrderService ..> Order : creates
    DiscountPolicy <|.. FixDiscountPolicy
    DiscountPolicy <|.. RateDiscountPolicy
```

**ì£¼ìš” ê´€ê³„**:
- `MemberService`ëŠ” `MemberRepository` **ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´**
- `OrderService`ëŠ” `DiscountPolicy` **ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´**
- êµ¬í˜„ì²´(`MemoryMemberRepository`, `FixDiscountPolicy` ë“±)ëŠ” ì–¸ì œë“  êµì²´ ê°€ëŠ¥
- ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•œ **ëŠìŠ¨í•œ ê²°í•©(Loose Coupling)** êµ¬í˜„

#### 3. ê°ì²´ ë‹¤ì´ì–´ê·¸ë¨ (Object Diagram)

ê°ì²´ ë‹¤ì´ì–´ê·¸ë¨ì€ **ëŸ°íƒ€ì„ ê´€ì **ì—ì„œ ì‹¤ì œ ê°ì²´ ê°„ì˜ ê´€ê³„ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.

```mermaid
graph TD
    subgraph "ì‹¤í–‰ ì‹œì ì˜ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤"
        A["orderService: OrderService"]
        B["memberRepository: MemoryMemberRepository"]
        C["discountPolicy: FixDiscountPolicy"]
        D["member1: Member<br/>id=1L, name='memberA', grade=VIP"]
        E["order1: Order<br/>memberId=1L, itemName='itemA'<br/>itemPrice=10000, discountPrice=1000"]
    end

    A -->|ì°¸ì¡°| B
    A -->|ì°¸ì¡°| C
    B -.->|ì €ì¥| D
    C -.->|í• ì¸ ê³„ì‚°| D
    A -.->|ìƒì„±| E

    style A fill:#e1f5ff
    style B fill:#ccffcc
    style C fill:#ffcccc
    style D fill:#fff4cc
    style E fill:#fff4cc
```

**ì‹¤í–‰ ì˜ˆì‹œ**:

```java
// 1. ê°ì²´ ìƒì„±
MemberRepository memberRepository = new MemoryMemberRepository();
DiscountPolicy discountPolicy = new FixDiscountPolicy();
OrderService orderService = new OrderService(memberRepository, discountPolicy);

// 2. íšŒì› ìƒì„± ë° ì €ì¥
Member member = new Member(1L, "memberA", Grade.VIP);
memberRepository.save(member);

// 3. ì£¼ë¬¸ ìƒì„±
Order order = orderService.createOrder(1L, "itemA", 10000);
// â†’ member: id=1L, name='memberA', grade=VIP
// â†’ order: memberId=1L, itemName='itemA', itemPrice=10000, discountPrice=1000
```

**ê°ì²´ ê°„ ë©”ì‹œì§€ íë¦„**:
1. `orderService`ê°€ `memberRepository`ì— íšŒì› ì¡°íšŒ ìš”ì²­
2. `memberRepository`ê°€ `member1` ê°ì²´ ë°˜í™˜
3. `orderService`ê°€ `discountPolicy`ì— í• ì¸ ê³„ì‚° ìš”ì²­ (member1, 10000ì›)
4. `discountPolicy`ê°€ 1000ì› í• ì¸ ê¸ˆì•¡ ë°˜í™˜
5. `orderService`ê°€ `order1` ê°ì²´ ìƒì„± ë° ë°˜í™˜

#### ë‹¤ì´ì–´ê·¸ë¨ ë¹„êµ

| ë‹¤ì´ì–´ê·¸ë¨ | ê´€ì  | ëª©ì  | í‘œí˜„ ëŒ€ìƒ |
|-----------|------|------|----------|
| **ë„ë©”ì¸ í˜‘ë ¥ ê´€ê³„** | ë¹„ì¦ˆë‹ˆìŠ¤ | ë„ë©”ì¸ ê°„ í˜‘ë ¥ ì´í•´ | ë„ë©”ì¸ ì˜ì—­, í˜‘ë ¥ íë¦„ |
| **í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨** | ì„¤ê³„ | ì •ì  êµ¬ì¡° ì„¤ê³„ | í´ë˜ìŠ¤, ì¸í„°í˜ì´ìŠ¤, ê´€ê³„ |
| **ê°ì²´ ë‹¤ì´ì–´ê·¸ë¨** | ëŸ°íƒ€ì„ | ì‹¤í–‰ ì‹œ ë™ì‘ ì´í•´ | ê°ì²´ ì¸ìŠ¤í„´ìŠ¤, ì‹¤ì œ ê°’ |

#### ìš”êµ¬ì‚¬í•­ ìš”ì•½

```mermaid
graph TD
    subgraph "íšŒì› ë„ë©”ì¸"
        A[íšŒì› ê°€ì…/ì¡°íšŒ]
        B[íšŒì› ë“±ê¸‰: BASIC/VIP]
        C[ì €ì¥ì†Œ: ë¯¸í™•ì •]
    end

    subgraph "ì£¼ë¬¸ ë„ë©”ì¸"
        D[ìƒí’ˆ ì£¼ë¬¸]
        E[í• ì¸ ì •ì±… ì ìš©]
        F[í• ì¸ ì •ì±…: ë¯¸í™•ì •]
    end

    A --> B
    B --> C
    D --> E
    E --> F

    style C fill:#ffcccc
    style F fill:#ffcccc
```

### ì£¼ìš” í¬ì¸íŠ¸

- íšŒì›ì€ ê°€ì…/ì¡°íšŒ ê°€ëŠ¥
- íšŒì› ë“±ê¸‰: BASIC, VIP
- íšŒì› ì €ì¥ì†Œ: **ë¯¸í™•ì •** âš ï¸
- í• ì¸ ì •ì±…: **ë¯¸í™•ì •** âš ï¸
- í• ì¸ ì •ì±…ì€ **ë³€ê²½ ê°€ëŠ¥ì„± ë†’ìŒ**

---

## ìš”êµ¬ì‚¬í•­ì˜ íŠ¹ì§•

> ğŸ“Œ **TL;DR**
> - ìš”êµ¬ì‚¬í•­ì´ ë¶ˆí™•ì‹¤í•˜ê³  ë³€ê²½ ê°€ëŠ¥ì„±ì´ ë†’ìŒ
> - ê²°ì •ì´ ëŠ¦ì–´ì§„ë‹¤ê³  ê°œë°œì„ ë¯¸ë£° ìˆ˜ ì—†ìŒ
> - ìœ ì—°í•œ ì„¤ê³„ê°€ í•„ìˆ˜

### í•µì‹¬ ê°œë…

**ë¶ˆí™•ì‹¤ì„±**ì´ ë†’ì€ ìš”êµ¬ì‚¬í•­ì„ ë‹¤ë£¨ëŠ” ê²ƒì´ ì‹¤ë¬´ì˜ í˜„ì‹¤ì…ë‹ˆë‹¤.

### ìƒì„¸ ì„¤ëª…

#### 1. ë¯¸í™•ì • ìš”ì†Œë“¤

**íšŒì› ë°ì´í„° ì €ì¥ì†Œ**:
```
â“ ìì²´ DBë¥¼ êµ¬ì¶•í•  ê²ƒì¸ê°€?
â“ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ì—°ë™í•  ê²ƒì¸ê°€?
â“ MySQL? MongoDB? Redis?
```

**í• ì¸ ì •ì±…**:
```
â“ ê³ ì • ê¸ˆì•¡ í• ì¸? (ì˜ˆ: 1000ì›)
â“ ì •ë¥  í• ì¸? (ì˜ˆ: 10%)
â“ ë³µí•© ì •ì±…?
â“ í• ì¸ ì—†ìŒ?
```

#### 2. ì‹¤ë¬´ì—ì„œì˜ ë¬¸ì œ

**ì¼ë°˜ì ì¸ ìƒí™©**:
1. ë¹„ì¦ˆë‹ˆìŠ¤ íŒ€: "í• ì¸ ì •ì±…ì„ ì¢€ ë” ê³ ë¯¼í•´ë³´ê³  ê²°ì •í•˜ê² ìŠµë‹ˆë‹¤"
2. ê°œë°œ íŒ€: "ê·¸ëŸ¼ ì–¸ì œ ê²°ì •ë˜ë‚˜ìš”?"
3. ë¹„ì¦ˆë‹ˆìŠ¤ íŒ€: "ì˜¤í”ˆ ì§ì „ì—..."
4. ê°œë°œ íŒ€: "ê·¸ëŸ¼ ê°œë°œì€ ì–¸ì œ ì‹œì‘í•˜ì£ ?"

**ë”œë ˆë§ˆ**:
- âŒ ì •ì±… ê²°ì •ê¹Œì§€ ê¸°ë‹¤ë¦¬ë©´ ê°œë°œ ì¼ì • ì§€ì—°
- âŒ ì˜ëª»ëœ ê°€ì •ìœ¼ë¡œ ê°œë°œí•˜ë©´ ë‚˜ì¤‘ì— í° ìˆ˜ì • í•„ìš”

#### 3. í•´ê²° ë°©ë²•

**ê°ì²´ ì§€í–¥ ì„¤ê³„ë¥¼ í™œìš©**:
```java
// ë‚˜ìœ ì„¤ê³„: êµ¬ì²´ í´ë˜ìŠ¤ì— ì˜ì¡´
public class OrderService {
    private FixDiscountPolicy discountPolicy = new FixDiscountPolicy();
    // ì •ì±… ë³€ê²½ ì‹œ ì½”ë“œ ìˆ˜ì • í•„ìš”!
}

// ì¢‹ì€ ì„¤ê³„: ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´
public class OrderService {
    private DiscountPolicy discountPolicy;  // ì¸í„°í˜ì´ìŠ¤
    // ì •ì±… ë³€ê²½ ì‹œ ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”!
}
```

### ì˜ˆì œ: ì €ì¥ì†Œ ë³€ê²½ ì‹œë‚˜ë¦¬ì˜¤

**ì´ˆê¸° êµ¬í˜„**: ë©”ëª¨ë¦¬ ì €ì¥ì†Œ
```java
public interface MemberRepository {
    void save(Member member);
    Member findById(Long memberId);
}

public class MemoryMemberRepository implements MemberRepository {
    private static Map<Long, Member> store = new HashMap<>();
    // ë©”ëª¨ë¦¬ì— ì €ì¥
}
```

**ë‚˜ì¤‘ì— ë³€ê²½**: DB ì €ì¥ì†Œ
```java
public class DbMemberRepository implements MemberRepository {
    private DataSource dataSource;
    // DBì— ì €ì¥
}
```

**ì„œë¹„ìŠ¤ ì½”ë“œëŠ” ë³€ê²½ ë¶ˆí•„ìš”**:
```java
public class MemberService {
    private final MemberRepository memberRepository;
    // ì¸í„°í˜ì´ìŠ¤ë§Œ ì˜ì¡´ â†’ êµ¬í˜„ì²´ ë³€ê²½í•´ë„ OK!
}
```

### ğŸ’¡ ì‹¬í™” ë‚´ìš©

<details>
<summary>ì „ëµ íŒ¨í„´(Strategy Pattern) ë” ì•Œì•„ë³´ê¸°</summary>

#### ì „ëµ íŒ¨í„´

**ì •ì˜**: ì•Œê³ ë¦¬ì¦˜ì„ ì •ì˜í•˜ê³ , ê°ê°ì„ ìº¡ìŠí™”í•˜ì—¬ êµí™˜ ê°€ëŠ¥í•˜ê²Œ ë§Œë“œëŠ” íŒ¨í„´

**êµ¬ì¡°**:
```java
// ì „ëµ ì¸í„°í˜ì´ìŠ¤
public interface DiscountPolicy {
    int discount(Member member, int price);
}

// êµ¬ì²´ì  ì „ëµ 1
public class FixDiscountPolicy implements DiscountPolicy {
    private int discountFixAmount = 1000;

    @Override
    public int discount(Member member, int price) {
        if (member.getGrade() == Grade.VIP) {
            return discountFixAmount;
        }
        return 0;
    }
}

// êµ¬ì²´ì  ì „ëµ 2
public class RateDiscountPolicy implements DiscountPolicy {
    private int discountPercent = 10;

    @Override
    public int discount(Member member, int price) {
        if (member.getGrade() == Grade.VIP) {
            return price * discountPercent / 100;
        }
        return 0;
    }
}

// ì»¨í…ìŠ¤íŠ¸ (ì „ëµ ì‚¬ìš©ì)
public class OrderService {
    private final DiscountPolicy discountPolicy;

    public OrderService(DiscountPolicy discountPolicy) {
        this.discountPolicy = discountPolicy;
    }

    public Order createOrder(Long memberId, String itemName, int itemPrice) {
        // ì „ëµ ì‹¤í–‰
        int discountPrice = discountPolicy.discount(member, itemPrice);
        return new Order(memberId, itemName, itemPrice, discountPrice);
    }
}
```

**ì‚¬ìš©**:
```java
// ê³ ì • ê¸ˆì•¡ í• ì¸ ì •ì±… ì‚¬ìš©
OrderService orderService1 = new OrderService(new FixDiscountPolicy());

// ì •ë¥  í• ì¸ ì •ì±… ì‚¬ìš©
OrderService orderService2 = new OrderService(new RateDiscountPolicy());

// ëŸ°íƒ€ì„ì— ì „ëµ ë³€ê²½ ê°€ëŠ¥!
```

**ì¥ì **:
- ì•Œê³ ë¦¬ì¦˜ì„ ë…ë¦½ì ìœ¼ë¡œ ë³€ê²½ ê°€ëŠ¥
- OCP(ê°œë°©-íì‡„ ì›ì¹™) ì¤€ìˆ˜
- ìƒˆë¡œìš´ ì „ëµ ì¶”ê°€ ì‹œ ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”

**ì‹¤ë¬´ í™œìš©**:
- ê²°ì œ ìˆ˜ë‹¨ ì „ëµ (ì‹ ìš©ì¹´ë“œ, ê³„ì¢Œì´ì²´, ê°„í¸ê²°ì œ)
- ì •ë ¬ ì•Œê³ ë¦¬ì¦˜ ì „ëµ
- ì••ì¶• ì•Œê³ ë¦¬ì¦˜ ì „ëµ
- ë¡œê¹… ì „ëµ

</details>

<details>
<summary>ë„ë©”ì¸ ì£¼ë„ ì„¤ê³„(DDD)ì™€ì˜ ì—°ê´€ì„±</summary>

#### DDDì˜ í•µì‹¬ ê°œë…

**ìœ ë¹„ì¿¼í„°ìŠ¤ ì–¸ì–´(Ubiquitous Language)**:
- ê°œë°œìì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ì „ë¬¸ê°€ê°€ ê³µí†µìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì–¸ì–´
- ë„ë©”ì¸ ìš©ì–´ë¥¼ ì½”ë“œì— ê·¸ëŒ€ë¡œ ë°˜ì˜

**ì˜ˆì œì—ì„œì˜ ì ìš©**:
```java
// ë¹„ì¦ˆë‹ˆìŠ¤ ìš©ì–´ ê·¸ëŒ€ë¡œ ì‚¬ìš©
public enum Grade {
    BASIC,   // ë¹„ì¦ˆë‹ˆìŠ¤: "ì¼ë°˜ íšŒì›"
    VIP      // ë¹„ì¦ˆë‹ˆìŠ¤: "VIP íšŒì›"
}

public interface DiscountPolicy {
    // ë¹„ì¦ˆë‹ˆìŠ¤: "í• ì¸ ì •ì±…"
    int discount(Member member, int price);
}

public class Order {
    // ë¹„ì¦ˆë‹ˆìŠ¤: "ì£¼ë¬¸"
    private Long memberId;
    private String itemName;
    private int itemPrice;
    private int discountPrice;
}
```

**ê²½ê³„ ì»¨í…ìŠ¤íŠ¸(Bounded Context)**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  íšŒì› ì»¨í…ìŠ¤íŠ¸        â”‚
â”‚  - Member           â”‚
â”‚  - MemberService    â”‚
â”‚  - MemberRepository â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì£¼ë¬¸ ì»¨í…ìŠ¤íŠ¸        â”‚
â”‚  - Order            â”‚
â”‚  - OrderService     â”‚
â”‚  - DiscountPolicy   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì• ê·¸ë¦¬ê±°íŠ¸(Aggregate)**:
- ì—°ê´€ëœ ê°ì²´ë“¤ì˜ ë¬¶ìŒ
- íŠ¸ëœì­ì…˜ ì¼ê´€ì„± ê²½ê³„

```java
// Order ì• ê·¸ë¦¬ê±°íŠ¸
public class Order {
    private Long memberId;      // íšŒì› ì°¸ì¡°
    private String itemName;
    private int itemPrice;
    private int discountPrice;

    // ì• ê·¸ë¦¬ê±°íŠ¸ ë‚´ë¶€ ì¼ê´€ì„± ìœ ì§€
    public int calculatePrice() {
        return itemPrice - discountPrice;
    }
}
```

**ë¦¬í¬ì§€í† ë¦¬(Repository)**:
```java
public interface MemberRepository {
    void save(Member member);
    Member findById(Long memberId);
    // ì»¬ë ‰ì…˜ì²˜ëŸ¼ ì‚¬ìš©
}
```

</details>

### ì£¼ìš” í¬ì¸íŠ¸

- ìš”êµ¬ì‚¬í•­ì€ í•­ìƒ ë³€ê²½ë¨
- ë³€ê²½ì— ìœ ì—°í•œ ì„¤ê³„ê°€ í•„ìˆ˜
- ì¸í„°í˜ì´ìŠ¤ë¡œ ì—­í• ê³¼ êµ¬í˜„ì„ ë¶„ë¦¬
- ë‚˜ì¤‘ì— êµ¬í˜„ì²´ë§Œ êµì²´ ê°€ëŠ¥

### âš ï¸ ì£¼ì˜ì‚¬í•­

- ë¯¸í™•ì • ìš”ì†Œ ë•Œë¬¸ì— ê°œë°œì„ ë¯¸ë£¨ë©´ ì•ˆ ë¨
- ê³¼ë„í•œ ì¶”ìƒí™”ëŠ” ì˜¤íˆë ¤ ë³µì¡ë„ ì¦ê°€
- ì‹¤ì œë¡œ ë³€ê²½ì´ ì¼ì–´ë‚  ë•Œ ë¦¬íŒ©í† ë§í•˜ëŠ” ê²ƒë„ ì „ëµ

---

## ì„¤ê³„ ì „ëµ

> ğŸ“Œ **TL;DR**
> - ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“¤ê³  êµ¬í˜„ì²´ë¥¼ ì–¸ì œë“  êµì²´ ê°€ëŠ¥í•˜ê²Œ ì„¤ê³„
> - ì—­í• (ì¸í„°í˜ì´ìŠ¤)ê³¼ êµ¬í˜„(êµ¬í˜„ í´ë˜ìŠ¤) ë¶„ë¦¬
> - ê°ì²´ ì§€í–¥ ì„¤ê³„ ì›ì¹™(SOLID) ì ìš©

### í•µì‹¬ ê°œë…

**"ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“¤ê³  êµ¬í˜„ì²´ë¥¼ ì–¸ì œë“ ì§€ ê°ˆì•„ë¼ìš¸ ìˆ˜ ìˆë„ë¡ ì„¤ê³„í•˜ë©´ ëœë‹¤"**

### ìƒì„¸ ì„¤ëª…

#### 1. ì—­í• ê³¼ êµ¬í˜„ì˜ ë¶„ë¦¬

```mermaid
graph LR
    subgraph "ì—­í•  (Role)"
        A[MemberRepository<br/>ì¸í„°í˜ì´ìŠ¤]
        B[DiscountPolicy<br/>ì¸í„°í˜ì´ìŠ¤]
    end

    subgraph "êµ¬í˜„ (Implementation)"
        C[MemoryMemberRepository]
        D[DbMemberRepository]
        E[FixDiscountPolicy]
        F[RateDiscountPolicy]
    end

    A -.-> C
    A -.-> D
    B -.-> E
    B -.-> F

    style A fill:#e1f5ff
    style B fill:#e1f5ff
    style C fill:#ccffcc
    style D fill:#ccffcc
    style E fill:#ffcccc
    style F fill:#ffcccc
```

#### 2. ì„¤ê³„ ì›ì¹™ ì ìš©

**OCP (ê°œë°©-íì‡„ ì›ì¹™)**:
```java
// í™•ì¥ì—ëŠ” ì—´ë ¤ìˆê³  (ìƒˆë¡œìš´ ì •ì±… ì¶”ê°€ ê°€ëŠ¥)
public class NoDiscountPolicy implements DiscountPolicy {
    @Override
    public int discount(Member member, int price) {
        return 0;  // í• ì¸ ì—†ìŒ
    }
}

// ë³€ê²½ì—ëŠ” ë‹«í˜€ìˆìŒ (OrderService ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”)
public class OrderService {
    private final DiscountPolicy discountPolicy;
    // ì–´ë–¤ ì •ì±…ì´ ì™€ë„ ë™ì‘í•¨!
}
```

**DIP (ì˜ì¡´ê´€ê³„ ì—­ì „ ì›ì¹™)**:
```java
// ë‚˜ìœ ì˜ˆ: êµ¬ì²´ í´ë˜ìŠ¤ì— ì˜ì¡´
public class OrderService {
    private FixDiscountPolicy discountPolicy = new FixDiscountPolicy();
    // êµ¬ì²´ í´ë˜ìŠ¤ì— ì§ì ‘ ì˜ì¡´ â†’ DIP ìœ„ë°˜
}

// ì¢‹ì€ ì˜ˆ: ì¶”ìƒí™”ì— ì˜ì¡´
public class OrderService {
    private final DiscountPolicy discountPolicy;  // ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´
    // ì¶”ìƒí™”ì— ì˜ì¡´ â†’ DIP ì¤€ìˆ˜
}
```

#### 3. ì‹¤ë¬´ ì ìš© ë‹¨ê³„

**Step 1**: ìš”êµ¬ì‚¬í•­ ë¶„ì„
```
íšŒì› ì €ì¥ì†Œê°€ í•„ìš”í•˜ë‹¤
â†’ í•˜ì§€ë§Œ ì–´ë–¤ ì €ì¥ì†Œë¥¼ ì“¸ì§€ ë¯¸í™•ì •
```

**Step 2**: ì¸í„°í˜ì´ìŠ¤ ì •ì˜
```java
public interface MemberRepository {
    void save(Member member);
    Member findById(Long memberId);
}
```

**Step 3**: ì„ì‹œ êµ¬í˜„ì²´ ì‘ì„±
```java
public class MemoryMemberRepository implements MemberRepository {
    // ì¼ë‹¨ ë©”ëª¨ë¦¬ë¡œ ê°œë°œ ì‹œì‘
}
```

**Step 4**: ì„œë¹„ìŠ¤ëŠ” ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´
```java
public class MemberService {
    private final MemberRepository memberRepository;
    // ì¸í„°í˜ì´ìŠ¤ë§Œ ì˜ì¡´!
}
```

**Step 5**: ë‚˜ì¤‘ì— êµ¬í˜„ì²´ êµì²´
```java
// ì •ì±… í™•ì • í›„
public class JdbcMemberRepository implements MemberRepository {
    // DBë¡œ ë³€ê²½
}
// MemberService ì½”ë“œëŠ” ìˆ˜ì • ë¶ˆí•„ìš”!
```

### ì˜ˆì œ: í• ì¸ ì •ì±… ì‹œë‚˜ë¦¬ì˜¤

**ì´ˆê¸° ìš”êµ¬ì‚¬í•­**: VIPì—ê²Œ 1000ì› ê³ ì • í• ì¸
```java
public class FixDiscountPolicy implements DiscountPolicy {
    private int discountFixAmount = 1000;

    @Override
    public int discount(Member member, int price) {
        if (member.getGrade() == Grade.VIP) {
            return discountFixAmount;
        }
        return 0;
    }
}
```

**ë³€ê²½ ìš”êµ¬ì‚¬í•­**: VIPì—ê²Œ 10% ì •ë¥  í• ì¸ìœ¼ë¡œ ë³€ê²½
```java
public class RateDiscountPolicy implements DiscountPolicy {
    private int discountPercent = 10;

    @Override
    public int discount(Member member, int price) {
        if (member.getGrade() == Grade.VIP) {
            return price * discountPercent / 100;
        }
        return 0;
    }
}
```

**ì„œë¹„ìŠ¤ ì½”ë“œëŠ” ë³€ê²½ ë¶ˆí•„ìš”**:
```java
public class OrderService {
    private final DiscountPolicy discountPolicy;

    public OrderService(DiscountPolicy discountPolicy) {
        this.discountPolicy = discountPolicy;
    }

    public Order createOrder(Long memberId, String itemName, int itemPrice) {
        // ì–´ë–¤ í• ì¸ ì •ì±…ì´ ì™€ë„ ë™ì¼í•˜ê²Œ ë™ì‘
        Member member = memberRepository.findById(memberId);
        int discountPrice = discountPolicy.discount(member, itemPrice);
        return new Order(memberId, itemName, itemPrice, discountPrice);
    }
}
```

#### 4. ì£¼ì˜í•  ì 

**ë¬¸ì œ ìƒí™©**: êµ¬í˜„ í´ë˜ìŠ¤ ì§ì ‘ ìƒì„±
```java
public class MemberService {
    // ë¬¸ì œ: ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬í˜„ í´ë˜ìŠ¤ ëª¨ë‘ì— ì˜ì¡´
    private final MemberRepository memberRepository = new MemoryMemberRepository();
}
```

**ì˜ì¡´ê´€ê³„ ë‹¤ì´ì–´ê·¸ë¨**:
```mermaid
graph LR
    A[MemberService] -->|ì˜ì¡´| B[MemberRepository<br/>ì¸í„°í˜ì´ìŠ¤]
    A -->|ì˜ì¡´| C[MemoryMemberRepository<br/>êµ¬í˜„ í´ë˜ìŠ¤]

    style A fill:#ffcccc
    style C fill:#ffcccc
```

**DIP ìœ„ë°˜**:
- `MemberRepository` (ì¶”ìƒí™”)ì— ì˜ì¡´
- `MemoryMemberRepository` (êµ¬ì²´í™”)ì—ë„ ì˜ì¡´

**í•´ê²°ì±…ì€?**
â†’ ë‹¤ìŒ ì±•í„°ì—ì„œ í•™ìŠµ!

### ğŸ’¡ Tip

- ì²˜ìŒë¶€í„° ì™„ë²½í•œ ì„¤ê³„ëŠ” ë¶ˆê°€ëŠ¥
- ì¸í„°í˜ì´ìŠ¤ë¡œ ë¶„ë¦¬í•˜ë©´ ë‚˜ì¤‘ì— ë³€ê²½ ìš©ì´
- "ì§€ê¸ˆ í™•ì •ëœ ê²ƒ"ê³¼ "ë‚˜ì¤‘ì— ë³€ê²½ë  ê²ƒ" êµ¬ë¶„

### ì£¼ìš” í¬ì¸íŠ¸

- ì—­í• (ì¸í„°í˜ì´ìŠ¤)ê³¼ êµ¬í˜„(í´ë˜ìŠ¤) ë¶„ë¦¬
- ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ì„¤ê³„
- êµ¬í˜„ì²´ëŠ” ì–¸ì œë“  êµì²´ ê°€ëŠ¥
- OCP, DIP ì›ì¹™ ì¤€ìˆ˜

---

## ì •ë¦¬

> ğŸ“Œ **TL;DR**
> - ë¶ˆí™•ì‹¤í•œ ìš”êµ¬ì‚¬í•­ì€ ì‹¤ë¬´ì˜ í˜„ì‹¤
> - ì¸í„°í˜ì´ìŠ¤ë¡œ ìœ ì—°í•œ ì„¤ê³„ ê°€ëŠ¥
> - ê°ì²´ ì§€í–¥ ì„¤ê³„ ì›ì¹™ í™œìš©

### í•µì‹¬ ê°œë…

**ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­**:
- íšŒì›: ê°€ì…, ì¡°íšŒ, ë“±ê¸‰(BASIC/VIP)
- ì£¼ë¬¸: ë“±ê¸‰ë³„ í• ì¸ ì •ì±…
- ë¯¸í™•ì •: ì €ì¥ì†Œ, í• ì¸ ì •ì±…

**ì„¤ê³„ ì „ëµ**:
- ì¸í„°í˜ì´ìŠ¤ë¡œ ì—­í• ê³¼ êµ¬í˜„ ë¶„ë¦¬
- êµ¬í˜„ì²´ë¥¼ ì–¸ì œë“  êµì²´ ê°€ëŠ¥í•˜ê²Œ
- ê°ì²´ ì§€í–¥ ì›ì¹™(OCP, DIP) ì ìš©

### ì£¼ìš” í¬ì¸íŠ¸

- ìš”êµ¬ì‚¬í•­ì— ë¶ˆí™•ì‹¤ì„±ì´ ìˆì–´ë„ ê°œë°œ ê°€ëŠ¥
- ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ ì„¤ê³„ë¡œ ë³€ê²½ì— ìœ ì—°
- ì„ì‹œ êµ¬í˜„ì²´ë¡œ ì‹œì‘ â†’ ë‚˜ì¤‘ì— êµì²´
- ìˆœìˆ˜ ìë°”ë¡œ ë¨¼ì € ê°œë°œ (ìŠ¤í”„ë§ ì—†ì´)

---

## ì „ì²´ ìš”ì•½

- ì˜ˆì œ í”„ë¡œì íŠ¸ëŠ” íšŒì› ê´€ë¦¬ì™€ ì£¼ë¬¸/í• ì¸ ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤
- ì €ì¥ì†Œì™€ í• ì¸ ì •ì±…ì´ ë¯¸í™•ì • ìƒíƒœì…ë‹ˆë‹¤ (ì‹¤ë¬´ì˜ í˜„ì‹¤)
- ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„ì²´ë¥¼ ì–¸ì œë“  êµì²´í•  ìˆ˜ ìˆê²Œ ì„¤ê³„í•©ë‹ˆë‹¤
- ê°ì²´ ì§€í–¥ ì„¤ê³„ ì›ì¹™(OCP, DIP)ì„ ì ìš©í•˜ì—¬ ìœ ì—°í•œ ì„¤ê³„ë¥¼ ë§Œë“­ë‹ˆë‹¤
- ìš°ì„  ìˆœìˆ˜ ìë°”ë¡œ ê°œë°œí•˜ì—¬ ê°ì²´ ì§€í–¥ ì„¤ê³„ë¥¼ í•™ìŠµí•©ë‹ˆë‹¤

## í•™ìŠµ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] íšŒì› ë„ë©”ì¸ ìš”êµ¬ì‚¬í•­ì„ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤
- [ ] ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸ ìš”êµ¬ì‚¬í•­ì„ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤
- [ ] ë¯¸í™•ì • ìš”êµ¬ì‚¬í•­ì„ ë‹¤ë£¨ëŠ” ì„¤ê³„ ì „ëµì„ ì´í•´í•œë‹¤
- [ ] ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•œ ìœ ì—°í•œ ì„¤ê³„ì˜ ì¥ì ì„ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤
- [ ] ì—­í• ê³¼ êµ¬í˜„ì„ ë¶„ë¦¬í•˜ëŠ” ì´ìœ ë¥¼ ì´í•´í•œë‹¤

## ë‹¤ìŒ í•™ìŠµ
ë‹¤ìŒ ì±•í„°ì—ì„œëŠ” "íšŒì› ë„ë©”ì¸ ì„¤ê³„"ë¥¼ í†µí•´ ì‹¤ì œë¡œ ì—­í• ê³¼ êµ¬í˜„ì„ ë¶„ë¦¬í•˜ì—¬ ì„¤ê³„í•˜ëŠ” ë°©ë²•ì„ í•™ìŠµí•©ë‹ˆë‹¤.

---

## ğŸ“š ì°¸ê³ ìë£Œ

- [ë„ë©”ì¸ ì£¼ë„ ì„¤ê³„(DDD) - Eric Evans](https://www.amazon.com/Domain-Driven-Design-Tackling-Complexity-Software/dp/0321125215)
- [í´ë¦° ì•„í‚¤í…ì²˜ - Robert C. Martin](https://www.amazon.com/Clean-Architecture-Craftsmans-Software-Structure/dp/0134494164)
- [ë””ìì¸ íŒ¨í„´ - GoF](https://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612)
- ê°ì²´ì§€í–¥ì˜ ì‚¬ì‹¤ê³¼ ì˜¤í•´ - ì¡°ì˜í˜¸ ì €

---

## ë©´ì ‘ ì§ˆë¬¸

### ì´ˆê¸‰ ê°œë°œì (Junior)

**Q1. ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ë¥¼ ì„¤ëª…í•´ì£¼ì„¸ìš”.**

<details>
<summary>ë‹µì•ˆ ë³´ê¸°</summary>

#### ë‹µì•ˆ

ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ì£¼ìš” ì´ìœ ëŠ” **ìœ ì—°ì„±**ê³¼ **í™•ì¥ì„±**ì…ë‹ˆë‹¤.

**1. ì—­í• ê³¼ êµ¬í˜„ì˜ ë¶„ë¦¬**:
```java
// ì—­í•  ì •ì˜ (ë¬´ì—‡ì„ í•  ê²ƒì¸ê°€)
public interface MemberRepository {
    void save(Member member);
    Member findById(Long memberId);
}

// êµ¬í˜„ (ì–´ë–»ê²Œ í•  ê²ƒì¸ê°€) - ë©”ëª¨ë¦¬
public class MemoryMemberRepository implements MemberRepository {
    // ë©”ëª¨ë¦¬ì— ì €ì¥
}

// êµ¬í˜„ (ì–´ë–»ê²Œ í•  ê²ƒì¸ê°€) - DB
public class DbMemberRepository implements MemberRepository {
    // DBì— ì €ì¥
}
```

**2. êµ¬í˜„ì²´ êµì²´ ê°€ëŠ¥**:
```java
public class MemberService {
    private final MemberRepository memberRepository;

    public MemberService(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }
    // ë©”ëª¨ë¦¬ë“  DBë“  ë™ì¼í•˜ê²Œ ë™ì‘
}
```

**3. í…ŒìŠ¤íŠ¸ ìš©ì´ì„±**:
```java
// í…ŒìŠ¤íŠ¸ìš© Mock ê°ì²´
public class MockMemberRepository implements MemberRepository {
    @Override
    public void save(Member member) {
        // í…ŒìŠ¤íŠ¸ìš© ê°„ë‹¨í•œ êµ¬í˜„
    }
}

// í…ŒìŠ¤íŠ¸ ì½”ë“œ
@Test
void test() {
    MemberService service = new MemberService(new MockMemberRepository());
    // ì‹¤ì œ DB ì—†ì´ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
}
```

**4. ë‹¤í˜•ì„± í™œìš©**:
```java
MemberRepository repo1 = new MemoryMemberRepository();
MemberRepository repo2 = new DbMemberRepository();
// ë™ì¼í•œ ì¸í„°í˜ì´ìŠ¤ë¡œ ë‹¤ì–‘í•œ êµ¬í˜„ì²´ ì‚¬ìš©
```

**ì¥ì  ìš”ì•½**:
- ê²°í•©ë„ ê°ì†Œ
- í™•ì¥ì„± ì¦ê°€
- í…ŒìŠ¤íŠ¸ ìš©ì´
- ë³€ê²½ì— ìœ ì—°

</details>

**Q2. OCP(ê°œë°©-íì‡„ ì›ì¹™)ê°€ ë¬´ì—‡ì¸ì§€ ì„¤ëª…í•˜ê³ , ì™œ ì¤‘ìš”í•œì§€ ë§í•´ì£¼ì„¸ìš”.**

<details>
<summary>ë‹µì•ˆ ë³´ê¸°</summary>

#### ë‹µì•ˆ

**OCP (Open-Closed Principle)**ëŠ” "ì†Œí”„íŠ¸ì›¨ì–´ëŠ” **í™•ì¥ì—ëŠ” ì—´ë ¤ìˆê³ , ë³€ê²½ì—ëŠ” ë‹«í˜€ìˆì–´ì•¼** í•œë‹¤"ëŠ” ì›ì¹™ì…ë‹ˆë‹¤.

**ì˜ë¯¸**:
- **í™•ì¥ì— ì—´ë ¤ìˆë‹¤**: ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤
- **ë³€ê²½ì— ë‹«í˜€ìˆë‹¤**: ê¸°ì¡´ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì§€ ì•ŠëŠ”ë‹¤

**ì˜ˆì‹œ: í• ì¸ ì •ì±…**

**OCP ìœ„ë°˜ (ë‚˜ìœ ì˜ˆ)**:
```java
public class OrderService {
    public int calculateDiscount(Member member, int price) {
        if (í• ì¸ì •ì±… == "ê³ ì •ê¸ˆì•¡") {
            return 1000;
        } else if (í• ì¸ì •ì±… == "ì •ë¥ ") {
            return price * 10 / 100;
        } else if (í• ì¸ì •ì±… == "ì‹ ê·œì¶”ê°€ì •ì±…") {
            // ìƒˆ ì •ì±… ì¶”ê°€ ì‹œ ì´ ì½”ë“œ ìˆ˜ì • í•„ìš”! â† ë³€ê²½ì— ì—´ë ¤ìˆìŒ (ë‚˜ì¨)
            return ...;
        }
    }
}
```

**OCP ì¤€ìˆ˜ (ì¢‹ì€ ì˜ˆ)**:
```java
// ì¸í„°í˜ì´ìŠ¤
public interface DiscountPolicy {
    int discount(Member member, int price);
}

// ê¸°ì¡´ ì •ì±…
public class FixDiscountPolicy implements DiscountPolicy {
    @Override
    public int discount(Member member, int price) {
        return 1000;
    }
}

// ìƒˆ ì •ì±… ì¶”ê°€ (ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • ì—†ìŒ)
public class RateDiscountPolicy implements DiscountPolicy {
    @Override
    public int discount(Member member, int price) {
        return price * 10 / 100;
    }
}

// OrderServiceëŠ” ìˆ˜ì • ë¶ˆí•„ìš”!
public class OrderService {
    private final DiscountPolicy discountPolicy;

    public int calculateDiscount(Member member, int price) {
        return discountPolicy.discount(member, price);
        // ì–´ë–¤ ì •ì±…ì´ ì¶”ê°€ë˜ì–´ë„ ì´ ì½”ë“œëŠ” ë³€ê²½ ì—†ìŒ â† ë³€ê²½ì— ë‹«í˜€ìˆìŒ (ì¢‹ìŒ)
    }
}
```

**ì¤‘ìš”í•œ ì´ìœ **:
1. **ìœ ì§€ë³´ìˆ˜ì„±**: ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • ìµœì†Œí™”
2. **ì•ˆì •ì„±**: ê¸°ì¡´ ê¸°ëŠ¥ ì˜í–¥ ì—†ìŒ
3. **í™•ì¥ì„±**: ìƒˆ ê¸°ëŠ¥ ì¶”ê°€ ìš©ì´
4. **í…ŒìŠ¤íŠ¸**: ê¸°ì¡´ í…ŒìŠ¤íŠ¸ ì¬ì‚¬ìš©

**ì‹¤ë¬´ ì ìš©**:
- ìƒˆë¡œìš´ ê²°ì œ ìˆ˜ë‹¨ ì¶”ê°€
- ìƒˆë¡œìš´ ì•Œë¦¼ ë°©ì‹ ì¶”ê°€
- ìƒˆë¡œìš´ íŒŒì¼ í¬ë§· ì§€ì›

</details>

---

### ì¤‘ê¸‰ ê°œë°œì (Mid-Level)

**Q3. ì „ëµ íŒ¨í„´(Strategy Pattern)ê³¼ ì´ ì˜ˆì œì˜ í• ì¸ ì •ì±… ì„¤ê³„ê°€ ì–´ë–»ê²Œ ì—°ê´€ë˜ëŠ”ì§€ ì„¤ëª…í•´ì£¼ì„¸ìš”.**

<details>
<summary>ë‹µì•ˆ ë³´ê¸°</summary>

#### ë‹µì•ˆ

ì˜ˆì œì˜ í• ì¸ ì •ì±… ì„¤ê³„ëŠ” **ì „ëµ íŒ¨í„´(Strategy Pattern)**ì„ êµ¬í˜„í•œ ê²ƒì…ë‹ˆë‹¤.

**ì „ëµ íŒ¨í„´ì˜ êµ¬ì„± ìš”ì†Œ**:

**1. Strategy (ì „ëµ ì¸í„°í˜ì´ìŠ¤)**:
```java
public interface DiscountPolicy {
    int discount(Member member, int price);
}
```

**2. ConcreteStrategy (êµ¬ì²´ì  ì „ëµ)**:
```java
// ì „ëµ 1: ê³ ì • ê¸ˆì•¡ í• ì¸
public class FixDiscountPolicy implements DiscountPolicy {
    private int discountFixAmount = 1000;

    @Override
    public int discount(Member member, int price) {
        if (member.getGrade() == Grade.VIP) {
            return discountFixAmount;
        }
        return 0;
    }
}

// ì „ëµ 2: ì •ë¥  í• ì¸
public class RateDiscountPolicy implements DiscountPolicy {
    private int discountPercent = 10;

    @Override
    public int discount(Member member, int price) {
        if (member.getGrade() == Grade.VIP) {
            return price * discountPercent / 100;
        }
        return 0;
    }
}

// ì „ëµ 3: í• ì¸ ì—†ìŒ
public class NoDiscountPolicy implements DiscountPolicy {
    @Override
    public int discount(Member member, int price) {
        return 0;
    }
}
```

**3. Context (ì „ëµ ì‚¬ìš©ì)**:
```java
public class OrderService {
    private final DiscountPolicy discountPolicy;  // ì „ëµ ë³´ìœ 

    public OrderService(DiscountPolicy discountPolicy) {
        this.discountPolicy = discountPolicy;
    }

    public Order createOrder(Long memberId, String itemName, int itemPrice) {
        Member member = memberRepository.findById(memberId);

        // ì „ëµ ì‹¤í–‰ (ìœ„ì„)
        int discountPrice = discountPolicy.discount(member, itemPrice);

        return new Order(memberId, itemName, itemPrice, discountPrice);
    }
}
```

**ì „ëµ íŒ¨í„´ì˜ ì¥ì **:

**1. ëŸ°íƒ€ì„ ì „ëµ ë³€ê²½**:
```java
// ê³ ì • ê¸ˆì•¡ í• ì¸ìœ¼ë¡œ ì£¼ë¬¸ ì„œë¹„ìŠ¤ ìƒì„±
OrderService orderService1 = new OrderService(new FixDiscountPolicy());

// ë‚˜ì¤‘ì— ì •ë¥  í• ì¸ìœ¼ë¡œ ë³€ê²½
OrderService orderService2 = new OrderService(new RateDiscountPolicy());

// í´ë¼ì´ì–¸íŠ¸ê°€ ì „ëµ ì„ íƒ
DiscountPolicy policy = selectPolicy();  // ë™ì  ì„ íƒ
OrderService orderService3 = new OrderService(policy);
```

**2. ìƒˆë¡œìš´ ì „ëµ ì¶”ê°€ ìš©ì´**:
```java
// ìƒˆë¡œìš´ ì „ëµ: VIPëŠ” 20% í• ì¸, ì¼ë°˜ íšŒì›ì€ 5% í• ì¸
public class TieredDiscountPolicy implements DiscountPolicy {
    @Override
    public int discount(Member member, int price) {
        if (member.getGrade() == Grade.VIP) {
            return price * 20 / 100;
        } else {
            return price * 5 / 100;
        }
    }
}
// OrderService ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”!
```

**3. ì¡°ê±´ë¬¸ ì œê±°**:
```java
// ì „ëµ íŒ¨í„´ ì‚¬ìš© ì „ (ë‚˜ì¨)
public int calculateDiscount(...) {
    if (type.equals("FIX")) {
        return 1000;
    } else if (type.equals("RATE")) {
        return price * 0.1;
    } else if (type.equals("TIERED")) {
        // ...
    }
    // ìƒˆ ì •ì±… ì¶”ê°€ ì‹œë§ˆë‹¤ ifë¬¸ ì¶”ê°€
}

// ì „ëµ íŒ¨í„´ ì‚¬ìš© í›„ (ì¢‹ìŒ)
public int calculateDiscount(...) {
    return discountPolicy.discount(member, price);
    // ì¡°ê±´ë¬¸ ì—†ìŒ, ì „ëµë§Œ ì‹¤í–‰
}
```

**UML ë‹¤ì´ì–´ê·¸ë¨**:
```mermaid
classDiagram
    class DiscountPolicy {
        <<interface>>
        +discount(Member, int) int
    }

    class FixDiscountPolicy {
        -discountFixAmount: int
        +discount(Member, int) int
    }

    class RateDiscountPolicy {
        -discountPercent: int
        +discount(Member, int) int
    }

    class OrderService {
        -discountPolicy: DiscountPolicy
        +createOrder() Order
    }

    DiscountPolicy <|.. FixDiscountPolicy
    DiscountPolicy <|.. RateDiscountPolicy
    OrderService --> DiscountPolicy
```

**ì‹¤ë¬´ í™œìš© ì‚¬ë¡€**:
- **ê²°ì œ ì „ëµ**: ì‹ ìš©ì¹´ë“œ, ê³„ì¢Œì´ì²´, ê°„í¸ê²°ì œ
- **ì •ë ¬ ì „ëµ**: ê°€ê²©ìˆœ, ì¸ê¸°ìˆœ, ìµœì‹ ìˆœ
- **ì••ì¶• ì „ëµ**: ZIP, RAR, TAR
- **ë¡œê¹… ì „ëµ**: File, Console, DB

**ì „ëµ íŒ¨í„´ vs if-else**:

| ë¹„êµ | if-else | ì „ëµ íŒ¨í„´ |
|------|---------|----------|
| í™•ì¥ì„± | ë‚®ìŒ (ì½”ë“œ ìˆ˜ì •) | ë†’ìŒ (ìƒˆ í´ë˜ìŠ¤ ì¶”ê°€) |
| í…ŒìŠ¤íŠ¸ | ì–´ë ¤ì›€ | ì‰¬ì›€ (ì „ëµë³„ ë…ë¦½) |
| ê°€ë…ì„± | ë‚®ìŒ (ë³µì¡í•œ ì¡°ê±´ë¬¸) | ë†’ìŒ (ëª…í™•í•œ í´ë˜ìŠ¤ëª…) |
| ìœ ì§€ë³´ìˆ˜ | ì–´ë ¤ì›€ | ì‰¬ì›€ |

</details>

**Q4. ì‹¤ë¬´ì—ì„œ ìš”êµ¬ì‚¬í•­ì´ ë¶ˆí™•ì‹¤í•  ë•Œ ì–´ë–»ê²Œ ëŒ€ì‘í•˜ëŠ” ê²ƒì´ ì¢‹ì„ê¹Œìš”?**

<details>
<summary>ë‹µì•ˆ ë³´ê¸°</summary>

#### ë‹µì•ˆ

ì‹¤ë¬´ì—ì„œ ìš”êµ¬ì‚¬í•­ ë¶ˆí™•ì‹¤ì„±ì€ ë§¤ìš° í”í•˜ë©°, ë‹¤ìŒê³¼ ê°™ì€ ì „ëµìœ¼ë¡œ ëŒ€ì‘í•©ë‹ˆë‹¤.

**1. ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ ì„¤ê³„**

**ì›ì¹™**:
- í™•ì‹¤í•œ ê²ƒ: ì¸í„°í˜ì´ìŠ¤ë¡œ ì •ì˜
- ë¶ˆí™•ì‹¤í•œ ê²ƒ: êµ¬í˜„ì²´ë¡œ ë¶„ë¦¬

**ì˜ˆì‹œ**:
```java
// í™•ì‹¤: "í• ì¸ ì •ì±…ì´ í•„ìš”í•˜ë‹¤"
public interface DiscountPolicy {
    int discount(Member member, int price);
}

// ë¶ˆí™•ì‹¤: "ì–´ë–¤ í• ì¸ ì •ì±…?"
// â†’ ì„ì‹œ êµ¬í˜„ì²´ë¡œ ì‹œì‘
public class FixDiscountPolicy implements DiscountPolicy {
    // ì¼ë‹¨ ê³ ì • ê¸ˆì•¡ìœ¼ë¡œ ì‹œì‘
}
```

**2. MVP (Minimum Viable Product) ì ‘ê·¼**

**ë‹¨ê³„ë³„ ê°œë°œ**:
```
1ë‹¨ê³„: ê°€ì¥ ê°„ë‹¨í•œ êµ¬í˜„
   â†’ MemoryMemberRepository (ë©”ëª¨ë¦¬ ì €ì¥ì†Œ)

2ë‹¨ê³„: ì •ì±… í™•ì • ì‹œ êµì²´
   â†’ JdbcMemberRepository (DB ì €ì¥ì†Œ)

3ë‹¨ê³„: ì„±ëŠ¥ ìµœì í™”
   â†’ CachedMemberRepository (ìºì‹œ ì¶”ê°€)
```

**3. í”¼ì²˜ í”Œë˜ê·¸(Feature Flag)**

```java
@Configuration
public class DiscountConfig {
    @Value("${discount.policy.type}")
    private String policyType;

    @Bean
    public DiscountPolicy discountPolicy() {
        if ("RATE".equals(policyType)) {
            return new RateDiscountPolicy();
        } else if ("FIX".equals(policyType)) {
            return new FixDiscountPolicy();
        }
        return new NoDiscountPolicy();  // ê¸°ë³¸ê°’
    }
}
```

**application.properties**:
```properties
# ê°œë°œ í™˜ê²½: í• ì¸ ì—†ìŒ
discount.policy.type=NONE

# ìš´ì˜ í™˜ê²½: ì •ë¥  í• ì¸
discount.policy.type=RATE
```

**4. ì–´ëŒ‘í„° íŒ¨í„´ í™œìš©**

```java
// ì™¸ë¶€ ì‹œìŠ¤í…œì´ í™•ì •ë˜ì§€ ì•ŠìŒ
public interface ExternalMemberSystem {
    Member getMember(Long id);
}

// ì„ì‹œ êµ¬í˜„
public class MockExternalSystem implements ExternalMemberSystem {
    @Override
    public Member getMember(Long id) {
        // í…ŒìŠ¤íŠ¸ìš© ë”ë¯¸ ë°ì´í„°
        return new Member(id, "testUser", Grade.BASIC);
    }
}

// ë‚˜ì¤‘ì— ì‹¤ì œ ì‹œìŠ¤í…œ ì—°ë™
public class RealExternalSystemAdapter implements ExternalMemberSystem {
    private ExternalApiClient apiClient;

    @Override
    public Member getMember(Long id) {
        // ì‹¤ì œ API í˜¸ì¶œ
        return apiClient.fetchMember(id);
    }
}
```

**5. ë¬¸ì„œí™” ë° ì»¤ë®¤ë‹ˆì¼€ì´ì…˜**

**TODO ì£¼ì„**:
```java
public class OrderService {
    private final DiscountPolicy discountPolicy;

    // TODO: í• ì¸ ì •ì±… í™•ì • í›„ ë³€ê²½ í•„ìš”
    // í˜„ì¬: ê³ ì • ê¸ˆì•¡ 1000ì›
    // ì˜ˆì •: ì •ë¥  10% (í™•ì • ëŒ€ê¸° ì¤‘)
    public OrderService() {
        this.discountPolicy = new FixDiscountPolicy();
    }
}
```

**ì„¤ê³„ ë¬¸ì„œ**:
```markdown
## ë¶ˆí™•ì‹¤í•œ ìš”êµ¬ì‚¬í•­

### íšŒì› ì €ì¥ì†Œ
- í˜„ì¬: MemoryMemberRepository (ì„ì‹œ)
- ëŒ€ì•ˆ:
  - JdbcMemberRepository (ìì²´ DB)
  - ApiMemberRepository (ì™¸ë¶€ ì‹œìŠ¤í…œ)
- ê²°ì • ì˜ˆì •ì¼: 2024-03-01

### í• ì¸ ì •ì±…
- í˜„ì¬: FixDiscountPolicy (VIP 1000ì› í• ì¸)
- ëŒ€ì•ˆ:
  - RateDiscountPolicy (VIP 10% í• ì¸)
  - TieredDiscountPolicy (ë“±ê¸‰ë³„ ì°¨ë“± í• ì¸)
- ê²°ì • ì˜ˆì •ì¼: ì˜¤í”ˆ 1ì£¼ì¼ ì „
```

**6. í…ŒìŠ¤íŠ¸ ì£¼ë„ ê°œë°œ(TDD)**

```java
// ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ í…ŒìŠ¤íŠ¸
@Test
void VIPíšŒì›ì€_í• ì¸ì„_ë°›ëŠ”ë‹¤() {
    // given
    Member vipMember = new Member(1L, "vip", Grade.VIP);
    DiscountPolicy policy = new FixDiscountPolicy();  // êµ¬í˜„ì²´ëŠ” ì–¸ì œë“  ë³€ê²½ ê°€ëŠ¥

    // when
    int discount = policy.discount(vipMember, 10000);

    // then
    assertThat(discount).isGreaterThan(0);  // êµ¬ì²´ì  ê¸ˆì•¡ì€ í™•ì • ì „
}
```

**7. ì ì§„ì  ë¦¬íŒ©í† ë§**

```java
// Phase 1: í•˜ë“œì½”ë”© (ë¹ ë¥¸ ê°œë°œ)
public class OrderService {
    public int getDiscount() {
        return 1000;  // ì¼ë‹¨ ê³ ì •ê°’
    }
}

// Phase 2: ì¡°ê±´ë¬¸ (ìš”êµ¬ì‚¬í•­ íŒŒì•…)
public class OrderService {
    public int getDiscount(Member member) {
        if (member.getGrade() == Grade.VIP) {
            return 1000;
        }
        return 0;
    }
}

// Phase 3: ì „ëµ íŒ¨í„´ (í™•ì¥ ê°€ëŠ¥í•œ ì„¤ê³„)
public class OrderService {
    private final DiscountPolicy discountPolicy;
    // ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ ì„¤ê³„
}
```

**8. ì‹¤ë¬´ ê¶Œì¥ì‚¬í•­**

**DO**:
- âœ… ì¸í„°í˜ì´ìŠ¤ë¡œ ì—­í•  ë¨¼ì € ì •ì˜
- âœ… ê°€ì¥ ê°„ë‹¨í•œ êµ¬í˜„ì²´ë¡œ ì‹œì‘
- âœ… ìš”êµ¬ì‚¬í•­ ë³€ê²½ ì´ë ¥ ë¬¸ì„œí™”
- âœ… ì •ê¸°ì ìœ¼ë¡œ ë¹„ì¦ˆë‹ˆìŠ¤ íŒ€ê³¼ ë™ê¸°í™”

**DON'T**:
- âŒ ì™„ë²½í•œ ì„¤ê³„ë¥¼ ê¸°ë‹¤ë¦¬ë©° ê°œë°œ ì§€ì—°
- âŒ ì¶”ì¸¡ìœ¼ë¡œ ë³µì¡í•œ êµ¬ì¡° ë¯¸ë¦¬ êµ¬í˜„
- âŒ ë¶ˆí™•ì‹¤í•œ ë¶€ë¶„ í•˜ë“œì½”ë”©
- âŒ ë¬¸ì„œí™” ì—†ì´ ì„ì‹œ êµ¬í˜„ ë°©ì¹˜

**í•µì‹¬ ì›ì¹™**:
> "YAGNI (You Aren't Gonna Need It)"
> - ì§€ê¸ˆ í•„ìš”í•œ ê²ƒë§Œ êµ¬í˜„
> - ë¯¸ë˜ë¥¼ ìœ„í•œ ê³¼ë„í•œ ì¶”ìƒí™” ì§€ì–‘
> - í•„ìš”í•  ë•Œ ë¦¬íŒ©í† ë§

</details>

---

### ê³ ê¸‰ ê°œë°œì (Senior)

**Q5. ë„ë©”ì¸ ì£¼ë„ ì„¤ê³„(DDD)ì˜ ê´€ì ì—ì„œ ì´ ì˜ˆì œì˜ ì„¤ê³„ë¥¼ í‰ê°€í•˜ê³ , ê°œì„  ë°©ì•ˆì„ ì œì‹œí•´ì£¼ì„¸ìš”.**

<details>
<summary>ë‹µì•ˆ ë³´ê¸°</summary>

#### ë‹µì•ˆ

DDD ê´€ì ì—ì„œ ì˜ˆì œë¥¼ ë¶„ì„í•˜ê³  ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ê² ìŠµë‹ˆë‹¤.

**í˜„ì¬ ì„¤ê³„ ë¶„ì„**:

**1. ìœ ë¹„ì¿¼í„°ìŠ¤ ì–¸ì–´ (Ubiquitous Language)**

**âœ… ì˜ëœ ì **:
```java
public enum Grade {
    BASIC,  // "ì¼ë°˜ íšŒì›" (ë¹„ì¦ˆë‹ˆìŠ¤ ìš©ì–´)
    VIP     // "VIP íšŒì›" (ë¹„ì¦ˆë‹ˆìŠ¤ ìš©ì–´)
}

public interface DiscountPolicy {
    int discount(...);  // "í• ì¸ ì •ì±…" (ë¹„ì¦ˆë‹ˆìŠ¤ ìš©ì–´)
}

public class Order {  // "ì£¼ë¬¸" (ë¹„ì¦ˆë‹ˆìŠ¤ ìš©ì–´)
    private String itemName;    // "ìƒí’ˆëª…"
    private int discountPrice;  // "í• ì¸ ê¸ˆì•¡"
}
```

**2. ê²½ê³„ ì»¨í…ìŠ¤íŠ¸ (Bounded Context)**

**í˜„ì¬ êµ¬ì¡°**:
```
[íšŒì› ì»¨í…ìŠ¤íŠ¸]
- Member
- MemberService
- MemberRepository

[ì£¼ë¬¸ ì»¨í…ìŠ¤íŠ¸]
- Order
- OrderService
- DiscountPolicy
```

**âš ï¸ ê°œì„  í•„ìš”**: ì»¨í…ìŠ¤íŠ¸ ê°„ ì˜ì¡´ê´€ê³„ê°€ ëª…í™•í•˜ì§€ ì•ŠìŒ

**3. ì• ê·¸ë¦¬ê±°íŠ¸ (Aggregate)**

**í˜„ì¬**:
```java
public class Order {
    private Long memberId;      // íšŒì› IDë§Œ ì°¸ì¡°
    private String itemName;
    private int itemPrice;
    private int discountPrice;
}
```

**âš ï¸ ë¬¸ì œì **:
- Order ë‚´ë¶€ ì¼ê´€ì„± ë¶€ì¡±
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ì„œë¹„ìŠ¤ì— ì§‘ì¤‘ë¨

**ê°œì„  ë°©ì•ˆ**:

**1. ë„ë©”ì¸ ëª¨ë¸ ê°•í™”**

**Before (ë¹ˆì•½í•œ ë„ë©”ì¸ ëª¨ë¸)**:
```java
public class Order {
    private Long memberId;
    private String itemName;
    private int itemPrice;
    private int discountPrice;

    // getter, setterë§Œ ì¡´ì¬
    // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì—†ìŒ â†’ ë¹ˆì•½í•œ ë„ë©”ì¸ ëª¨ë¸
}

// ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ì„œë¹„ìŠ¤ì— ì§‘ì¤‘ë¨
public class OrderService {
    public Order createOrder(Long memberId, String itemName, int itemPrice) {
        Member member = memberRepository.findById(memberId);
        int discountPrice = discountPolicy.discount(member, itemPrice);

        // ê³„ì‚° ë¡œì§ì´ ì„œë¹„ìŠ¤ì— ìˆìŒ
        return new Order(memberId, itemName, itemPrice, discountPrice);
    }
}
```

**After (í’ë¶€í•œ ë„ë©”ì¸ ëª¨ë¸)**:
```java
public class Order {
    private OrderId id;                    // ê°’ ê°ì²´
    private MemberId memberId;             // ê°’ ê°ì²´
    private OrderLine orderLine;           // ì£¼ë¬¸ í•­ëª© (ê°’ ê°ì²´)
    private Money discountAmount;          // ê°’ ê°ì²´
    private OrderStatus status;            // ì£¼ë¬¸ ìƒíƒœ

    // ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œ
    public static Order create(MemberId memberId,
                               OrderLine orderLine,
                               DiscountPolicy discountPolicy) {
        Money totalPrice = orderLine.getPrice();
        Money discountAmount = discountPolicy.calculate(memberId, totalPrice);

        return new Order(
            OrderId.generate(),
            memberId,
            orderLine,
            discountAmount,
            OrderStatus.CREATED
        );
    }

    // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ë„ë©”ì¸ ê°ì²´ì— ìˆìŒ
    public Money calculateFinalPrice() {
        return orderLine.getPrice().subtract(discountAmount);
    }

    public void cancel() {
        if (status == OrderStatus.SHIPPED) {
            throw new IllegalStateException("ë°°ì†¡ ì™„ë£Œëœ ì£¼ë¬¸ì€ ì·¨ì†Œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤");
        }
        this.status = OrderStatus.CANCELED;
    }

    // ë¶ˆë³€ì„± ë³´ì¥
    private Order(OrderId id, MemberId memberId,
                  OrderLine orderLine, Money discountAmount,
                  OrderStatus status) {
        this.id = Objects.requireNonNull(id);
        this.memberId = Objects.requireNonNull(memberId);
        this.orderLine = Objects.requireNonNull(orderLine);
        this.discountAmount = Objects.requireNonNull(discountAmount);
        this.status = status;
    }
}
```

**2. ê°’ ê°ì²´ (Value Object) ë„ì…**

```java
// Money ê°’ ê°ì²´
public class Money {
    private final int amount;

    private Money(int amount) {
        if (amount < 0) {
            throw new IllegalArgumentException("ê¸ˆì•¡ì€ ìŒìˆ˜ì¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤");
        }
        this.amount = amount;
    }

    public static Money of(int amount) {
        return new Money(amount);
    }

    public Money subtract(Money other) {
        return new Money(this.amount - other.amount);
    }

    public Money multiply(double rate) {
        return new Money((int) (this.amount * rate));
    }

    // ê°’ ê°ì²´ëŠ” ë¶ˆë³€
    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (!(o instanceof Money)) return false;
        Money money = (Money) o;
        return amount == money.amount;
    }

    @Override
    public int hashCode() {
        return Objects.hash(amount);
    }
}

// OrderLine ê°’ ê°ì²´
public class OrderLine {
    private final String itemName;
    private final Money price;
    private final int quantity;

    public OrderLine(String itemName, Money price, int quantity) {
        this.itemName = Objects.requireNonNull(itemName);
        this.price = Objects.requireNonNull(price);

        if (quantity <= 0) {
            throw new IllegalArgumentException("ìˆ˜ëŸ‰ì€ 1 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤");
        }
        this.quantity = quantity;
    }

    public Money getTotalPrice() {
        return price.multiply(quantity);
    }
}
```

**3. ë„ë©”ì¸ ì„œë¹„ìŠ¤ ë¶„ë¦¬**

```java
// ë„ë©”ì¸ ì„œë¹„ìŠ¤: ì—¬ëŸ¬ ì• ê·¸ë¦¬ê±°íŠ¸ë¥¼ ì¡°ìœ¨
public class OrderDomainService {
    public Order createOrder(Member member,
                             OrderLine orderLine,
                             DiscountPolicy discountPolicy) {
        // ë„ë©”ì¸ ë¡œì§
        Money discountAmount = discountPolicy.calculate(
            member.getId(),
            orderLine.getTotalPrice()
        );

        return Order.create(
            member.getId(),
            orderLine,
            discountAmount
        );
    }
}

// ì‘ìš© ì„œë¹„ìŠ¤: íŠ¸ëœì­ì…˜, ì¸í”„ë¼ ì¡°ìœ¨
@Service
@Transactional
public class OrderApplicationService {
    private final MemberRepository memberRepository;
    private final OrderRepository orderRepository;
    private final OrderDomainService orderDomainService;
    private final DiscountPolicy discountPolicy;

    public OrderId createOrder(CreateOrderCommand command) {
        // 1. ì• ê·¸ë¦¬ê±°íŠ¸ ì¡°íšŒ
        Member member = memberRepository.findById(command.getMemberId())
            .orElseThrow(() -> new MemberNotFoundException());

        // 2. ë„ë©”ì¸ ì„œë¹„ìŠ¤ í˜¸ì¶œ
        Order order = orderDomainService.createOrder(
            member,
            new OrderLine(command.getItemName(),
                         Money.of(command.getPrice()),
                         command.getQuantity()),
            discountPolicy
        );

        // 3. ì €ì¥
        orderRepository.save(order);

        // 4. ì´ë²¤íŠ¸ ë°œí–‰ (ì„ íƒì‚¬í•­)
        domainEventPublisher.publish(new OrderCreatedEvent(order.getId()));

        return order.getId();
    }
}
```

**4. ë¦¬í¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤ ê°œì„ **

```java
// Before
public interface MemberRepository {
    void save(Member member);
    Member findById(Long memberId);
}

// After
public interface MemberRepository {
    void save(Member member);
    Optional<Member> findById(MemberId memberId);  // ê°’ ê°ì²´ ì‚¬ìš©
    Optional<Member> findByEmail(Email email);
    List<Member> findByGrade(Grade grade);
    boolean existsByEmail(Email email);
}

// êµ¬í˜„ì²´ëŠ” ì¸í”„ë¼ ê³„ì¸µ
@Repository
public class JpaMemberRepository implements MemberRepository {
    @PersistenceContext
    private EntityManager em;

    @Override
    public void save(Member member) {
        em.persist(member);
    }

    @Override
    public Optional<Member> findById(MemberId memberId) {
        Member member = em.find(Member.class, memberId.getValue());
        return Optional.ofNullable(member);
    }
}
```

**5. ê³„ì¸µ êµ¬ì¡° ëª…í™•í™”**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Presentation Layer                 â”‚
â”‚  - Controller (REST API)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Application Layer                  â”‚
â”‚  - ApplicationService               â”‚
â”‚  - Command/Query                    â”‚
â”‚  - DTO                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Domain Layer â­                     â”‚
â”‚  - Aggregate (Order, Member)        â”‚
â”‚  - Value Object (Money, OrderLine)  â”‚
â”‚  - Domain Service                   â”‚
â”‚  - Domain Event                     â”‚
â”‚  - Repository Interface             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Infrastructure Layer               â”‚
â”‚  - Repository Implementation        â”‚
â”‚  - External API Client              â”‚
â”‚  - Message Queue                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**6. ë„ë©”ì¸ ì´ë²¤íŠ¸ ë„ì…**

```java
// ë„ë©”ì¸ ì´ë²¤íŠ¸
public class OrderCreatedEvent {
    private final OrderId orderId;
    private final MemberId memberId;
    private final LocalDateTime occurredOn;

    public OrderCreatedEvent(OrderId orderId, MemberId memberId) {
        this.orderId = orderId;
        this.memberId = memberId;
        this.occurredOn = LocalDateTime.now();
    }
}

// ì• ê·¸ë¦¬ê±°íŠ¸ì—ì„œ ì´ë²¤íŠ¸ ë°œí–‰
public class Order {
    private List<DomainEvent> domainEvents = new ArrayList<>();

    public static Order create(...) {
        Order order = new Order(...);
        order.addDomainEvent(new OrderCreatedEvent(order.getId(), order.getMemberId()));
        return order;
    }

    private void addDomainEvent(DomainEvent event) {
        this.domainEvents.add(event);
    }

    public List<DomainEvent> getDomainEvents() {
        return Collections.unmodifiableList(domainEvents);
    }

    public void clearDomainEvents() {
        this.domainEvents.clear();
    }
}
```

**7. íŒ¨í‚¤ì§€ êµ¬ì¡°**

```
com.example.order
â”œâ”€â”€ domain
â”‚   â”œâ”€â”€ model
â”‚   â”‚   â”œâ”€â”€ order
â”‚   â”‚   â”‚   â”œâ”€â”€ Order.java           (ì• ê·¸ë¦¬ê±°íŠ¸ ë£¨íŠ¸)
â”‚   â”‚   â”‚   â”œâ”€â”€ OrderId.java         (ê°’ ê°ì²´)
â”‚   â”‚   â”‚   â”œâ”€â”€ OrderLine.java       (ê°’ ê°ì²´)
â”‚   â”‚   â”‚   â”œâ”€â”€ OrderStatus.java     (Enum)
â”‚   â”‚   â”‚   â””â”€â”€ OrderRepository.java (ì¸í„°í˜ì´ìŠ¤)
â”‚   â”‚   â”œâ”€â”€ member
â”‚   â”‚   â”‚   â”œâ”€â”€ Member.java
â”‚   â”‚   â”‚   â”œâ”€â”€ MemberId.java
â”‚   â”‚   â”‚   â”œâ”€â”€ Grade.java
â”‚   â”‚   â”‚   â””â”€â”€ MemberRepository.java
â”‚   â”‚   â””â”€â”€ shared
â”‚   â”‚       â””â”€â”€ Money.java           (ê³µìœ  ê°’ ê°ì²´)
â”‚   â””â”€â”€ service
â”‚       â””â”€â”€ OrderDomainService.java  (ë„ë©”ì¸ ì„œë¹„ìŠ¤)
â”œâ”€â”€ application
â”‚   â”œâ”€â”€ service
â”‚   â”‚   â””â”€â”€ OrderApplicationService.java
â”‚   â””â”€â”€ dto
â”‚       â”œâ”€â”€ CreateOrderCommand.java
â”‚       â””â”€â”€ OrderResponse.java
â””â”€â”€ infrastructure
    â”œâ”€â”€ persistence
    â”‚   â”œâ”€â”€ JpaOrderRepository.java
    â”‚   â””â”€â”€ JpaMemberRepository.java
    â””â”€â”€ external
        â””â”€â”€ ExternalApiClient.java
```

**8. ìµœì¢… ë¹„êµ**

| í•­ëª© | Before | After (DDD) |
|------|--------|-------------|
| ë„ë©”ì¸ ëª¨ë¸ | ë¹ˆì•½í•¨ | í’ë¶€í•¨ |
| ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ | ì„œë¹„ìŠ¤ì— ì§‘ì¤‘ | ë„ë©”ì¸ ê°ì²´ì— ë¶„ì‚° |
| ê°’ ê°ì²´ | ì›ì‹œ íƒ€ì… ì‚¬ìš© | Money, OrderLine ë“± |
| ë¶ˆë³€ì„± | ë³´ì¥ ì•ˆë¨ | ë³´ì¥ë¨ |
| ê³„ì¸µ ë¶„ë¦¬ | ë¶ˆëª…í™• | ëª…í™• (Domain, Application) |
| ì´ë²¤íŠ¸ | ì—†ìŒ | ë„ë©”ì¸ ì´ë²¤íŠ¸ |

**í•µì‹¬ ê°œì„  íš¨ê³¼**:
1. **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì§‘ì¤‘**: ë„ë©”ì¸ ê°ì²´ì— ë¡œì§ ìœ„ì¹˜
2. **ë¶ˆë³€ì„± ë³´ì¥**: ê°’ ê°ì²´ë¡œ ì•ˆì •ì„± í–¥ìƒ
3. **ëª…í™•í•œ ì±…ì„**: ë„ë©”ì¸ ì„œë¹„ìŠ¤ vs ì‘ìš© ì„œë¹„ìŠ¤
4. **í™•ì¥ì„±**: ì´ë²¤íŠ¸ ê¸°ë°˜ìœ¼ë¡œ ëŠìŠ¨í•œ ê²°í•©

</details>

---

## ë„¤ë¹„ê²Œì´ì…˜

â¬…ï¸ [ì´ì „: 2-1. í”„ë¡œì íŠ¸ ìƒì„±](./2-1-í”„ë¡œì íŠ¸ìƒì„±.md)
â¡ï¸ [ë‹¤ìŒ: 2-3. íšŒì› ë„ë©”ì¸ ì„¤ê³„](./2-3-íšŒì›ë„ë©”ì¸ì„¤ê³„.md)

---

**ì‘ì„± ì™„ë£Œì¼**: 2025-01-23
**ë¬¸ì„œ ë²„ì „**: 1.0
