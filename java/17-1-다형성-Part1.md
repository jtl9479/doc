# 17-1. 다형성 (Polymorphism) - Part 1

## 📋 목차
1. [다형성이란?](#다형성이란)
2. [실생활 비유 1: 리모컨](#비유1-리모컨)
3. [실생활 비유 2: 결제 단말기](#비유2-결제-단말기)
4. [실생활 비유 3: USB 포트](#비유3-usb-포트)
5. [실생활 비유 4: 동물병원](#비유4-동물병원)
6. [실생활 비유 5: 스마트홈 허브](#비유5-스마트홈-허브)

---

## 🎯 다형성이란? {#다형성이란}

### 정의
다형성(Polymorphism)은 **하나의 타입으로 여러 종류의 객체를 참조할 수 있는 능력**입니다. "poly(많은)" + "morph(형태)"의 합성어로, 하나의 인터페이스로 여러 구현을 다룰 수 있습니다.

### 핵심 개념

```java
// 부모 타입으로 자식 객체를 참조
Animal animal1 = new Dog();     // ✅ 가능
Animal animal2 = new Cat();     // ✅ 가능
Animal animal3 = new Bird();    // ✅ 가능

// 같은 메서드 호출, 다른 동작
animal1.makeSound();  // "멍멍!"
animal2.makeSound();  // "야옹~"
animal3.makeSound();  // "짹짹!"
```

### 다형성의 종류

#### 1. 컴파일타임 다형성 (정적 다형성)
- **메서드 오버로딩**
- 컴파일 시점에 결정됨

```java
class Calculator {
    public int add(int a, int b) {
        return a + b;
    }

    public double add(double a, double b) {  // 오버로딩
        return a + b;
    }
}
```

#### 2. 런타임 다형성 (동적 다형성)
- **메서드 오버라이딩**
- 실행 시점에 결정됨
- **이 장의 핵심!**

```java
class Animal {
    public void makeSound() {
        System.out.println("동물 소리");
    }
}

class Dog extends Animal {
    @Override
    public void makeSound() {
        System.out.println("멍멍!");
    }
}

// 런타임에 실제 객체 타입에 따라 결정
Animal animal = new Dog();
animal.makeSound();  // "멍멍!" (Dog의 메서드 호출)
```

### 다형성의 3요소

1. **상속 관계**: 부모-자식 관계 필요
2. **메서드 오버라이딩**: 자식이 부모 메서드 재정의
3. **부모 타입 참조**: 부모 타입으로 자식 객체 참조

```java
// 1. 상속 관계
class Animal { }
class Dog extends Animal { }

// 2. 메서드 오버라이딩
class Animal {
    public void makeSound() { }
}
class Dog extends Animal {
    @Override
    public void makeSound() { }
}

// 3. 부모 타입 참조
Animal animal = new Dog();  // 다형성!
```

### 업캐스팅 vs 다운캐스팅

```java
class Animal {
    public void eat() { }
}

class Dog extends Animal {
    public void bark() { }
}

// 업캐스팅 (Upcasting) - 자동 변환
Animal animal = new Dog();  // ✅ 자동으로 가능
animal.eat();   // ✅ 가능
animal.bark();  // ❌ 컴파일 에러 (Animal에는 bark()가 없음)

// 다운캐스팅 (Downcasting) - 명시적 변환 필요
Dog dog = (Dog) animal;  // ✅ 명시적 캐스팅
dog.bark();  // ✅ 이제 가능

// 잘못된 다운캐스팅
Animal cat = new Cat();
Dog wrongDog = (Dog) cat;  // ❌ 런타임 에러 (ClassCastException)
```

---

## 🎮 실생활 비유 1: 리모컨 {#비유1-리모컨}

### 비유 설명
TV, 에어컨, 셋톱박스 등 여러 가전제품을 하나의 만능 리모컨으로 제어할 수 있습니다. 리모컨의 "전원" 버튼을 누르면, 실제로는 각 기기에 맞는 동작이 실행됩니다.

### Java 코드로 구현

```java
/**
 * 모든 가전제품의 부모 클래스
 */
public abstract class Appliance {
    protected String brand;
    protected String model;
    protected boolean isPowerOn;

    public Appliance(String brand, String model) {
        this.brand = brand;
        this.model = model;
        this.isPowerOn = false;
    }

    // 추상 메서드 - 각 기기마다 다르게 구현
    public abstract void powerOn();
    public abstract void powerOff();
    public abstract void operate();

    public void showInfo() {
        System.out.println("📱 " + brand + " " + model);
        System.out.println("전원: " + (isPowerOn ? "ON" : "OFF"));
    }
}

/**
 * TV
 */
public class Television extends Appliance {
    private int currentChannel;
    private int volume;

    public Television(String brand, String model) {
        super(brand, model);
        this.currentChannel = 1;
        this.volume = 10;
    }

    @Override
    public void powerOn() {
        isPowerOn = true;
        System.out.println("\n📺 " + brand + " TV 전원 ON");
        System.out.println("화면이 켜집니다...");
        System.out.println("현재 채널: " + currentChannel);
        System.out.println("음량: " + volume);
    }

    @Override
    public void powerOff() {
        isPowerOn = false;
        System.out.println("\n📺 " + brand + " TV 전원 OFF");
        System.out.println("화면이 꺼집니다...");
    }

    @Override
    public void operate() {
        if (!isPowerOn) {
            System.out.println("❌ TV가 꺼져있습니다.");
            return;
        }

        System.out.println("\n📺 TV 채널 변경");
        currentChannel++;
        System.out.println("채널: " + currentChannel);
    }

    public void changeChannel(int channel) {
        if (isPowerOn) {
            currentChannel = channel;
            System.out.println("채널 변경: " + channel);
        }
    }

    public void volumeUp() {
        if (isPowerOn) {
            volume = Math.min(100, volume + 1);
            System.out.println("🔊 음량: " + volume);
        }
    }
}

/**
 * 에어컨
 */
public class AirConditioner extends Appliance {
    private int temperature;
    private String mode;  // cooling, heating, dehumidifying

    public AirConditioner(String brand, String model) {
        super(brand, model);
        this.temperature = 24;
        this.mode = "cooling";
    }

    @Override
    public void powerOn() {
        isPowerOn = true;
        System.out.println("\n❄️ " + brand + " 에어컨 전원 ON");
        System.out.println("에어컨이 작동합니다...");
        System.out.println("설정 온도: " + temperature + "°C");
        System.out.println("모드: " + getModeKorean());
    }

    @Override
    public void powerOff() {
        isPowerOn = false;
        System.out.println("\n❄️ " + brand + " 에어컨 전원 OFF");
        System.out.println("에어컨이 정지합니다...");
    }

    @Override
    public void operate() {
        if (!isPowerOn) {
            System.out.println("❌ 에어컨이 꺼져있습니다.");
            return;
        }

        System.out.println("\n❄️ 온도 조절");
        temperature--;
        System.out.println("온도: " + temperature + "°C");
    }

    public void setTemperature(int temp) {
        if (isPowerOn) {
            temperature = temp;
            System.out.println("온도 설정: " + temperature + "°C");
        }
    }

    public void setMode(String mode) {
        if (isPowerOn) {
            this.mode = mode;
            System.out.println("모드 변경: " + getModeKorean());
        }
    }

    private String getModeKorean() {
        switch (mode) {
            case "cooling": return "냉방";
            case "heating": return "난방";
            case "dehumidifying": return "제습";
            default: return mode;
        }
    }
}

/**
 * 셋톱박스
 */
public class SetTopBox extends Appliance {
    private String currentApp;
    private boolean isConnected;

    public SetTopBox(String brand, String model) {
        super(brand, model);
        this.currentApp = "홈";
        this.isConnected = false;
    }

    @Override
    public void powerOn() {
        isPowerOn = true;
        System.out.println("\n📦 " + brand + " 셋톱박스 전원 ON");
        System.out.println("부팅 중...");
        connectToInternet();
        System.out.println("현재 앱: " + currentApp);
    }

    @Override
    public void powerOff() {
        isPowerOn = false;
        isConnected = false;
        System.out.println("\n📦 " + brand + " 셋톱박스 전원 OFF");
        System.out.println("시스템 종료...");
    }

    @Override
    public void operate() {
        if (!isPowerOn) {
            System.out.println("❌ 셋톱박스가 꺼져있습니다.");
            return;
        }

        System.out.println("\n📦 앱 실행");
        String[] apps = {"Netflix", "YouTube", "Disney+", "Wavve"};
        currentApp = apps[(int)(Math.random() * apps.length)];
        System.out.println("▶ " + currentApp + " 실행");
    }

    private void connectToInternet() {
        isConnected = true;
        System.out.println("🌐 인터넷 연결됨");
    }

    public void launchApp(String app) {
        if (isPowerOn && isConnected) {
            currentApp = app;
            System.out.println("▶ " + app + " 실행");
        }
    }
}

/**
 * 공기청정기
 */
public class AirPurifier extends Appliance {
    private int fanSpeed;  // 1-5
    private int airQuality;  // 0-500 (낮을수록 좋음)

    public AirPurifier(String brand, String model) {
        super(brand, model);
        this.fanSpeed = 1;
        this.airQuality = 50;
    }

    @Override
    public void powerOn() {
        isPowerOn = true;
        System.out.println("\n🌬️ " + brand + " 공기청정기 전원 ON");
        System.out.println("공기청정 시작...");
        measureAirQuality();
        System.out.println("풍량: " + fanSpeed + "단계");
    }

    @Override
    public void powerOff() {
        isPowerOn = false;
        System.out.println("\n🌬️ " + brand + " 공기청정기 전원 OFF");
        System.out.println("팬이 정지합니다...");
    }

    @Override
    public void operate() {
        if (!isPowerOn) {
            System.out.println("❌ 공기청정기가 꺼져있습니다.");
            return;
        }

        System.out.println("\n🌬️ 풍량 조절");
        fanSpeed = (fanSpeed % 5) + 1;
        System.out.println("풍량: " + fanSpeed + "단계");
    }

    private void measureAirQuality() {
        airQuality = 30 + (int)(Math.random() * 70);
        System.out.println("공기질: " + getAirQualityLevel());
    }

    private String getAirQualityLevel() {
        if (airQuality <= 30) return "매우 좋음 😊";
        else if (airQuality <= 50) return "좋음 🙂";
        else if (airQuality <= 100) return "보통 😐";
        else return "나쁨 😷";
    }

    public void autoMode() {
        if (isPowerOn) {
            System.out.println("🔄 자동 모드 활성화");
            if (airQuality > 80) {
                fanSpeed = 5;
            } else if (airQuality > 50) {
                fanSpeed = 3;
            } else {
                fanSpeed = 1;
            }
            System.out.println("풍량 자동 조절: " + fanSpeed + "단계");
        }
    }
}
```

### 만능 리모컨 (다형성 활용)

```java
/**
 * 만능 리모컨 - 다형성을 활용한 통합 제어
 */
public class UniversalRemote {
    private Appliance currentDevice;  // 다형성!

    public void setDevice(Appliance device) {
        this.currentDevice = device;
        System.out.println("\n🎮 리모컨 연결: " + device.brand + " " + device.model);
    }

    // 전원 버튼
    public void pressPowerButton() {
        if (currentDevice == null) {
            System.out.println("❌ 연결된 기기가 없습니다.");
            return;
        }

        System.out.println("\n🔘 [전원] 버튼 누름");

        if (currentDevice.isPowerOn) {
            currentDevice.powerOff();
        } else {
            currentDevice.powerOn();
        }
    }

    // 동작 버튼
    public void pressOperateButton() {
        if (currentDevice == null) {
            System.out.println("❌ 연결된 기기가 없습니다.");
            return;
        }

        System.out.println("\n🔘 [동작] 버튼 누름");
        currentDevice.operate();
    }

    // 정보 표시
    public void showDeviceInfo() {
        if (currentDevice == null) {
            System.out.println("❌ 연결된 기기가 없습니다.");
            return;
        }

        System.out.println("\n━━━━━━━━━━━━━━━━━━━━");
        currentDevice.showInfo();
        System.out.println("━━━━━━━━━━━━━━━━━━━━");
    }
}
```

### 실행 테스트

```java
public class SmartHomeTest {
    public static void main(String[] args) {
        System.out.println("🏠 ═══════════════════════════════");
        System.out.println("   스마트홈 리모컨 시스템");
        System.out.println("═══════════════════════════════\n");

        // 가전제품 생성
        Television tv = new Television("삼성", "Neo QLED");
        AirConditioner ac = new AirConditioner("LG", "휘센");
        SetTopBox stb = new SetTopBox("Apple", "Apple TV 4K");
        AirPurifier purifier = new AirPurifier("코웨이", "air dream");

        // 만능 리모컨 생성
        UniversalRemote remote = new UniversalRemote();

        // 1. TV 제어
        remote.setDevice(tv);
        remote.pressPowerButton();
        remote.pressOperateButton();
        remote.showDeviceInfo();

        // 2. 에어컨 제어
        remote.setDevice(ac);
        remote.pressPowerButton();
        remote.pressOperateButton();
        remote.pressOperateButton();

        // 3. 셋톱박스 제어
        remote.setDevice(stb);
        remote.pressPowerButton();
        remote.pressOperateButton();

        // 4. 공기청정기 제어
        remote.setDevice(purifier);
        remote.pressPowerButton();
        remote.pressOperateButton();

        // 5. 다형성의 강력함 - 배열로 모든 기기 관리
        System.out.println("\n\n🔄 ═══════════════════════════════");
        System.out.println("   전체 기기 일괄 제어");
        System.out.println("═══════════════════════════════\n");

        Appliance[] allDevices = {tv, ac, stb, purifier};

        // 모든 기기 켜기
        System.out.println("💡 전체 기기 전원 ON:");
        for (Appliance device : allDevices) {
            if (!device.isPowerOn) {
                device.powerOn();
            }
        }

        // 모든 기기 끄기
        System.out.println("\n\n🌙 전체 기기 전원 OFF:");
        for (Appliance device : allDevices) {
            if (device.isPowerOn) {
                device.powerOff();
            }
        }

        System.out.println("\n\n💡 다형성의 핵심:");
        System.out.println("━━━━━━━━━━━━━━━━━━━━━━━━━━");
        System.out.println("✅ Appliance 타입으로 모든 가전 제어");
        System.out.println("✅ 같은 메서드(powerOn) 호출");
        System.out.println("✅ 하지만 각 기기마다 다른 동작!");
        System.out.println("✅ 새로운 기기 추가도 쉬움");
        System.out.println("━━━━━━━━━━━━━━━━━━━━━━━━━━");
    }
}
```

### 핵심 포인트
1. **하나의 리모컨(타입)**으로 여러 기기(객체) 제어
2. **같은 버튼(메서드)**을 눌러도 기기마다 다른 동작
3. **새로운 기기 추가**가 쉬움 (확장성)
4. **코드의 일관성** 유지

---

## 💳 실생활 비유 2: 결제 단말기 {#비유2-결제-단말기}

### 비유 설명
편의점 결제 단말기는 신용카드, 체크카드, 모바일페이 등 다양한 결제 수단을 처리합니다. 점원은 "결제" 버튼만 누르면, 실제 결제 방식은 카드에 따라 자동으로 처리됩니다.

### Java 코드로 구현

```java
/**
 * 모든 결제 수단의 부모 클래스
 */
public abstract class PaymentCard {
    protected String cardNumber;
    protected String holderName;
    protected String issuer;  // 발급사

    public PaymentCard(String cardNumber, String holderName, String issuer) {
        this.cardNumber = cardNumber;
        this.holderName = holderName;
        this.issuer = issuer;
    }

    // 추상 메서드 - 각 카드마다 다른 결제 방식
    public abstract boolean processPayment(long amount);
    public abstract String getPaymentType();
    public abstract void showReceipt(long amount);

    protected String maskCardNumber() {
        return cardNumber.substring(0, 4) + "-****-****-" +
               cardNumber.substring(12);
    }
}

/**
 * 신용카드
 */
public class CreditCard extends PaymentCard {
    private long creditLimit;
    private long usedAmount;
    private int installmentMonths;

    public CreditCard(String cardNumber, String holderName, String issuer, long creditLimit) {
        super(cardNumber, holderName, issuer);
        this.creditLimit = creditLimit;
        this.usedAmount = 0;
        this.installmentMonths = 0;
    }

    @Override
    public boolean processPayment(long amount) {
        System.out.println("\n💳 신용카드 결제 처리 중...");

        long availableLimit = creditLimit - usedAmount;

        if (availableLimit < amount) {
            System.out.println("❌ 한도 초과!");
            System.out.println("사용 가능 한도: " + String.format("%,d", availableLimit) + "원");
            return false;
        }

        // 결제 승인
        System.out.println("✅ 승인 완료");
        System.out.println("카드사: " + issuer);
        System.out.println("승인번호: " + generateApprovalNumber());

        usedAmount += amount;

        if (installmentMonths > 0) {
            long monthlyPayment = amount / installmentMonths;
            System.out.println("할부: " + installmentMonths + "개월");
            System.out.println("월 납입액: " + String.format("%,d", monthlyPayment) + "원");
        }

        return true;
    }

    @Override
    public String getPaymentType() {
        return "신용카드";
    }

    @Override
    public void showReceipt(long amount) {
        System.out.println("\n━━━━━━━━━━━━━━━━━━━━");
        System.out.println("📄 신용카드 결제 영수증");
        System.out.println("━━━━━━━━━━━━━━━━━━━━");
        System.out.println("카드사: " + issuer);
        System.out.println("카드번호: " + maskCardNumber());
        System.out.println("예금주: " + holderName);
        System.out.println("결제금액: " + String.format("%,d", amount) + "원");
        if (installmentMonths > 0) {
            System.out.println("할부: " + installmentMonths + "개월");
        } else {
            System.out.println("할부: 일시불");
        }
        System.out.println("━━━━━━━━━━━━━━━━━━━━");
    }

    private String generateApprovalNumber() {
        return "AP" + System.currentTimeMillis() % 100000000;
    }

    public void setInstallment(int months) {
        this.installmentMonths = months;
    }
}

/**
 * 체크카드
 */
public class DebitCard extends PaymentCard {
    private long bankBalance;

    public DebitCard(String cardNumber, String holderName, String issuer, long bankBalance) {
        super(cardNumber, holderName, issuer);
        this.bankBalance = bankBalance;
    }

    @Override
    public boolean processPayment(long amount) {
        System.out.println("\n💳 체크카드 결제 처리 중...");

        if (bankBalance < amount) {
            System.out.println("❌ 잔액 부족!");
            System.out.println("계좌 잔액: " + String.format("%,d", bankBalance) + "원");
            return false;
        }

        // 즉시 출금
        System.out.println("✅ 승인 완료 (즉시 출금)");
        System.out.println("은행: " + issuer);
        System.out.println("승인번호: " + generateApprovalNumber());

        bankBalance -= amount;
        System.out.println("남은 잔액: " + String.format("%,d", bankBalance) + "원");

        return true;
    }

    @Override
    public String getPaymentType() {
        return "체크카드";
    }

    @Override
    public void showReceipt(long amount) {
        System.out.println("\n━━━━━━━━━━━━━━━━━━━━");
        System.out.println("📄 체크카드 결제 영수증");
        System.out.println("━━━━━━━━━━━━━━━━━━━━");
        System.out.println("은행: " + issuer);
        System.out.println("카드번호: " + maskCardNumber());
        System.out.println("예금주: " + holderName);
        System.out.println("결제금액: " + String.format("%,d", amount) + "원");
        System.out.println("결제방식: 즉시 출금");
        System.out.println("━━━━━━━━━━━━━━━━━━━━");
    }

    private String generateApprovalNumber() {
        return "DB" + System.currentTimeMillis() % 100000000;
    }
}

/**
 * 모바일 페이 (삼성페이, 애플페이 등)
 */
public class MobilePay extends PaymentCard {
    private String deviceType;  // Samsung, iPhone
    private boolean isBiometricEnabled;

    public MobilePay(String cardNumber, String holderName, String issuer, String deviceType) {
        super(cardNumber, holderName, issuer);
        this.deviceType = deviceType;
        this.isBiometricEnabled = true;
    }

    @Override
    public boolean processPayment(long amount) {
        System.out.println("\n📱 모바일페이 결제 처리 중...");

        // 생체 인증
        if (isBiometricEnabled) {
            System.out.println("🔐 생체 인증 중...");
            System.out.println("✅ 지문 인증 성공");
        }

        // NFC 통신
        System.out.println("📡 NFC 통신 중...");
        System.out.println("✅ 승인 완료");
        System.out.println("디바이스: " + deviceType);
        System.out.println("토큰 결제 (카드번호 노출 안 됨)");

        return true;
    }

    @Override
    public String getPaymentType() {
        return "모바일페이";
    }

    @Override
    public void showReceipt(long amount) {
        System.out.println("\n━━━━━━━━━━━━━━━━━━━━");
        System.out.println("📄 모바일페이 결제 영수증");
        System.out.println("━━━━━━━━━━━━━━━━━━━━");
        System.out.println("결제수단: " + deviceType + " Pay");
        System.out.println("카드정보: " + issuer + " (토큰 결제)");
        System.out.println("예금주: " + holderName);
        System.out.println("결제금액: " + String.format("%,d", amount) + "원");
        System.out.println("보안: 생체 인증 ✓");
        System.out.println("━━━━━━━━━━━━━━━━━━━━");
    }
}

/**
 * 선불카드 (기프트카드)
 */
public class PrepaidCard extends PaymentCard {
    private long remainingBalance;
    private String expiryDate;

    public PrepaidCard(String cardNumber, String holderName, String issuer,
                      long remainingBalance, String expiryDate) {
        super(cardNumber, holderName, issuer);
        this.remainingBalance = remainingBalance;
        this.expiryDate = expiryDate;
    }

    @Override
    public boolean processPayment(long amount) {
        System.out.println("\n🎁 선불카드 결제 처리 중...");

        if (remainingBalance < amount) {
            System.out.println("❌ 잔액 부족!");
            System.out.println("남은 금액: " + String.format("%,d", remainingBalance) + "원");
            System.out.println("부족 금액: " + String.format("%,d", amount - remainingBalance) + "원");
            return false;
        }

        System.out.println("✅ 승인 완료");
        remainingBalance -= amount;
        System.out.println("남은 금액: " + String.format("%,d", remainingBalance) + "원");
        System.out.println("유효기간: " + expiryDate);

        return true;
    }

    @Override
    public String getPaymentType() {
        return "선불카드";
    }

    @Override
    public void showReceipt(long amount) {
        System.out.println("\n━━━━━━━━━━━━━━━━━━━━");
        System.out.println("📄 선불카드 결제 영수증");
        System.out.println("━━━━━━━━━━━━━━━━━━━━");
        System.out.println("발급사: " + issuer);
        System.out.println("카드번호: " + maskCardNumber());
        System.out.println("결제금액: " + String.format("%,d", amount) + "원");
        System.out.println("남은금액: " + String.format("%,d", remainingBalance) + "원");
        System.out.println("유효기간: " + expiryDate);
        System.out.println("━━━━━━━━━━━━━━━━━━━━");
    }

    public void recharge(long amount) {
        remainingBalance += amount;
        System.out.println("💰 충전 완료: " + String.format("%,d", amount) + "원");
        System.out.println("잔액: " + String.format("%,d", remainingBalance) + "원");
    }
}
```

### 결제 단말기 (POS)

```java
/**
 * 결제 단말기 - 다형성을 활용한 통합 결제 시스템
 */
public class POSTerminal {
    private String storeName;
    private long totalSales;

    public POSTerminal(String storeName) {
        this.storeName = storeName;
        this.totalSales = 0;
    }

    /**
     * 결제 처리 - 다형성의 핵심!
     * PaymentCard 타입으로 모든 카드 처리
     */
    public boolean checkout(PaymentCard card, long amount) {
        System.out.println("\n💰 ═══════════════════════════");
        System.out.println("   " + storeName + " 결제");
        System.out.println("═══════════════════════════");
        System.out.println("결제 수단: " + card.getPaymentType());
        System.out.println("결제 금액: " + String.format("%,d", amount) + "원");

        // 결제 처리 (각 카드 타입에 맞게 자동으로 처리됨!)
        boolean success = card.processPayment(amount);

        if (success) {
            totalSales += amount;
            card.showReceipt(amount);
            System.out.println("\n✅ 결제가 완료되었습니다!");
            System.out.println("감사합니다. 😊");
        } else {
            System.out.println("\n❌ 결제가 실패했습니다.");
        }

        return success;
    }

    public void showDailySales() {
        System.out.println("\n📊 금일 매출");
        System.out.println("━━━━━━━━━━━━━━━━━━━━");
        System.out.println("총 매출: " + String.format("%,d", totalSales) + "원");
        System.out.println("━━━━━━━━━━━━━━━━━━━━");
    }
}
```

### 실행 테스트

```java
public class PaymentSystemTest {
    public static void main(String[] args) {
        System.out.println("🏪 ═══════════════════════════════");
        System.out.println("   편의점 결제 시스템");
        System.out.println("═══════════════════════════════\n");

        // POS 단말기
        POSTerminal pos = new POSTerminal("GS25 강남점");

        // 다양한 결제 수단
        CreditCard creditCard = new CreditCard(
            "1234567812345678",
            "김민수",
            "삼성카드",
            5_000_000
        );

        DebitCard debitCard = new DebitCard(
            "9876543298765432",
            "이영희",
            "국민은행",
            300_000
        );

        MobilePay mobilePay = new MobilePay(
            "1111222233334444",
            "박철수",
            "현대카드",
            "iPhone"
        );

        PrepaidCard prepaidCard = new PrepaidCard(
            "5555666677778888",
            "최다은",
            "해피머니",
            50_000,
            "2025-12-31"
        );

        // 1. 신용카드 결제
        pos.checkout(creditCard, 45_000);

        // 2. 체크카드 결제
        pos.checkout(debitCard, 28_000);

        // 3. 모바일페이 결제
        pos.checkout(mobilePay, 12_000);

        // 4. 선불카드 결제
        pos.checkout(prepaidCard, 8_500);

        // 5. 잔액 부족 테스트
        System.out.println("\n\n📌 잔액 부족 시나리오:");
        pos.checkout(prepaidCard, 100_000);

        // 매출 확인
        pos.showDailySales();

        // 다형성의 강력함 - 배열로 관리
        System.out.println("\n\n🔄 ═══════════════════════════════");
        System.out.println("   일괄 결제 테스트");
        System.out.println("═══════════════════════════════\n");

        PaymentCard[] cards = {creditCard, debitCard, mobilePay, prepaidCard};
        long[] amounts = {10_000, 15_000, 20_000, 5_000};

        for (int i = 0; i < cards.length; i++) {
            System.out.println("\n" + (i + 1) + "번째 결제:");
            pos.checkout(cards[i], amounts[i]);
        }

        pos.showDailySales();

        System.out.println("\n\n💡 다형성의 핵심:");
        System.out.println("━━━━━━━━━━━━━━━━━━━━━━━━━━");
        System.out.println("✅ PaymentCard 타입으로 모든 카드 처리");
        System.out.println("✅ checkout() 메서드 하나로 통합 결제");
        System.out.println("✅ 새로운 결제 수단 추가가 쉬움");
        System.out.println("✅ POS 단말기 코드 변경 불필요");
        System.out.println("━━━━━━━━━━━━━━━━━━━━━━━━━━");
    }
}
```

### 핵심 포인트
1. **하나의 단말기**로 모든 카드 처리
2. **같은 checkout() 메서드**로 통합 처리
3. **새로운 결제 수단 추가**가 쉬움
4. **Open-Closed Principle** 준수

---

## 🔌 실생활 비유 3: USB 포트 {#비유3-usb-포트}

### 비유 설명
컴퓨터의 USB 포트에는 마우스, 키보드, USB 메모리, 프린터 등 다양한 장치를 연결할 수 있습니다. USB 포트는 장치가 무엇인지 상관없이 표준 방식으로 통신합니다.

### Java 코드로 구현

```java
/**
 * 모든 USB 장치의 인터페이스
 */
public abstract class USBDevice {
    protected String deviceName;
    protected String manufacturer;
    protected boolean isConnected;

    public USBDevice(String deviceName, String manufacturer) {
        this.deviceName = deviceName;
        this.manufacturer = manufacturer;
        this.isConnected = false;
    }

    // 추상 메서드
    public abstract void connect();
    public abstract void disconnect();
    public abstract void operate();

    public void showDeviceInfo() {
        System.out.println("━━━━━━━━━━━━━━━━━━━━");
        System.out.println("장치명: " + deviceName);
        System.out.println("제조사: " + manufacturer);
        System.out.println("상태: " + (isConnected ? "연결됨" : "연결 안 됨"));
        System.out.println("━━━━━━━━━━━━━━━━━━━━");
    }
}

/**
 * USB 마우스
 */
public class USBMouse extends USBDevice {
    private int dpi;
    private int buttonCount;

    public USBMouse(String deviceName, String manufacturer, int dpi, int buttonCount) {
        super(deviceName, manufacturer);
        this.dpi = dpi;
        this.buttonCount = buttonCount;
    }

    @Override
    public void connect() {
        isConnected = true;
        System.out.println("\n🖱️ " + deviceName + " 연결 중...");
        System.out.println("드라이버 설치 중...");
        System.out.println("✅ 마우스가 연결되었습니다!");
        System.out.println("DPI: " + dpi);
        System.out.println("버튼: " + buttonCount + "개");
    }

    @Override
    public void disconnect() {
        isConnected = false;
        System.out.println("\n🖱️ " + deviceName + " 연결 해제");
        System.out.println("안전하게 제거되었습니다.");
    }

    @Override
    public void operate() {
        if (!isConnected) {
            System.out.println("❌ 마우스가 연결되어 있지 않습니다.");
            return;
        }
        System.out.println("🖱️ 마우스 클릭!");
        System.out.println("커서 이동 중...");
    }
}

/**
 * USB 키보드
 */
public class USBKeyboard extends USBDevice {
    private String layout;  // QWERTY, DVORAK 등
    private boolean hasNumpad;

    public USBKeyboard(String deviceName, String manufacturer, String layout, boolean hasNumpad) {
        super(deviceName, manufacturer);
        this.layout = layout;
        this.hasNumpad = hasNumpad;
    }

    @Override
    public void connect() {
        isConnected = true;
        System.out.println("\n⌨️ " + deviceName + " 연결 중...");
        System.out.println("드라이버 설치 중...");
        System.out.println("✅ 키보드가 연결되었습니다!");
        System.out.println("레이아웃: " + layout);
        System.out.println("숫자 키패드: " + (hasNumpad ? "있음" : "없음"));
    }

    @Override
    public void disconnect() {
        isConnected = false;
        System.out.println("\n⌨️ " + deviceName + " 연결 해제");
        System.out.println("안전하게 제거되었습니다.");
    }

    @Override
    public void operate() {
        if (!isConnected) {
            System.out.println("❌ 키보드가 연결되어 있지 않습니다.");
            return;
        }
        System.out.println("⌨️ 키보드 타이핑!");
        System.out.println("Hello World!");
    }
}

/**
 * USB 메모리
 */
public class USBFlashDrive extends USBDevice {
    private long capacity;  // MB 단위
    private long usedSpace;

    public USBFlashDrive(String deviceName, String manufacturer, long capacity) {
        super(deviceName, manufacturer);
        this.capacity = capacity;
        this.usedSpace = 0;
    }

    @Override
    public void connect() {
        isConnected = true;
        System.out.println("\n💾 " + deviceName + " 연결 중...");
        System.out.println("파일 시스템 확인 중...");
        System.out.println("✅ USB 메모리가 연결되었습니다!");
        System.out.println("용량: " + (capacity / 1024) + " GB");
        System.out.println("사용 가능: " + ((capacity - usedSpace) / 1024) + " GB");
    }

    @Override
    public void disconnect() {
        isConnected = false;
        System.out.println("\n💾 " + deviceName + " 연결 해제");
        System.out.println("데이터 쓰기 완료 중...");
        System.out.println("안전하게 제거되었습니다.");
    }

    @Override
    public void operate() {
        if (!isConnected) {
            System.out.println("❌ USB 메모리가 연결되어 있지 않습니다.");
            return;
        }
        System.out.println("💾 파일 읽기/쓰기 작업 중...");
        System.out.println("document.pdf 복사 중...");
        System.out.println("✅ 복사 완료!");
    }

    public void saveFile(String filename, long size) {
        if (isConnected && usedSpace + size <= capacity) {
            usedSpace += size;
            System.out.println("💾 " + filename + " 저장 완료 (" + size + " MB)");
        }
    }
}

/**
 * USB 프린터
 */
public class USBPrinter extends USBDevice {
    private int paperCount;
    private int inkLevel;

    public USBPrinter(String deviceName, String manufacturer) {
        super(deviceName, manufacturer);
        this.paperCount = 100;
        this.inkLevel = 100;
    }

    @Override
    public void connect() {
        isConnected = true;
        System.out.println("\n🖨️ " + deviceName + " 연결 중...");
        System.out.println("드라이버 설치 중...");
        System.out.println("✅ 프린터가 연결되었습니다!");
        System.out.println("용지: " + paperCount + "장");
        System.out.println("잉크: " + inkLevel + "%");
    }

    @Override
    public void disconnect() {
        isConnected = false;
        System.out.println("\n🖨️ " + deviceName + " 연결 해제");
        System.out.println("인쇄 작업 완료 대기 중...");
        System.out.println("안전하게 제거되었습니다.");
    }

    @Override
    public void operate() {
        if (!isConnected) {
            System.out.println("❌ 프린터가 연결되어 있지 않습니다.");
            return;
        }

        if (paperCount < 1) {
            System.out.println("❌ 용지가 없습니다!");
            return;
        }

        if (inkLevel < 10) {
            System.out.println("⚠️ 잉크가 부족합니다!");
        }

        System.out.println("🖨️ 인쇄 중...");
        paperCount--;
        inkLevel -= 5;
        System.out.println("✅ 인쇄 완료!");
        System.out.println("남은 용지: " + paperCount + "장");
        System.out.println("남은 잉크: " + inkLevel + "%");
    }
}
```

### USB 허브 (다형성 활용)

```java
/**
 * USB 허브 - 여러 USB 장치 관리
 */
public class USBHub {
    private USBDevice[] ports;
    private int maxPorts;

    public USBHub(int maxPorts) {
        this.maxPorts = maxPorts;
        this.ports = new USBDevice[maxPorts];
        System.out.println("🔌 USB 허브 생성 (" + maxPorts + " 포트)");
    }

    public boolean plugIn(int portNumber, USBDevice device) {
        if (portNumber < 0 || portNumber >= maxPorts) {
            System.out.println("❌ 잘못된 포트 번호입니다.");
            return false;
        }

        if (ports[portNumber] != null) {
            System.out.println("❌ 포트 " + portNumber + "에 이미 장치가 연결되어 있습니다.");
            return false;
        }

        System.out.println("\n🔌 포트 " + portNumber + "에 장치 연결:");
        ports[portNumber] = device;
        device.connect();  // 다형성!
        return true;
    }

    public boolean unplug(int portNumber) {
        if (portNumber < 0 || portNumber >= maxPorts) {
            System.out.println("❌ 잘못된 포트 번호입니다.");
            return false;
        }

        if (ports[portNumber] == null) {
            System.out.println("❌ 포트 " + portNumber + "에 장치가 없습니다.");
            return false;
        }

        System.out.println("\n🔌 포트 " + portNumber + "에서 장치 제거:");
        ports[portNumber].disconnect();  // 다형성!
        ports[portNumber] = null;
        return true;
    }

    public void useDevice(int portNumber) {
        if (portNumber < 0 || portNumber >= maxPorts) {
            System.out.println("❌ 잘못된 포트 번호입니다.");
            return;
        }

        if (ports[portNumber] == null) {
            System.out.println("❌ 포트 " + portNumber + "에 장치가 없습니다.");
            return;
        }

        System.out.println("\n🔌 포트 " + portNumber + " 장치 사용:");
        ports[portNumber].operate();  // 다형성!
    }

    public void showAllDevices() {
        System.out.println("\n🔌 ═══════════════════════════");
        System.out.println("   연결된 USB 장치 목록");
        System.out.println("═══════════════════════════");

        for (int i = 0; i < maxPorts; i++) {
            System.out.println("\n포트 " + i + ":");
            if (ports[i] != null) {
                ports[i].showDeviceInfo();
            } else {
                System.out.println("  (비어있음)");
            }
        }
    }
}
```

### 실행 테스트

```java
public class USBSystemTest {
    public static void main(String[] args) {
        System.out.println("🔌 ═══════════════════════════════");
        System.out.println("   USB 장치 관리 시스템");
        System.out.println("═══════════════════════════════\n");

        // USB 허브 생성
        USBHub hub = new USBHub(4);

        // 다양한 USB 장치 생성
        USBMouse mouse = new USBMouse("로지텍 MX Master 3", "Logitech", 4000, 7);
        USBKeyboard keyboard = new USBKeyboard("Magic Keyboard", "Apple", "QWERTY", false);
        USBFlashDrive flashDrive = new USBFlashDrive("SanDisk Extreme", "SanDisk", 64 * 1024);
        USBPrinter printer = new USBPrinter("HP LaserJet", "HP");

        // 장치 연결
        hub.plugIn(0, mouse);
        hub.plugIn(1, keyboard);
        hub.plugIn(2, flashDrive);
        hub.plugIn(3, printer);

        // 모든 장치 정보 표시
        hub.showAllDevices();

        // 각 장치 사용
        System.out.println("\n\n📌 장치 사용 테스트:");
        hub.useDevice(0);  // 마우스
        hub.useDevice(1);  // 키보드
        hub.useDevice(2);  // USB 메모리
        hub.useDevice(3);  // 프린터

        // 장치 제거
        hub.unplug(2);

        // 다형성의 강력함
        System.out.println("\n\n🔄 ═══════════════════════════");
        System.out.println("   다형성 활용 예시");
        System.out.println("═══════════════════════════\n");

        USBDevice[] devices = {mouse, keyboard, flashDrive, printer};

        System.out.println("모든 장치 연결:");
        for (USBDevice device : devices) {
            device.connect();
        }

        System.out.println("\n\n모든 장치 사용:");
        for (USBDevice device : devices) {
            device.operate();
        }

        System.out.println("\n\n모든 장치 연결 해제:");
        for (USBDevice device : devices) {
            device.disconnect();
        }

        System.out.println("\n\n💡 다형성의 핵심:");
        System.out.println("━━━━━━━━━━━━━━━━━━━━━━━━━━");
        System.out.println("✅ USBDevice 타입으로 모든 장치 관리");
        System.out.println("✅ 같은 메서드로 다른 장치 제어");
        System.out.println("✅ 새로운 USB 장치 추가가 쉬움");
        System.out.println("✅ USB 표준의 핵심 원리!");
        System.out.println("━━━━━━━━━━━━━━━━━━━━━━━━━━");
    }
}
```

### 핵심 포인트
1. **하나의 USB 포트(타입)**로 모든 장치 연결
2. **표준 인터페이스** (connect, disconnect, operate)
3. **플러그 앤 플레이** 구현
4. **확장성** - 새로운 USB 장치 추가 용이

---

## 🏥 실생활 비유 4: 동물병원 {#비유4-동물병원}

### 비유 설명
동물병원에서는 개, 고양이, 새, 토끼 등 다양한 동물을 진료합니다. 수의사는 "진료하기" 버튼을 누르면, 각 동물의 특성에 맞게 진료가 진행됩니다. 모든 동물은 "환자"라는 공통 타입으로 관리됩니다.

### Java 코드로 구현

```java
/**
 * 모든 동물의 부모 클래스
 */
public abstract class Animal {
    protected String name;
    protected int age;
    protected String species;
    protected double weight;  // kg
    protected boolean isHealthy;

    public Animal(String name, int age, String species, double weight) {
        this.name = name;
        this.age = age;
        this.species = species;
        this.weight = weight;
        this.isHealthy = true;
    }

    // 추상 메서드 - 각 동물마다 다른 증상
    public abstract void checkSymptoms();
    public abstract void receiveTreatment();
    public abstract void makeSound();

    public void showPatientInfo() {
        System.out.println("━━━━━━━━━━━━━━━━━━━━");
        System.out.println("환자 정보");
        System.out.println("━━━━━━━━━━━━━━━━━━━━");
        System.out.println("이름: " + name);
        System.out.println("종류: " + species);
        System.out.println("나이: " + age + "살");
        System.out.println("체중: " + weight + "kg");
        System.out.println("상태: " + (isHealthy ? "건강함 😊" : "치료 필요 🤒"));
        System.out.println("━━━━━━━━━━━━━━━━━━━━");
    }
}

/**
 * 강아지
 */
public class Dog extends Animal {
    private String breed;
    private boolean isVaccinated;

    public Dog(String name, int age, double weight, String breed) {
        super(name, age, "개", weight);
        this.breed = breed;
        this.isVaccinated = false;
    }

    @Override
    public void checkSymptoms() {
        System.out.println("\n🐕 강아지 증상 체크");
        System.out.println("품종: " + breed);
        System.out.println("체온 측정 중...");
        System.out.println("청진기로 심장 소리 확인 중...");
        System.out.println("관절 상태 확인 중...");

        if (!isHealthy) {
            System.out.println("⚠️ 발견된 증상:");
            System.out.println("- 식욕 감소");
            System.out.println("- 활동량 저하");
        }
    }

    @Override
    public void receiveTreatment() {
        System.out.println("\n💉 강아지 치료 시작");

        if (!isVaccinated) {
            System.out.println("예방접종 실시");
            isVaccinated = true;
        }

        System.out.println("영양제 처방");
        System.out.println("산책 권장량: 하루 2회, 30분씩");
        isHealthy = true;
        System.out.println("✅ 치료 완료!");
    }

    @Override
    public void makeSound() {
        System.out.println("🐕 " + name + ": 멍멍! 왈왈!");
    }

    public void wagTail() {
        System.out.println("🐕 " + name + "가 꼬리를 흔듭니다! 😊");
    }
}

/**
 * 고양이
 */
public class Cat extends Animal {
    private String furColor;
    private boolean isIndoor;

    public Cat(String name, int age, double weight, String furColor, boolean isIndoor) {
        super(name, age, "고양이", weight);
        this.furColor = furColor;
        this.isIndoor = isIndoor;
    }

    @Override
    public void checkSymptoms() {
        System.out.println("\n🐱 고양이 증상 체크");
        System.out.println("털 색상: " + furColor);
        System.out.println("실내묘: " + (isIndoor ? "예" : "아니오"));
        System.out.println("체온 측정 중...");
        System.out.println("털 상태 확인 중...");
        System.out.println("치아 검사 중...");

        if (!isHealthy) {
            System.out.println("⚠️ 발견된 증상:");
            System.out.println("- 구토");
            System.out.println("- 털갈이 과다");
        }
    }

    @Override
    public void receiveTreatment() {
        System.out.println("\n💊 고양이 치료 시작");
        System.out.println("헤어볼 제거제 처방");
        System.out.println("영양 간식 제공");

        if (!isIndoor) {
            System.out.println("외부 기생충 검사 및 구충제 처방");
        }

        System.out.println("캣타워 활동 권장");
        isHealthy = true;
        System.out.println("✅ 치료 완료!");
    }

    @Override
    public void makeSound() {
        System.out.println("🐱 " + name + ": 야옹~ 냐옹~");
    }

    public void purr() {
        System.out.println("🐱 " + name + "가 그르릉 소리를 냅니다~ 😺");
    }
}

/**
 * 앵무새
 */
public class Parrot extends Animal {
    private String featherColor;
    private String[] vocabulary;

    public Parrot(String name, int age, double weight, String featherColor) {
        super(name, age, "앵무새", weight);
        this.featherColor = featherColor;
        this.vocabulary = new String[]{"안녕", "사랑해", "배고파"};
    }

    @Override
    public void checkSymptoms() {
        System.out.println("\n🦜 앵무새 증상 체크");
        System.out.println("깃털 색상: " + featherColor);
        System.out.println("체온 측정 중...");
        System.out.println("부리 상태 확인 중...");
        System.out.println("깃털 상태 확인 중...");
        System.out.println("날개 펼침 확인 중...");

        if (!isHealthy) {
            System.out.println("⚠️ 발견된 증상:");
            System.out.println("- 깃털 빠짐");
            System.out.println("- 활동량 감소");
        }
    }

    @Override
    public void receiveTreatment() {
        System.out.println("\n🌾 앵무새 치료 시작");
        System.out.println("비타민 보충제 처방");
        System.out.println("부리 다듬기");
        System.out.println("신선한 과일/채소 급여 권장");
        System.out.println("햇빛 쬐기 권장 (하루 30분)");
        isHealthy = true;
        System.out.println("✅ 치료 완료!");
    }

    @Override
    public void makeSound() {
        System.out.println("🦜 " + name + ": 짹짹! " + vocabulary[(int)(Math.random() * vocabulary.length)] + "!");
    }

    public void fly() {
        System.out.println("🦜 " + name + "가 날아다닙니다! 🪶");
    }
}

/**
 * 토끼
 */
public class Rabbit extends Animal {
    private String earType;  // "lop" (늘어진 귀) 또는 "upright" (선 귀)
    private boolean isLitterTrained;

    public Rabbit(String name, int age, double weight, String earType) {
        super(name, age, "토끼", weight);
        this.earType = earType;
        this.isLitterTrained = false;
    }

    @Override
    public void checkSymptoms() {
        System.out.println("\n🐰 토끼 증상 체크");
        System.out.println("귀 타입: " + (earType.equals("lop") ? "늘어진 귀" : "선 귀"));
        System.out.println("체온 측정 중...");
        System.out.println("치아 길이 확인 중...");
        System.out.println("발바닥 상태 확인 중...");

        if (!isHealthy) {
            System.out.println("⚠️ 발견된 증상:");
            System.out.println("- 식욕 부진");
            System.out.println("- 치아 과성장");
        }
    }

    @Override
    public void receiveTreatment() {
        System.out.println("\n🥕 토끼 치료 시작");
        System.out.println("치아 갈기 (덴탈 케어)");
        System.out.println("고섬유질 사료 처방");
        System.out.println("건초 무제한 급여 권장");
        System.out.println("운동 공간 제공 권장");

        if (!isLitterTrained) {
            System.out.println("화장실 교육 안내");
        }

        isHealthy = true;
        System.out.println("✅ 치료 완료!");
    }

    @Override
    public void makeSound() {
        System.out.println("🐰 " + name + ": 끽끽! (작은 소리)");
    }

    public void hop() {
        System.out.println("🐰 " + name + "가 폴짝폴짝 뜁니다! 🦘");
    }
}
```

### 동물병원 시스템 (다형성 활용)

```java
/**
 * 동물병원 - 다형성을 활용한 진료 시스템
 */
public class VeterinaryClinic {
    private String clinicName;
    private int todayPatients;

    public VeterinaryClinic(String clinicName) {
        this.clinicName = clinicName;
        this.todayPatients = 0;
    }

    /**
     * 환자 접수 및 진료 - 다형성의 핵심!
     * Animal 타입으로 모든 동물 진료
     */
    public void examinePatient(Animal patient) {
        System.out.println("\n🏥 ═══════════════════════════");
        System.out.println("   " + clinicName);
        System.out.println("═══════════════════════════");

        todayPatients++;
        System.out.println("접수 번호: " + todayPatients);

        // 환자 정보 표시
        patient.showPatientInfo();

        // 증상 확인 (각 동물마다 다른 방식으로!)
        patient.checkSymptoms();

        // 동물이 소리 냄
        patient.makeSound();

        // 치료 (각 동물마다 다른 치료법!)
        patient.receiveTreatment();

        System.out.println("\n💚 진료가 완료되었습니다!");
        System.out.println("다음 정기 검진: 6개월 후");
    }

    /**
     * 응급 치료
     */
    public void emergencyTreatment(Animal patient) {
        System.out.println("\n🚨 ═══════════════════════════");
        System.out.println("   응급 진료!");
        System.out.println("═══════════════════════════");

        patient.isHealthy = false;
        examinePatient(patient);
    }

    public void showDailyReport() {
        System.out.println("\n📊 금일 진료 현황");
        System.out.println("━━━━━━━━━━━━━━━━━━━━");
        System.out.println("병원명: " + clinicName);
        System.out.println("진료 환자 수: " + todayPatients + "마리");
        System.out.println("━━━━━━━━━━━━━━━━━━━━");
    }
}
```

### 실행 테스트

```java
public class VeterinaryClinicTest {
    public static void main(String[] args) {
        System.out.println("🏥 ═══════════════════════════════");
        System.out.println("   동물병원 진료 시스템");
        System.out.println("═══════════════════════════════\n");

        // 동물병원 생성
        VeterinaryClinic clinic = new VeterinaryClinic("서울 동물의료센터");

        // 다양한 동물 환자들
        Dog dog = new Dog("바둑이", 5, 12.5, "웰시코기");
        Cat cat = new Cat("나비", 3, 4.2, "흰색", true);
        Parrot parrot = new Parrot("피치", 2, 0.35, "노란색");
        Rabbit rabbit = new Rabbit("토리", 1, 2.1, "lop");

        // 정기 검진
        System.out.println("📅 오늘의 정기 검진:");
        clinic.examinePatient(dog);
        clinic.examinePatient(cat);
        clinic.examinePatient(parrot);
        clinic.examinePatient(rabbit);

        // 응급 환자
        System.out.println("\n\n🚨 응급 환자 발생!");
        Dog emergencyDog = new Dog("멍멍이", 7, 15.0, "골든 리트리버");
        clinic.emergencyTreatment(emergencyDog);

        // 금일 진료 현황
        clinic.showDailyReport();

        // 다형성의 강력함 - 배열로 관리
        System.out.println("\n\n🔄 ═══════════════════════════");
        System.out.println("   일괄 건강 체크");
        System.out.println("═══════════════════════════\n");

        Animal[] allAnimals = {dog, cat, parrot, rabbit};

        System.out.println("모든 동물 소리 듣기:");
        for (Animal animal : allAnimals) {
            animal.makeSound();
        }

        System.out.println("\n\n모든 동물 증상 체크:");
        for (Animal animal : allAnimals) {
            System.out.println("\n--- " + animal.name + " ---");
            animal.checkSymptoms();
        }

        System.out.println("\n\n💡 다형성의 핵심:");
        System.out.println("━━━━━━━━━━━━━━━━━━━━━━━━━━");
        System.out.println("✅ Animal 타입으로 모든 동물 진료");
        System.out.println("✅ examinePatient() 메서드 하나로 통합");
        System.out.println("✅ 새로운 동물 추가가 쉬움");
        System.out.println("✅ 수의사는 동물 종류 신경 안 써도 됨!");
        System.out.println("━━━━━━━━━━━━━━━━━━━━━━━━━━");
    }
}
```

### 핵심 포인트
1. **하나의 진료 시스템**으로 모든 동물 치료
2. **같은 메서드(examinePatient)**로 다양한 동물 진료
3. **새로운 동물 추가** 용이 (거북이, 햄스터 등)
4. **실제 동물병원**의 업무 방식과 동일

---

## 🏠 실생활 비유 5: 스마트홈 허브 {#비유5-스마트홈-허브}

### 비유 설명
스마트홈 허브는 스마트 전구, 온도조절기, 도어락, CCTV 등 다양한 IoT 기기를 통합 제어합니다. 사용자는 앱 하나로 모든 기기를 관리하며, 각 기기는 자신만의 방식으로 동작합니다.

### Java 코드로 구현

```java
/**
 * 모든 스마트 기기의 부모 클래스
 */
public abstract class SmartDevice {
    protected String deviceId;
    protected String deviceName;
    protected String location;  // 거실, 침실 등
    protected boolean isOnline;
    protected int batteryLevel;

    public SmartDevice(String deviceId, String deviceName, String location) {
        this.deviceId = deviceId;
        this.deviceName = deviceName;
        this.location = location;
        this.isOnline = true;
        this.batteryLevel = 100;
    }

    // 추상 메서드 - 각 기기마다 다른 동작
    public abstract void activate();
    public abstract void deactivate();
    public abstract void showStatus();
    public abstract String getDeviceType();

    public void showDeviceInfo() {
        System.out.println("━━━━━━━━━━━━━━━━━━━━");
        System.out.println("기기 ID: " + deviceId);
        System.out.println("기기명: " + deviceName);
        System.out.println("위치: " + location);
        System.out.println("상태: " + (isOnline ? "온라인 🟢" : "오프라인 🔴"));
        System.out.println("배터리: " + batteryLevel + "%");
        System.out.println("━━━━━━━━━━━━━━━━━━━━");
    }
}

/**
 * 스마트 전구
 */
public class SmartBulb extends SmartDevice {
    private boolean isOn;
    private int brightness;  // 0-100
    private String color;

    public SmartBulb(String deviceId, String deviceName, String location) {
        super(deviceId, deviceName, location);
        this.isOn = false;
        this.brightness = 100;
        this.color = "흰색";
    }

    @Override
    public void activate() {
        isOn = true;
        System.out.println("\n💡 " + deviceName + " 켜기");
        System.out.println("위치: " + location);
        System.out.println("밝기: " + brightness + "%");
        System.out.println("색상: " + color);
        System.out.println("✅ 조명이 켜졌습니다!");
    }

    @Override
    public void deactivate() {
        isOn = false;
        System.out.println("\n💡 " + deviceName + " 끄기");
        System.out.println("✅ 조명이 꺼졌습니다!");
    }

    @Override
    public void showStatus() {
        System.out.println("\n💡 전구 상태");
        System.out.println("전원: " + (isOn ? "ON" : "OFF"));
        System.out.println("밝기: " + brightness + "%");
        System.out.println("색상: " + color);
    }

    @Override
    public String getDeviceType() {
        return "스마트 전구";
    }

    public void setBrightness(int brightness) {
        this.brightness = Math.max(0, Math.min(100, brightness));
        System.out.println("💡 밝기 조절: " + this.brightness + "%");
    }

    public void setColor(String color) {
        this.color = color;
        System.out.println("🎨 색상 변경: " + color);
    }
}

/**
 * 스마트 온도조절기
 */
public class SmartThermostat extends SmartDevice {
    private boolean isActive;
    private int targetTemperature;
    private int currentTemperature;
    private String mode;  // heating, cooling, auto

    public SmartThermostat(String deviceId, String deviceName, String location) {
        super(deviceId, deviceName, location);
        this.isActive = false;
        this.targetTemperature = 22;
        this.currentTemperature = 20;
        this.mode = "auto";
    }

    @Override
    public void activate() {
        isActive = true;
        System.out.println("\n🌡️ " + deviceName + " 활성화");
        System.out.println("위치: " + location);
        System.out.println("현재 온도: " + currentTemperature + "°C");
        System.out.println("목표 온도: " + targetTemperature + "°C");
        System.out.println("모드: " + getModeKorean());
        System.out.println("✅ 온도 조절 시작!");
    }

    @Override
    public void deactivate() {
        isActive = false;
        System.out.println("\n🌡️ " + deviceName + " 비활성화");
        System.out.println("✅ 온도 조절 중지!");
    }

    @Override
    public void showStatus() {
        System.out.println("\n🌡️ 온도조절기 상태");
        System.out.println("작동: " + (isActive ? "ON" : "OFF"));
        System.out.println("현재: " + currentTemperature + "°C");
        System.out.println("목표: " + targetTemperature + "°C");
        System.out.println("모드: " + getModeKorean());
    }

    @Override
    public String getDeviceType() {
        return "스마트 온도조절기";
    }

    public void setTemperature(int temp) {
        this.targetTemperature = temp;
        System.out.println("🌡️ 목표 온도 설정: " + temp + "°C");
    }

    public void setMode(String mode) {
        this.mode = mode;
        System.out.println("🌡️ 모드 변경: " + getModeKorean());
    }

    private String getModeKorean() {
        switch (mode) {
            case "heating": return "난방";
            case "cooling": return "냉방";
            case "auto": return "자동";
            default: return mode;
        }
    }
}

/**
 * 스마트 도어락
 */
public class SmartDoorLock extends SmartDevice {
    private boolean isLocked;
    private String unlockMethod;  // password, fingerprint, card
    private String[] authorizedUsers;

    public SmartDoorLock(String deviceId, String deviceName, String location) {
        super(deviceId, deviceName, location);
        this.isLocked = true;
        this.unlockMethod = "password";
        this.authorizedUsers = new String[]{"김민수", "이영희"};
    }

    @Override
    public void activate() {
        // 도어락은 "잠금"이 activate
        isLocked = true;
        System.out.println("\n🔒 " + deviceName + " 잠금");
        System.out.println("위치: " + location);
        System.out.println("잠금 방식: " + getUnlockMethodKorean());
        System.out.println("✅ 문이 잠겼습니다!");
        System.out.println("🔔 스마트폰으로 알림 전송");
    }

    @Override
    public void deactivate() {
        // 도어락은 "해제"가 deactivate
        isLocked = false;
        System.out.println("\n🔓 " + deviceName + " 해제");
        System.out.println("위치: " + location);
        System.out.println("✅ 문이 열렸습니다!");
        System.out.println("🔔 스마트폰으로 알림 전송");
    }

    @Override
    public void showStatus() {
        System.out.println("\n🔒 도어락 상태");
        System.out.println("잠금: " + (isLocked ? "잠김 🔒" : "열림 🔓"));
        System.out.println("해제 방법: " + getUnlockMethodKorean());
        System.out.println("등록 사용자: " + authorizedUsers.length + "명");
    }

    @Override
    public String getDeviceType() {
        return "스마트 도어락";
    }

    public boolean unlock(String user, String credential) {
        System.out.println("\n🔓 도어락 해제 시도");
        System.out.println("사용자: " + user);

        // 사용자 확인
        boolean isAuthorized = false;
        for (String authUser : authorizedUsers) {
            if (authUser.equals(user)) {
                isAuthorized = true;
                break;
            }
        }

        if (isAuthorized) {
            deactivate();
            return true;
        } else {
            System.out.println("❌ 인증 실패! 등록되지 않은 사용자입니다.");
            return false;
        }
    }

    private String getUnlockMethodKorean() {
        switch (unlockMethod) {
            case "password": return "비밀번호";
            case "fingerprint": return "지문인식";
            case "card": return "카드키";
            default: return unlockMethod;
        }
    }
}

/**
 * 스마트 CCTV
 */
public class SmartCamera extends SmartDevice {
    private boolean isRecording;
    private boolean hasMotionDetection;
    private int recordingHours;

    public SmartCamera(String deviceId, String deviceName, String location) {
        super(deviceId, deviceName, location);
        this.isRecording = false;
        this.hasMotionDetection = true;
        this.recordingHours = 0;
    }

    @Override
    public void activate() {
        isRecording = true;
        System.out.println("\n📹 " + deviceName + " 녹화 시작");
        System.out.println("위치: " + location);
        System.out.println("해상도: 1080p Full HD");
        System.out.println("모션 감지: " + (hasMotionDetection ? "활성화" : "비활성화"));
        System.out.println("✅ 녹화 중...");
    }

    @Override
    public void deactivate() {
        isRecording = false;
        System.out.println("\n📹 " + deviceName + " 녹화 중지");
        System.out.println("녹화 시간: " + recordingHours + "시간");
        System.out.println("✅ 녹화가 중지되었습니다!");
    }

    @Override
    public void showStatus() {
        System.out.println("\n📹 CCTV 상태");
        System.out.println("녹화: " + (isRecording ? "ON 🔴" : "OFF"));
        System.out.println("모션 감지: " + (hasMotionDetection ? "활성화" : "비활성화"));
        System.out.println("저장 시간: " + recordingHours + "시간");
    }

    @Override
    public String getDeviceType() {
        return "스마트 CCTV";
    }

    public void detectMotion() {
        if (hasMotionDetection && isRecording) {
            System.out.println("⚠️ 움직임 감지!");
            System.out.println("📱 스마트폰으로 알림 전송");
            System.out.println("💾 영상 저장 중...");
        }
    }
}
```

### 스마트홈 허브 (다형성 활용)

```java
/**
 * 스마트홈 허브 - 모든 기기 통합 제어
 */
public class SmartHomeHub {
    private String homeName;
    private SmartDevice[] devices;
    private int deviceCount;

    public SmartHomeHub(String homeName, int maxDevices) {
        this.homeName = homeName;
        this.devices = new SmartDevice[maxDevices];
        this.deviceCount = 0;
        System.out.println("🏠 스마트홈 허브 생성: " + homeName);
    }

    /**
     * 기기 등록
     */
    public boolean registerDevice(SmartDevice device) {
        if (deviceCount >= devices.length) {
            System.out.println("❌ 더 이상 기기를 등록할 수 없습니다.");
            return false;
        }

        devices[deviceCount++] = device;
        System.out.println("✅ " + device.getDeviceType() + " 등록 완료");
        System.out.println("   ID: " + device.deviceId);
        System.out.println("   위치: " + device.location);
        return true;
    }

    /**
     * 모든 기기 활성화 - 다형성!
     */
    public void activateAll() {
        System.out.println("\n🏠 ═══════════════════════════");
        System.out.println("   전체 기기 활성화");
        System.out.println("═══════════════════════════");

        for (int i = 0; i < deviceCount; i++) {
            devices[i].activate();  // 다형성!
        }
    }

    /**
     * 모든 기기 비활성화
     */
    public void deactivateAll() {
        System.out.println("\n🏠 ═══════════════════════════");
        System.out.println("   전체 기기 비활성화");
        System.out.println("═══════════════════════════");

        for (int i = 0; i < deviceCount; i++) {
            devices[i].deactivate();  // 다형성!
        }
    }

    /**
     * 위치별 기기 제어
     */
    public void controlByLocation(String location, boolean activate) {
        System.out.println("\n📍 " + location + " 기기 제어");

        int count = 0;
        for (int i = 0; i < deviceCount; i++) {
            if (devices[i].location.equals(location)) {
                if (activate) {
                    devices[i].activate();
                } else {
                    devices[i].deactivate();
                }
                count++;
            }
        }

        System.out.println("✅ " + count + "개 기기 제어 완료");
    }

    /**
     * 전체 상태 확인
     */
    public void showAllStatus() {
        System.out.println("\n🏠 ═══════════════════════════");
        System.out.println("   " + homeName + " 전체 상태");
        System.out.println("═══════════════════════════");
        System.out.println("등록된 기기: " + deviceCount + "개\n");

        for (int i = 0; i < deviceCount; i++) {
            System.out.println((i + 1) + ". " + devices[i].getDeviceType());
            devices[i].showStatus();
            System.out.println();
        }
    }

    /**
     * 외출 모드
     */
    public void awayMode() {
        System.out.println("\n🚶 외출 모드 활성화");
        System.out.println("━━━━━━━━━━━━━━━━━━━━");

        for (int i = 0; i < deviceCount; i++) {
            SmartDevice device = devices[i];

            if (device instanceof SmartBulb) {
                device.deactivate();  // 전구 끄기
            } else if (device instanceof SmartThermostat) {
                ((SmartThermostat) device).setTemperature(18);  // 난방 절약
            } else if (device instanceof SmartDoorLock) {
                device.activate();  // 도어락 잠금
            } else if (device instanceof SmartCamera) {
                device.activate();  // CCTV 녹화 시작
            }
        }

        System.out.println("✅ 외출 모드 설정 완료!");
    }

    /**
     * 귀가 모드
     */
    public void homeMode() {
        System.out.println("\n🏠 귀가 모드 활성화");
        System.out.println("━━━━━━━━━━━━━━━━━━━━");

        for (int i = 0; i < deviceCount; i++) {
            SmartDevice device = devices[i];

            if (device instanceof SmartBulb) {
                device.activate();  // 조명 켜기
            } else if (device instanceof SmartThermostat) {
                ((SmartThermostat) device).setTemperature(22);  // 적정 온도
            } else if (device instanceof SmartCamera) {
                device.deactivate();  // CCTV 정지
            }
        }

        System.out.println("✅ 귀가 모드 설정 완료! 어서오세요 😊");
    }
}
```

### 실행 테스트

```java
public class SmartHomeTest {
    public static void main(String[] args) {
        System.out.println("🏠 ═══════════════════════════════");
        System.out.println("   스마트홈 제어 시스템");
        System.out.println("═══════════════════════════════\n");

        // 스마트홈 허브 생성
        SmartHomeHub hub = new SmartHomeHub("우리집", 10);

        // 다양한 스마트 기기 생성
        SmartBulb livingRoomLight = new SmartBulb("BULB-001", "거실 조명", "거실");
        SmartBulb bedroomLight = new SmartBulb("BULB-002", "침실 조명", "침실");
        SmartThermostat thermostat = new SmartThermostat("THERM-001", "온도조절기", "거실");
        SmartDoorLock doorLock = new SmartDoorLock("LOCK-001", "현관 도어락", "현관");
        SmartCamera camera = new SmartCamera("CAM-001", "보안 카메라", "현관");

        // 기기 등록
        System.out.println("\n📱 기기 등록:\n");
        hub.registerDevice(livingRoomLight);
        hub.registerDevice(bedroomLight);
        hub.registerDevice(thermostat);
        hub.registerDevice(doorLock);
        hub.registerDevice(camera);

        // 전체 상태 확인
        hub.showAllStatus();

        // 외출 모드
        hub.awayMode();

        // 위치별 제어
        System.out.println("\n\n");
        hub.controlByLocation("거실", false);

        // 귀가 모드
        System.out.println("\n\n");
        hub.homeMode();

        // 개별 기기 제어
        System.out.println("\n\n📱 개별 기기 제어:");
        livingRoomLight.setBrightness(50);
        livingRoomLight.setColor("따뜻한 노란색");
        thermostat.setTemperature(24);
        doorLock.unlock("김민수", "1234");

        // 다형성의 강력함
        System.out.println("\n\n🔄 ═══════════════════════════");
        System.out.println("   다형성 활용 예시");
        System.out.println("═══════════════════════════\n");

        SmartDevice[] allDevices = {livingRoomLight, bedroomLight, thermostat, doorLock, camera};

        System.out.println("모든 기기 정보:");
        for (SmartDevice device : allDevices) {
            System.out.println("\n- " + device.getDeviceType());
            device.showDeviceInfo();
        }

        System.out.println("\n\n💡 다형성의 핵심:");
        System.out.println("━━━━━━━━━━━━━━━━━━━━━━━━━━");
        System.out.println("✅ SmartDevice 타입으로 모든 기기 관리");
        System.out.println("✅ 하나의 허브로 통합 제어");
        System.out.println("✅ 외출/귀가 모드 간편 설정");
        System.out.println("✅ 새로운 IoT 기기 추가 용이");
        System.out.println("✅ 실제 스마트홈의 핵심 기술!");
        System.out.println("━━━━━━━━━━━━━━━━━━━━━━━━━━");
    }
}
```

### 핵심 포인트
1. **하나의 허브**로 모든 IoT 기기 통합 제어
2. **모드 별 시나리오** 자동화 (외출, 귀가)
3. **위치 기반 제어** - 거실, 침실 등
4. **확장성** - 새로운 스마트 기기 추가 용이
5. **실제 스마트홈 시스템**의 동작 원리

---

## 📚 다음 단계

Part 2에서는 다음 내용을 다룹니다:
- **기업 사례 1**: YouTube 동영상 플레이어
- **기업 사례 2**: 배달의민족 주문 처리
- **기업 사례 3**: GitHub Actions
- **주니어 개발자 시나리오**: 다형성 관련 흔한 실수 4가지

---

**작성일**: 2025-01-10
**챕터**: 17. 다형성 (Polymorphism) - Part 1
