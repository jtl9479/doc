# 2-5. íšŒì› ë„ë©”ì¸ ì‹¤í–‰ê³¼ í…ŒìŠ¤íŠ¸

## í•™ìŠµ ëª©í‘œ
- main ë©”ì„œë“œë¡œ ê°„ë‹¨í•œ ì‹¤í–‰ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•œë‹¤
- JUnitì„ ì‚¬ìš©í•œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± ë°©ë²•ì„ í•™ìŠµí•œë‹¤
- AssertJë¥¼ í™œìš©í•œ ê²€ì¦ ë°©ë²•ì„ ì´í•´í•œë‹¤
- í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ ì¤‘ìš”ì„±ê³¼ ì‘ì„± ë°©ë²•ì„ ìµíŒë‹¤

## ì—°ê´€ ê°œë…
- **JUnit**: Java í‘œì¤€ í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬
- **AssertJ**: ê°€ë…ì„± ë†’ì€ assertion ë¼ì´ë¸ŒëŸ¬ë¦¬
- **Given-When-Then**: í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± íŒ¨í„´
- **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸(Unit Test)**: ê°œë³„ ì»´í¬ë„ŒíŠ¸ë¥¼ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸

---

## TL;DR (ê°„ë‹¨ ìš”ì•½)

### main ë©”ì„œë“œ í…ŒìŠ¤íŠ¸
```java
public static void main(String[] args) {
    MemberService memberService = new MemberServiceImpl();
    Member member = new Member(1L, "memberA", Grade.VIP);
    memberService.join(member);

    Member findMember = memberService.findMember(1L);
    System.out.println("íšŒì› ì¡°íšŒ ì„±ê³µ");
}
```

### JUnit í…ŒìŠ¤íŠ¸
```java
@Test
void join() {
    // given
    Member member = new Member(1L, "memberA", Grade.VIP);

    // when
    memberService.join(member);
    Member findMember = memberService.findMember(1L);

    // then
    Assertions.assertThat(member).isEqualTo(findMember);
}
```

### í•µì‹¬ ë©”ì‹œì§€
**ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê²ƒì€ ì¢‹ì€ ë°©ë²•ì´ ì•„ë‹ˆë‹¤. JUnit í…ŒìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ì.**

---

## íšŒì› ë„ë©”ì¸ - íšŒì› ê°€ì… main

### MemberApp - ì‹¤í–‰ í´ë˜ìŠ¤

```java
package hello.core;

import hello.core.member.Grade;
import hello.core.member.Member;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;

public class MemberApp {

    public static void main(String[] args) {
        MemberService memberService = new MemberServiceImpl();
        Member member = new Member(1L, "memberA", Grade.VIP);
        memberService.join(member);

        Member findMember = memberService.findMember(1L);
        System.out.println("new member = " + member.getName());
        System.out.println("find Member = " + findMember.getName());
    }
}
```

**íŒŒì¼ ìœ„ì¹˜**: `src/main/java/hello/core/MemberApp.java`

### ì‹¤í–‰ ê²°ê³¼
```
new member = memberA
find Member = memberA
```

### ì½”ë“œ ì„¤ëª…
1. MemberServiceImpl ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
2. VIP ë“±ê¸‰ì˜ íšŒì› ìƒì„± (id: 1L, name: "memberA")
3. `join()` ë©”ì„œë“œë¡œ íšŒì› ê°€ì…
4. `findMember()` ë©”ì„œë“œë¡œ íšŒì› ì¡°íšŒ
5. ì½˜ì†”ì— ê²°ê³¼ ì¶œë ¥

---

## ì‹¬í™” ë‚´ìš©

### 1. main ë©”ì„œë“œ í…ŒìŠ¤íŠ¸ì˜ ë¬¸ì œì 

#### ë‹¨ì 
```
1. ìˆ˜ë™ ê²€ì¦: ì‚¬ëŒì´ ëˆˆìœ¼ë¡œ ê²°ê³¼ë¥¼ í™•ì¸í•´ì•¼ í•¨
2. ì¬ì‚¬ìš© ë¶ˆê°€: ë§¤ë²ˆ mainì„ ì‹¤í–‰í•´ì•¼ í•¨
3. ì—¬ëŸ¬ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸ ì–´ë ¤ì›€
4. ìë™í™” ë¶ˆê°€ëŠ¥: CI/CD íŒŒì´í”„ë¼ì¸ì— í¬í•¨ ë¶ˆê°€
5. ì‹¤íŒ¨ ê°ì§€ ì–´ë ¤ì›€: ì„±ê³µ/ì‹¤íŒ¨ê°€ ëª…í™•í•˜ì§€ ì•ŠìŒ
```

#### ì˜ˆì‹œ
```java
public static void main(String[] args) {
    // ...
    System.out.println("new member = " + member.getName());
    System.out.println("find Member = " + findMember.getName());

    // âŒ ì´ê²Œ ë§ëŠ”ì§€ ì‚¬ëŒì´ ì§ì ‘ í™•ì¸í•´ì•¼ í•¨
    // âŒ ìë™ìœ¼ë¡œ ì„±ê³µ/ì‹¤íŒ¨ íŒë‹¨ ë¶ˆê°€
}
```

### 2. í…ŒìŠ¤íŠ¸ ìë™í™”ì˜ í•„ìš”ì„±

```mermaid
graph LR
    A[ê°œë°œ] --> B{í…ŒìŠ¤íŠ¸}
    B -->|ìˆ˜ë™ í…ŒìŠ¤íŠ¸| C[ì‹œê°„ ì†Œìš”<br/>ì˜¤ë¥˜ ê°€ëŠ¥ì„±]
    B -->|ìë™ í…ŒìŠ¤íŠ¸| D[ë¹ ë¥¸ í”¼ë“œë°±<br/>ì•ˆì „í•œ ë¦¬íŒ©í† ë§]
    D --> E[í’ˆì§ˆ í–¥ìƒ]

    style C fill:#ffe6e6
    style D fill:#e6ffe6
    style E fill:#e6f3ff
```

---

## íšŒì› ë„ë©”ì¸ - íšŒì› ê°€ì… í…ŒìŠ¤íŠ¸

### MemberServiceTest - JUnit í…ŒìŠ¤íŠ¸

```java
package hello.core.member;

import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.Test;

class MemberServiceTest {

    MemberService memberService = new MemberServiceImpl();

    @Test
    void join() {
        // given
        Member member = new Member(1L, "memberA", Grade.VIP);

        // when
        memberService.join(member);
        Member findMember = memberService.findMember(1L);

        // then
        Assertions.assertThat(member).isEqualTo(findMember);
    }
}
```

**íŒŒì¼ ìœ„ì¹˜**: `src/test/java/hello/core/member/MemberServiceTest.java`

### í…ŒìŠ¤íŠ¸ ì„±ê³µ í™”ë©´
```
âœ… MemberServiceTest > join() PASSED
```

---

## ì‹¬í™” ë‚´ìš©

### 1. Given-When-Then íŒ¨í„´

#### íŒ¨í„´ ì„¤ëª…
```java
@Test
void join() {
    // given - í…ŒìŠ¤íŠ¸ ì¤€ë¹„ (ë°ì´í„° ì¤€ë¹„)
    Member member = new Member(1L, "memberA", Grade.VIP);

    // when - í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (ì‹¤ì œ ë™ì‘)
    memberService.join(member);
    Member findMember = memberService.findMember(1L);

    // then - ê²€ì¦ (ê²°ê³¼ í™•ì¸)
    Assertions.assertThat(member).isEqualTo(findMember);
}
```

#### ì™œ ì‚¬ìš©í•˜ëŠ”ê°€?
1. **ê°€ë…ì„±**: í…ŒìŠ¤íŠ¸ ì˜ë„ê°€ ëª…í™•í•´ì§
2. **êµ¬ì¡°í™”**: ì¼ê´€ëœ í…ŒìŠ¤íŠ¸ ì‘ì„±
3. **ìœ ì§€ë³´ìˆ˜**: í…ŒìŠ¤íŠ¸ ìˆ˜ì •ì´ ì‰¬ì›Œì§

#### ë³€í˜• íŒ¨í„´ë“¤
```java
// Arrange-Act-Assert (AAA)
// given â†’ Arrange
// when â†’ Act
// then â†’ Assert

// Setup-Exercise-Verify
// given â†’ Setup
// when â†’ Exercise
// then â†’ Verify
```

### 2. AssertJ vs JUnit Assertions

#### JUnit ê¸°ë³¸ Assertions
```java
import static org.junit.jupiter.api.Assertions.*;

@Test
void joinWithJUnit() {
    // given
    Member member = new Member(1L, "memberA", Grade.VIP);

    // when
    memberService.join(member);
    Member findMember = memberService.findMember(1L);

    // then
    assertEquals(member, findMember);  // JUnit
    assertTrue(findMember.getGrade() == Grade.VIP);
}
```

#### AssertJ Assertions (ê¶Œì¥)
```java
import static org.assertj.core.api.Assertions.*;

@Test
void joinWithAssertJ() {
    // given
    Member member = new Member(1L, "memberA", Grade.VIP);

    // when
    memberService.join(member);
    Member findMember = memberService.findMember(1L);

    // then
    assertThat(findMember)
        .isEqualTo(member)
        .extracting("name", "grade")
        .containsExactly("memberA", Grade.VIP);
}
```

#### AssertJì˜ ì¥ì 
```java
// 1. ë©”ì„œë“œ ì²´ì´ë‹ìœ¼ë¡œ ê°€ë…ì„± í–¥ìƒ
assertThat(findMember)
    .isNotNull()
    .hasFieldOrPropertyWithValue("name", "memberA")
    .hasFieldOrPropertyWithValue("grade", Grade.VIP);

// 2. í’ë¶€í•œ assertion ë©”ì„œë“œ
assertThat(findMember.getName())
    .isNotEmpty()
    .startsWith("member")
    .endsWith("A")
    .hasSize(7);

// 3. ëª…í™•í•œ ì‹¤íŒ¨ ë©”ì‹œì§€
assertThat(findMember.getGrade())
    .as("íšŒì› ë“±ê¸‰ì€ VIPì—¬ì•¼ í•©ë‹ˆë‹¤")
    .isEqualTo(Grade.VIP);
```

### 3. ë‹¤ì–‘í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤

#### ì •ìƒ ì¼€ì´ìŠ¤
```java
@Test
@DisplayName("VIP íšŒì› ê°€ì… ì„±ê³µ")
void joinVipMember() {
    // given
    Member member = new Member(1L, "memberA", Grade.VIP);

    // when
    memberService.join(member);
    Member findMember = memberService.findMember(1L);

    // then
    assertThat(findMember)
        .isNotNull()
        .extracting("id", "name", "grade")
        .containsExactly(1L, "memberA", Grade.VIP);
}

@Test
@DisplayName("BASIC íšŒì› ê°€ì… ì„±ê³µ")
void joinBasicMember() {
    // given
    Member member = new Member(2L, "memberB", Grade.BASIC);

    // when
    memberService.join(member);
    Member findMember = memberService.findMember(2L);

    // then
    assertThat(findMember.getGrade()).isEqualTo(Grade.BASIC);
}
```

#### ì˜ˆì™¸ ì¼€ì´ìŠ¤
```java
@Test
@DisplayName("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íšŒì› ì¡°íšŒ ì‹œ null ë°˜í™˜")
void findMemberNotFound() {
    // when
    Member findMember = memberService.findMember(999L);

    // then
    assertThat(findMember).isNull();
}

// ì˜ˆì™¸ ë°œìƒ í…ŒìŠ¤íŠ¸ (ì„œë¹„ìŠ¤ ê°œì„  í›„)
@Test
@DisplayName("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íšŒì› ì¡°íšŒ ì‹œ ì˜ˆì™¸ ë°œìƒ")
void findMemberThrowException() {
    // when & then
    assertThatThrownBy(() -> memberService.findMember(999L))
        .isInstanceOf(MemberNotFoundException.class)
        .hasMessage("íšŒì›ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: 999");
}

@Test
@DisplayName("ì¤‘ë³µ íšŒì› ê°€ì… ì‹œ ì˜ˆì™¸ ë°œìƒ")
void joinDuplicateMember() {
    // given
    Member member1 = new Member(1L, "memberA", Grade.VIP);
    memberService.join(member1);

    Member member2 = new Member(1L, "memberB", Grade.BASIC);

    // when & then
    assertThatThrownBy(() -> memberService.join(member2))
        .isInstanceOf(IllegalStateException.class)
        .hasMessage("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” íšŒì›ì…ë‹ˆë‹¤.");
}
```

### 4. í…ŒìŠ¤íŠ¸ ê²©ë¦¬ (Isolation)

#### ë¬¸ì œ ìƒí™©
```java
@Test
void test1() {
    Member member = new Member(1L, "memberA", Grade.VIP);
    memberService.join(member);
    // ...
}

@Test
void test2() {
    Member member = new Member(1L, "memberB", Grade.BASIC);
    memberService.join(member);  // âŒ ID ì¤‘ë³µ! test1ì˜ ì˜í–¥
}
```

#### í•´ê²°: @BeforeEach, @AfterEach
```java
class MemberServiceTest {

    MemberService memberService;
    MemoryMemberRepository memberRepository;

    @BeforeEach
    void beforeEach() {
        memberRepository = new MemoryMemberRepository();
        memberService = new MemberServiceImpl(memberRepository);
    }

    @AfterEach
    void afterEach() {
        memberRepository.clearStore();  // ì €ì¥ì†Œ ì´ˆê¸°í™”
    }

    @Test
    void join() {
        // í…ŒìŠ¤íŠ¸ ì½”ë“œ
    }
}
```

#### clearStore() ë©”ì„œë“œ ì¶”ê°€
```java
public class MemoryMemberRepository implements MemberRepository {
    private static Map<Long, Member> store = new HashMap<>();

    // ...

    public void clearStore() {
        store.clear();
    }
}
```

---

## Tip

### IntelliJ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë‹¨ì¶•í‚¤
```
- í˜„ì¬ í…ŒìŠ¤íŠ¸ ë©”ì„œë“œ ì‹¤í–‰: Ctrl + Shift + F10 (Win/Linux)
- í˜„ì¬ í…ŒìŠ¤íŠ¸ ë©”ì„œë“œ ì‹¤í–‰: Ctrl + Shift + R (Mac)
- ì´ì „ í…ŒìŠ¤íŠ¸ ì¬ì‹¤í–‰: Shift + F10 (Win/Linux)
- ì´ì „ í…ŒìŠ¤íŠ¸ ì¬ì‹¤í–‰: Ctrl + R (Mac)
```

### í…ŒìŠ¤íŠ¸ ë©”ì„œë“œ ë„¤ì´ë°
```java
// ë°©ë²• 1: í•œê¸€ ì‚¬ìš© (ê¶Œì¥)
@Test
void íšŒì›ê°€ì…() { }

@Test
void ì¤‘ë³µ_íšŒì›_ì˜ˆì™¸() { }

// ë°©ë²• 2: ì˜ì–´ + ì–¸ë”ìŠ¤ì½”ì–´
@Test
void join_success() { }

@Test
void join_duplicate_member_exception() { }

// ë°©ë²• 3: @DisplayName ì‚¬ìš©
@Test
@DisplayName("íšŒì› ê°€ì… ì„±ê³µ")
void test1() { }
```

### AssertJ static import
```java
import static org.assertj.core.api.Assertions.*;

// assertThatì„ ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥
assertThat(member).isEqualTo(findMember);
```

---

## ì£¼ì˜ì‚¬í•­

### 1. í…ŒìŠ¤íŠ¸ ë©”ì„œë“œëŠ” ë…ë¦½ì ì´ì–´ì•¼ í•¨
```java
// âŒ ë‚˜ìœ ì˜ˆ: í…ŒìŠ¤íŠ¸ ìˆœì„œì— ì˜ì¡´
class BadTest {
    static Member savedMember;

    @Test
    void test1_join() {
        savedMember = new Member(1L, "memberA", Grade.VIP);
        memberService.join(savedMember);
    }

    @Test
    void test2_find() {
        // test1ì— ì˜ì¡´ - ìˆœì„œê°€ ë°”ë€Œë©´ ì‹¤íŒ¨!
        Member findMember = memberService.findMember(savedMember.getId());
    }
}

// âœ… ì¢‹ì€ ì˜ˆ: ê° í…ŒìŠ¤íŠ¸ ë…ë¦½ì 
class GoodTest {
    @Test
    void join() {
        Member member = new Member(1L, "memberA", Grade.VIP);
        memberService.join(member);
        // ...
    }

    @Test
    void find() {
        Member member = new Member(2L, "memberB", Grade.BASIC);
        memberService.join(member);
        Member findMember = memberService.findMember(2L);
        // ...
    }
}
```

### 2. í”„ë¡œë•ì…˜ ì½”ë“œì— í…ŒìŠ¤íŠ¸ ì½”ë“œ ì˜ì¡´ ê¸ˆì§€
```java
// âŒ ë‚˜ìœ ì˜ˆ
public class MemberServiceImpl {
    // í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ë©”ì„œë“œ ì¶”ê°€
    public void clearMembers() {  // í”„ë¡œë•ì…˜ì— ë¶ˆí•„ìš”
        // ...
    }
}

// âœ… ì¢‹ì€ ì˜ˆ: í…ŒìŠ¤íŠ¸ ì „ìš© í´ë˜ìŠ¤ ì‚¬ìš©
class MemberServiceTest {
    @BeforeEach
    void setup() {
        // í…ŒìŠ¤íŠ¸ë§ˆë‹¤ ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
        memberService = new MemberServiceImpl();
    }
}
```

### 3. assertEquals vs assertThat
```java
// JUnitì˜ assertEquals - ìˆœì„œ ì£¼ì˜!
assertEquals(expected, actual);  // ê¸°ëŒ€ê°’, ì‹¤ì œê°’ ìˆœì„œ

// AssertJì˜ assertThat - ì§ê´€ì 
assertThat(actual).isEqualTo(expected);  // ì‹¤ì œê°’, ê¸°ëŒ€ê°’
```

---

## ë©´ì ‘ ì§ˆë¬¸

### ì´ˆê¸‰ - í…ŒìŠ¤íŠ¸ ê¸°ë³¸

**Q1. main ë©”ì„œë“œ í…ŒìŠ¤íŠ¸ì™€ JUnit í…ŒìŠ¤íŠ¸ì˜ ì°¨ì´ì ì€ ë¬´ì—‡ì¸ê°€ìš”?**

A:
**main ë©”ì„œë“œ í…ŒìŠ¤íŠ¸:**
- ì‚¬ëŒì´ ì§ì ‘ ì½˜ì†” ì¶œë ¥ì„ í™•ì¸í•´ì•¼ í•¨
- ì„±ê³µ/ì‹¤íŒ¨ ìë™ íŒë‹¨ ë¶ˆê°€
- ì—¬ëŸ¬ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸ê°€ ì–´ë ¤ì›€
- ìë™í™”(CI/CD) ë¶ˆê°€ëŠ¥

**JUnit í…ŒìŠ¤íŠ¸:**
- `assertThat`ìœ¼ë¡œ ìë™ ê²€ì¦
- ì„±ê³µ/ì‹¤íŒ¨ê°€ ëª…í™•í•˜ê²Œ í‘œì‹œë¨
- ì—¬ëŸ¬ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ë©”ì„œë“œë¡œ ë¶„ë¦¬ ê°€ëŠ¥
- CI/CD íŒŒì´í”„ë¼ì¸ì— í†µí•© ê°€ëŠ¥
- ë¹ ë¥¸ í”¼ë“œë°±ê³¼ ì•ˆì „í•œ ë¦¬íŒ©í† ë§ ê°€ëŠ¥

```java
// main - ìˆ˜ë™ ê²€ì¦
System.out.println(member.getName());  // ì‚¬ëŒì´ í™•ì¸

// JUnit - ìë™ ê²€ì¦
assertThat(member.getName()).isEqualTo("memberA");  // ìë™ íŒë‹¨
```

**Q2. Given-When-Then íŒ¨í„´ì„ ì„¤ëª…í•˜ê³  ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ì¸ê°€ìš”?**

A: Given-When-Thenì€ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ êµ¬ì¡°í™”í•˜ëŠ” íŒ¨í„´ì…ë‹ˆë‹¤.

- **Given**: í…ŒìŠ¤íŠ¸ì— í•„ìš”í•œ ë°ì´í„°ë‚˜ ìƒíƒœë¥¼ ì¤€ë¹„
- **When**: í…ŒìŠ¤íŠ¸í•  ë™ì‘ì„ ì‹¤í–‰
- **Then**: ê²°ê³¼ë¥¼ ê²€ì¦

```java
@Test
void join() {
    // given - íšŒì› ë°ì´í„° ì¤€ë¹„
    Member member = new Member(1L, "memberA", Grade.VIP);

    // when - íšŒì› ê°€ì… ì‹¤í–‰
    memberService.join(member);
    Member findMember = memberService.findMember(1L);

    // then - ê²°ê³¼ ê²€ì¦
    assertThat(member).isEqualTo(findMember);
}
```

**ì‚¬ìš© ì´ìœ :**
1. í…ŒìŠ¤íŠ¸ ì˜ë„ê°€ ëª…í™•í•´ì§
2. ì¼ê´€ëœ êµ¬ì¡°ë¡œ ê°€ë…ì„± í–¥ìƒ
3. ìœ ì§€ë³´ìˆ˜ê°€ ì‰¬ì›Œì§
4. íŒ€ í˜‘ì—… ì‹œ í†µì¼ëœ ìŠ¤íƒ€ì¼ ìœ ì§€

### ì¤‘ê¸‰ - í…ŒìŠ¤íŠ¸ ê²©ë¦¬

**Q3. í…ŒìŠ¤íŠ¸ ê²©ë¦¬(Test Isolation)ë€ ë¬´ì—‡ì´ê³  ì™œ ì¤‘ìš”í•œê°€ìš”?**

A: í…ŒìŠ¤íŠ¸ ê²©ë¦¬ë€ ê° í…ŒìŠ¤íŠ¸ê°€ ë‹¤ë¥¸ í…ŒìŠ¤íŠ¸ì˜ ì˜í–¥ì„ ë°›ì§€ ì•Šê³  ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

**ë¬¸ì œ ìƒí™©:**
```java
// static HashMapì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°
private static Map<Long, Member> store = new HashMap<>();

@Test
void test1() {
    Member member = new Member(1L, "memberA", Grade.VIP);
    memberService.join(member);  // storeì— ì €ì¥
}

@Test
void test2() {
    Member member = new Member(1L, "memberB", Grade.BASIC);
    memberService.join(member);  // test1ì˜ ë°ì´í„°ê°€ ë‚¨ì•„ìˆìŒ!
}
```

**í•´ê²° ë°©ë²•:**

1. **@BeforeEach, @AfterEach ì‚¬ìš©**
```java
@BeforeEach
void setup() {
    memberRepository = new MemoryMemberRepository();
    memberService = new MemberServiceImpl(memberRepository);
}

@AfterEach
void cleanup() {
    memberRepository.clearStore();
}
```

2. **ê° í…ŒìŠ¤íŠ¸ë§ˆë‹¤ ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±**
```java
@BeforeEach
void setup() {
    // ë§¤ë²ˆ ìƒˆë¡œìš´ ì €ì¥ì†Œì™€ ì„œë¹„ìŠ¤ ìƒì„±
    memberService = new MemberServiceImpl(new MemoryMemberRepository());
}
```

**ì¤‘ìš”í•œ ì´ìœ :**
1. í…ŒìŠ¤íŠ¸ ìˆœì„œì— ê´€ê³„ì—†ì´ í•­ìƒ ê°™ì€ ê²°ê³¼
2. ë³‘ë ¬ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ê°€ëŠ¥
3. í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ì›ì¸ íŒŒì•…ì´ ì‰¬ì›€
4. ì•ˆì •ì ì¸ CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶•

**Q4. AssertJë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ì™€ JUnit Assertionsì™€ì˜ ì°¨ì´ì ì„ ì„¤ëª…í•´ì£¼ì„¸ìš”.**

A:
**JUnit Assertions:**
```java
assertEquals(expected, actual);
assertTrue(condition);
assertNotNull(object);
```

**AssertJ:**
```java
assertThat(actual).isEqualTo(expected);
assertThat(condition).isTrue();
assertThat(object).isNotNull();
```

**AssertJì˜ ì¥ì :**

1. **ê°€ë…ì„± í–¥ìƒ**
```java
// JUnit - ìˆœì„œ í—·ê°ˆë¦¼
assertEquals("memberA", member.getName());

// AssertJ - ìì—°ìŠ¤ëŸ¬ìš´ íë¦„
assertThat(member.getName()).isEqualTo("memberA");
```

2. **ë©”ì„œë“œ ì²´ì´ë‹**
```java
assertThat(member)
    .isNotNull()
    .extracting("name", "grade")
    .containsExactly("memberA", Grade.VIP);
```

3. **í’ë¶€í•œ assertion**
```java
assertThat(member.getName())
    .isNotEmpty()
    .startsWith("member")
    .endsWith("A")
    .hasSize(7);
```

4. **ëª…í™•í•œ ì—ëŸ¬ ë©”ì‹œì§€**
```java
assertThat(member.getGrade())
    .as("íšŒì› ë“±ê¸‰ ê²€ì¦")  // ì‹¤íŒ¨ ì‹œ ë©”ì‹œì§€ì— í‘œì‹œ
    .isEqualTo(Grade.VIP);
```

5. **ë‹¤ì–‘í•œ íƒ€ì… ì§€ì›**
```java
// ì»¬ë ‰ì…˜
assertThat(memberList)
    .hasSize(3)
    .contains(member1, member2)
    .extracting("name")
    .containsExactly("memberA", "memberB", "memberC");

// ì˜ˆì™¸
assertThatThrownBy(() -> memberService.findMember(999L))
    .isInstanceOf(MemberNotFoundException.class)
    .hasMessage("íšŒì›ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤");
```

### ê³ ê¸‰ - í…ŒìŠ¤íŠ¸ ì „ëµ

**Q5. í˜„ì¬ í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ ë¬¸ì œì ì„ ê°œì„ í•œ ê³ ê¸‰ í…ŒìŠ¤íŠ¸ ì „ëµì„ ì œì‹œí•´ì£¼ì„¸ìš”.**

A: í˜„ì¬ í…ŒìŠ¤íŠ¸ì—ëŠ” ì—¬ëŸ¬ ê°œì„ ì ì´ ìˆìŠµë‹ˆë‹¤.

#### 1. í…ŒìŠ¤íŠ¸ í”½ìŠ¤ì²˜(Fixture) ê´€ë¦¬

**í˜„ì¬ ë¬¸ì œ:**
```java
@Test
void test1() {
    Member member = new Member(1L, "memberA", Grade.VIP);
    // ...
}

@Test
void test2() {
    Member member = new Member(1L, "memberA", Grade.VIP);  // ì¤‘ë³µ
    // ...
}
```

**ê°œì„ : ë¹Œë” íŒ¨í„´ ë˜ëŠ” íŒ©í† ë¦¬ ë©”ì„œë“œ**
```java
class MemberServiceTest {

    // í…ŒìŠ¤íŠ¸ ë°ì´í„° íŒ©í† ë¦¬
    private Member createVipMember(Long id, String name) {
        return new Member(id, name, Grade.VIP);
    }

    private Member createBasicMember(Long id, String name) {
        return new Member(id, name, Grade.BASIC);
    }

    @Test
    void joinVipMember() {
        // given
        Member member = createVipMember(1L, "memberA");

        // when & then
        // ...
    }
}

// ë˜ëŠ” Builder íŒ¨í„´
class MemberBuilder {
    private Long id = 1L;
    private String name = "memberA";
    private Grade grade = Grade.BASIC;

    public MemberBuilder id(Long id) {
        this.id = id;
        return this;
    }

    public MemberBuilder name(String name) {
        this.name = name;
        return this;
    }

    public MemberBuilder vip() {
        this.grade = Grade.VIP;
        return this;
    }

    public Member build() {
        return new Member(id, name, grade);
    }
}

@Test
void joinWithBuilder() {
    // given
    Member member = new MemberBuilder()
        .id(1L)
        .name("memberA")
        .vip()
        .build();

    // when & then
    // ...
}
```

#### 2. íŒŒë¼ë¯¸í„°í™” í…ŒìŠ¤íŠ¸ (Parameterized Test)

```java
@ParameterizedTest
@CsvSource({
    "1, memberA, VIP",
    "2, memberB, BASIC",
    "3, memberC, VIP"
})
@DisplayName("ë‹¤ì–‘í•œ íšŒì› ë“±ê¸‰ìœ¼ë¡œ ê°€ì… í…ŒìŠ¤íŠ¸")
void joinWithDifferentGrades(Long id, String name, Grade grade) {
    // given
    Member member = new Member(id, name, grade);

    // when
    memberService.join(member);
    Member findMember = memberService.findMember(id);

    // then
    assertThat(findMember)
        .extracting("id", "name", "grade")
        .containsExactly(id, name, grade);
}

@ParameterizedTest
@MethodSource("provideInvalidMembers")
@DisplayName("ì˜ëª»ëœ íšŒì› ì •ë³´ë¡œ ê°€ì… ì‹œ ì˜ˆì™¸ ë°œìƒ")
void joinWithInvalidMember(Member member, String expectedMessage) {
    // when & then
    assertThatThrownBy(() -> memberService.join(member))
        .isInstanceOf(IllegalArgumentException.class)
        .hasMessage(expectedMessage);
}

private static Stream<Arguments> provideInvalidMembers() {
    return Stream.of(
        Arguments.of(new Member(null, "memberA", Grade.VIP), "íšŒì› IDëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤"),
        Arguments.of(new Member(1L, null, Grade.VIP), "íšŒì› ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤"),
        Arguments.of(new Member(1L, "", Grade.VIP), "íšŒì› ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
    );
}
```

#### 3. í…ŒìŠ¤íŠ¸ ë”ë¸”(Test Double) ì‚¬ìš©

**Mockì„ ì‚¬ìš©í•œ ì˜ì¡´ì„± ì œê±°:**
```java
class MemberServiceTest {

    @Test
    @DisplayName("ë¦¬í¬ì§€í† ë¦¬ í˜¸ì¶œ ê²€ì¦ - Mockito ì‚¬ìš©")
    void joinCallsRepository() {
        // given
        MemberRepository memberRepository = mock(MemberRepository.class);
        MemberService memberService = new MemberServiceImpl(memberRepository);
        Member member = new Member(1L, "memberA", Grade.VIP);

        // when
        memberService.join(member);

        // then
        verify(memberRepository, times(1)).save(member);
    }

    @Test
    @DisplayName("ë¦¬í¬ì§€í† ë¦¬ ë™ì‘ ëª¨í‚¹")
    void findMemberWithMock() {
        // given
        MemberRepository memberRepository = mock(MemberRepository.class);
        MemberService memberService = new MemberServiceImpl(memberRepository);
        Member member = new Member(1L, "memberA", Grade.VIP);

        when(memberRepository.findById(1L)).thenReturn(member);

        // when
        Member findMember = memberService.findMember(1L);

        // then
        assertThat(findMember).isEqualTo(member);
        verify(memberRepository).findById(1L);
    }
}
```

#### 4. BDD ìŠ¤íƒ€ì¼ í…ŒìŠ¤íŠ¸

```java
// BDD Mockito ì‚¬ìš©
import static org.mockito.BDDMockito.*;

@Test
@DisplayName("BDD ìŠ¤íƒ€ì¼ í…ŒìŠ¤íŠ¸")
void joinBddStyle() {
    // given
    MemberRepository memberRepository = mock(MemberRepository.class);
    MemberService memberService = new MemberServiceImpl(memberRepository);
    Member member = new Member(1L, "memberA", Grade.VIP);

    given(memberRepository.findById(1L)).willReturn(member);

    // when
    Member findMember = memberService.findMember(1L);

    // then
    then(memberRepository).should().findById(1L);
    assertThat(findMember).isEqualTo(member);
}
```

#### 5. í…ŒìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆë¥¼ í™œìš©í•œ í†µí•© í…ŒìŠ¤íŠ¸

```java
@SpringBootTest
@Testcontainers
class MemberServiceIntegrationTest {

    @Container
    static MySQLContainer<?> mysql = new MySQLContainer<>("mysql:8.0")
        .withDatabaseName("testdb");

    @Autowired
    private MemberService memberService;

    @Test
    @DisplayName("ì‹¤ì œ DBë¥¼ ì‚¬ìš©í•œ í†µí•© í…ŒìŠ¤íŠ¸")
    void joinWithRealDatabase() {
        // given
        Member member = new Member(1L, "memberA", Grade.VIP);

        // when
        memberService.join(member);
        Member findMember = memberService.findMember(1L);

        // then
        assertThat(findMember).isEqualTo(member);
    }
}
```

#### 6. ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

```java
@Test
@DisplayName("1ë§Œëª… íšŒì› ê°€ì… ì„±ëŠ¥ í…ŒìŠ¤íŠ¸")
@Timeout(value = 5, unit = TimeUnit.SECONDS)
void performanceTest() {
    // given
    int memberCount = 10000;

    // when
    StopWatch stopWatch = new StopWatch();
    stopWatch.start();

    for (int i = 0; i < memberCount; i++) {
        Member member = new Member((long) i, "member" + i, Grade.BASIC);
        memberService.join(member);
    }

    stopWatch.stop();

    // then
    System.out.println("ì‹¤í–‰ ì‹œê°„: " + stopWatch.getTotalTimeMillis() + "ms");
    assertThat(stopWatch.getTotalTimeMillis()).isLessThan(5000);
}
```

#### í…ŒìŠ¤íŠ¸ ì „ëµ ìš”ì•½
1. **í…ŒìŠ¤íŠ¸ í”½ìŠ¤ì²˜**: Builder íŒ¨í„´ìœ¼ë¡œ ì¬ì‚¬ìš©
2. **íŒŒë¼ë¯¸í„°í™” í…ŒìŠ¤íŠ¸**: ì—¬ëŸ¬ ì¼€ì´ìŠ¤ë¥¼ í•œ ë²ˆì— í…ŒìŠ¤íŠ¸
3. **Mock ì‚¬ìš©**: ì˜ì¡´ì„± ì œê±°í•˜ì—¬ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ìˆœìˆ˜ì„± ìœ ì§€
4. **BDD ìŠ¤íƒ€ì¼**: ë¹„ì¦ˆë‹ˆìŠ¤ ì–¸ì–´ë¡œ í…ŒìŠ¤íŠ¸ ì‘ì„±
5. **í†µí•© í…ŒìŠ¤íŠ¸**: ì‹¤ì œ í™˜ê²½ê³¼ ìœ ì‚¬í•œ í…ŒìŠ¤íŠ¸
6. **ì„±ëŠ¥ í…ŒìŠ¤íŠ¸**: ì‘ë‹µ ì‹œê°„ ê²€ì¦

---

## ì „ì²´ ìš”ì•½

íšŒì› ë„ë©”ì¸ì˜ í…ŒìŠ¤íŠ¸ëŠ” **main ë©”ì„œë“œ í…ŒìŠ¤íŠ¸**ì™€ **JUnit í…ŒìŠ¤íŠ¸** ë‘ ê°€ì§€ ë°©ì‹ìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤.

### main ë©”ì„œë“œ í…ŒìŠ¤íŠ¸
- ê°„ë‹¨í•˜ê²Œ ë™ì‘ í™•ì¸ ê°€ëŠ¥
- ì‚¬ëŒì´ ì§ì ‘ ê²°ê³¼ë¥¼ í™•ì¸í•´ì•¼ í•¨
- ìë™í™” ë¶ˆê°€ëŠ¥

### JUnit í…ŒìŠ¤íŠ¸ (ê¶Œì¥)
- Given-When-Then íŒ¨í„´ìœ¼ë¡œ êµ¬ì¡°í™”
- AssertJë¡œ ìë™ ê²€ì¦
- CI/CD íŒŒì´í”„ë¼ì¸ì— í†µí•© ê°€ëŠ¥
- ë¹ ë¥¸ í”¼ë“œë°±ê³¼ ì•ˆì „í•œ ë¦¬íŒ©í† ë§

### í•µì‹¬ ì›ì¹™
```
1. ê° í…ŒìŠ¤íŠ¸ëŠ” ë…ë¦½ì ì´ì–´ì•¼ í•œë‹¤ (Test Isolation)
2. Given-When-Thenìœ¼ë¡œ êµ¬ì¡°í™”í•œë‹¤
3. AssertJë¡œ ê°€ë…ì„± ë†’ì€ ê²€ì¦ì„ ì‘ì„±í•œë‹¤
4. @BeforeEach/@AfterEachë¡œ í…ŒìŠ¤íŠ¸ í™˜ê²½ì„ ì´ˆê¸°í™”í•œë‹¤
```

---

## í•™ìŠµ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] main ë©”ì„œë“œë¡œ ê°„ë‹¨í•œ ì‹¤í–‰ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤
- [ ] JUnit í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤
- [ ] Given-When-Then íŒ¨í„´ì„ ì´í•´í•˜ê³  ì ìš©í•  ìˆ˜ ìˆë‹¤
- [ ] AssertJë¥¼ ì‚¬ìš©í•œ ê²€ì¦ì„ ì‘ì„±í•  ìˆ˜ ìˆë‹¤
- [ ] í…ŒìŠ¤íŠ¸ ê²©ë¦¬ì˜ ì¤‘ìš”ì„±ì„ ì´í•´í–ˆë‹¤

---

## ë‹¤ìŒ í•™ìŠµ
ë‹¤ìŒ ì„¹ì…˜ì—ì„œëŠ” **ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸ì„ ì„¤ê³„**í•©ë‹ˆë‹¤.
- ì£¼ë¬¸ ë„ë©”ì¸ ìš”êµ¬ì‚¬í•­ ë¶„ì„
- í• ì¸ ì •ì±… ì„¤ê³„
- ì—­í• ê³¼ ì±…ì„ ë¶„ë¦¬
- í˜‘ë ¥ ê´€ê³„ ë‹¤ì´ì–´ê·¸ë¨

**[2-6. ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸ ì„¤ê³„](2-6-ì£¼ë¬¸ê³¼í• ì¸ë„ë©”ì¸ì„¤ê³„.md)** ì—ì„œ ê³„ì†ë©ë‹ˆë‹¤.

---

## ğŸ“š ì°¸ê³ ìë£Œ
- [JUnit 5 User Guide](https://junit.org/junit5/docs/current/user-guide/)
- [AssertJ Documentation](https://assertj.github.io/doc/)
- [í…ŒìŠ¤íŠ¸ ì£¼ë„ ê°œë°œ - Kent Beck](http://www.yes24.com/Product/Goods/12246033)
- [Effective Unit Testing - Lasse Koskela](http://www.yes24.com/Product/Goods/11221304)
- [xUnit Test Patterns - Gerard Meszaros](http://xunitpatterns.com/) - Given-When-Then íŒ¨í„´
