# ğŸ“ Chapter 22-3: ë‚´ë¶€ í´ë˜ìŠ¤ (Inner Classes) Part 3

## ğŸ¯ í•™ìŠµ ëª©í‘œ
- ë‚´ë¶€ í´ë˜ìŠ¤ë¥¼ í™œìš©í•œ ì‹¤ì „ í”„ë¡œì íŠ¸ë¥¼ ì™„ì„±í•©ë‹ˆë‹¤
- Event Bus ì‹œìŠ¤í…œì„ í†µí•´ Observer íŒ¨í„´ì„ ì´í•´í•©ë‹ˆë‹¤
- 4ê°€ì§€ ë‚´ë¶€ í´ë˜ìŠ¤ë¥¼ ì¢…í•©ì ìœ¼ë¡œ í™œìš©í•©ë‹ˆë‹¤
- FAQì™€ ë©´ì ‘ ì§ˆë¬¸ì„ í†µí•´ ë‚´ë¶€ í´ë˜ìŠ¤ ê°œë…ì„ ì™„ì „íˆ ë§ˆìŠ¤í„°í•©ë‹ˆë‹¤

---

## ğŸš€ ì‹¤ì „ í”„ë¡œì íŠ¸: Event Bus System

### í”„ë¡œì íŠ¸ ê°œìš”
**í”„ë¡œì íŠ¸ëª…**: SimpleEventBus - ì´ë²¤íŠ¸ ê¸°ë°˜ ë©”ì‹œì§• ì‹œìŠ¤í…œ
**ëª©í‘œ**: ì»´í¬ë„ŒíŠ¸ ê°„ ëŠìŠ¨í•œ ê²°í•©(Loose Coupling)ì„ ìœ ì§€í•˜ë©´ì„œ ì´ë²¤íŠ¸ë¥¼ ì „ë‹¬í•˜ëŠ” ì‹œìŠ¤í…œ êµ¬ì¶•
**ê¸°ìˆ  ìŠ¤íƒ**: Inner Classes, Observer Pattern, Generic, Reflection

### ì£¼ìš” ê¸°ëŠ¥
1. âœ… ì´ë²¤íŠ¸ ë°œí–‰ (Publish)
2. âœ… ì´ë²¤íŠ¸ êµ¬ë… (Subscribe)
3. âœ… ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ì²˜ë¦¬
4. âœ… ë¹„ë™ê¸° ì´ë²¤íŠ¸ ì²˜ë¦¬
5. âœ… íƒ€ì… ì•ˆì „ì„± ë³´ì¥

---

## ğŸ’» ì „ì²´ ì½”ë“œ

```java
// ğŸ“ EventBusSystem.java

import java.lang.reflect.Method;
import java.util.*;
import java.util.concurrent.*;

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// 1ï¸âƒ£ ì´ë²¤íŠ¸ í´ë˜ìŠ¤ë“¤
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

abstract class Event {
    private final long timestamp;
    private final String source;

    public Event(String source) {
        this.timestamp = System.currentTimeMillis();
        this.source = source;
    }

    public long getTimestamp() { return timestamp; }
    public String getSource() { return source; }

    @Override
    public String toString() {
        return getClass().getSimpleName() + "{source='" + source + "'}";
    }
}

class UserRegisteredEvent extends Event {
    private final String username;
    private final String email;

    public UserRegisteredEvent(String source, String username, String email) {
        super(source);
        this.username = username;
        this.email = email;
    }

    public String getUsername() { return username; }
    public String getEmail() { return email; }

    @Override
    public String toString() {
        return "UserRegisteredEvent{username='" + username + "', email='" + email + "'}";
    }
}

class OrderPlacedEvent extends Event {
    private final String orderId;
    private final int amount;

    public OrderPlacedEvent(String source, String orderId, int amount) {
        super(source);
        this.orderId = orderId;
        this.amount = amount;
    }

    public String getOrderId() { return orderId; }
    public int getAmount() { return amount; }

    @Override
    public String toString() {
        return "OrderPlacedEvent{orderId='" + orderId + "', amount=" + amount + "}";
    }
}

class PaymentCompletedEvent extends Event {
    private final String paymentId;
    private final String method;

    public PaymentCompletedEvent(String source, String paymentId, String method) {
        super(source);
        this.paymentId = paymentId;
        this.method = method;
    }

    public String getPaymentId() { return paymentId; }
    public String getMethod() { return method; }

    @Override
    public String toString() {
        return "PaymentCompletedEvent{paymentId='" + paymentId + "', method='" + method + "'}";
    }
}

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// 2ï¸âƒ£ EventBus í•µì‹¬ í´ë˜ìŠ¤
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

class EventBus {

    // âœ… Static Nested Class: Subscription (êµ¬ë… ì •ë³´)
    private static class Subscription {
        final Object subscriber;
        final Method method;
        final Class<? extends Event> eventType;
        final int priority;

        Subscription(Object subscriber, Method method, Class<? extends Event> eventType, int priority) {
            this.subscriber = subscriber;
            this.method = method;
            this.eventType = eventType;
            this.priority = priority;
            method.setAccessible(true);
        }

        void invoke(Event event) {
            try {
                method.invoke(subscriber, event);
            } catch (Exception e) {
                System.err.println("âš ï¸ ì´ë²¤íŠ¸ ì²˜ë¦¬ ì˜¤ë¥˜: " + e.getMessage());
            }
        }
    }

    // ì´ë²¤íŠ¸ íƒ€ì…ë³„ êµ¬ë…ì ëª©ë¡
    private final Map<Class<? extends Event>, List<Subscription>> subscriptions = new ConcurrentHashMap<>();

    // ë¹„ë™ê¸° ì²˜ë¦¬ìš© ExecutorService
    private final ExecutorService executorService = Executors.newFixedThreadPool(4);

    // âœ… Member Inner Class: EventPublisher (ì´ë²¤íŠ¸ ë°œí–‰ì)
    public class EventPublisher {
        private final String publisherName;

        public EventPublisher(String publisherName) {
            this.publisherName = publisherName;
        }

        public void publish(Event event) {
            System.out.println("ğŸ“¤ [" + publisherName + "] ì´ë²¤íŠ¸ ë°œí–‰: " + event);

            List<Subscription> subs = subscriptions.get(event.getClass());
            if (subs == null || subs.isEmpty()) {
                System.out.println("   (êµ¬ë…ì ì—†ìŒ)");
                return;
            }

            // ìš°ì„ ìˆœìœ„ ì •ë ¬
            List<Subscription> sortedSubs = new ArrayList<>(subs);
            sortedSubs.sort((s1, s2) -> Integer.compare(s2.priority, s1.priority));

            // ë™ê¸° ì²˜ë¦¬
            for (Subscription sub : sortedSubs) {
                sub.invoke(event);
            }
        }

        public void publishAsync(Event event) {
            System.out.println("ğŸ“¤ [" + publisherName + "] ë¹„ë™ê¸° ì´ë²¤íŠ¸ ë°œí–‰: " + event);

            executorService.submit(() -> {
                try {
                    Thread.sleep(100);  // ë„¤íŠ¸ì›Œí¬ ì§€ì—° ì‹œë®¬ë ˆì´ì…˜
                    publish(event);
                } catch (InterruptedException e) {
                    Thread.currentThread().interrupt();
                }
            });
        }
    }

    // êµ¬ë…ì ë“±ë¡
    public void register(Object subscriber) {
        System.out.println("âœ… êµ¬ë…ì ë“±ë¡: " + subscriber.getClass().getSimpleName());

        for (Method method : subscriber.getClass().getDeclaredMethods()) {
            if (method.isAnnotationPresent(Subscribe.class)) {
                Class<?>[] paramTypes = method.getParameterTypes();

                if (paramTypes.length == 1 && Event.class.isAssignableFrom(paramTypes[0])) {
                    @SuppressWarnings("unchecked")
                    Class<? extends Event> eventType = (Class<? extends Event>) paramTypes[0];

                    Subscribe annotation = method.getAnnotation(Subscribe.class);
                    int priority = annotation.priority();

                    Subscription subscription = new Subscription(subscriber, method, eventType, priority);

                    subscriptions.computeIfAbsent(eventType, k -> new CopyOnWriteArrayList<>())
                               .add(subscription);

                    System.out.println("   - " + method.getName() + "() â†’ " + eventType.getSimpleName() + " (ìš°ì„ ìˆœìœ„: " + priority + ")");
                }
            }
        }
    }

    // Publisher ìƒì„±
    public EventPublisher createPublisher(String name) {
        return new EventPublisher(name);
    }

    // ì¢…ë£Œ
    public void shutdown() {
        executorService.shutdown();
    }
}

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// 3ï¸âƒ£ Subscribe Annotation
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

import java.lang.annotation.*;

@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
@interface Subscribe {
    int priority() default 0;  // ìš°ì„ ìˆœìœ„ (ë†’ì„ìˆ˜ë¡ ë¨¼ì € ì‹¤í–‰)
}

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// 4ï¸âƒ£ êµ¬ë…ì í´ë˜ìŠ¤ë“¤
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

class EmailService {

    @Subscribe(priority = 100)  // ë†’ì€ ìš°ì„ ìˆœìœ„
    public void onUserRegistered(UserRegisteredEvent event) {
        System.out.println("   ğŸ“§ [EmailService] í™˜ì˜ ì´ë©”ì¼ ë°œì†¡: " + event.getEmail());
    }

    @Subscribe
    public void onOrderPlaced(OrderPlacedEvent event) {
        System.out.println("   ğŸ“§ [EmailService] ì£¼ë¬¸ í™•ì¸ ì´ë©”ì¼ ë°œì†¡: " + event.getOrderId());
    }

    @Subscribe
    public void onPaymentCompleted(PaymentCompletedEvent event) {
        System.out.println("   ğŸ“§ [EmailService] ê²°ì œ ì™„ë£Œ ì´ë©”ì¼ ë°œì†¡: " + event.getPaymentId());
    }
}

class NotificationService {

    @Subscribe(priority = 50)
    public void onUserRegistered(UserRegisteredEvent event) {
        System.out.println("   ğŸ”” [NotificationService] í‘¸ì‹œ ì•Œë¦¼: " + event.getUsername() + "ë‹˜ ê°€ì… ì™„ë£Œ");
    }

    @Subscribe
    public void onPaymentCompleted(PaymentCompletedEvent event) {
        System.out.println("   ğŸ”” [NotificationService] ê²°ì œ ì™„ë£Œ ì•Œë¦¼");
    }
}

class AnalyticsService {

    @Subscribe(priority = 10)  // ë‚®ì€ ìš°ì„ ìˆœìœ„ (ë§ˆì§€ë§‰ì— ì‹¤í–‰)
    public void onUserRegistered(UserRegisteredEvent event) {
        System.out.println("   ğŸ“Š [AnalyticsService] ê°€ì… í†µê³„ ì—…ë°ì´íŠ¸");
    }

    @Subscribe
    public void onOrderPlaced(OrderPlacedEvent event) {
        System.out.println("   ğŸ“Š [AnalyticsService] ì£¼ë¬¸ í†µê³„ ì—…ë°ì´íŠ¸: " + event.getAmount() + "ì›");
    }

    @Subscribe
    public void onPaymentCompleted(PaymentCompletedEvent event) {
        System.out.println("   ğŸ“Š [AnalyticsService] ë§¤ì¶œ í†µê³„ ì—…ë°ì´íŠ¸");
    }
}

class InventoryService {

    @Subscribe(priority = 90)  // ë†’ì€ ìš°ì„ ìˆœìœ„ (ì¬ê³ ëŠ” ë¹¨ë¦¬ ì°¨ê°)
    public void onOrderPlaced(OrderPlacedEvent event) {
        System.out.println("   ğŸ“¦ [InventoryService] ì¬ê³  ì°¨ê°: ì£¼ë¬¸ " + event.getOrderId());
    }
}

// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// 5ï¸âƒ£ ì‹¤í–‰ ë° í…ŒìŠ¤íŠ¸
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

public class EventBusSystem {
    public static void main(String[] args) throws InterruptedException {
        System.out.println("=== Event Bus System - ì‹¤ì „ í”„ë¡œì íŠ¸ ===\n");

        EventBus eventBus = new EventBus();

        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
        // êµ¬ë…ì ë“±ë¡
        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

        System.out.println("=".repeat(60));
        System.out.println("1ï¸âƒ£ êµ¬ë…ì ë“±ë¡");
        System.out.println("=".repeat(60) + "\n");

        EmailService emailService = new EmailService();
        NotificationService notificationService = new NotificationService();
        AnalyticsService analyticsService = new AnalyticsService();
        InventoryService inventoryService = new InventoryService();

        eventBus.register(emailService);
        eventBus.register(notificationService);
        eventBus.register(analyticsService);
        eventBus.register(inventoryService);

        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
        // Publisher ìƒì„±
        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

        EventBus.EventPublisher userPublisher = eventBus.createPublisher("UserService");
        EventBus.EventPublisher orderPublisher = eventBus.createPublisher("OrderService");
        EventBus.EventPublisher paymentPublisher = eventBus.createPublisher("PaymentService");

        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
        // Scenario 1: ì‚¬ìš©ì ê°€ì…
        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

        System.out.println("\n" + "=".repeat(60));
        System.out.println("2ï¸âƒ£ Scenario 1: ì‚¬ìš©ì ê°€ì… (ìš°ì„ ìˆœìœ„ í™•ì¸)");
        System.out.println("=".repeat(60) + "\n");

        UserRegisteredEvent userEvent = new UserRegisteredEvent(
            "UserService",
            "ê¹€ì² ìˆ˜",
            "chulsoo@example.com"
        );
        userPublisher.publish(userEvent);

        System.out.println("\nğŸ’¡ ìš°ì„ ìˆœìœ„ ìˆœì„œ:");
        System.out.println("   1. EmailService (100) - ê°€ì¥ ë¨¼ì €");
        System.out.println("   2. NotificationService (50)");
        System.out.println("   3. AnalyticsService (10) - ê°€ì¥ ë‚˜ì¤‘");

        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
        // Scenario 2: ì£¼ë¬¸ ìƒì„±
        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

        System.out.println("\n" + "=".repeat(60));
        System.out.println("3ï¸âƒ£ Scenario 2: ì£¼ë¬¸ ìƒì„±");
        System.out.println("=".repeat(60) + "\n");

        OrderPlacedEvent orderEvent = new OrderPlacedEvent(
            "OrderService",
            "ORDER-001",
            150000
        );
        orderPublisher.publish(orderEvent);

        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
        // Scenario 3: ê²°ì œ ì™„ë£Œ
        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

        System.out.println("\n" + "=".repeat(60));
        System.out.println("4ï¸âƒ£ Scenario 3: ê²°ì œ ì™„ë£Œ");
        System.out.println("=".repeat(60) + "\n");

        PaymentCompletedEvent paymentEvent = new PaymentCompletedEvent(
            "PaymentService",
            "PAY-001",
            "ì¹´ì¹´ì˜¤í˜ì´"
        );
        paymentPublisher.publish(paymentEvent);

        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
        // Scenario 4: ë¹„ë™ê¸° ì´ë²¤íŠ¸
        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

        System.out.println("\n" + "=".repeat(60));
        System.out.println("5ï¸âƒ£ Scenario 4: ë¹„ë™ê¸° ì´ë²¤íŠ¸ ë°œí–‰");
        System.out.println("=".repeat(60) + "\n");

        System.out.println("ë¹„ë™ê¸° ì´ë²¤íŠ¸ ë°œí–‰ ì‹œì‘...");
        orderPublisher.publishAsync(new OrderPlacedEvent("OrderService", "ORDER-002", 200000));
        System.out.println("ë©”ì¸ ìŠ¤ë ˆë“œëŠ” ê³„ì† ì‹¤í–‰ë©ë‹ˆë‹¤...\n");

        Thread.sleep(500);  // ë¹„ë™ê¸° ì²˜ë¦¬ ì™„ë£Œ ëŒ€ê¸°

        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
        // í”„ë¡œì íŠ¸ ìš”ì•½
        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

        System.out.println("\n" + "=".repeat(60));
        System.out.println("=".repeat(60));
        System.out.println("\nğŸ¯ Event Bus System í•µì‹¬ ê¸°ëŠ¥:");

        System.out.println("\n1ï¸âƒ£ ë‚´ë¶€ í´ë˜ìŠ¤ í™œìš©:");
        System.out.println("   - Static Nested Class (Subscription): êµ¬ë… ì •ë³´ ìº¡ìŠí™”");
        System.out.println("   - Member Inner Class (EventPublisher): EventBus ë©¤ë²„ ì ‘ê·¼");

        System.out.println("\n2ï¸âƒ£ ëŠìŠ¨í•œ ê²°í•© (Loose Coupling):");
        System.out.println("   - PublisherëŠ” Subscriberë¥¼ ì§ì ‘ ì•Œ í•„ìš” ì—†ìŒ");
        System.out.println("   - ìƒˆë¡œìš´ Subscriber ì¶”ê°€ ì‹œ ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”");

        System.out.println("\n3ï¸âƒ£ ìš°ì„ ìˆœìœ„ ì²˜ë¦¬:");
        System.out.println("   - @Subscribe(priority = N)ë¡œ ì‹¤í–‰ ìˆœì„œ ì œì–´");
        System.out.println("   - ì¤‘ìš”í•œ ì‘ì—… ë¨¼ì € ì²˜ë¦¬ (ì¬ê³  ì°¨ê°, ì´ë©”ì¼ ë°œì†¡ ë“±)");

        System.out.println("\n4ï¸âƒ£ ë¹„ë™ê¸° ì²˜ë¦¬:");
        System.out.println("   - publishAsync()ë¡œ ë¹„ë™ê¸° ì´ë²¤íŠ¸ ë°œí–‰");
        System.out.println("   - ë©”ì¸ ìŠ¤ë ˆë“œ ë¸”ë¡œí‚¹ ë°©ì§€");

        System.out.println("\n5ï¸âƒ£ íƒ€ì… ì•ˆì „ì„±:");
        System.out.println("   - Genericê³¼ Reflectionìœ¼ë¡œ íƒ€ì… ì•ˆì „ ë³´ì¥");
        System.out.println("   - ì˜ëª»ëœ ì´ë²¤íŠ¸ íƒ€ì… ì»´íŒŒì¼ ì—ëŸ¬");

        System.out.println("\n" + "=".repeat(60));
        System.out.println("\nğŸŒŸ ì‹¤ë¬´ í™œìš©:");
        System.out.println("  - Guava EventBus");
        System.out.println("  - Spring ApplicationEventPublisher");
        System.out.println("  - Android EventBus (greenrobot)");
        System.out.println("  - RxJava Subject/Observable");

        eventBus.shutdown();
    }
}
```

**ì‹¤í–‰ ê²°ê³¼:**
```
=== Event Bus System - ì‹¤ì „ í”„ë¡œì íŠ¸ ===

============================================================
1ï¸âƒ£ êµ¬ë…ì ë“±ë¡
============================================================

âœ… êµ¬ë…ì ë“±ë¡: EmailService
   - onUserRegistered() â†’ UserRegisteredEvent (ìš°ì„ ìˆœìœ„: 100)
   - onOrderPlaced() â†’ OrderPlacedEvent (ìš°ì„ ìˆœìœ„: 0)
   - onPaymentCompleted() â†’ PaymentCompletedEvent (ìš°ì„ ìˆœìœ„: 0)
âœ… êµ¬ë…ì ë“±ë¡: NotificationService
   - onUserRegistered() â†’ UserRegisteredEvent (ìš°ì„ ìˆœìœ„: 50)
   - onPaymentCompleted() â†’ PaymentCompletedEvent (ìš°ì„ ìˆœìœ„: 0)
âœ… êµ¬ë…ì ë“±ë¡: AnalyticsService
   - onUserRegistered() â†’ UserRegisteredEvent (ìš°ì„ ìˆœìœ„: 10)
   - onOrderPlaced() â†’ OrderPlacedEvent (ìš°ì„ ìˆœìœ„: 0)
   - onPaymentCompleted() â†’ PaymentCompletedEvent (ìš°ì„ ìˆœìœ„: 0)
âœ… êµ¬ë…ì ë“±ë¡: InventoryService
   - onOrderPlaced() â†’ OrderPlacedEvent (ìš°ì„ ìˆœìœ„: 90)

============================================================
2ï¸âƒ£ Scenario 1: ì‚¬ìš©ì ê°€ì… (ìš°ì„ ìˆœìœ„ í™•ì¸)
============================================================

ğŸ“¤ [UserService] ì´ë²¤íŠ¸ ë°œí–‰: UserRegisteredEvent{username='ê¹€ì² ìˆ˜', email='chulsoo@example.com'}
   ğŸ“§ [EmailService] í™˜ì˜ ì´ë©”ì¼ ë°œì†¡: chulsoo@example.com
   ğŸ”” [NotificationService] í‘¸ì‹œ ì•Œë¦¼: ê¹€ì² ìˆ˜ë‹˜ ê°€ì… ì™„ë£Œ
   ğŸ“Š [AnalyticsService] ê°€ì… í†µê³„ ì—…ë°ì´íŠ¸

ğŸ’¡ ìš°ì„ ìˆœìœ„ ìˆœì„œ:
   1. EmailService (100) - ê°€ì¥ ë¨¼ì €
   2. NotificationService (50)
   3. AnalyticsService (10) - ê°€ì¥ ë‚˜ì¤‘

============================================================
3ï¸âƒ£ Scenario 2: ì£¼ë¬¸ ìƒì„±
============================================================

ğŸ“¤ [OrderService] ì´ë²¤íŠ¸ ë°œí–‰: OrderPlacedEvent{orderId='ORDER-001', amount=150000}
   ğŸ“¦ [InventoryService] ì¬ê³  ì°¨ê°: ì£¼ë¬¸ ORDER-001
   ğŸ“§ [EmailService] ì£¼ë¬¸ í™•ì¸ ì´ë©”ì¼ ë°œì†¡: ORDER-001
   ğŸ“Š [AnalyticsService] ì£¼ë¬¸ í†µê³„ ì—…ë°ì´íŠ¸: 150000ì›

============================================================
4ï¸âƒ£ Scenario 3: ê²°ì œ ì™„ë£Œ
============================================================

ğŸ“¤ [PaymentService] ì´ë²¤íŠ¸ ë°œí–‰: PaymentCompletedEvent{paymentId='PAY-001', method='ì¹´ì¹´ì˜¤í˜ì´'}
   ğŸ“§ [EmailService] ê²°ì œ ì™„ë£Œ ì´ë©”ì¼ ë°œì†¡: PAY-001
   ğŸ”” [NotificationService] ê²°ì œ ì™„ë£Œ ì•Œë¦¼
   ğŸ“Š [AnalyticsService] ë§¤ì¶œ í†µê³„ ì—…ë°ì´íŠ¸

============================================================
5ï¸âƒ£ Scenario 4: ë¹„ë™ê¸° ì´ë²¤íŠ¸ ë°œí–‰
============================================================

ë¹„ë™ê¸° ì´ë²¤íŠ¸ ë°œí–‰ ì‹œì‘...
ğŸ“¤ [OrderService] ë¹„ë™ê¸° ì´ë²¤íŠ¸ ë°œí–‰: OrderPlacedEvent{orderId='ORDER-002', amount=200000}
ë©”ì¸ ìŠ¤ë ˆë“œëŠ” ê³„ì† ì‹¤í–‰ë©ë‹ˆë‹¤...

ğŸ“¤ [OrderService] ì´ë²¤íŠ¸ ë°œí–‰: OrderPlacedEvent{orderId='ORDER-002', amount=200000}
   ğŸ“¦ [InventoryService] ì¬ê³  ì°¨ê°: ì£¼ë¬¸ ORDER-002
   ğŸ“§ [EmailService] ì£¼ë¬¸ í™•ì¸ ì´ë©”ì¼ ë°œì†¡: ORDER-002
   ğŸ“Š [AnalyticsService] ì£¼ë¬¸ í†µê³„ ì—…ë°ì´íŠ¸: 200000ì›

============================================================
============================================================

ğŸ¯ Event Bus System í•µì‹¬ ê¸°ëŠ¥:

1ï¸âƒ£ ë‚´ë¶€ í´ë˜ìŠ¤ í™œìš©:
   - Static Nested Class (Subscription): êµ¬ë… ì •ë³´ ìº¡ìŠí™”
   - Member Inner Class (EventPublisher): EventBus ë©¤ë²„ ì ‘ê·¼

2ï¸âƒ£ ëŠìŠ¨í•œ ê²°í•© (Loose Coupling):
   - PublisherëŠ” Subscriberë¥¼ ì§ì ‘ ì•Œ í•„ìš” ì—†ìŒ
   - ìƒˆë¡œìš´ Subscriber ì¶”ê°€ ì‹œ ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”

3ï¸âƒ£ ìš°ì„ ìˆœìœ„ ì²˜ë¦¬:
   - @Subscribe(priority = N)ë¡œ ì‹¤í–‰ ìˆœì„œ ì œì–´
   - ì¤‘ìš”í•œ ì‘ì—… ë¨¼ì € ì²˜ë¦¬ (ì¬ê³  ì°¨ê°, ì´ë©”ì¼ ë°œì†¡ ë“±)

4ï¸âƒ£ ë¹„ë™ê¸° ì²˜ë¦¬:
   - publishAsync()ë¡œ ë¹„ë™ê¸° ì´ë²¤íŠ¸ ë°œí–‰
   - ë©”ì¸ ìŠ¤ë ˆë“œ ë¸”ë¡œí‚¹ ë°©ì§€

5ï¸âƒ£ íƒ€ì… ì•ˆì „ì„±:
   - Genericê³¼ Reflectionìœ¼ë¡œ íƒ€ì… ì•ˆì „ ë³´ì¥
   - ì˜ëª»ëœ ì´ë²¤íŠ¸ íƒ€ì… ì»´íŒŒì¼ ì—ëŸ¬

============================================================

ğŸŒŸ ì‹¤ë¬´ í™œìš©:
  - Guava EventBus
  - Spring ApplicationEventPublisher
  - Android EventBus (greenrobot)
  - RxJava Subject/Observable
```

---

## â“ FAQ - ìì£¼ ë¬»ëŠ” ì§ˆë¬¸

### Q1. ë‚´ë¶€ í´ë˜ìŠ¤ëŠ” ì–¸ì œ ì‚¬ìš©í•´ì•¼ í•˜ë‚˜ìš”?

**A:** ë‹¤ìŒ ê²½ìš°ì— ë‚´ë¶€ í´ë˜ìŠ¤ë¥¼ ê³ ë ¤í•˜ì„¸ìš”.

âœ… **ì‚¬ìš©í•´ì•¼ í•  ë•Œ:**
1. **ê°•í•œ ì‘ì§‘ë„**: ë‚´ë¶€ í´ë˜ìŠ¤ê°€ ì™¸ë¶€ í´ë˜ìŠ¤ì™€ ë°€ì ‘í•˜ê²Œ ê´€ë ¨
   ```java
   class ArrayList {
       private class Itr implements Iterator {}  // ArrayListì™€ ë°€ì ‘
   }
   ```

2. **ìº¡ìŠí™”**: ì™¸ë¶€ì— ë…¸ì¶œí•  í•„ìš” ì—†ëŠ” í—¬í¼ í´ë˜ìŠ¤
   ```java
   class LinkedList {
       private class Node {}  // ì™¸ë¶€ì—ì„œ ì‚¬ìš© ë¶ˆí•„ìš”
   }
   ```

3. **ì™¸ë¶€ ë©¤ë²„ ì ‘ê·¼**: ì™¸ë¶€ í´ë˜ìŠ¤ì˜ private ë©¤ë²„ ì ‘ê·¼ í•„ìš”
   ```java
   class Outer {
       private int value;
       class Inner {
           void access() { System.out.println(value); }  // ì ‘ê·¼ ê°€ëŠ¥
       }
   }
   ```

âŒ **ì‚¬ìš©í•˜ì§€ ë§ì•„ì•¼ í•  ë•Œ:**
- ë‚´ë¶€ í´ë˜ìŠ¤ê°€ ì™¸ë¶€ í´ë˜ìŠ¤ì™€ ë…ë¦½ì 
- ë‹¤ë¥¸ ê³³ì—ì„œë„ ì¬ì‚¬ìš© ê°€ëŠ¥
- ë…¼ë¦¬ì  ì—°ê´€ì„±ì´ ì•½í•¨

---

### Q2. Member Inner Classì™€ Static Nested Classì˜ ì°¨ì´ì ì€?

**A:**

| êµ¬ë¶„ | Member Inner Class | Static Nested Class |
|-----|-------------------|---------------------|
| ì™¸ë¶€ ì¸ìŠ¤í„´ìŠ¤ | í•„ìš” O | í•„ìš” X |
| ì™¸ë¶€ ë©¤ë²„ ì ‘ê·¼ | ëª¨ë“  ë©¤ë²„ | staticë§Œ |
| ìƒì„± ë°©ë²• | `outer.new Inner()` | `new Outer.Inner()` |
| ë©”ëª¨ë¦¬ | ì™¸ë¶€ ì°¸ì¡° ìœ ì§€ | ì™¸ë¶€ ì°¸ì¡° ì—†ìŒ |
| ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤ | Iterator, Entry | Builder, Utility |

**ì˜ˆì‹œ:**
```java
class Outer {
    private int instanceVar = 10;
    private static int staticVar = 20;

    // Member Inner Class
    class MemberInner {
        void access() {
            System.out.println(instanceVar);  // OK
            System.out.println(staticVar);    // OK
        }
    }

    // Static Nested Class
    static class StaticNested {
        void access() {
            // System.out.println(instanceVar);  // ì»´íŒŒì¼ ì—ëŸ¬!
            System.out.println(staticVar);    // OK
        }
    }
}

// ì‚¬ìš©
Outer outer = new Outer();
Outer.MemberInner inner1 = outer.new MemberInner();  // ì™¸ë¶€ ì¸ìŠ¤í„´ìŠ¤ í•„ìš”
Outer.StaticNested inner2 = new Outer.StaticNested();  // ì™¸ë¶€ ì¸ìŠ¤í„´ìŠ¤ ë¶ˆí•„ìš”
```

---

### Q3. ì™œ ìµëª… í´ë˜ìŠ¤ì—ì„œ ì§€ì—­ ë³€ìˆ˜ëŠ” finalì´ì–´ì•¼ í•˜ë‚˜ìš”?

**A:** ë©”ëª¨ë¦¬ êµ¬ì¡°ì™€ ìƒëª…ì£¼ê¸° ì°¨ì´ ë•Œë¬¸ì…ë‹ˆë‹¤.

**ë©”ëª¨ë¦¬ êµ¬ì¡°:**
- ì§€ì—­ ë³€ìˆ˜: ìŠ¤íƒ(Stack)ì— ì €ì¥
- ìµëª… í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤: í™(Heap)ì— ì €ì¥

**ë¬¸ì œ ìƒí™©:**
```java
void method() {
    int count = 0;  // ìŠ¤íƒì— ì €ì¥

    Runnable r = new Runnable() {
        public void run() {
            System.out.println(count);  // countë¥¼ ì‚¬ìš©
        }
    };

    // method()ê°€ ì¢…ë£Œë˜ë©´ countëŠ” ìŠ¤íƒì—ì„œ ì‚¬ë¼ì§
    // í•˜ì§€ë§Œ Runnable ì¸ìŠ¤í„´ìŠ¤ëŠ” í™ì— ë‚¨ì•„ìˆìŒ!
}
```

**Javaì˜ í•´ê²°ì±…:**
1. ì§€ì—­ ë³€ìˆ˜ë¥¼ `final`ë¡œ ì œí•œ
2. ì»´íŒŒì¼ëŸ¬ê°€ ë³€ìˆ˜ ê°’ì„ **ë³µì‚¬**í•˜ì—¬ ìµëª… í´ë˜ìŠ¤ì— ì „ë‹¬
3. ê°’ì´ ë³€ê²½ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì›ë³¸ê³¼ ë³µì‚¬ë³¸ì´ í•­ìƒ ì¼ì¹˜

**ìš°íšŒ ë°©ë²•:**
```java
// ë°©ë²• 1: ë°°ì—´ ì‚¬ìš©
final int[] count = {0};
count[0]++;  // ë°°ì—´ ìš”ì†ŒëŠ” ë³€ê²½ ê°€ëŠ¥

// ë°©ë²• 2: Wrapper í´ë˜ìŠ¤
class IntWrapper { int value; }
final IntWrapper wrapper = new IntWrapper();
wrapper.value++;  // ê°ì²´ í•„ë“œëŠ” ë³€ê²½ ê°€ëŠ¥
```

---

### Q4. ë‚´ë¶€ í´ë˜ìŠ¤ëŠ” ì™¸ë¶€ í´ë˜ìŠ¤ì˜ ì–´ë–¤ ë©¤ë²„ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‚˜ìš”?

**A:**

| ë‚´ë¶€ í´ë˜ìŠ¤ ì¢…ë¥˜ | ì ‘ê·¼ ê°€ëŠ¥ ë©¤ë²„ |
|--------------|-------------|
| Member Inner Class | ëª¨ë“  ë©¤ë²„ (private í¬í•¨) |
| Static Nested Class | static ë©¤ë²„ë§Œ |
| Local Inner Class | ì™¸ë¶€ í´ë˜ìŠ¤ ëª¨ë“  ë©¤ë²„ + final/effectively final ì§€ì—­ ë³€ìˆ˜ |
| Anonymous Inner Class | ìƒí™©ì— ë”°ë¼ ë‹¤ë¦„ |

**ì˜ˆì‹œ:**
```java
class Outer {
    private int instanceField = 1;
    private static int staticField = 2;

    void method() {
        final int localVar = 3;

        // Local Inner Class
        class Local {
            void access() {
                System.out.println(instanceField);  // OK
                System.out.println(staticField);    // OK
                System.out.println(localVar);       // OK (final)
            }
        }
    }
}
```

---

### Q5. ë‚´ë¶€ í´ë˜ìŠ¤ì˜ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ìœ„í—˜ì€?

**A:** Member Inner ClassëŠ” **ì™¸ë¶€ í´ë˜ìŠ¤ ì°¸ì¡°ë¥¼ ì•”ë¬µì ìœ¼ë¡œ ìœ ì§€**í•˜ë¯€ë¡œ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ìœ„í—˜ì´ ìˆìŠµë‹ˆë‹¤.

**ë¬¸ì œ ìƒí™©:**
```java
class Activity {  // Android Activity (í° ê°ì²´)
    // âŒ ì˜ëª»ëœ ì½”ë“œ
    class AsyncTask {  // Member Inner Class
        void doInBackground() {
            // ì™¸ë¶€ Activity ì°¸ì¡°ë¥¼ ì•”ë¬µì ìœ¼ë¡œ ìœ ì§€
            // Activityê°€ ì¢…ë£Œë˜ì–´ë„ AsyncTaskê°€ ì‹¤í–‰ ì¤‘ì´ë©´
            // Activityê°€ GCë˜ì§€ ì•ŠìŒ â†’ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜!
        }
    }
}
```

**í•´ê²° ë°©ë²•:**
```java
class Activity {
    // âœ… Static Nested Class ì‚¬ìš©
    static class AsyncTask {  // ì™¸ë¶€ ì°¸ì¡° ì—†ìŒ
        private WeakReference<Activity> activityRef;

        AsyncTask(Activity activity) {
            this.activityRef = new WeakReference<>(activity);
        }

        void doInBackground() {
            Activity activity = activityRef.get();
            if (activity != null) {
                // ì•ˆì „í•˜ê²Œ ì‚¬ìš©
            }
        }
    }
}
```

**ì›ì¹™:**
- ì™¸ë¶€ ì¸ìŠ¤í„´ìŠ¤ê°€ í•„ìš” ì—†ìœ¼ë©´ **í•­ìƒ staticìœ¼ë¡œ ì„ ì–¸**
- ì¥ê¸° ì‹¤í–‰ ì‘ì—…ì—ëŠ” Member Inner Class ì‚¬ìš© ê¸ˆì§€

---

### Q6. ë‚´ë¶€ í´ë˜ìŠ¤ì—ì„œ this í‚¤ì›Œë“œëŠ” ì–´ë–»ê²Œ ì‚¬ìš©í•˜ë‚˜ìš”?

**A:**

```java
class Outer {
    private String name = "Outer";

    class Inner {
        private String name = "Inner";

        void printNames() {
            System.out.println(this.name);         // "Inner" (ë‚´ë¶€ í´ë˜ìŠ¤)
            System.out.println(Inner.this.name);   // "Inner" (ë‚´ë¶€ í´ë˜ìŠ¤)
            System.out.println(Outer.this.name);   // "Outer" (ì™¸ë¶€ í´ë˜ìŠ¤)
        }
    }
}
```

**ê·œì¹™:**
- `this`: ë‚´ë¶€ í´ë˜ìŠ¤ ìì‹ 
- `OuterClass.this`: ì™¸ë¶€ í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤
- Static Nested Classì—ì„œëŠ” `OuterClass.this` ì‚¬ìš© ë¶ˆê°€

---

### Q7. ë‚´ë¶€ í´ë˜ìŠ¤ë¥¼ ìƒì†í•  ìˆ˜ ìˆë‚˜ìš”?

**A:** ê°€ëŠ¥í•˜ì§€ë§Œ, **ì™¸ë¶€ í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì „ë‹¬**í•´ì•¼ í•©ë‹ˆë‹¤.

```java
class Outer {
    class Inner {
        void display() {
            System.out.println("Inner");
        }
    }
}

// Member Inner Class ìƒì†
class MyInner extends Outer.Inner {
    // âœ… ì™¸ë¶€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°›ëŠ” ìƒì„±ì í•„ìš”
    MyInner(Outer outer) {
        outer.super();  // ì™¸ë¶€ ì¸ìŠ¤í„´ìŠ¤ë¡œ super() í˜¸ì¶œ
    }

    @Override
    void display() {
        System.out.println("MyInner");
    }
}

// ì‚¬ìš©
Outer outer = new Outer();
MyInner myInner = new MyInner(outer);
```

**Static Nested ClassëŠ” ì¼ë°˜ í´ë˜ìŠ¤ì²˜ëŸ¼ ìƒì† ê°€ëŠ¥:**
```java
static class StaticNested {}

class MyStatic extends Outer.StaticNested {}  // OK
```

---

## ğŸ¤ ë©´ì ‘ ì§ˆë¬¸

### ì£¼ë‹ˆì–´ ë ˆë²¨ (Junior Level)

#### Q1. ë‚´ë¶€ í´ë˜ìŠ¤ë€ ë¬´ì—‡ì´ë©°, ì™œ ì‚¬ìš©í•˜ë‚˜ìš”?

**A:** ë‚´ë¶€ í´ë˜ìŠ¤(Inner Class)ëŠ” **ë‹¤ë¥¸ í´ë˜ìŠ¤ ì•ˆì— ì •ì˜ëœ í´ë˜ìŠ¤**ì…ë‹ˆë‹¤.

**ì‚¬ìš© ì´ìœ :**
1. **ë…¼ë¦¬ì  ê·¸ë£¹í™”**: ê´€ë ¨ëœ í´ë˜ìŠ¤ë¥¼ í•œ ê³³ì— ëª¨ìŒ
2. **ìº¡ìŠí™”**: ì™¸ë¶€ì— ë¶ˆí•„ìš”í•œ í´ë˜ìŠ¤ ë…¸ì¶œ ë°©ì§€
3. **ì™¸ë¶€ ë©¤ë²„ ì ‘ê·¼**: ì™¸ë¶€ í´ë˜ìŠ¤ì˜ private ë©¤ë²„ ì ‘ê·¼ ê°€ëŠ¥

**ì˜ˆì‹œ:**
```java
class ArrayList {
    private Object[] elements;

    // IteratorëŠ” ArrayList ë‚´ë¶€ì—ì„œë§Œ ì˜ë¯¸ ìˆìŒ
    private class Itr implements Iterator {
        public Object next() {
            return elements[...];  // ì™¸ë¶€ private ë©¤ë²„ ì ‘ê·¼
        }
    }
}
```

---

#### Q2. ë‚´ë¶€ í´ë˜ìŠ¤ì˜ ì¢…ë¥˜ë¥¼ ì„¤ëª…í•˜ì„¸ìš”.

**A:**

1. **Member Inner Class** (ë©¤ë²„ ë‚´ë¶€ í´ë˜ìŠ¤)
   - ì™¸ë¶€ í´ë˜ìŠ¤ì˜ ë©¤ë²„ë¡œ ì •ì˜
   - ì™¸ë¶€ ì¸ìŠ¤í„´ìŠ¤ í•„ìš”
   - ëª¨ë“  ë©¤ë²„ ì ‘ê·¼ ê°€ëŠ¥

2. **Static Nested Class** (ì •ì  ì¤‘ì²© í´ë˜ìŠ¤)
   - static í‚¤ì›Œë“œ ì‚¬ìš©
   - ì™¸ë¶€ ì¸ìŠ¤í„´ìŠ¤ ë¶ˆí•„ìš”
   - static ë©¤ë²„ë§Œ ì ‘ê·¼

3. **Local Inner Class** (ì§€ì—­ ë‚´ë¶€ í´ë˜ìŠ¤)
   - ë©”ì„œë“œ ì•ˆì— ì •ì˜
   - ë©”ì„œë“œ ë‚´ì—ì„œë§Œ ì‚¬ìš©
   - final ì§€ì—­ ë³€ìˆ˜ ì ‘ê·¼ ê°€ëŠ¥

4. **Anonymous Inner Class** (ìµëª… ë‚´ë¶€ í´ë˜ìŠ¤)
   - ì´ë¦„ ì—†ìŒ
   - ì„ ì–¸ê³¼ ë™ì‹œì— ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
   - ì¼íšŒì„± ì‚¬ìš©

---

#### Q3. Member Inner Classì™€ Static Nested Classì˜ ì°¨ì´ëŠ”?

**A:**

**Member Inner Class:**
- ì™¸ë¶€ ì¸ìŠ¤í„´ìŠ¤ í•„ìš”: `outer.new Inner()`
- ì™¸ë¶€ ëª¨ë“  ë©¤ë²„ ì ‘ê·¼ ê°€ëŠ¥
- ì™¸ë¶€ ì°¸ì¡° ìœ ì§€ â†’ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¦ê°€

**Static Nested Class:**
- ì™¸ë¶€ ì¸ìŠ¤í„´ìŠ¤ ë¶ˆí•„ìš”: `new Outer.Inner()`
- ì™¸ë¶€ static ë©¤ë²„ë§Œ ì ‘ê·¼
- ì™¸ë¶€ ì°¸ì¡° ì—†ìŒ â†’ ë©”ëª¨ë¦¬ íš¨ìœ¨ì 

**ì„ íƒ ê¸°ì¤€:**
- ì™¸ë¶€ ì¸ìŠ¤í„´ìŠ¤ ë©¤ë²„ ì ‘ê·¼ í•„ìš” â†’ Member Inner Class
- ë…¼ë¦¬ì  ê·¸ë£¹í™”ë§Œ í•„ìš” â†’ Static Nested Class

---

#### Q4. ìµëª… í´ë˜ìŠ¤ëŠ” ì–¸ì œ ì‚¬ìš©í•˜ë‚˜ìš”?

**A:** **ì¼íšŒì„± êµ¬í˜„ì´ í•„ìš”í•  ë•Œ** ì‚¬ìš©í•©ë‹ˆë‹¤.

**ì‚¬ìš© ì‚¬ë¡€:**
```java
// 1. ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
button.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick() {
        System.out.println("í´ë¦­!");
    }
});

// 2. Comparator
Collections.sort(list, new Comparator<String>() {
    @Override
    public int compare(String s1, String s2) {
        return s1.length() - s2.length();
    }
});

// 3. Runnable
new Thread(new Runnable() {
    @Override
    public void run() {
        System.out.println("ì‹¤í–‰!");
    }
}).start();
```

**Java 8 ì´í›„ì—ëŠ” Lambdaë¡œ ëŒ€ì²´ ê°€ëŠ¥:**
```java
button.setOnClickListener(() -> System.out.println("í´ë¦­!"));
```

---

#### Q5. Local Inner Classì˜ íŠ¹ì§•ì€?

**A:**

**íŠ¹ì§•:**
- ë©”ì„œë“œ ì•ˆì— ì •ì˜
- ë©”ì„œë“œ ë‚´ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥
- ì™¸ë¶€ í´ë˜ìŠ¤ ë©¤ë²„ + final ì§€ì—­ ë³€ìˆ˜ ì ‘ê·¼

**ì˜ˆì‹œ:**
```java
void method() {
    final int count = 10;

    class LocalInner {
        void print() {
            System.out.println(count);  // final ë³€ìˆ˜ ì ‘ê·¼ ê°€ëŠ¥
        }
    }

    LocalInner local = new LocalInner();
    local.print();
}
```

**ì£¼ì˜:**
- ì§€ì—­ ë³€ìˆ˜ëŠ” final ë˜ëŠ” effectively finalì´ì–´ì•¼ í•¨
- ë©”ì„œë“œ ë°–ì—ì„œëŠ” ì‚¬ìš© ë¶ˆê°€

---

#### Q6. ì™¸ë¶€ í´ë˜ìŠ¤ ì°¸ì¡°ëŠ” ì–´ë–»ê²Œ í•˜ë‚˜ìš”?

**A:** `OuterClass.this`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

```java
class Outer {
    private String name = "Outer";

    class Inner {
        private String name = "Inner";

        void printNames() {
            System.out.println(this.name);         // "Inner"
            System.out.println(Outer.this.name);   // "Outer"
        }
    }
}
```

---

#### Q7. ë‚´ë¶€ í´ë˜ìŠ¤ëŠ” ì–´ë–¤ ì ‘ê·¼ ì œì–´ìë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‚˜ìš”?

**A:**

**Member Inner Class:**
- public, protected, default, private ëª¨ë‘ ê°€ëŠ¥

**Static Nested Class:**
- public, protected, default, private ëª¨ë‘ ê°€ëŠ¥

**Local Inner Class:**
- ì ‘ê·¼ ì œì–´ì ì‚¬ìš© ë¶ˆê°€ (ë©”ì„œë“œ ë‚´ë¶€ì´ë¯€ë¡œ)

**Anonymous Inner Class:**
- ì ‘ê·¼ ì œì–´ì ì‚¬ìš© ë¶ˆê°€ (ì´ë¦„ì´ ì—†ìœ¼ë¯€ë¡œ)

```java
class Outer {
    private class PrivateInner {}      // OK
    public class PublicInner {}        // OK
    protected class ProtectedInner {}  // OK

    public static class PublicStatic {}  // OK
    private static class PrivateStatic {}  // OK

    void method() {
        // public class LocalInner {}  // ì»´íŒŒì¼ ì—ëŸ¬!
        class LocalInner {}  // OK
    }
}
```

---

### ì¤‘ê¸‰ ë ˆë²¨ (Intermediate Level)

#### Q8. ë‚´ë¶€ í´ë˜ìŠ¤ì˜ ë©”ëª¨ë¦¬ êµ¬ì¡°ë¥¼ ì„¤ëª…í•˜ì„¸ìš”.

**A:**

**Member Inner Class:**
```
Heap
â”œâ”€ Outer Instance
â”‚   â””â”€ instanceField
â””â”€ Inner Instance
    â”œâ”€ this$0 (ì™¸ë¶€ í´ë˜ìŠ¤ ì°¸ì¡°)  â† ì•”ë¬µì ìœ¼ë¡œ ìœ ì§€
    â””â”€ innerField
```

ì»´íŒŒì¼ëŸ¬ê°€ **ìë™ìœ¼ë¡œ ì™¸ë¶€ í´ë˜ìŠ¤ ì°¸ì¡°(`this$0`)ë¥¼ ì¶”ê°€**í•©ë‹ˆë‹¤.

**Static Nested Class:**
```
Heap
â”œâ”€ Outer Instance
â”‚   â””â”€ instanceField
â””â”€ Nested Instance
    â””â”€ nestedField (ì™¸ë¶€ ì°¸ì¡° ì—†ìŒ)
```

ì™¸ë¶€ í´ë˜ìŠ¤ ì°¸ì¡°ê°€ **ì—†ìœ¼ë¯€ë¡œ ë©”ëª¨ë¦¬ íš¨ìœ¨ì **ì…ë‹ˆë‹¤.

---

#### Q9. ë‚´ë¶€ í´ë˜ìŠ¤ë¡œ ì¸í•œ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¥¼ ë°©ì§€í•˜ëŠ” ë°©ë²•ì€?

**A:**

**ë¬¸ì œ:**
```java
class Activity {
    // âŒ Member Inner Class â†’ ì™¸ë¶€ ì°¸ì¡° ìœ ì§€
    class LongRunningTask extends AsyncTask {
        void doWork() {
            // Activity ì¢…ë£Œ í›„ì—ë„ Taskê°€ ì‹¤í–‰ ì¤‘ì´ë©´
            // Activityê°€ GCë˜ì§€ ì•ŠìŒ â†’ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜
        }
    }
}
```

**í•´ê²° ë°©ë²•:**

**1. Static Nested Class + WeakReference:**
```java
class Activity {
    static class LongRunningTask extends AsyncTask {
        private WeakReference<Activity> activityRef;

        LongRunningTask(Activity activity) {
            this.activityRef = new WeakReference<>(activity);
        }

        void doWork() {
            Activity activity = activityRef.get();
            if (activity != null && !activity.isFinishing()) {
                // ì•ˆì „í•˜ê²Œ ì‚¬ìš©
            }
        }
    }
}
```

**2. ì™¸ë¶€ í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬:**
```java
// ì™„ì „íˆ ë…ë¦½ì ì¸ í´ë˜ìŠ¤
class LongRunningTask extends AsyncTask {
    // ...
}
```

---

#### Q10. ë‚´ë¶€ í´ë˜ìŠ¤ì˜ Synthetic Methodë€?

**A:** ì»´íŒŒì¼ëŸ¬ê°€ **ìë™ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ë©”ì„œë“œ**ì…ë‹ˆë‹¤.

**ë°œìƒ ìƒí™©:**
```java
class Outer {
    private int value = 10;

    class Inner {
        void access() {
            System.out.println(value);  // private ë©¤ë²„ ì ‘ê·¼
        }
    }
}
```

**ì»´íŒŒì¼ëŸ¬ ìƒì„± ì½”ë“œ:**
```java
class Outer {
    private int value = 10;

    // ì»´íŒŒì¼ëŸ¬ê°€ ìë™ ìƒì„±í•˜ëŠ” Synthetic Method
    static int access$000(Outer outer) {
        return outer.value;
    }
}

class Outer$Inner {
    final Outer this$0;

    void access() {
        // private ë©¤ë²„ì— ì§ì ‘ ì ‘ê·¼ ë¶ˆê°€í•˜ë¯€ë¡œ synthetic method í˜¸ì¶œ
        System.out.println(Outer.access$000(this$0));
    }
}
```

**ë¬¸ì œì :**
- ë¦¬í”Œë ‰ì…˜ìœ¼ë¡œ í˜¸ì¶œ ì‹œ í˜¼ë€ ê°€ëŠ¥
- ì•½ê°„ì˜ ì„±ëŠ¥ ì˜¤ë²„í—¤ë“œ

---

#### Q11. ë‚´ë¶€ í´ë˜ìŠ¤ì™€ Lambdaì˜ ì°¨ì´ëŠ”?

**A:**

| êµ¬ë¶„ | Anonymous Inner Class | Lambda |
|-----|---------------------|--------|
| this | ìµëª… í´ë˜ìŠ¤ ìì‹  | ì™¸ë¶€ í´ë˜ìŠ¤ |
| ìƒíƒœ | í•„ë“œ ê°€ì§ˆ ìˆ˜ ìˆìŒ | ìƒíƒœ ì—†ìŒ |
| ë©”ì„œë“œ ìˆ˜ | ì—¬ëŸ¬ ê°œ êµ¬í˜„ ê°€ëŠ¥ | 1ê°œë§Œ (Functional Interface) |
| ì§ë ¬í™” | ê°€ëŠ¥ | ê¶Œì¥ ì•ˆ í•¨ |
| ë°”ì´íŠ¸ì½”ë“œ | ë³„ë„ .class íŒŒì¼ | invokedynamic |

**ì˜ˆì‹œ:**
```java
// Anonymous Inner Class
Runnable r1 = new Runnable() {
    @Override
    public void run() {
        System.out.println(this);  // Runnable$1@...
    }
};

// Lambda
Runnable r2 = () -> {
    System.out.println(this);  // ì™¸ë¶€ í´ë˜ìŠ¤ ì°¸ì¡°
};
```

---

#### Q12. Double Brace Initializationì˜ ë¬¸ì œì ì€?

**A:** **ìµëª… ë‚´ë¶€ í´ë˜ìŠ¤ + ì¸ìŠ¤í„´ìŠ¤ ì´ˆê¸°í™” ë¸”ë¡**ì„ ì‚¬ìš©í•œ íŠ¸ë¦­ì…ë‹ˆë‹¤.

**ì½”ë“œ:**
```java
// âŒ Double Brace Initialization
List<String> list = new ArrayList<String>() {{
    add("Item 1");
    add("Item 2");
    add("Item 3");
}};
```

**ë¬¸ì œì :**
1. **ìµëª… í´ë˜ìŠ¤ ìƒì„±**: ë¶ˆí•„ìš”í•œ í´ë˜ìŠ¤ íŒŒì¼ ìƒì„±
2. **ì™¸ë¶€ ì°¸ì¡° ìœ ì§€**: ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ìœ„í—˜
3. **ì§ë ¬í™” ë¶ˆê°€**: `Serializable` ë¬¸ì œ
4. **ê°€ë…ì„±**: ì¼ë°˜ ê°œë°œìì—ê²Œ ë‚¯ì„  ë¬¸ë²•

**ê¶Œì¥ ë°©ë²•:**
```java
// âœ… Java 9+ List.of()
List<String> list = List.of("Item 1", "Item 2", "Item 3");

// âœ… Arrays.asList()
List<String> list = new ArrayList<>(Arrays.asList("Item 1", "Item 2", "Item 3"));

// âœ… Stream
List<String> list = Stream.of("Item 1", "Item 2", "Item 3").collect(Collectors.toList());
```

---

## ğŸ“ ì „ì²´ ìš”ì•½

### 4ê°€ì§€ ë‚´ë¶€ í´ë˜ìŠ¤

| ì¢…ë¥˜ | ì™¸ë¶€ ì¸ìŠ¤í„´ìŠ¤ | ì™¸ë¶€ ë©¤ë²„ ì ‘ê·¼ | ì‚¬ìš© ì‚¬ë¡€ |
|-----|------------|-------------|---------|
| Member Inner | í•„ìš” | ëª¨ë“  ë©¤ë²„ | Iterator, Entry |
| Static Nested | ë¶ˆí•„ìš” | staticë§Œ | Builder, Helper |
| Local Inner | í•„ìš” | ëª¨ë“  ë©¤ë²„ + final ì§€ì—­ë³€ìˆ˜ | ì¼íšŒì„± í—¬í¼ |
| Anonymous | ìƒí™©ì— ë”°ë¼ | ìƒí™©ì— ë”°ë¼ | Event Handler, Callback |

### í•µì‹¬ ì›ì¹™
1. **ì™¸ë¶€ ì¸ìŠ¤í„´ìŠ¤ê°€ í•„ìš” ì—†ìœ¼ë©´ í•­ìƒ staticìœ¼ë¡œ ì„ ì–¸**
2. **ì¥ê¸° ì‹¤í–‰ ì‘ì—…ì—ëŠ” Member Inner Class ì‚¬ìš© ê¸ˆì§€** (ë©”ëª¨ë¦¬ ëˆ„ìˆ˜)
3. **ì§€ì—­ ë³€ìˆ˜ëŠ” final ë˜ëŠ” effectively final**
4. **Java 8+ Lambdaë¡œ ëŒ€ì²´ ê°€ëŠ¥í•œ ê²½ìš° Lambda ì‚¬ìš©**

---

**ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ë‚´ë¶€ í´ë˜ìŠ¤ ë§ˆìŠ¤í„°ë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤!**

**ë‹¤ìŒ í•™ìŠµ ì£¼ì œ:**
- Chapter 23: ì˜ˆì™¸ ì²˜ë¦¬ (Exception Handling)
