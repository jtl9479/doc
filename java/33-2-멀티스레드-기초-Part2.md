# 33ì¥ ë©€í‹°ìŠ¤ë ˆë“œ ê¸°ì´ˆ - Part 2: ë™ê¸°í™” & ì‹¤ìˆ˜

## ğŸ”’ ë™ê¸°í™” (Synchronization)

### ë¬¸ì œ: ê²½ìŸ ìƒíƒœ (Race Condition)
```java
class Counter {
    private int count = 0;

    public void increment() {
        count++;  // ìŠ¤ë ˆë“œ ì•ˆì „í•˜ì§€ ì•ŠìŒ!
    }
}

// ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— increment() í˜¸ì¶œ
// â†’ ì˜ˆìƒ: 10000, ì‹¤ì œ: 9856 (ê°’ ì†ì‹¤!)
```

### í•´ê²°: synchronized
```java
class Counter {
    private int count = 0;

    public synchronized void increment() {
        count++;  // í•œ ë²ˆì— í•œ ìŠ¤ë ˆë“œë§Œ!
    }
}
```

---

## ğŸš¨ ì£¼ë‹ˆì–´ ì‹¤ìˆ˜

### âŒ ì‹¤ìˆ˜ 1: start() ëŒ€ì‹  run() í˜¸ì¶œ
```java
// âŒ ë³„ë„ ìŠ¤ë ˆë“œê°€ ì•„ë‹˜!
thread.run();  // í˜„ì¬ ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰

// âœ… ë³„ë„ ìŠ¤ë ˆë“œ ìƒì„±
thread.start();
```

### âŒ ì‹¤ìˆ˜ 2: ë™ê¸°í™” ëˆ„ë½
```java
// âŒ ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ë™ì‹œ ì ‘ê·¼ ê°€ëŠ¥
private int count = 0;
public void increment() {
    count++;
}

// âœ… synchronized ì‚¬ìš©
public synchronized void increment() {
    count++;
}
```

### âŒ ì‹¤ìˆ˜ 3: ë°ë“œë½ (Deadlock)
```java
// âŒ ë°ë“œë½ ë°œìƒ ê°€ëŠ¥
synchronized(lock1) {
    synchronized(lock2) {
        // ì‘ì—…
    }
}

// ë‹¤ë¥¸ ìŠ¤ë ˆë“œ
synchronized(lock2) {
    synchronized(lock1) {
        // ì‘ì—…
    }
}
// â†’ ì„œë¡œ ëŒ€ê¸° (ë°ë“œë½!)

// âœ… ì ê¸ˆ ìˆœì„œ ì¼ì¹˜
synchronized(lock1) {
    synchronized(lock2) {
        // ë‘ ìŠ¤ë ˆë“œ ëª¨ë‘ ê°™ì€ ìˆœì„œ
    }
}
```

### âŒ ì‹¤ìˆ˜ 4: sleep vs wait í˜¼ë™
```java
// sleep: ì§€ì • ì‹œê°„ ëŒ€ê¸° (ë½ ìœ ì§€)
Thread.sleep(1000);

// wait: ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ notifyí•  ë•Œê¹Œì§€ (ë½ í•´ì œ)
synchronized(obj) {
    obj.wait();
}
```

---

## ğŸ’¡ Best Practices

```java
// âœ… ExecutorService ì‚¬ìš© (ê¶Œì¥)
ExecutorService executor = Executors.newFixedThreadPool(10);
executor.submit(() -> {
    // ì‘ì—…
});
executor.shutdown();

// âŒ Thread ì§ì ‘ ìƒì„± (êµ¬ì‹)
new Thread(() -> {
    // ì‘ì—…
}).start();
```

**ë‹¤ìŒ Part 3**: ë©´ì ‘ ì§ˆë¬¸
