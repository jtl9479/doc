# 36ì¥ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ (GC) - Part 1: ê¸°ë³¸ ê°œë…

## ğŸ” ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì´ë€?

**ìë™ ë©”ëª¨ë¦¬ ê´€ë¦¬ ì‹œìŠ¤í…œ**

```java
// C/C++ - ìˆ˜ë™ ë©”ëª¨ë¦¬ ê´€ë¦¬
malloc() / free()

// Java - ìë™ ë©”ëª¨ë¦¬ ê´€ë¦¬
new MyObject();  // GCê°€ ìë™ìœ¼ë¡œ íšŒìˆ˜
```

---

## ğŸŒŸ ì‹¤ìƒí™œ ë¹„ìœ ë¡œ ì´í•´í•˜ëŠ” GC

### ë¹„ìœ  1: ì•„íŒŒíŠ¸ ì²­ì†Œ ì‹œìŠ¤í…œ (ì„¸ëŒ€ë³„ GC)

```
GCì˜ ì„¸ëŒ€ë³„ ë©”ëª¨ë¦¬ ê´€ë¦¬ = ì•„íŒŒíŠ¸ì˜ ì¸µë³„ ì²­ì†Œ ì‹œìŠ¤í…œ

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Eden (1ì¸µ - ì‹ í˜¼ë¶€ë¶€ ì…ì£¼)          â”‚  â† ìƒˆ ê°ì²´ë“¤ì´ ì²˜ìŒ ë“¤ì–´ì˜¤ëŠ” ê³³
â”‚  - ë§¤ì¼ ì²­ì†Œ (Minor GC)              â”‚     ì“°ë ˆê¸°ê°€ ë¹¨ë¦¬ ìŒ“ì„
â”‚  - ë¹ ë¥¸ ì²­ì†Œ                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Survivor (2-3ì¸µ - ë‹¨ê¸° ê±°ì£¼ì)      â”‚  â† ì¡°ê¸ˆ ì˜¤ë˜ ì‚´ì•„ë‚¨ì€ ê°ì²´ë“¤
â”‚  - ì£¼ 1-2íšŒ ì²­ì†Œ                     â”‚     ì´ì‚¬ ê°ˆì§€ ë§ì§€ íŒë‹¨ ì¤‘
â”‚  - ëª‡ ë²ˆ ì²­ì†Œ í›„ì—ë„ ë‚¨ìœ¼ë©´ ìœ„ë¡œ!    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Old Generation (4ì¸µ+ - ì¥ê¸° ê±°ì£¼ì) â”‚  â† ì˜¤ë˜ ì‚´ì•„ë‚¨ì€ ê°ì²´ë“¤
â”‚  - ì›” 1íšŒ ëŒ€ì²­ì†Œ (Major GC)          â”‚     ì“°ë ˆê¸°ê°€ ì²œì²œíˆ ìŒ“ì„
â”‚  - ëŠë¦¬ì§€ë§Œ ì² ì €í•œ ì²­ì†Œ              â”‚     ì²­ì†Œ ì‹œ ì „ì²´ ê±´ë¬¼ ì ê²€
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ì‹¤ì œ ê°ì²´ ìƒëª…ì£¼ê¸°:
new MyObject()  â†’  Eden (1ì¸µ)
    â†“ Minor GC (ë§¤ì¼ ì²­ì†Œ)
ì•„ì§ ì‚¬ìš© ì¤‘  â†’  Survivor (2ì¸µ)
    â†“ Minor GC (ì£¼ê°„ ì²­ì†Œ)
ê³„ì† ì‚¬ìš© ì¤‘  â†’  Old (4ì¸µ)
    â†“ Major GC (ì›”ê°„ ëŒ€ì²­ì†Œ)
ì‚¬ìš© ì•ˆ í•¨  â†’  ë©”ëª¨ë¦¬ íšŒìˆ˜ (í‡´ê±°)
```

**í•µì‹¬**:
- **Eden**: ìƒˆ ì…ì£¼ì (ì‹ ê·œ ê°ì²´) - ëŒ€ë¶€ë¶„ ê¸ˆë°© ë‚˜ê° (ë‹¨ëª… ê°ì²´)
- **Survivor**: ë‹¨ê¸° ê±°ì£¼ì (ì„ì‹œ ê°ì²´) - ëª‡ ë²ˆ ì‚´ì•„ë‚¨ìœ¼ë©´ ìŠ¹ê²©
- **Old**: ì¥ê¸° ê±°ì£¼ì (ì¥ìˆ˜ ê°ì²´) - ì˜¤ë˜ ë¨¸ë¬´ëŠ” ê°ì²´ë“¤

---

### ë¹„ìœ  2: ë„ì„œê´€ ì±… ì •ë¦¬ ì‹œìŠ¤í…œ (Reachability)

```
GCì˜ ë„ë‹¬ ê°€ëŠ¥ì„± = ë„ì„œê´€ ì±… ëŒ€ì¶œ ì‹œìŠ¤í…œ

GC Root (ëŒ€ì¶œ ì¹´ìš´í„°)
    â†“
ì°¸ì¡° ì²´ì¸ (ëŒ€ì¶œ ì´ë ¥)
    â†“
ê°ì²´ (ì±…)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GC Root (ì¶œë°œì )                    â”‚
â”‚ - ëŒ€ì¶œ ì¹´ìš´í„° (í˜„ì¬ ëŒ€ì¶œ ì¤‘ì¸ ì±…)   â”‚
â”‚ - Stack ë³€ìˆ˜                        â”‚
â”‚ - static ë³€ìˆ˜                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
        [ëŒ€ì¶œ ì¤‘ì¸ ì±…]  â† Reachable (ë³´ê´€)
               â†“
        [ëŒ€ì¶œìê°€ ì°¸ê³ í•œ ì±…]  â† Reachable (ë³´ê´€)
               â†“
        [ê·¸ ì±…ì´ ì¸ìš©í•œ ì±…]  â† Reachable (ë³´ê´€)

[ì•„ë¬´ë„ ëŒ€ì¶œ ì•ˆ í•œ ì±…]  â† Unreachable (íê¸° ëŒ€ìƒ)
[ë°˜ë‚©ëœ ì±…]            â† Unreachable (íê¸° ëŒ€ìƒ)
```

```java
public void borrowBook() {
    Book mainBook = new Book("Java ì™„ì „ ì •ë³µ");  // â† GC Root (Stack)
    Book referencedBook = mainBook.getReference();  // â† Reachable

    // method ì¢…ë£Œ â†’ Stack ì‚¬ë¼ì§ â†’ ëª¨ë“  ì±… Unreachable â†’ GC ìˆ˜ê±°
}

// ë°˜ë‚© ì•ˆ ë˜ëŠ” ì±… (ë©”ëª¨ë¦¬ ëˆ„ìˆ˜)
public static Book permanentBook = new Book("ì˜êµ¬ ë³´ê´€");  // â† static (GC Root)
// staticì´ë¼ í”„ë¡œê·¸ë¨ ì¢…ë£Œê¹Œì§€ ì ˆëŒ€ íšŒìˆ˜ ì•ˆ ë¨!
```

**í•µì‹¬**:
- **Reachable**: ëŒ€ì¶œ ì¤‘ (ì‚¬ìš© ì¤‘) â†’ GCê°€ íšŒìˆ˜í•˜ë©´ ì•ˆ ë¨
- **Unreachable**: ë°˜ë‚©ë¨ (ì‚¬ìš© ì•ˆ í•¨) â†’ GCê°€ íšŒìˆ˜í•´ì•¼ í•¨

---

### ë¹„ìœ  3: ìŒì‹ë¬¼ ì“°ë ˆê¸° ë¶„ë¦¬ìˆ˜ê±° (Young/Old Generation)

```
ì„¸ëŒ€ë³„ GC = ì“°ë ˆê¸° ë¶„ë¦¬ìˆ˜ê±° ì‹œìŠ¤í…œ

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ìŒì‹ë¬¼ ì“°ë ˆê¸°í†µ (Young Generation)   â”‚
â”‚ - ë§¤ì¼ ë²„ë ¤ì§ (ìƒˆ ê°ì²´)              â”‚
â”‚ - ë§¤ì¼ ìˆ˜ê±° (Minor GC)               â”‚
â”‚ - ìˆ˜ê±° ë¹ ë¦„ (1-2ë¶„)                  â”‚
â”‚ - 95% ì´ìƒì´ ì“°ë ˆê¸°!                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì¼ë°˜ ì“°ë ˆê¸°í†µ (Old Generation)       â”‚
â”‚ - ê°€ë” ë²„ë ¤ì§ (ì˜¤ë˜ëœ ê°ì²´)          â”‚
â”‚ - ì£¼ 1íšŒ ìˆ˜ê±° (Major GC)             â”‚
â”‚ - ìˆ˜ê±° ëŠë¦¼ (10-20ë¶„)                â”‚
â”‚ - ë¶„ë¦¬ìˆ˜ê±° ì² ì €íˆ í•´ì•¼ í•¨            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ì™œ ë¶„ë¦¬í• ê¹Œ?
- ìŒì‹ë¬¼ (Young): ê¸ˆë°© ì©ì–´ì„œ ìì£¼ ë²„ë¦¼ â†’ ë¹ ë¥¸ ìˆ˜ê±°
- ì¼ë°˜ ì“°ë ˆê¸° (Old): ì²œì²œíˆ ìŒ“ì„ â†’ ëŠë¦¬ì§€ë§Œ ì² ì €í•œ ìˆ˜ê±°

GCë„ ë˜‘ê°™ì€ ì´ìœ ë¡œ ë¶„ë¦¬!
```

```java
// ìŒì‹ë¬¼ ì“°ë ˆê¸° (ë‹¨ëª… ê°ì²´) - 95%ê°€ ì´ëŸ° ê°ì²´!
for (int i = 0; i < 1000000; i++) {
    String temp = "temp_" + i;  // â† ë£¨í”„ ëë‚˜ë©´ ë°”ë¡œ ì“°ë ˆê¸°
    // ì‚¬ìš©
}  // â† Edenì—ì„œ ìƒì„± â†’ ë°”ë¡œ íšŒìˆ˜ (Minor GC)

// ì¼ë°˜ ì“°ë ˆê¸° (ì¥ìˆ˜ ê°ì²´) - 5%ë§Œ ì´ë ‡ê²Œ ì˜¤ë˜ ì‚¶
public static final Map<String, User> userCache = new HashMap<>();
// â† í”„ë¡œê·¸ë¨ ì‹œì‘ë¶€í„° ëê¹Œì§€ ì‚´ì•„ìˆìŒ (Old Generation)
```

**í•µì‹¬**:
- **ëŒ€ë¶€ë¶„ ê°ì²´ëŠ” ë‹¨ëª…** (ì•½ 95%) â†’ Young Generationì—ì„œ ë¹ ë¥´ê²Œ ì²˜ë¦¬
- **ì¼ë¶€ ê°ì²´ë§Œ ì¥ìˆ˜** (ì•½ 5%) â†’ Old Generationìœ¼ë¡œ ìŠ¹ê²©

---

### ë¹„ìœ  4: ìë™ì°¨ ì£¼ì°¨ì¥ ê´€ë¦¬ ì‹œìŠ¤í…œ (Mark and Sweep)

```
GCì˜ Mark and Sweep = ì£¼ì°¨ì¥ ë‹¨ì†

1ï¸âƒ£ Mark ë‹¨ê³„ (ë‹¨ì† í‘œì‹œ)
   ì£¼ì°¨ ê´€ë¦¬ìê°€ ì£¼ì°¨ì¥ ìˆœíšŒ
   â†“
   ìœ íš¨í•œ ì£¼ì°¨ê¶Œ í™•ì¸ (Reachable)
   â†“
   ìœ íš¨í•œ ì°¨ì— "OK ìŠ¤í‹°ì»¤" ë¶€ì°© (Mark)

   [ì°¨ëŸ‰A - OKâœ…]  [ì°¨ëŸ‰B - OKâœ…]  [ì°¨ëŸ‰C - ì—†ìŒâŒ]

2ï¸âƒ£ Sweep ë‹¨ê³„ (ê²¬ì¸ ì²˜ë¦¬)
   OK ìŠ¤í‹°ì»¤ ì—†ëŠ” ì°¨ ê²¬ì¸ (Unreachable ê°ì²´ ì œê±°)
   â†“
   [ì°¨ëŸ‰A - OKâœ…]  [ì°¨ëŸ‰B - OKâœ…]  [ë¹ˆ ê³µê°„]

3ï¸âƒ£ Compact ë‹¨ê³„ (ì •ë¦¬ ì •ëˆ)
   ì°¨ëŸ‰ë“¤ì„ ì•ìœ¼ë¡œ ëª¨ìŒ (ë©”ëª¨ë¦¬ ë‹¨í¸í™” í•´ê²°)
   â†“
   [ì°¨ëŸ‰A][ì°¨ëŸ‰B][--------ë¹ˆ ê³µê°„--------]
```

```java
// GCì˜ Mark and Sweep ê³¼ì •
public class GCExample {
    public static void main(String[] args) {
        Car car1 = new Car("A");  // â† Reachable (mainì´ ì°¸ì¡°)
        Car car2 = new Car("B");  // â† Reachable
        Car car3 = new Car("C");  // â† Reachable

        car3 = null;  // â† ì´ì œ CëŠ” Unreachable!

        // GC ì‹¤í–‰ ì‹œ:
        // 1. Mark: car1, car2ë§Œ ë§ˆí‚¹ (car3ëŠ” ì£¼ì°¨ê¶Œ ì—†ìŒ)
        // 2. Sweep: car3 ê°ì²´ ë©”ëª¨ë¦¬ íšŒìˆ˜ (ê²¬ì¸)
        // 3. Compact: car1, car2ë¥¼ ì•ìœ¼ë¡œ ì •ë¦¬
    }
}
```

**í•µì‹¬**:
- **Mark**: ì‚´ì•„ìˆëŠ” ê°ì²´ ì°¾ê¸° (ìœ íš¨í•œ ì£¼ì°¨ê¶Œ í™•ì¸)
- **Sweep**: ì£½ì€ ê°ì²´ ì œê±° (ì£¼ì°¨ê¶Œ ì—†ëŠ” ì°¨ ê²¬ì¸)
- **Compact**: ë©”ëª¨ë¦¬ ë‹¨í¸í™” í•´ê²° (ì°¨ëŸ‰ ì •ë¦¬ì •ëˆ)

---

### ë¹„ìœ  5: ì¹´í˜ ì¢Œì„ ì •ë¦¬ (Stop-The-World)

```
Stop-The-World = ì¹´í˜ ì „ì²´ ì²­ì†Œ ì‹œê°„

í‰ì†Œ ì˜ì—…:
[ì†ë‹˜A] [ì†ë‹˜B] [ì†ë‹˜C] [ì†ë‹˜D]
  â†“       â†“       â†“       â†“
ì£¼ë¬¸    ëŒ€í™”    ê³µë¶€    íšŒì˜  â† ëª¨ë‘ í™œë™ ì¤‘

ğŸ§¹ ì²­ì†Œ ì‹œê°„ (GC ì‹¤í–‰):
[ì†ë‹˜A] [ì†ë‹˜B] [ì†ë‹˜C] [ì†ë‹˜D]
  â¸ï¸      â¸ï¸      â¸ï¸      â¸ï¸
  â† ëª¨ë“  í™œë™ ì¼ì‹œ ì •ì§€! (Stop-The-World)

ì²­ì†Œë¶€: "ì ê¹ë§Œìš”! ì²­ì†Œ ì¤‘ì…ë‹ˆë‹¤~"
  â†’ ë¹ˆ ì¢Œì„ ì •ë¦¬ (Unreachable ê°ì²´ íšŒìˆ˜)
  â†’ í…Œì´ë¸” ì •ë¦¬ (ë©”ëª¨ë¦¬ ì••ì¶•)
  â†’ ë°”ë‹¥ ì²­ì†Œ (ë©”ëª¨ë¦¬ ì •ë¦¬)

ì²­ì†Œ ì™„ë£Œ:
[ì†ë‹˜A] [ì†ë‹˜B] [ì†ë‹˜C] [ì†ë‹˜D]
  â–¶ï¸      â–¶ï¸      â–¶ï¸      â–¶ï¸
  â† í™œë™ ì¬ê°œ! (ì• í”Œë¦¬ì¼€ì´ì…˜ ì¬ê°œ)
```

```java
// Stop-The-World ì²´í—˜
public class StopTheWorldExample {
    public static void main(String[] args) {
        long start = System.currentTimeMillis();

        // ëŒ€ëŸ‰ ê°ì²´ ìƒì„± (ì¹´í˜ ì†ë‹˜ë“¤)
        for (int i = 0; i < 10000000; i++) {
            new Object();  // â† GC ìœ ë°œ
        }

        long end = System.currentTimeMillis();
        System.out.println("ì‹¤í–‰ ì‹œê°„: " + (end - start) + "ms");
        // â† ì´ ì‹œê°„ì— ì—¬ëŸ¬ ë²ˆì˜ GC pause í¬í•¨!

        // GC ë¡œê·¸ ì˜ˆì‹œ:
        // [GC pause (G1 Evacuation Pause) 25ms]  â† 25ms ë™ì•ˆ ë©ˆì¶¤!
        // [GC pause (G1 Evacuation Pause) 30ms]  â† 30ms ë™ì•ˆ ë©ˆì¶¤!
    }
}

// ì‹¤ë¬´ ì˜í–¥:
// - ì›¹ ì„œë²„: 25ms ë™ì•ˆ ëª¨ë“  ìš”ì²­ ì§€ì—° (ì‚¬ìš©ìëŠ” ëŠë¦¼ì„ ì²´ê°)
// - ê²Œì„ ì„œë²„: 25ms ë™ì•ˆ í™”ë©´ ë©ˆì¶¤ (ëŠê¹€ í˜„ìƒ)
// â†’ GC íŠœë‹ìœ¼ë¡œ pause timeì„ ì¤„ì—¬ì•¼ í•¨!
```

**í•µì‹¬**:
- **Minor GC**: ì§§ì€ ì²­ì†Œ (1-10ms) â†’ ê±°ì˜ ëª» ëŠë‚Œ
- **Major GC**: ê¸´ ì²­ì†Œ (100ms~ìˆ˜ ì´ˆ) â†’ ì‚¬ìš©ìê°€ ëŠë‚Œ
- **ëª©í‘œ**: pause timeì„ ìµœì†Œí™”í•˜ëŠ” ê²ƒ!

---

## ğŸ¯ ë¹„ìœ  ì¢…í•© ë¹„êµí‘œ

| ê°œë… | ë¹„ìœ  1 (ì•„íŒŒíŠ¸) | ë¹„ìœ  2 (ë„ì„œê´€) | ë¹„ìœ  3 (ì“°ë ˆê¸°) | ë¹„ìœ  4 (ì£¼ì°¨ì¥) | ë¹„ìœ  5 (ì¹´í˜) |
|------|----------------|----------------|----------------|----------------|--------------|
| **Young Gen** | 1-3ì¸µ (ì‹ ê·œ ì…ì£¼) | ì‹ ê°„ ë„ì„œ | ìŒì‹ë¬¼ ì“°ë ˆê¸°í†µ | ë‹¨ê¸° ì£¼ì°¨ êµ¬ì—­ | íšŒì „ ë¹ ë¥¸ ì¢Œì„ |
| **Old Gen** | 4ì¸µ+ (ì¥ê¸° ê±°ì£¼) | ê³ ì „ ë„ì„œ | ì¼ë°˜ ì“°ë ˆê¸°í†µ | ì¥ê¸° ì£¼ì°¨ êµ¬ì—­ | VIP ì˜ˆì•½ì„ |
| **Minor GC** | ë§¤ì¼ ì²­ì†Œ | ë§¤ì¼ ë°˜ë‚© ì²˜ë¦¬ | ë§¤ì¼ ìˆ˜ê±° | ë‹¨ê¸° ì£¼ì°¨ ë‹¨ì† | ë¹ ë¥¸ í…Œì´ë¸” ì •ë¦¬ |
| **Major GC** | ì›” 1íšŒ ëŒ€ì²­ì†Œ | ì¥ì„œ ì •ë¦¬ | ì£¼ 1íšŒ ìˆ˜ê±° | ì „ì²´ ì£¼ì°¨ì¥ ë‹¨ì† | ì „ì²´ ì²­ì†Œ |
| **Reachable** | ê±°ì£¼ ì¤‘ì¸ ê°€êµ¬ | ëŒ€ì¶œ ì¤‘ì¸ ì±… | ì•„ì§ ì•ˆ ë²„ë¦¼ | ìœ íš¨ ì£¼ì°¨ê¶Œ | ì•‰ì•„ìˆëŠ” ì†ë‹˜ |
| **Stop-The-World** | ì²­ì†Œ ì¤‘ ì¶œì… ê¸ˆì§€ | íœ´ê´€ ì‹œê°„ | ìˆ˜ê±°ì°¨ ì‘ì—… ì¤‘ | ë‹¨ì† ì¤‘ ì£¼ì°¨ ê¸ˆì§€ | ì²­ì†Œ ì‹œê°„ |

---

## ğŸ“– GCì˜ ë™ì‘ ì›ë¦¬

### Reachability (ë„ë‹¬ ê°€ëŠ¥ì„±)
```
GC Root â†’ ì°¸ì¡° ì²´ì¸ â†’ ê°ì²´

GC Root ì¢…ë¥˜:
- Stackì˜ ë¡œì»¬ ë³€ìˆ˜
- ë©”ì„œë“œ ì˜ì—­ì˜ static ë³€ìˆ˜
- JNI ì°¸ì¡°
```

```java
public void method() {
    MyObject obj = new MyObject();  // Stack ì°¸ì¡° (GC Root)
    // method ì¢…ë£Œ â†’ obj unreachable â†’ GC ëŒ€ìƒ
}
```

---

## ğŸ“– Heap ë©”ëª¨ë¦¬ êµ¬ì¡°

### Generational GC
```
+------------------+
| Young Generation |
|  - Eden          |  â† ìƒˆ ê°ì²´ê°€ ì²˜ìŒ íƒœì–´ë‚˜ëŠ” ê³³ (95% ì—¬ê¸°ì„œ ì£½ìŒ)
|  - Survivor 0    |  â† Minor GCì—ì„œ ì‚´ì•„ë‚¨ì€ ê°ì²´ë“¤ì˜ ì„ì‹œ ëŒ€í”¼ì†Œ
|  - Survivor 1    |  â† Survivor 0/1ì„ ë²ˆê°ˆì•„ ì‚¬ìš© (Ping-Pong)
+------------------+
| Old Generation   |  â† ì˜¤ë˜ ì‚´ì•„ë‚¨ì€ ê°ì²´ë“¤ì˜ ìµœì¢… ê±°ì£¼ì§€
+------------------+
| Metaspace        |  â† í´ë˜ìŠ¤ ë©”íƒ€ë°ì´í„° (Java 8+, ê³¼ê±°ì—” PermGen)
| (Java 8+)        |
+------------------+
```

### ì„¸ëŒ€ë³„ íŠ¹ì§•
```java
// Young Generation (ì „ì²´ Heapì˜ ì•½ 1/3)
- ìƒˆë¡œìš´ ê°ì²´ ìƒì„±
- ìì£¼ GC ë°œìƒ (Minor GC) - ìˆ˜ì´ˆë§ˆë‹¤
- ë¹ ë¥¸ ì†ë„ (1-10ms)
- 95% ì´ìƒì˜ ê°ì²´ê°€ ì—¬ê¸°ì„œ ì£½ìŒ (Weak Generational Hypothesis)

// Old Generation (ì „ì²´ Heapì˜ ì•½ 2/3)
- ì˜¤ë˜ ì‚´ì•„ë‚¨ì€ ê°ì²´ (ì•½ 15ë²ˆì˜ Minor GCë¥¼ ê²¬ë”¤)
- ê°€ë” GC ë°œìƒ (Major GC) - ìˆ˜ì‹­ ë¶„ë§ˆë‹¤
- ëŠë¦° ì†ë„ (100ms ~ ìˆ˜ ì´ˆ)
- Stop-The-World ì‹œê°„ì´ ê¹€
```

---

## ğŸ“– GC ê³¼ì •

### 1. Minor GC (Young Generation)
```
ë‹¨ê³„ë³„ ê³¼ì •:

1ï¸âƒ£ ìƒˆ ê°ì²´ â†’ Eden ì˜ì—­ì— ìƒì„±
   [Eden: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] [S0: ] [S1: ]

2ï¸âƒ£ Eden ê°€ë“ ì°¸ â†’ Minor GC ë°œìƒ!
   [Eden: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ FULL!] â†’ GC ì‹œì‘

3ï¸âƒ£ ì‚´ì•„ë‚¨ì€ ê°ì²´ â†’ Survivor 0ìœ¼ë¡œ ë³µì‚¬
   [Eden: ] [S0: â–ˆâ–ˆ] [S1: ]
   (age = 1ë¡œ ë§ˆí‚¹)

4ï¸âƒ£ ë‹¤ìŒ Minor GC â†’ S0ì—ì„œ S1ë¡œ ë³µì‚¬ (Ping-Pong)
   [Eden: â–ˆâ–ˆâ–ˆâ–ˆ] [S0: ] [S1: â–ˆâ–ˆâ–ˆ]
   (age = 2ë¡œ ì¦ê°€)

5ï¸âƒ£ ageê°€ 15 (ê¸°ë³¸ê°’)ì— ë„ë‹¬ â†’ Old Generationìœ¼ë¡œ ìŠ¹ê²©
   [Eden: ] [S0: ] [S1: â–ˆ] [Old: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ]

ğŸ’¡ ì™œ Survivorê°€ 2ê°œ?
   - Copying GC ì•Œê³ ë¦¬ì¦˜ ì‚¬ìš©
   - í•œìª½ìœ¼ë¡œ ë³µì‚¬ â†’ ë‹¤ë¥¸ í•œìª½ ë¹„ì›€ â†’ ë‹¨í¸í™” ë°©ì§€
```

```java
// ì‹¤ì œ ì˜ˆì‹œ
public class MinorGCExample {
    public static void main(String[] args) {
        // 1. Edenì— ëŒ€ëŸ‰ ê°ì²´ ìƒì„±
        for (int i = 0; i < 100000; i++) {
            String temp = "temp_" + i;  // â† Edenì— ìƒì„±
        }  // â† ë£¨í”„ ë â†’ ëª¨ë‘ Unreachable â†’ Minor GCë¡œ íšŒìˆ˜

        // 2. ì˜¤ë˜ ì‚¬ëŠ” ê°ì²´
        List<String> longLived = new ArrayList<>();
        for (int i = 0; i < 1000; i++) {
            longLived.add("permanent_" + i);
            // â† Eden â†’ S0 â†’ S1 â†’ ... â†’ Old Generation
        }

        // GC ë¡œê·¸:
        // [GC (Allocation Failure) [PSYoungGen: 33280K->5088K] 0.0024 secs]
        //  â†‘ Minor GC ë°œìƒ
        //  â†‘ Young Generation: 33MB â†’ 5MB (28MB íšŒìˆ˜!)
        //  â†‘ ì†Œìš” ì‹œê°„: 2.4ms (ë§¤ìš° ë¹ ë¦„!)
    }
}
```

### 2. Major GC (Old Generation)
```
ì–¸ì œ ë°œìƒ?
- Old Generationì´ ê°€ë“ ì°¸
- ë˜ëŠ” Promotionì´ ì‹¤íŒ¨ (Youngì—ì„œ Oldë¡œ ìŠ¹ê²©í•  ê³µê°„ ì—†ìŒ)

ê³¼ì •:
1ï¸âƒ£ Stop-The-World ë°œìƒ (ëª¨ë“  ì• í”Œë¦¬ì¼€ì´ì…˜ ìŠ¤ë ˆë“œ ì¤‘ì§€)
2ï¸âƒ£ ì „ì²´ Heap ê²€ì‚¬ (Old + Young ëª¨ë‘)
3ï¸âƒ£ Mark: ì‚´ì•„ìˆëŠ” ê°ì²´ ë§ˆí‚¹
4ï¸âƒ£ Sweep: ì£½ì€ ê°ì²´ ì œê±°
5ï¸âƒ£ Compact: ë©”ëª¨ë¦¬ ë‹¨í¸í™” í•´ê²° (ì˜µì…˜)
6ï¸âƒ£ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¬ê°œ

Major GCëŠ” ëŠë¦¼!
- Old Generationì€ í¬ê¸°ê°€ í¼ (Heapì˜ 2/3)
- ì „ì²´ë¥¼ ìŠ¤ìº”í•´ì•¼ í•¨
- Compaction ë¹„ìš©ì´ í¼
â†’ pause timeì´ 100ms~ìˆ˜ ì´ˆê¹Œì§€ ê°€ëŠ¥!
```

```java
// Major GCê°€ ë°œìƒí•˜ëŠ” ìƒí™©
public class MajorGCExample {
    // ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¡œ ì¸í•œ Major GC ìœ ë°œ
    private static List<byte[]> memoryLeak = new ArrayList<>();

    public static void main(String[] args) {
        while (true) {
            // ê³„ì† Old Generationì— ê°ì²´ ìŒ“ì„
            memoryLeak.add(new byte[1024 * 1024]);  // 1MBì”©

            // Old Generation ê°€ë“ ì°¸ â†’ Major GC ë°œìƒ!
            // [Full GC (Ergonomics) [PSYoungGen: 256K->0K]
            //  [ParOldGen: 7000K->5000K] 0.5234 secs]
            //  â†‘ 523ms ë™ì•ˆ ë©ˆì¶¤! (ì‚¬ìš©ìê°€ ëŠë‚Œ)
        }
    }
}
```

---

## ğŸ“– GC ì•Œê³ ë¦¬ì¦˜

### 1. Serial GC
```
íŠ¹ì§•:
- ë‹¨ì¼ ìŠ¤ë ˆë“œë¡œ GC ìˆ˜í–‰
- Stop-The-World ë™ì•ˆ 1ê°œ CPUë§Œ ì‚¬ìš©
- ì‘ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ìš© (Heap < 100MB)

ì‚¬ìš©:
-XX:+UseSerialGC

ì–¸ì œ ì‚¬ìš©?
- ì‹±ê¸€ ì½”ì–´ í™˜ê²½
- í´ë¼ì´ì–¸íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜
- ì„ë² ë””ë“œ ì‹œìŠ¤í…œ
```

### 2. Parallel GC
```
íŠ¹ì§•:
- ë©€í‹° ìŠ¤ë ˆë“œë¡œ GC ìˆ˜í–‰ (ì—¬ëŸ¬ CPU ë™ì‹œ ì‚¬ìš©)
- ì²˜ë¦¬ëŸ‰(Throughput) ì¤‘ì‹œ
- Minor GCì™€ Major GC ëª¨ë‘ ë³‘ë ¬ ì²˜ë¦¬
- Java 8ì˜ ê¸°ë³¸ GC

ì‚¬ìš©:
-XX:+UseParallelGC
-XX:ParallelGCThreads=8  # GC ìŠ¤ë ˆë“œ ê°œìˆ˜

ì„±ëŠ¥:
- Serial GC ëŒ€ë¹„ 2-4ë°° ë¹ ë¦„
- í•˜ì§€ë§Œ pause timeì€ ì—¬ì „íˆ ê¹€

ì–¸ì œ ì‚¬ìš©?
- ë°°ì¹˜ ì‘ì—… (Batch Processing)
- ê³¼í•™ ê³„ì‚° (Scientific Computing)
- ì²˜ë¦¬ëŸ‰ì´ ì¤‘ìš”í•œ ë°±ì—”ë“œ ì„œë²„
```

### 3. CMS (Concurrent Mark Sweep)
```
íŠ¹ì§•:
- ë‚®ì€ ì§€ì—°ì‹œê°„(Low Latency) ì¤‘ì‹œ
- ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ë™ì‹œì— GC ìˆ˜í–‰ (ëŒ€ë¶€ë¶„ì˜ ë‹¨ê³„)
- Old Generationë§Œ ëŒ€ìƒ (Youngì€ Parallel)
- Compaction ì—†ìŒ â†’ ë©”ëª¨ë¦¬ ë‹¨í¸í™” ë°œìƒ

ì‚¬ìš©:
-XX:+UseConcMarkSweepGC

ë‹¨ê³„:
1. Initial Mark (STW) - ë§¤ìš° ì§§ìŒ (ìˆ˜ ms)
2. Concurrent Mark - ë™ì‹œ ì‹¤í–‰ (STW ì—†ìŒ)
3. Concurrent Preclean - ë™ì‹œ ì‹¤í–‰
4. Remark (STW) - ì§§ìŒ (ìˆ˜ì‹­ ms)
5. Concurrent Sweep - ë™ì‹œ ì‹¤í–‰

ì¥ì :
- pause timeì´ ì§§ìŒ (Parallel ëŒ€ë¹„ 1/10)

ë‹¨ì :
- CPU ì‚¬ìš©ëŸ‰ ë†’ìŒ (ë™ì‹œ ì‹¤í–‰)
- ë©”ëª¨ë¦¬ ë‹¨í¸í™” (Compaction ì—†ìŒ)
- Deprecated (Java 14+)

ì–¸ì œ ì‚¬ìš©?
- ì‘ë‹µ ì‹œê°„ì´ ì¤‘ìš”í•œ ì›¹ ì„œë²„
- ì‹¤ì‹œê°„ ì• í”Œë¦¬ì¼€ì´ì…˜
â†’ í•˜ì§€ë§Œ ì´ì œëŠ” G1 GC ê¶Œì¥!
```

### 4. G1 GC (Garbage First) â­ **Java 9+ ê¸°ë³¸**
```
íŠ¹ì§•:
- Region ê¸°ë°˜ GC (Heapì„ ì‘ì€ Regionìœ¼ë¡œ ë¶„í• )
- ì˜ˆì¸¡ ê°€ëŠ¥í•œ pause time
- í° Heapì— ì í•© (6GB ~ ìˆ˜ì‹­ GB)
- Young/Old êµ¬ë¶„ì„ Region ë‹¨ìœ„ë¡œ ìœ ì—°í•˜ê²Œ ê´€ë¦¬

Heap êµ¬ì¡°:
â”Œâ”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”
â”‚E â”‚E â”‚S â”‚O â”‚O â”‚E â”‚H â”‚O â”‚  E: Eden
â”œâ”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¤  S: Survivor
â”‚E â”‚E â”‚O â”‚O â”‚E â”‚E â”‚O â”‚E â”‚  O: Old
â”œâ”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¤  H: Humongous (ê±°ëŒ€ ê°ì²´)
â”‚O â”‚O â”‚S â”‚E â”‚E â”‚O â”‚O â”‚O â”‚
â””â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”˜
â†‘ ê° ì¹¸ì´ í•˜ë‚˜ì˜ Region (ë³´í†µ 1-32MB)

ì‚¬ìš©:
-XX:+UseG1GC
-XX:MaxGCPauseMillis=200  # ëª©í‘œ pause time (ê¸°ë³¸ 200ms)
-XX:G1HeapRegionSize=16m  # Region í¬ê¸°

ë™ì‘ ì›ë¦¬:
1. ê°€ë¹„ì§€ê°€ ë§ì€ Regionë¶€í„° ìš°ì„  íšŒìˆ˜ (Garbage First!)
2. ëª©í‘œ pause time ë‚´ì—ì„œ ìµœëŒ€í•œ ë§ì´ íšŒìˆ˜
3. ì ì§„ì ìœ¼ë¡œ Old Generation ì •ë¦¬ (ì „ì²´ ìŠ¤ìº” ë¶ˆí•„ìš”)

ì¥ì :
- ì˜ˆì¸¡ ê°€ëŠ¥í•œ pause time
- í° Heapì—ì„œë„ íš¨ìœ¨ì 
- Compaction í¬í•¨ (ë‹¨í¸í™” í•´ê²°)
- CMSì˜ ë‹¨ì  ëª¨ë‘ í•´ê²°

ì–¸ì œ ì‚¬ìš©?
- ëŒ€ë¶€ë¶„ì˜ ìƒí™©! (Java 9+ ê¸°ë³¸)
- 6GB ì´ìƒì˜ Heap
- ì‘ë‹µ ì‹œê°„ì´ ì¤‘ìš”í•œ ì„œë²„
```

### 5. ZGC / Shenandoah (Java 11+) â­ **ì°¨ì„¸ëŒ€ GC**
```
íŠ¹ì§•:
- ì´ˆì €ì§€ì—° GC (pause time < 10ms)
- ëŒ€ìš©ëŸ‰ Heap ì§€ì› (ìˆ˜ë°± GB ~ TB)
- Concurrent Compaction (ë™ì‹œ ì••ì¶•)
- Colored Pointers / Load Barriers ê¸°ìˆ  ì‚¬ìš©

ZGC:
-XX:+UseZGC
-XX:ConcGCThreads=4

Shenandoah:
-XX:+UseShenandoahGC

ì„±ëŠ¥:
- pause time: 1-10ms (Heap í¬ê¸°ì™€ ë¬´ê´€!)
- ì²˜ë¦¬ëŸ‰: G1 ëŒ€ë¹„ ì•½ê°„ ë‚®ìŒ (5-10%)

ì–¸ì œ ì‚¬ìš©?
- ì´ˆì €ì§€ì—°ì´ í•„ìˆ˜ì¸ ì„œë¹„ìŠ¤
  Â· ê¸ˆìœµ ê±°ë˜ ì‹œìŠ¤í…œ
  Â· ì‹¤ì‹œê°„ ê²Œì„ ì„œë²„
  Â· ëŒ€ìš©ëŸ‰ ë©”ëª¨ë¦¬ ì„œë²„ (ìˆ˜ë°± GB Heap)
- Java 15+ í”„ë¡œë•ì…˜ í™˜ê²½
```

---

## ğŸ“– GC ëª¨ë‹ˆí„°ë§

```java
// JVM ì˜µì…˜ìœ¼ë¡œ GC ë¡œê·¸ ì¶œë ¥
-Xlog:gc*:file=gc.log:time,uptime,level,tags
-XX:+PrintGCDetails  # (Java 8)
-XX:+PrintGCDateStamps

// ì¶œë ¥ ì˜ˆì‹œ
[2025-01-15T10:30:45.123+0900][0.234s][info][gc] GC(12) Pause Young (Allocation Failure)
[2025-01-15T10:30:45.125+0900][0.236s][info][gc] GC(12) PSYoungGen: 33280K->5088K(38400K)
[2025-01-15T10:30:45.125+0900][0.236s][info][gc] GC(12) ParOldGen: 10000K->10000K(87552K)
[2025-01-15T10:30:45.125+0900][0.236s][info][gc] GC(12) Metaspace: 3000K->3000K(1056768K)
[2025-01-15T10:30:45.125+0900][0.236s][info][gc] GC(12) Pause Young (Allocation Failure) 42M->15M(125M) 2.398ms

// í•´ì„:
// - GC(12): 12ë²ˆì§¸ GC
// - Pause Young: Minor GC
// - PSYoungGen: 33280K â†’ 5088K (28MB íšŒìˆ˜!)
// - ì „ì²´ Heap: 42M â†’ 15M (27MB íšŒìˆ˜)
// - ì†Œìš” ì‹œê°„: 2.398ms (ë§¤ìš° ë¹ ë¦„!)
```

---

## ğŸ¢ ì‹¤ì œ ê¸°ì—… í™œìš© ì‚¬ë¡€

### ì‚¬ë¡€ 1: ë„¤ì´ë²„ ê²€ìƒ‰ ì„œë²„ - G1 GCë¡œ ì§€ì—° ì‹œê°„ 99% ê°ì†Œ

```bash
# ë¬¸ì œ ìƒí™© (2018ë…„)
- ì„œë¹„ìŠ¤: ë„¤ì´ë²„ í†µí•©ê²€ìƒ‰ ë°±ì—”ë“œ ì„œë²„
- Heap í¬ê¸°: 32GB (ëŒ€ìš©ëŸ‰)
- GC: Parallel GC ì‚¬ìš©
- ë¬¸ì œ: Major GC ì‹œ 2-5ì´ˆ ë©ˆì¶¤ â†’ ê²€ìƒ‰ íƒ€ì„ì•„ì›ƒ ë°œìƒ

# ì¦ìƒ
[Full GC (Ergonomics) 32000M->28000M(32000M) 4.567 secs]
â†‘ 4.5ì´ˆ ë™ì•ˆ ëª¨ë“  ìš”ì²­ ì§€ì—°!
â†’ ì‚¬ìš©ì: "ê²€ìƒ‰ ì•ˆ ë¼ìš”!" (íƒ€ì„ì•„ì›ƒ)

# í•´ê²° ë°©ë²•: G1 GC ì ìš©
java -Xms32g -Xmx32g \
     -XX:+UseG1GC \
     -XX:MaxGCPauseMillis=100 \  # ëª©í‘œ: 100ms ì´í•˜
     -XX:G1ReservePercent=10 \
     -XX:InitiatingHeapOccupancyPercent=45 \
     NaverSearchServer

# ê²°ê³¼
Before (Parallel GC):
- Major GC pause: í‰ê·  3.5ì´ˆ
- 99 percentile ì‘ë‹µ ì‹œê°„: 5ì´ˆ+
- íƒ€ì„ì•„ì›ƒ ë¹„ìœ¨: 0.5%

After (G1 GC):
- Major GC pause: í‰ê·  50ms (70ë°° ê°œì„ ! âš¡)
- 99 percentile ì‘ë‹µ ì‹œê°„: 150ms (97% ê°œì„ !)
- íƒ€ì„ì•„ì›ƒ ë¹„ìœ¨: 0.01% (50ë°° ê°ì†Œ!)
- ì‚¬ìš©ì ë§Œì¡±ë„: 25% ìƒìŠ¹

# ì¶”ê°€ ìµœì í™”
// 1. ë¶ˆí•„ìš”í•œ ê°ì²´ ìƒì„± ì œê±°
// Before
for (SearchResult result : results) {
    String snippet = new String(result.getSnippet());  // âŒ ë¶ˆí•„ìš”í•œ ë³µì‚¬
}

// After
for (SearchResult result : results) {
    String snippet = result.getSnippet();  // âœ… ì§ì ‘ ì‚¬ìš©
}
â†’ Young Generation ì••ë ¥ 30% ê°ì†Œ

// 2. StringBuilder ì¬ì‚¬ìš© (ThreadLocal)
private static ThreadLocal<StringBuilder> builderCache =
    ThreadLocal.withInitial(() -> new StringBuilder(256));

public String buildQuery(String... terms) {
    StringBuilder sb = builderCache.get();
    sb.setLength(0);  // ì¬ì‚¬ìš©
    for (String term : terms) {
        sb.append(term).append(" ");
    }
    return sb.toString();
}
â†’ Minor GC ë¹ˆë„ 50% ê°ì†Œ

# ë¹„ìš© ì ˆê°
- ì„œë²„ ëŒ€ìˆ˜: 200ëŒ€ â†’ 150ëŒ€ (25% ê°ì†Œ)
- ì›” ì„œë²„ ë¹„ìš©: ì•½ 5ì–µ ì› â†’ 3.75ì–µ ì› (ì—° 15ì–µ ì› ì ˆê°)
```

---

### ì‚¬ë¡€ 2: ì¹´ì¹´ì˜¤í†¡ ë©”ì‹œì§€ ì„œë²„ - ZGCë¡œ ì´ˆì €ì§€ì—° ë‹¬ì„±

```bash
# ë¬¸ì œ ìƒí™© (2020ë…„)
- ì„œë¹„ìŠ¤: ì¹´ì¹´ì˜¤í†¡ ë©”ì‹œì§€ ì „ì†¡ ì„œë²„
- ë™ì‹œ ì ‘ì†ì: 5000ë§Œ ëª…+
- Heap í¬ê¸°: 64GB
- GC: G1 GC ì‚¬ìš©
- ë¬¸ì œ: Major GC ì‹œ 100-200ms ì§€ì—° â†’ ë©”ì‹œì§€ ì „ì†¡ ì§€ì—°

# ìš”êµ¬ì‚¬í•­
- ë©”ì‹œì§€ ì „ì†¡ ì§€ì—°: 50ms ì´í•˜ (ëª©í‘œ)
- GC pause: 10ms ì´í•˜ (í•„ìˆ˜)
- ëŒ€ìš©ëŸ‰ Heap: 64GB+

# í•´ê²° ë°©ë²•: ZGC ë„ì… (Java 15)
java -Xms64g -Xmx64g \
     -XX:+UseZGC \
     -XX:ConcGCThreads=8 \
     -XX:ParallelGCThreads=16 \
     -XX:ZAllocationSpikeTolerance=2 \
     KakaoTalkMessageServer

# ê²°ê³¼
Before (G1 GC, 64GB Heap):
- Minor GC pause: 10-30ms
- Major GC pause: 100-200ms
- 99 percentile ë©”ì‹œì§€ ì „ì†¡ ì‹œê°„: 180ms
- í”¼í¬ ì‹œê°„ëŒ€ ì‚¬ìš©ì ë¶ˆë§Œ: "ë©”ì‹œì§€ ì•ˆ ê°€ìš”!"

After (ZGC, 64GB Heap):
- Minor GC pause: 1-5ms (10ë°° ê°œì„ ! âš¡)
- Major GC pause: 2-8ms (25ë°° ê°œì„ ! âš¡)
- 99 percentile ë©”ì‹œì§€ ì „ì†¡ ì‹œê°„: 35ms (5ë°° ê°œì„ !)
- í”¼í¬ ì‹œê°„ëŒ€ ì‚¬ìš©ì ë¶ˆë§Œ: ê±°ì˜ ì—†ìŒ

# ZGC íŠ¹ì§• (Heap í¬ê¸°ì™€ ë¬´ê´€í•œ pause time!)
64GB Heapì—ì„œë„ pause time < 10ms!

[ZGC] GC(42) Pause Mark Start 0.234ms
[ZGC] GC(42) Concurrent Mark 523.456ms
[ZGC] GC(42) Pause Mark End 0.456ms
[ZGC] GC(42) Concurrent Process 234.567ms
[ZGC] GC(42) Pause Relocate Start 0.123ms
[ZGC] GC(42) Concurrent Relocate 345.678ms
[ZGC] GC(42) Garbage Collection 64G->58G 1234.567ms

ì´ GC ì‹œê°„: 1.2ì´ˆ
í•˜ì§€ë§Œ pause time: 0.234 + 0.456 + 0.123 = 0.813ms!
â†’ ë‚˜ë¨¸ì§€ ì‹œê°„ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ê³„ì† ì‹¤í–‰ (Concurrent)

# ì½”ë“œ ìµœì í™”ë„ ë³‘í–‰
// 1. ë©”ì‹œì§€ ê°ì²´ í’€ë§
private static final ObjectPool<Message> messagePool =
    new ObjectPool<>(Message::new, 10000);

public void sendMessage(String content) {
    Message msg = messagePool.borrow();  // ì¬ì‚¬ìš©
    try {
        msg.setContent(content);
        send(msg);
    } finally {
        msg.clear();
        messagePool.returnObject(msg);
    }
}
â†’ ê°ì²´ ìƒì„± 90% ê°ì†Œ

// 2. Off-Heap ìºì‹œ ì‚¬ìš© (ìºì‹œëŠ” Heap ë°–ì—)
private Cache<String, byte[]> sessionCache =
    Caffeine.newBuilder()
            .maximumSize(1000000)
            .offHeap(10, TimeUnit.GIGABYTES)  // Off-Heap 10GB
            .build();
â†’ Heap ì••ë ¥ 20% ê°ì†Œ

# íš¨ê³¼
- ë©”ì‹œì§€ ì „ì†¡ ì„±ê³µë¥ : 99.5% â†’ 99.95% (10ë°° ê°œì„ )
- í”¼í¬ ì‹œê°„ ì²˜ë¦¬ ìš©ëŸ‰: 100ë§Œ msg/s â†’ 150ë§Œ msg/s (50% ì¦ê°€)
- ì‚¬ìš©ì ë§Œì¡±ë„: 4.2/5 â†’ 4.7/5 (0.5ì  ìƒìŠ¹)
```

---

### ì‚¬ë¡€ 3: ë°°ë‹¬ì˜ë¯¼ì¡± ì£¼ë¬¸ ì‹œìŠ¤í…œ - GC íŠœë‹ìœ¼ë¡œ OOM í•´ê²°

```bash
# ë¬¸ì œ ìƒí™© (2019ë…„)
- ì„œë¹„ìŠ¤: ë°°ë‹¬ì˜ë¯¼ì¡± ì‹¤ì‹œê°„ ì£¼ë¬¸ ì²˜ë¦¬ ì„œë²„
- Heap í¬ê¸°: 8GB
- GC: G1 GC ì‚¬ìš©
- ë¬¸ì œ: ì ì‹¬ í”¼í¬ ì‹œê°„ì— OutOfMemoryError ë°œìƒ
  â†’ ì£¼ë¬¸ ì²˜ë¦¬ ì‹¤íŒ¨ â†’ ë§¤ì¶œ ì†ì‹¤

# ì¦ìƒ
java.lang.OutOfMemoryError: Java heap space
    at com.baemin.order.OrderProcessor.processOrder(OrderProcessor.java:45)

[GC ë¡œê·¸]
[Full GC (Allocation Failure) 7800M->7750M(8000M) 5.234 secs]
â†‘ Full GCë¥¼ í•´ë„ 50MBë°–ì— íšŒìˆ˜ ëª»í•¨! â†’ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜!

# ì›ì¸ ë¶„ì„ (Heap Dump ë¶„ì„)
// 1. MAT(Memory Analyzer Tool)ë¡œ ë¶„ì„
jmap -dump:format=b,file=heapdump.hprof <pid>

// Leak Suspects Report:
// â†’ OrderCacheê°€ Heapì˜ 85% ì°¨ì§€! (6.8GB)
// â†’ ì£¼ë¬¸ ì™„ë£Œ í›„ì—ë„ ìºì‹œì—ì„œ ì œê±° ì•ˆ í•¨!

// ë¬¸ì œ ì½”ë“œ
public class OrderCache {
    // âŒ ë¬´í•œì • ìŒ“ì„!
    private static Map<String, Order> cache = new HashMap<>();

    public void addOrder(Order order) {
        cache.put(order.getId(), order);  // ì œê±° ì•ˆ í•¨!
    }
}

// ì ì‹¬ í”¼í¬ ì‹œê°„:
// - 10ë¶„ì— 10ë§Œ ê±´ ì£¼ë¬¸
// - Order ê°ì²´ í‰ê·  70KB
// â†’ 10ë§Œ * 70KB = 7GB!
// â†’ OOM ë°œìƒ!

# í•´ê²° ë°©ë²• 1: ìºì‹œ í¬ê¸° ì œí•œ (ì¦‰ì‹œ ì ìš©)
// âœ… LRU ìºì‹œë¡œ ë³€ê²½ (ìµœëŒ€ 1ë§Œ ê°œ)
private static Map<String, Order> cache =
    Collections.synchronizedMap(
        new LinkedHashMap<String, Order>(10000, 0.75f, true) {
            @Override
            protected boolean removeEldestEntry(Map.Entry<String, Order> eldest) {
                return size() > 10000;  // 1ë§Œ ê°œ ì´ˆê³¼ ì‹œ ì˜¤ë˜ëœ ê²ƒ ì œê±°
            }
        }
    );

// ë˜ëŠ” Caffeine ì‚¬ìš© (ë” ê¶Œì¥)
private static Cache<String, Order> cache =
    Caffeine.newBuilder()
            .maximumSize(10000)  // ìµœëŒ€ 1ë§Œ ê°œ
            .expireAfterWrite(10, TimeUnit.MINUTES)  // 10ë¶„ í›„ ìë™ ì‚­ì œ
            .build();

â†’ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: 7GB â†’ 700MB (10ë°° ê°ì†Œ!)

# í•´ê²° ë°©ë²• 2: GC íŠœë‹
// Before
java -Xms8g -Xmx8g -XX:+UseG1GC BaeminOrderServer

// After
java -Xms8g -Xmx8g \
     -XX:+UseG1GC \
     -XX:MaxGCPauseMillis=100 \  # pause time ëª©í‘œ 100ms
     -XX:G1HeapRegionSize=16m \  # Region í¬ê¸° 16MB
     -XX:InitiatingHeapOccupancyPercent=45 \  # Old Gen 45% ì°¨ë©´ GC ì‹œì‘
     -XX:G1ReservePercent=10 \  # ì˜ˆë¹„ ë©”ëª¨ë¦¬ 10%
     -XX:+ParallelRefProcEnabled \  # Reference ì²˜ë¦¬ ë³‘ë ¬í™”
     -Xlog:gc*:file=gc.log:time,uptime \
     -XX:+HeapDumpOnOutOfMemoryError \  # OOM ì‹œ Heap dump
     -XX:HeapDumpPath=/logs/heapdump.hprof \
     BaeminOrderServer

# í•´ê²° ë°©ë²• 3: ì½”ë“œ ìµœì í™”
// 1. Order ê°ì²´ ê²½ëŸ‰í™”
// Before (70KB)
public class Order {
    private String orderId;
    private String userId;
    private String restaurantId;
    private List<OrderItem> items;
    private String deliveryAddress;  // â† ê¸´ ë¬¸ìì—´
    private Map<String, Object> metadata;  // â† ë¶ˆí•„ìš”í•œ ë°ì´í„°
    // ... 20ê°œ í•„ë“œ
}

// After (7KB - 10ë°° ê²½ëŸ‰í™”!)
public class Order {
    private long orderIdHash;  // String â†’ long (í•´ì‹œ)
    private int userIdHash;
    private int restaurantIdHash;
    private List<Integer> itemIds;  // OrderItem â†’ idë§Œ
    private int addressHash;  // ì£¼ì†Œ â†’ í•´ì‹œ
    // ë‚˜ë¨¸ì§€ëŠ” DB ì¡°íšŒ
}

// 2. ë¶ˆí•„ìš”í•œ ê°ì²´ ìƒì„± ì œê±°
// Before
for (Order order : orders) {
    String json = new Gson().toJson(order);  // âŒ Gson ë§¤ë²ˆ ìƒì„±!
    sendToQueue(json);
}

// After
private static final Gson gson = new Gson();  // âœ… ì¬ì‚¬ìš©

for (Order order : orders) {
    String json = gson.toJson(order);
    sendToQueue(json);
}
â†’ Minor GC ë¹ˆë„ 70% ê°ì†Œ

# ê²°ê³¼
Before:
- ì ì‹¬ í”¼í¬ ì‹œ OOM ë°œìƒ: í•˜ë£¨ 2-3íšŒ
- ì£¼ë¬¸ ì‹¤íŒ¨ìœ¨: 0.5% (ì‹œê°„ë‹¹ 500ê±´)
- GC pause: 200-500ms
- ê³ ê° ë¶ˆë§Œ: "ì£¼ë¬¸ì´ ì•ˆ ë¼ìš”!"

After:
- ì ì‹¬ í”¼í¬ ì‹œ OOM ë°œìƒ: 0íšŒ (3ê°œì›”ê°„)
- ì£¼ë¬¸ ì‹¤íŒ¨ìœ¨: 0.01% (ì‹œê°„ë‹¹ 10ê±´, 50ë°° ê°œì„ !)
- GC pause: 50-80ms (5ë°° ê°œì„ !)
- Heap ì‚¬ìš©ëŸ‰: í”¼í¬ ì‹œ 7.8GB â†’ 2.5GB (68% ê°ì†Œ)
- ì£¼ë¬¸ ì²˜ë¦¬ ì†ë„: 500ê±´/s â†’ 1200ê±´/s (2.4ë°° ì¦ê°€!)

# ë¹„ìš© íš¨ê³¼
- ì ì‹¬ í”¼í¬ ì‹œ ì¶”ê°€ ì£¼ë¬¸ ì²˜ë¦¬: ì‹œê°„ë‹¹ 5ë§Œ ê±´+
- ì£¼ë¬¸ ì‹¤íŒ¨ ê°ì†Œë¡œ ì¸í•œ ê³ ê° ì´íƒˆ ë°©ì§€: ì›” 1ì–µ ì› ë§¤ì¶œ ì¦ê°€
- ì„œë²„ ì¶”ê°€ ì¦ì„¤ ë¶ˆí•„ìš”: ì„œë²„ ë¹„ìš© ì ˆê° ì—° 5ì–µ ì›
```

---

## â“ FAQ (ìì£¼ ë¬»ëŠ” ì§ˆë¬¸)

<details>
<summary><strong>Q1: GCê°€ ì •í™•íˆ ì–¸ì œ ì‹¤í–‰ë˜ë‚˜ìš”? ì˜ˆì¸¡í•  ìˆ˜ ìˆë‚˜ìš”?</strong></summary>

**A**: GCëŠ” JVMì´ ìë™ìœ¼ë¡œ ê²°ì •í•˜ë©°, ì •í™•í•œ ì‹œì ì€ ì˜ˆì¸¡í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë°œìƒ ì¡°ê±´ì€ ëª…í™•í•©ë‹ˆë‹¤.

**GC ë°œìƒ ì¡°ê±´**:

```java
// 1. Eden ì˜ì—­ì´ ê°€ë“ ì°¸ â†’ Minor GC
public class MinorGCTrigger {
    public static void main(String[] args) {
        // Eden í¬ê¸°: 10MB ê°€ì •
        List<byte[]> list = new ArrayList<>();

        for (int i = 0; i < 1000; i++) {
            list.add(new byte[1024 * 100]);  // 100KBì”© ìƒì„±
            // 10MB ì°¨ë©´ â†’ Minor GC ìë™ ë°œìƒ!
        }
    }
}

// 2. Old Generationì´ ê°€ë“ ì°¸ â†’ Major GC
public class MajorGCTrigger {
    private static List<byte[]> longLived = new ArrayList<>();

    public static void main(String[] args) {
        // Old Generation í¬ê¸°: 1GB ê°€ì •
        for (int i = 0; i < 10000; i++) {
            longLived.add(new byte[1024 * 100]);  // 100KBì”©
            // Minor GC ì—¬ëŸ¬ ë²ˆ â†’ Oldë¡œ ìŠ¹ê²©
            // Old ê°€ë“ ì°¸ â†’ Major GC ë°œìƒ!
        }
    }
}

// 3. Allocation Failure (í• ë‹¹ ì‹¤íŒ¨)
// Edenì— ìƒˆ ê°ì²´ë¥¼ ìƒì„±í•˜ë ¤ëŠ”ë° ê³µê°„ ì—†ìŒ â†’ Minor GC
new HugeObject();  // Eden ë¶€ì¡± â†’ GC ì¦‰ì‹œ ë°œìƒ

// 4. System.gc() í˜¸ì¶œ (ê¶Œì¥í•˜ì§€ ì•ŠìŒ!)
System.gc();  // âŒ Full GC ìœ ë°œ (í•˜ì§€ë§Œ ì¦‰ì‹œ ì‹¤í–‰ ë³´ì¥ ì•ˆ ë¨)
```

**GC ë¹ˆë„ ì¸¡ì •**:

```bash
# jstatìœ¼ë¡œ GC ë¹ˆë„ í™•ì¸
jstat -gc <pid> 1000  # 1ì´ˆë§ˆë‹¤

# ì¶œë ¥:
S0C    S1C    EC       OU       YGC   YGCT    FGC    FGCT
2560   2560   20480    5000     100   0.500   5      1.000

# í•´ì„:
YGC: 100  # Minor GC 100ë²ˆ ë°œìƒ
YGCT: 0.5ì´ˆ  # Minor GC ì´ ì‹œê°„ 0.5ì´ˆ
â†’ í‰ê·  5ms per GC

FGC: 5  # Full GC 5ë²ˆ ë°œìƒ
FGCT: 1.0ì´ˆ  # Full GC ì´ ì‹œê°„ 1ì´ˆ
â†’ í‰ê·  200ms per GC
```

**ì‹¤ë¬´ íŒ**:
- ğŸ’¡ Minor GCëŠ” ì˜ˆì¸¡ ê°€ëŠ¥ (Eden í¬ê¸° / ê°ì²´ ìƒì„± ì†ë„)
- ğŸ’¡ Major GCëŠ” ì˜ˆì¸¡ ì–´ë ¤ì›€ (Old Generation ëˆ„ì  ì†ë„ê°€ ë¶ˆê·œì¹™)
- ğŸ’¡ `-Xlog:gc*`ë¡œ GC ë¡œê·¸ ëª¨ë‹ˆí„°ë§ í•„ìˆ˜!
- ğŸ’¡ GCê°€ ë„ˆë¬´ ìì£¼ ë°œìƒ â†’ Heap í¬ê¸° ì¦ê°€ ê³ ë ¤

</details>

<details>
<summary><strong>Q2: System.gc()ë¥¼ í˜¸ì¶œí•´ì„œ ê°•ì œë¡œ GCë¥¼ ì‹¤í–‰í•´ì•¼ í•˜ë‚˜ìš”?</strong></summary>

**A**: **ì ˆëŒ€ ì•ˆ ë©ë‹ˆë‹¤!** (99.9%ì˜ ê²½ìš°)

**ì™œ ì•ˆ ë˜ë‚˜ìš”?**

```java
// âŒ ë‚˜ìœ ì˜ˆ: System.gc() í˜¸ì¶œ
public class BadGCPractice {
    public void processData() {
        // ëŒ€ëŸ‰ ë°ì´í„° ì²˜ë¦¬
        List<Data> data = loadBigData();
        process(data);

        // "ë©”ëª¨ë¦¬ ì •ë¦¬í•´ì•¼ì§€!"
        System.gc();  // âŒ ì ˆëŒ€ ê¸ˆì§€!
        // â†’ Full GC ìœ ë°œ (ìˆ˜ë°± ms ~ ìˆ˜ ì´ˆ ë©ˆì¶¤)
        // â†’ ì‹œìŠ¤í…œ ì „ì²´ê°€ ì¼ì‹œ ì •ì§€!
    }
}

// âœ… ì¢‹ì€ ì˜ˆ: GCì—ê²Œ ë§¡ê¸°ê¸°
public class GoodGCPractice {
    public void processData() {
        List<Data> data = loadBigData();
        process(data);

        // GCê°€ ì•Œì•„ì„œ ì²˜ë¦¬!
        // â†’ í•„ìš”í•  ë•Œ ìµœì  ì‹œì ì— ì‹¤í–‰
        // â†’ Minor GCë¡œ ë¹ ë¥´ê²Œ ì²˜ë¦¬ (ìˆ˜ ms)
    }
}
```

**System.gc()ì˜ ë¬¸ì œì **:

1. **Full GC ìœ ë°œ**:
```bash
# System.gc() í˜¸ì¶œ ì‹œ ë¡œê·¸
[Full GC (System.gc()) 2000M->500M(4000M) 1.234 secs]
â†‘ 1.2ì´ˆ ë™ì•ˆ ëª¨ë“  ìš”ì²­ ë©ˆì¶¤!

# ìë™ GC ì‹œ ë¡œê·¸
[GC (Allocation Failure) [PSYoungGen: 100M->10M] 0.005 secs]
â†‘ 5msë§Œ ë©ˆì¶¤ (246ë°° ë¹ ë¦„!)
```

2. **ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•œ ì‹œì **:
```java
System.gc();  // í˜¸ì¶œí•´ë„ ì¦‰ì‹œ ì‹¤í–‰ ë³´ì¥ ì•ˆ ë¨!
// JVMì´ "ë‚˜ì¤‘ì— í• ê²Œ~" í•  ìˆ˜ë„ ìˆìŒ

// ë˜í•œ -XX:+DisableExplicitGC ì˜µì…˜ìœ¼ë¡œ ë¬´ì‹œ ê°€ëŠ¥
// â†’ System.gc()ë¥¼ í˜¸ì¶œí•´ë„ ì•„ë¬´ ì¼ë„ ì•ˆ ì¼ì–´ë‚¨!
```

3. **ì„±ëŠ¥ ì €í•˜**:
```java
// ë²¤ì¹˜ë§ˆí¬: 1ë§Œ ë²ˆ ë°˜ë³µ
// With System.gc()
for (int i = 0; i < 10000; i++) {
    process();
    System.gc();  // âŒ
}
// â†’ ì‹¤í–‰ ì‹œê°„: 234ì´ˆ (Full GC 1ë§Œ ë²ˆ!)

// Without System.gc()
for (int i = 0; i < 10000; i++) {
    process();  // GCê°€ ì•Œì•„ì„œ
}
// â†’ ì‹¤í–‰ ì‹œê°„: 2ì´ˆ (Minor GC 100ë²ˆ)
// âš¡ 117ë°° ë¹ ë¦„!
```

**ìœ ì¼í•œ ì˜ˆì™¸ (0.1%)**:
```java
// 1. í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ GC ë™ì‘ í™•ì¸ìš©
@Test
public void testGCBehavior() {
    createGarbage();
    System.gc();  // âœ… í…ŒìŠ¤íŠ¸ ìš©ë„ë¡œëŠ” OK
    Thread.sleep(100);
    assertMemoryReclaimed();
}

// 2. ê°œë°œ ì¤‘ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë””ë²„ê¹…
public void debugMemoryLeak() {
    createObjects();
    System.gc();  // âœ… ë””ë²„ê¹… ìš©ë„
    // Heap dump ìƒì„± í›„ ë¶„ì„
}

// 3. Off-Heap ë©”ëª¨ë¦¬ í•´ì œ (Direct Buffer ë“±)
// â†’ í•˜ì§€ë§Œ ì´ê²ƒë„ Cleaner ì‚¬ìš©ì´ ë” ë‚˜ìŒ!
```

**ì‹¤ë¬´ íŒ**:
- ğŸ’¡ JVM ì˜µì…˜ì— `-XX:+DisableExplicitGC` ì¶”ê°€ (System.gc() ë¬´ì‹œ)
- ğŸ’¡ GC íŠœë‹ì€ Heap í¬ê¸°, GC ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ!
- ğŸ’¡ ë©”ëª¨ë¦¬ ë¶€ì¡± ì‹œ â†’ ì½”ë“œ ìµœì í™” ë˜ëŠ” Heap ì¦ê°€

</details>

<details>
<summary><strong>Q3: GCê°€ ì‹¤í–‰ë˜ë©´ í”„ë¡œê·¸ë¨ì´ ì™„ì „íˆ ë©ˆì¶”ë‚˜ìš”? (Stop-The-World)</strong></summary>

**A**: GC ì¢…ë¥˜ì™€ ë‹¨ê³„ì— ë”°ë¼ ë‹¤ë¦…ë‹ˆë‹¤. ì¼ë¶€ëŠ” ë©ˆì¶”ê³ , ì¼ë¶€ëŠ” ë™ì‹œ ì‹¤í–‰ë©ë‹ˆë‹¤.

**GCë³„ Stop-The-World (STW) ë¹„êµ**:

| GC ì¢…ë¥˜ | STW ì‹œê°„ | ë™ì‹œ ì‹¤í–‰ | íŠ¹ì§• |
|---------|----------|-----------|------|
| **Serial GC** | ì „ì²´ STW | âŒ | ëª¨ë“  ë‹¨ê³„ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë©ˆì¶¤ |
| **Parallel GC** | ì „ì²´ STW | âŒ | ë©€í‹° ìŠ¤ë ˆë“œì§€ë§Œ ì „ì²´ ë©ˆì¶¤ |
| **CMS GC** | ì¼ë¶€ STW | âœ… | ëŒ€ë¶€ë¶„ ë™ì‹œ ì‹¤í–‰ (Mark, Sweep) |
| **G1 GC** | ì¼ë¶€ STW | âœ… | Young GCëŠ” STW, OldëŠ” ëŒ€ë¶€ë¶„ ë™ì‹œ |
| **ZGC** | ìµœì†Œ STW | âœ… | <10ms STW, ë‚˜ë¨¸ì§€ ë™ì‹œ ì‹¤í–‰ |

**Minor GC (Young Generation)**:

```java
// Minor GCëŠ” í•­ìƒ STW!
public class MinorGCExample {
    public static void main(String[] args) {
        // ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì¤‘...
        System.out.println("ì‘ì—… ì‹œì‘");

        // Eden ê°€ë“ ì°¸ â†’ Minor GC ë°œìƒ
        for (int i = 0; i < 1000000; i++) {
            new Object();
        }
        // â† ì´ ìˆœê°„ ëª¨ë“  ìŠ¤ë ˆë“œ ë©ˆì¶¤! (5-10ms)
        //    Minor GC ì‹¤í–‰
        //    Eden ì •ë¦¬ â†’ Survivorë¡œ ë³µì‚¬
        // â† ì• í”Œë¦¬ì¼€ì´ì…˜ ì¬ê°œ

        System.out.println("ì‘ì—… ì™„ë£Œ");
    }
}

// GC ë¡œê·¸:
[GC pause (G1 Evacuation Pause) (young) 25M->5M(128M) 5.234ms]
                                            â†‘ 5.234ms ë™ì•ˆ ë©ˆì¶¤!

// ì‚¬ìš©ì ì²´ê°:
// - 5ms ë¯¸ë§Œ: ê±°ì˜ ëª» ëŠë‚Œ
// - 10-50ms: ì¡°ê¸ˆ ë²„ë²…ì„
// - 100ms+: ëª…í™•íˆ ëŠë‚Œ (ëŠê¹€)
```

**Major GC (Old Generation)**:

```java
// G1 GCëŠ” ëŒ€ë¶€ë¶„ ë™ì‹œ ì‹¤í–‰!
[GC pause (G1 Evacuation Pause) (young) (initial-mark) 2.345ms]
                                        â†‘ STW (ë§¤ìš° ì§§ìŒ)

[GC concurrent-mark-start]
// â† ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì† ì‹¤í–‰! (ë™ì‹œ ì‹¤í–‰)
[GC concurrent-mark-end, 523.456ms]

[GC remark 5.678ms]
      â†‘ STW (ì§§ìŒ)

[GC concurrent-cleanup-start]
// â† ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì† ì‹¤í–‰!
[GC concurrent-cleanup-end, 234.567ms]

// ì´ GC ì‹œê°„: 765ms
// í•˜ì§€ë§Œ STW ì‹œê°„: 2.345 + 5.678 = 8msë§Œ!
// â†’ ë‚˜ë¨¸ì§€ 757msëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ê³„ì† ì‹¤í–‰ë¨
```

**ZGC (ì°¨ì„¸ëŒ€ GC)**:

```java
// ZGCëŠ” ê±°ì˜ ëª¨ë“  ë‹¨ê³„ë¥¼ ë™ì‹œ ì‹¤í–‰!
[ZGC] GC(42) Pause Mark Start 0.234ms  â† STW (ë§¤ìš° ì§§ìŒ)
[ZGC] GC(42) Concurrent Mark 523.456ms  â† ë™ì‹œ ì‹¤í–‰
[ZGC] GC(42) Pause Mark End 0.456ms    â† STW (ë§¤ìš° ì§§ìŒ)
[ZGC] GC(42) Concurrent Process 234.567ms  â† ë™ì‹œ ì‹¤í–‰
[ZGC] GC(42) Pause Relocate Start 0.123ms  â† STW (ë§¤ìš° ì§§ìŒ)
[ZGC] GC(42) Concurrent Relocate 345.678ms  â† ë™ì‹œ ì‹¤í–‰

// ì´ GC ì‹œê°„: 1104ms
// í•˜ì§€ë§Œ STW ì‹œê°„: 0.234 + 0.456 + 0.123 = 0.813ms!
// â†’ 99.9%ëŠ” ë™ì‹œ ì‹¤í–‰!
```

**ì‹¤ì œ ì˜í–¥ ë¹„êµ**:

```java
// ì›¹ ì„œë²„ ì˜ˆì‹œ (ë™ì‹œ ìš”ì²­ 1000ê±´)
// ìš”ì²­ ì²˜ë¦¬ ì‹œê°„: 50ms

// Parallel GC (STW 200ms)
Request 1: 50ms + 200ms (GC ëŒ€ê¸°) = 250ms  // â† ì‚¬ìš©ì: "ëŠë ¤!"
Request 2: 50ms + 200ms (GC ëŒ€ê¸°) = 250ms
// ... 1000ê±´ ëª¨ë‘ ì§€ì—°

// G1 GC (STW 10ms)
Request 1: 50ms + 10ms (GC ëŒ€ê¸°) = 60ms  // â† ì‚¬ìš©ì: ê±°ì˜ ëª» ëŠë‚Œ
Request 2: 50ms + 10ms (GC ëŒ€ê¸°) = 60ms

// ZGC (STW 1ms)
Request 1: 50ms + 1ms (GC ëŒ€ê¸°) = 51ms  // â† ì‚¬ìš©ì: ì „í˜€ ëª» ëŠë‚Œ
Request 2: 50ms + 1ms (GC ëŒ€ê¸°) = 51ms
```

**ì‹¤ë¬´ íŒ**:
- ğŸ’¡ Modern GC (G1, ZGC)ëŠ” STW ì‹œê°„ì´ ë§¤ìš° ì§§ìŒ (<10ms)
- ğŸ’¡ Parallel GCëŠ” STWê°€ ê¸¸ì–´ì„œ ì‹¤ì‹œê°„ ì„œë¹„ìŠ¤ì— ë¶€ì í•©
- ğŸ’¡ GC ë¡œê·¸ë¡œ STW ì‹œê°„ ëª¨ë‹ˆí„°ë§ í•„ìˆ˜!
- ğŸ’¡ pause time ëª©í‘œ: ì›¹ ì„œë²„ < 50ms, ì‹¤ì‹œê°„ < 10ms

</details>

<details>
<summary><strong>Q4: Young Generationê³¼ Old Generationì„ ì™œ ë‚˜ëˆ„ë‚˜ìš”?</strong></summary>

**A**: **ëŒ€ë¶€ë¶„ì˜ ê°ì²´ëŠ” ê¸ˆë°© ì£½ê¸° ë•Œë¬¸**ì…ë‹ˆë‹¤ (Weak Generational Hypothesis)

**í†µê³„ì  ì‚¬ì‹¤**:

```
Java í”„ë¡œê·¸ë¨ì˜ ê°ì²´ ìƒëª… ì£¼ê¸°:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 95%ì˜ ê°ì²´: 1ì´ˆ ì´ë‚´ ì£½ìŒ       â”‚  â† Young Generation
â”‚ 3%ì˜ ê°ì²´: 1ì´ˆ ~ 1ë¶„            â”‚  â† Survivor
â”‚ 2%ì˜ ê°ì²´: 1ë¶„ ì´ìƒ ìƒì¡´        â”‚  â† Old Generation
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ì‹¤ì œ ì¸¡ì • (ë„¤ì´ë²„ ê²€ìƒ‰ ì„œë²„):
- ìƒˆë¡œ ìƒì„±ëœ ê°ì²´ ì¤‘ 98%ê°€ ë‹¤ìŒ Minor GC ì „ì— ì£½ìŒ
- ì˜¤ì§ 2%ë§Œ Survivorë¡œ ìŠ¹ê²©
- ê·¸ ì¤‘ 10%ë§Œ Old Generationê¹Œì§€ ì‚´ì•„ë‚¨ìŒ
â†’ ê²°êµ­ 0.2%ë§Œ ì¥ìˆ˜!
```

**ì™œ ë‚˜ëˆ„ëŠ”ê°€?**

```java
// ë§Œì•½ ë‚˜ëˆ„ì§€ ì•ŠëŠ”ë‹¤ë©´? (ì „ì²´ë¥¼ í•˜ë‚˜ë¡œ)

// âŒ ë‚˜ìœ ë°©ì‹: í•˜ë‚˜ì˜ í° Heap
// Heap: 10GB (ë‹¨ì¼ ì˜ì—­)
// ìƒˆ ê°ì²´ë„ 10GBì—, ì˜¤ë˜ëœ ê°ì²´ë„ 10GBì—
// â†’ GC ì‹œ 10GB ì „ì²´ë¥¼ ìŠ¤ìº”í•´ì•¼ í•¨!

[Full GC] 10GB Heap ìŠ¤ìº” â†’ 3ì´ˆ ì†Œìš”
â†‘ ì‚¬ìš©ì: "ì™œ ì´ë ‡ê²Œ ëŠë ¤?"

// âœ… ì¢‹ì€ ë°©ì‹: Young/Old ë¶„ë¦¬
// Young: 1GB (95%ì˜ ê°ì²´ê°€ ì—¬ê¸°ì„œ ì£½ìŒ)
// Old: 9GB (5%ì˜ ê°ì²´ë§Œ ì—¬ê¸° ìˆìŒ)

[Minor GC] 1GBë§Œ ìŠ¤ìº” â†’ 5ms ì†Œìš” (600ë°° ë¹ ë¦„! âš¡)
[Major GC] 9GB ìŠ¤ìº” â†’ 500ms (í•˜ì§€ë§Œ ë“œë¬¼ê²Œ ë°œìƒ)
```

**ì‹¤ì œ ì˜ˆì‹œ**:

```java
public class GenerationalExample {
    public static void main(String[] args) {
        // ë‹¨ëª… ê°ì²´ (95%) - Young Generation
        for (int i = 0; i < 1000000; i++) {
            String temp = "temp_" + i;  // â† Edenì— ìƒì„±
            process(temp);
            // â† ë£¨í”„ ëë‚˜ë©´ ë°”ë¡œ ì“°ë ˆê¸°!
            //    ë‹¤ìŒ Minor GCì—ì„œ íšŒìˆ˜ (5ms)
        }

        // ì¥ìˆ˜ ê°ì²´ (5%) - Old Generation
        static Map<String, User> userCache = new HashMap<>();
        // â† í”„ë¡œê·¸ë¨ ì‹œì‘ë¶€í„° ëê¹Œì§€
        //    Major GCì—ì„œë§Œ ê²€ì‚¬ (ë“œë¬¼ê²Œ)
    }
}

// GC ë¡œê·¸:
[GC (Allocation Failure) [PSYoungGen: 100M->2M] 5.234ms]
                                    â†‘ 98% íšŒìˆ˜!
â†‘ Youngë§Œ ê²€ì‚¬ (ë¹ ë¦„)

[Full GC (Ergonomics) [PSYoungGen: 2M->0M]
                      [ParOldGen: 1000M->900M] 523.456ms]
                       â†‘ Oldë„ ê²€ì‚¬ (ëŠë¦¼, í•˜ì§€ë§Œ ë“œë¬¾)
```

**ì„±ëŠ¥ ë¹„êµ**:

| ë°©ì‹ | GC ë¹ˆë„ | GC ì‹œê°„ | ì´ GC ì‹œê°„ (1ì‹œê°„) |
|------|---------|---------|-------------------|
| **ë‹¨ì¼ Heap (10GB)** | 10ë¶„ë§ˆë‹¤ | 3ì´ˆ | 6íšŒ Ã— 3ì´ˆ = 18ì´ˆ |
| **Young/Old ë¶„ë¦¬** | Minor: 10ì´ˆë§ˆë‹¤<br>Major: 1ì‹œê°„ë§ˆë‹¤ | 5ms<br>500ms | 360íšŒ Ã— 5ms + 1íšŒ Ã— 500ms = **2.3ì´ˆ** |

â†’ **7.8ë°° ë¹ ë¦„!** âš¡

**Young/Oldì˜ ì—­í• **:

```
Young Generation (ë¹ ë¥¸ íšŒì „ìœ¨):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ "íŒ¨ìŠ¤íŠ¸í‘¸ë“œ ì‹ë‹¹"             â”‚
â”‚ - ì†ë‹˜ì´ ë¹¨ë¦¬ ë“¤ì–´ì˜¤ê³  ë‚˜ê°   â”‚
â”‚ - í…Œì´ë¸” ì •ë¦¬ ìì£¼ (Minor GC) â”‚
â”‚ - ì •ë¦¬ ë¹ ë¦„ (ëŒ€ë¶€ë¶„ ë¹ˆ í…Œì´ë¸”) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Old Generation (ëŠë¦° íšŒì „ìœ¨):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ "ê³ ê¸‰ ë ˆìŠ¤í† ë‘"               â”‚
â”‚ - ì†ë‹˜ì´ ì˜¤ë˜ ë¨¸ë­„            â”‚
â”‚ - í…Œì´ë¸” ì •ë¦¬ ë“œë¬¾ (Major GC) â”‚
â”‚ - ì •ë¦¬ ëŠë¦¼ (ëŒ€ë¶€ë¶„ ì‚¬ìš© ì¤‘)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì‹¤ë¬´ íŒ**:
- ğŸ’¡ Young/Old ë¹„ìœ¨: 1:2 ~ 1:3 (ê¸°ë³¸ 1:2)
- ğŸ’¡ Youngì´ ë„ˆë¬´ ì‘ìœ¼ë©´ â†’ Minor GC ë„ˆë¬´ ìì£¼
- ğŸ’¡ Youngì´ ë„ˆë¬´ í¬ë©´ â†’ Minor GC ì‹œê°„ ì¦ê°€
- ğŸ’¡ G1 GCëŠ” ë™ì ìœ¼ë¡œ ë¹„ìœ¨ ì¡°ì •!

</details>

<details>
<summary><strong>Q5: G1 GCì™€ CMS GCì˜ ì°¨ì´ì ì€ ë¬´ì—‡ì¸ê°€ìš”?</strong></summary>

**A**: G1 GCëŠ” CMS GCì˜ ëª¨ë“  ë‹¨ì ì„ í•´ê²°í•œ ì°¨ì„¸ëŒ€ GCì…ë‹ˆë‹¤.

**ê·¼ë³¸ì ì¸ ì°¨ì´**:

```
CMS GC (Concurrent Mark Sweep):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Young Generation (ê³ ì • ì˜ì—­)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Old Generation (ê³ ì • ì˜ì—­)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â†‘ ì˜ì—­ì´ ê³ ì •ë˜ì–´ ìˆìŒ

G1 GC (Garbage First):
â”Œâ”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”
â”‚E â”‚E â”‚S â”‚O â”‚O â”‚E â”‚H â”‚O â”‚  â† Region ë‹¨ìœ„
â”œâ”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¤     (ë™ì  í• ë‹¹)
â”‚E â”‚E â”‚O â”‚O â”‚E â”‚E â”‚O â”‚E â”‚
â”œâ”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¤
â”‚O â”‚O â”‚S â”‚E â”‚E â”‚O â”‚O â”‚O â”‚  E: Eden
â””â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”˜  S: Survivor
â†‘ Regionì„ ìœ ì—°í•˜ê²Œ ì¬í• ë‹¹      O: Old
                                H: Humongous
```

**ë¹„êµí‘œ**:

| íŠ¹ì§• | CMS GC | G1 GC |
|------|--------|-------|
| **êµ¬ì¡°** | ê³ ì • Young/Old ì˜ì—­ | ìœ ì—°í•œ Region |
| **Compaction** | âŒ ì—†ìŒ â†’ ë‹¨í¸í™” ë°œìƒ | âœ… ìˆìŒ â†’ ë‹¨í¸í™” í•´ê²° |
| **Pause Time** | ë‚®ìŒ (í•˜ì§€ë§Œ ì˜ˆì¸¡ ì–´ë ¤ì›€) | ë‚®ê³  ì˜ˆì¸¡ ê°€ëŠ¥ |
| **í° Heap** | ë¶€ì í•© (<4GB ê¶Œì¥) | ì í•© (6GB~ìˆ˜ë°± GB) |
| **Full GC** | ìì£¼ ë°œìƒ (ë‹¨í¸í™” ë•Œë¬¸) | ë“œë¬¼ê²Œ ë°œìƒ |
| **CPU ì‚¬ìš©** | ë†’ìŒ (concurrent ì‘ì—…) | ë³´í†µ |
| **ì„¤ì • ë³µì¡ë„** | ë³µì¡ (íŠœë‹ ì–´ë ¤ì›€) | ê°„ë‹¨ (ëª©í‘œë§Œ ì„¤ì •) |
| **Java ë²„ì „** | Java 8 ì´í•˜ | Java 9+ ê¸°ë³¸ |
| **ìƒíƒœ** | **Deprecated** (Java 14+) | **ê¶Œì¥** |

**CMS GCì˜ ì¹˜ëª…ì  ë‹¨ì **:

```java
// 1. Compaction ì—†ìŒ â†’ ë©”ëª¨ë¦¬ ë‹¨í¸í™”
// CMS GC ì‚¬ìš© í›„ Old Generation ìƒíƒœ:
[Obj][Free][Obj][Free][Obj][Free][Free][Obj]
  â†‘ ë‹¨í¸í™”! Free ê³µê°„ì´ í©ì–´ì ¸ ìˆìŒ
  â†’ í° ê°ì²´ í• ë‹¹ ì‹¤íŒ¨!
  â†’ Concurrent Mode Failure ë°œìƒ
  â†’ Full GC ê°•ì œ ì‹¤í–‰ (ìˆ˜ ì´ˆ ë©ˆì¶¤)

[Full GC (Allocation Failure) 3000M->2000M(4000M) 3.456 secs]
                               â†‘ 3.5ì´ˆ ë©ˆì¶¤!
â†‘ CMSê°€ ì‹¤íŒ¨í•´ì„œ Serial GCê°€ ê¸´ê¸‰ ì¶œë™
  â†’ ëª¨ë“  ê²ƒì„ ë©ˆì¶”ê³  ì „ì²´ Heap ì •ë¦¬

// G1 GCëŠ” Compaction í¬í•¨:
[Obj][Obj][Obj][Obj][Free Free Free Free Free]
  â†‘ ì—°ì†ëœ Free ê³µê°„! í° ê°ì²´ë„ í• ë‹¹ ê°€ëŠ¥
  â†’ Full GC ê±°ì˜ ì—†ìŒ
```

```bash
// 2. Full GC ë¹ˆë°œ (ì‹¤ì œ ë¡œê·¸)
# CMS GC (4GB Heap, í•˜ë£¨ ìš´ì˜)
[CMS-concurrent-mark: 0.123s]  # OK, ë™ì‹œ ì‹¤í–‰
[CMS-concurrent-sweep: 0.234s]  # OK, ë™ì‹œ ì‹¤í–‰
[CMS-concurrent-mark: 0.125s]
[Full GC (Allocation Failure) 3.456s]  # âŒ ë‹¨í¸í™”ë¡œ Full GC!
[CMS-concurrent-mark: 0.130s]
[Full GC (Allocation Failure) 3.789s]  # âŒ ë˜ Full GC!
...
ì´ Full GC: 23íšŒ (í•˜ë£¨ 23íšŒ!)
â†’ ì‚¬ìš©ì: "ìê¾¸ ëŠê²¨ìš”!"

# G1 GC (4GB Heap, í•˜ë£¨ ìš´ì˜)
[GC pause (G1 Evacuation Pause) (young) 5.234ms]
[GC pause (G1 Evacuation Pause) (mixed) 12.345ms]
[GC pause (G1 Evacuation Pause) (young) 4.567ms]
...
ì´ Full GC: 0íšŒ!
â†’ ì‚¬ìš©ì: "ë¶€ë“œëŸ¬ì›Œìš”!"
```

**G1 GCì˜ ê°•ì **:

```java
// 1. ì˜ˆì¸¡ ê°€ëŠ¥í•œ pause time
// G1 GC ì„¤ì •:
-XX:+UseG1GC
-XX:MaxGCPauseMillis=100  # "ëª©í‘œ: 100ms ì´í•˜ë¡œ í•´ì¤˜!"

// G1ì€ ì´ ëª©í‘œë¥¼ ì§€í‚¤ë ¤ê³  ë…¸ë ¥:
[GC pause (G1 Evacuation Pause) 45.678ms]  # âœ… ëª©í‘œ ë‹¬ì„±!
[GC pause (G1 Evacuation Pause) 67.890ms]  # âœ… ëª©í‘œ ë‹¬ì„±!
[GC pause (G1 Evacuation Pause) 89.012ms]  # âœ… ëª©í‘œ ë‹¬ì„±!

// í‰ê·  pause time: 67ms (ëª©í‘œ 100ms ì´í•˜ ìœ ì§€!)

// CMSëŠ” ì˜ˆì¸¡ ë¶ˆê°€:
[CMS-concurrent-mark: 123ms]  # ë™ì‹œ ì‹¤í–‰ (OK)
[CMS-remark: 456ms]  # âŒ ê°‘ìê¸° 456ms!
[Full GC: 3456ms]  # âŒ ê°‘ìê¸° 3.5ì´ˆ!
```

```java
// 2. í° Heapì—ì„œ íš¨ìœ¨ì 
// 64GB Heapì—ì„œ ë¹„êµ:

// CMS GC (64GB)
[Full GC 64000M->60000M 25.678 secs]
         â†‘ 25ì´ˆ ë©ˆì¶¤! (ì‚¬ìš© ë¶ˆê°€)

// G1 GC (64GB)
[GC pause (G1 Evacuation Pause) 87.654ms]
         â†‘ 87msë§Œ ë©ˆì¶¤! (293ë°° ë¹ ë¦„!)
```

```java
// 3. ê°€ë¹„ì§€ ë§ì€ Region ìš°ì„  íšŒìˆ˜ (Garbage First!)
// G1 GCëŠ” ë˜‘ë˜‘í•¨:
Region 1: 90% ê°€ë¹„ì§€  â† ì´ê±°ë¶€í„° íšŒìˆ˜! (íš¨ìœ¨ì )
Region 2: 10% ê°€ë¹„ì§€  â† ë‚˜ì¤‘ì—
Region 3: 95% ê°€ë¹„ì§€  â† ì´ê²ƒë„ ìš°ì„ !

// â†’ ì§§ì€ ì‹œê°„ì— ìµœëŒ€í•œ ë§ì€ ë©”ëª¨ë¦¬ íšŒìˆ˜
// â†’ pause time ëª©í‘œë¥¼ ì§€í‚¤ë©´ì„œ!
```

**ì‹¤ì œ ì‚¬ë¡€ ë¹„êµ**:

```bash
# ë°°ë‹¬ì˜ë¯¼ì¡± ì£¼ë¬¸ ì„œë²„ (8GB Heap)

Before (CMS GC):
- í‰ê·  pause time: 150ms
- 99 percentile pause: 3.5ì´ˆ (Full GC)
- Full GC ë¹ˆë„: í•˜ë£¨ 10-20íšŒ
- ì£¼ë¬¸ ì²˜ë¦¬ ì§€ì—°: ìì£¼ ë°œìƒ
- ê³ ê° ë¶ˆë§Œ: "ì£¼ë¬¸ì´ ì•ˆ ë¼ìš”!"

After (G1 GC):
- í‰ê·  pause time: 50ms (3ë°° ê°œì„ !)
- 99 percentile pause: 120ms (29ë°° ê°œì„ !)
- Full GC ë¹ˆë„: í•œ ë‹¬ 0-1íšŒ (ê±°ì˜ ì—†ìŒ)
- ì£¼ë¬¸ ì²˜ë¦¬ ì§€ì—°: ê±°ì˜ ì—†ìŒ
- ê³ ê° ë§Œì¡±ë„: í¬ê²Œ ìƒìŠ¹
```

**ì‹¤ë¬´ íŒ**:
- ğŸ’¡ **Java 9+ë©´ ë¬´ì¡°ê±´ G1 GC** (ê¸°ë³¸ê°’)
- ğŸ’¡ CMSëŠ” Deprecated â†’ ì‚¬ìš© ê¸ˆì§€
- ğŸ’¡ G1 GC ì„¤ì •ì€ ê°„ë‹¨: `-XX:MaxGCPauseMillis=200`ë§Œ!
- ğŸ’¡ 4GB ì´í•˜ Heap â†’ Parallel GCë„ ê³ ë ¤
- ğŸ’¡ ì´ˆì €ì§€ì—° í•„ìš” â†’ ZGC (Java 15+)

</details>

<details>
<summary><strong>Q6: OutOfMemoryErrorëŠ” ì™œ ë°œìƒí•˜ê³  ì–´ë–»ê²Œ í•´ê²°í•˜ë‚˜ìš”?</strong></summary>

**A**: OOMì€ Heap ê³µê°„ ë¶€ì¡± ë˜ëŠ” ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë•Œë¬¸ì…ë‹ˆë‹¤. Heap Dumpë¡œ ì›ì¸ì„ ì°¾ì•„ì•¼ í•©ë‹ˆë‹¤.

**OOM ë°œìƒ ì›ì¸**:

```java
// 1. Java heap space (ê°€ì¥ í”í•¨)
java.lang.OutOfMemoryError: Java heap space
â†’ Heapì´ ê°€ë“ ì°¨ì„œ ìƒˆ ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ì—†ìŒ

// 2. Metaspace (í´ë˜ìŠ¤ ë„ˆë¬´ ë§ìŒ)
java.lang.OutOfMemoryError: Metaspace
â†’ í´ë˜ìŠ¤ ë©”íƒ€ë°ì´í„° ì˜ì—­ ë¶€ì¡±

// 3. GC overhead limit exceeded
java.lang.OutOfMemoryError: GC overhead limit exceeded
â†’ GCì— 98% ì‹œê°„ ì“°ëŠ”ë° 2%ë„ íšŒìˆ˜ ëª»í•¨

// 4. Unable to create new native thread
java.lang.OutOfMemoryError: unable to create new native thread
â†’ ìŠ¤ë ˆë“œ ë„ˆë¬´ ë§ìŒ
```

**ì›ì¸ 1: ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ (Memory Leak)**

```java
// âŒ ì „í˜•ì ì¸ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ íŒ¨í„´
public class MemoryLeakExample {
    // 1. Static ì»¬ë ‰ì…˜ì— ê³„ì† ì¶”ê°€
    private static List<Object> cache = new ArrayList<>();

    public void addToCache(Object obj) {
        cache.add(obj);  // â† ì œê±° ì•ˆ í•¨! ê³„ì† ìŒ“ì„
    }
    // 10ë§Œ ê±´ ì¶”ê°€ â†’ 5GB ì‚¬ìš©
    // â†’ OOM ë°œìƒ!

    // 2. ë¦¬ìŠ¤ë„ˆ ë“±ë¡ í›„ í•´ì œ ì•ˆ í•¨
    public void registerListener(Component component) {
        component.addListener(this);  // â† ë“±ë¡ë§Œ í•˜ê³  í•´ì œ ì•ˆ í•¨
    }
    // 1ë§Œ ê°œ ì»´í¬ë„ŒíŠ¸ ë“±ë¡ â†’ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜

    // 3. ThreadLocal ì •ë¦¬ ì•ˆ í•¨
    private static ThreadLocal<byte[]> data = new ThreadLocal<>();

    public void process() {
        data.set(new byte[1024 * 1024]);  // 1MB
        // ì‘ì—…
        // â† data.remove() í˜¸ì¶œ ì•ˆ í•¨!
    }
    // ìŠ¤ë ˆë“œ í’€ì—ì„œ 1000ê°œ ìŠ¤ë ˆë“œ â†’ 1GB ëˆ„ìˆ˜!
}

// âœ… ì˜¬ë°”ë¥¸ ì½”ë“œ
public class NoMemoryLeakExample {
    // 1. í¬ê¸° ì œí•œ ìˆëŠ” ìºì‹œ
    private static Cache<String, Object> cache =
        Caffeine.newBuilder()
                .maximumSize(10000)  // ìµœëŒ€ 1ë§Œ ê°œ
                .expireAfterWrite(10, TimeUnit.MINUTES)  // 10ë¶„ í›„ ì‚­ì œ
                .build();

    // 2. ë¦¬ìŠ¤ë„ˆ ì œê±°
    public void cleanup(Component component) {
        component.removeListener(this);  // â† ë°˜ë“œì‹œ ì œê±°!
    }

    // 3. ThreadLocal ì •ë¦¬
    public void process() {
        try {
            data.set(new byte[1024 * 1024]);
            // ì‘ì—…
        } finally {
            data.remove();  // â† ë°˜ë“œì‹œ ì •ë¦¬!
        }
    }
}
```

**ì§„ë‹¨ ë°©ë²• 1: Heap Dump ìƒì„±**

```bash
# 1. OOM ë°œìƒ ì‹œ ìë™ ìƒì„± (ê¶Œì¥)
-XX:+HeapDumpOnOutOfMemoryError
-XX:HeapDumpPath=/logs/heapdump.hprof

# ì‹¤í–‰:
java -Xms2g -Xmx2g \
     -XX:+HeapDumpOnOutOfMemoryError \
     -XX:HeapDumpPath=/logs/heapdump.hprof \
     MyApp

# OOM ë°œìƒ ì‹œ:
java.lang.OutOfMemoryError: Java heap space
Dumping heap to /logs/heapdump.hprof ...
Heap dump file created [2147483648 bytes in 5.123 secs]

# 2. ìˆ˜ë™ ìƒì„± (ì‹¤í–‰ ì¤‘)
jmap -dump:format=b,file=heap.bin <pid>

# 3. jcmd ì‚¬ìš©
jcmd <pid> GC.heap_dump heap.bin
```

**ì§„ë‹¨ ë°©ë²• 2: MATë¡œ ë¶„ì„**

```bash
# MAT (Memory Analyzer Tool) ë‹¤ìš´ë¡œë“œ
https://www.eclipse.org/mat/

# Heap Dump ì—´ê¸°:
File â†’ Open Heap Dump â†’ heapdump.hprof

# 1. Leak Suspects Report (ìë™ ë¶„ì„)
â†’ "Leak Suspects" íƒ­ í´ë¦­

# ê²°ê³¼ ì˜ˆì‹œ:
Problem Suspect 1:
  One instance of "com.example.UserCache"
  loaded by "sun.misc.Launcher$AppClassLoader"
  occupies 1,876,234,567 bytes (85.2% of total heap)
  â†‘ UserCacheê°€ ì „ì²´ Heapì˜ 85% ì°¨ì§€!

# 2. Dominator Tree (ë©”ëª¨ë¦¬ ì ìœ ìœ¨ ìˆœ)
â†’ "Dominator Tree" íƒ­ í´ë¦­

| Class Name | Shallow Heap | Retained Heap |
|------------|--------------|---------------|
| com.example.UserCache | 48 bytes | 1.8GB (85%) |
| java.util.HashMap$Node[] | 1.5GB | 1.5GB |
| com.example.User[] | 300MB | 300MB |

â†‘ UserCacheê°€ 1.8GB ì ìœ !

# 3. Path to GC Roots (ëˆ„êµ¬ ë•Œë¬¸?)
â†’ UserCache ìš°í´ë¦­ â†’ Path to GC Roots â†’ exclude weak references

com.example.UserCache (1.8GB)
  â† static field: cache
  â† com.example.Main
  â† GC Root (Static)

â†‘ Main í´ë˜ìŠ¤ì˜ static ë³€ìˆ˜ê°€ ì›ì¸!
```

**í•´ê²° ë°©ë²•**:

```java
// ì§„ë‹¨ ê²°ê³¼: UserCacheê°€ 1.8GB ì°¨ì§€
public class UserCache {
    // âŒ ë¬¸ì œ ì½”ë“œ
    private static Map<String, User> cache = new HashMap<>();

    public static void addUser(User user) {
        cache.put(user.getId(), user);  // ì œê±° ì•ˆ í•¨!
    }
}

// âœ… í•´ê²° 1: í¬ê¸° ì œí•œ
private static Map<String, User> cache =
    Collections.synchronizedMap(
        new LinkedHashMap<String, User>(10000, 0.75f, true) {
            @Override
            protected boolean removeEldestEntry(Map.Entry<String, User> eldest) {
                return size() > 10000;  // 1ë§Œ ê°œ ì´ˆê³¼ ì‹œ ì‚­ì œ
            }
        }
    );

// âœ… í•´ê²° 2: TTL (Time To Live)
private static Cache<String, User> cache =
    Caffeine.newBuilder()
            .maximumSize(10000)
            .expireAfterWrite(10, TimeUnit.MINUTES)  // 10ë¶„ í›„ ìë™ ì‚­ì œ
            .build();

// âœ… í•´ê²° 3: WeakHashMap (ìë™ GC)
private static Map<String, User> cache = new WeakHashMap<>();
// â†’ GCê°€ ë©”ëª¨ë¦¬ ë¶€ì¡± ì‹œ ìë™ìœ¼ë¡œ ì œê±°

// ê²°ê³¼:
// Before: 1.8GB ì‚¬ìš© â†’ OOM
// After: 70MB ì‚¬ìš© â†’ ì •ìƒ ì‘ë™!
```

**í•´ê²° ë°©ë²• ì¢…í•©**:

```bash
# 1. Heap í¬ê¸° ì¦ê°€ (ì„ì‹œ ë°©í¸)
-Xms2g -Xmx2g â†’ -Xms4g -Xmx4g

# 2. ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì œê±° (ê·¼ë³¸ í•´ê²°)
â†’ Heap Dump ë¶„ì„ â†’ ì›ì¸ ì œê±°

# 3. ì½”ë“œ ìµœì í™”
// - ë¶ˆí•„ìš”í•œ ê°ì²´ ìƒì„± ì œê±°
// - ìºì‹œ í¬ê¸° ì œí•œ
// - ThreadLocal ì •ë¦¬
// - ë¦¬ìŠ¤ë„ˆ ì œê±°

# 4. GC íŠœë‹
-XX:+UseG1GC
-XX:MaxGCPauseMillis=200

# 5. ëª¨ë‹ˆí„°ë§ ê°•í™”
-Xlog:gc*:file=gc.log
-XX:+HeapDumpOnOutOfMemoryError
```

**ì‹¤ì œ ì‚¬ë¡€**:

```bash
# ë°°ë‹¬ì˜ë¯¼ì¡± ì£¼ë¬¸ ì„œë²„ OOM ì‚¬ê±´

ë¬¸ì œ:
- ì ì‹¬ í”¼í¬ ì‹œ OOM ë°œìƒ
- java.lang.OutOfMemoryError: Java heap space

ì§„ë‹¨:
1. Heap Dump ìƒì„± (2.5GB)
2. MAT ë¶„ì„ ê²°ê³¼:
   - OrderCacheê°€ 2.1GB ì°¨ì§€ (85%)
   - ì£¼ë¬¸ ì™„ë£Œ í›„ì—ë„ ìºì‹œì—ì„œ ì œê±° ì•ˆ í•¨
   - ì ì‹¬ í”¼í¬: 10ë¶„ì— 10ë§Œ ê±´ ì£¼ë¬¸
   - 10ë§Œ ê±´ Ã— 21KB = 2.1GB â†’ OOM!

í•´ê²°:
// Before
private static Map<String, Order> cache = new HashMap<>();

// After
private static Cache<String, Order> cache =
    Caffeine.newBuilder()
            .maximumSize(10000)  // ìµœëŒ€ 1ë§Œ ê±´
            .expireAfterWrite(5, TimeUnit.MINUTES)  // 5ë¶„ í›„ ì‚­ì œ
            .build();

ê²°ê³¼:
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: 2.1GB â†’ 210MB (10ë°° ê°ì†Œ!)
- OOM ë°œìƒ: í•˜ë£¨ 3íšŒ â†’ 0íšŒ (3ê°œì›”ê°„)
- ì£¼ë¬¸ ì„±ê³µë¥ : 99.5% â†’ 99.95% (10ë°° ê°œì„ )
```

**ì‹¤ë¬´ íŒ**:
- ğŸ’¡ `-XX:+HeapDumpOnOutOfMemoryError` í•­ìƒ ì„¤ì •!
- ğŸ’¡ MATë¡œ Heap Dump ë¶„ì„ í•„ìˆ˜
- ğŸ’¡ Static ì»¬ë ‰ì…˜ ì‚¬ìš© ì‹œ í¬ê¸° ì œí•œ í•„ìˆ˜
- ğŸ’¡ ThreadLocalì€ ë°˜ë“œì‹œ remove() í˜¸ì¶œ
- ğŸ’¡ Heap ì¦ê°€ëŠ” ì„ì‹œ ë°©í¸, ê·¼ë³¸ ì›ì¸ ì œê±°ê°€ ë‹µ!

</details>

<details>
<summary><strong>Q7: GCë¥¼ ëª¨ë‹ˆí„°ë§í•˜ë ¤ë©´ ì–´ë–¤ ë„êµ¬ë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ë‚˜ìš”?</strong></summary>

**A**: GC ë¡œê·¸, jstat, VisualVM, GC Easy ë“± ë‹¤ì–‘í•œ ë„êµ¬ê°€ ìˆìŠµë‹ˆë‹¤. ë‹¨ê³„ë³„ë¡œ í™œìš©í•˜ì„¸ìš”.

**1ë‹¨ê³„: GC ë¡œê·¸ ìˆ˜ì§‘ (í•„ìˆ˜)**

```bash
# Java 9+ (í†µí•© ë¡œê¹…)
java -Xlog:gc*:file=gc.log:time,uptime,level,tags \
     -Xms4g -Xmx4g \
     MyApp

# Java 8 (ë ˆê±°ì‹œ)
java -Xms4g -Xmx4g \
     -XX:+PrintGCDetails \
     -XX:+PrintGCDateStamps \
     -XX:+PrintGCTimeStamps \
     -Xloggc:gc.log \
     MyApp

# GC ë¡œê·¸ ì˜ˆì‹œ:
[2025-01-15T10:30:45.123+0900][0.234s][info][gc] GC(12) Pause Young (Allocation Failure) 25M->5M(128M) 5.234ms
                                                         â†‘ Minor GC
                                                                     â†‘ 25M â†’ 5M
                                                                            â†‘ 5.234ms ì†Œìš”

[2025-01-15T10:35:23.456+0900][300.567s][info][gc] GC(42) Pause Full (Ergonomics) 120M->85M(128M) 523.456ms
                                                          â†‘ Full GC
                                                                      â†‘ 523ms ì†Œìš” (ì˜¤ë˜ ê±¸ë¦¼!)
```

**2ë‹¨ê³„: jstatìœ¼ë¡œ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§**

```bash
# ê¸°ë³¸ ì‚¬ìš©ë²•
jstat -gc <pid> 1000  # 1ì´ˆë§ˆë‹¤ GC í†µê³„ ì¶œë ¥

# ì¶œë ¥ ì˜ˆì‹œ:
 S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    YGC     YGCT    FGC    FGCT     GCT
2048.0 2048.0  0.0   1024.0  16384.0  8192.0   40960.0    20480.0  21248.0 20512.0  100    0.500    5    1.000    1.500

# í•´ì„:
# S0C/S1C: Survivor 0/1 ìš©ëŸ‰ (KB)
# S0U/S1U: Survivor 0/1 ì‚¬ìš©ëŸ‰
# EC: Eden ìš©ëŸ‰
# EU: Eden ì‚¬ìš©ëŸ‰
# OC: Old Generation ìš©ëŸ‰
# OU: Old Generation ì‚¬ìš©ëŸ‰
# YGC: Young GC íšŸìˆ˜ (100ë²ˆ)
# YGCT: Young GC ì´ ì‹œê°„ (0.5ì´ˆ)
# FGC: Full GC íšŸìˆ˜ (5ë²ˆ)
# FGCT: Full GC ì´ ì‹œê°„ (1ì´ˆ)

# í‰ê·  ê³„ì‚°:
# Minor GC í‰ê· : 0.5ì´ˆ / 100íšŒ = 5ms per GC
# Full GC í‰ê· : 1ì´ˆ / 5íšŒ = 200ms per GC

# ë‹¤ì–‘í•œ ì˜µì…˜:
jstat -gcutil <pid> 1000  # ë°±ë¶„ìœ¨ë¡œ ë³´ê¸°
jstat -gccause <pid> 1000  # GC ì›ì¸ í¬í•¨
jstat -gcnew <pid> 1000  # Young Generationë§Œ
jstat -gcold <pid> 1000  # Old Generationë§Œ
```

**3ë‹¨ê³„: VisualVMìœ¼ë¡œ ì‹œê°í™”**

```bash
# VisualVM ì‹¤í–‰
jvisualvm

# ê¸°ëŠ¥:
1. CPU, Memory, Threads ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
   â†’ "Monitor" íƒ­: Heap ì‚¬ìš©ëŸ‰ ê·¸ë˜í”„

2. Visual GC í”ŒëŸ¬ê·¸ì¸ (í•„ìˆ˜!)
   Tools â†’ Plugins â†’ Visual GC ì„¤ì¹˜
   â†’ ì‹¤ì‹œê°„ìœ¼ë¡œ Eden, Survivor, Old ì‹œê°í™”

3. Heap Dump ë¶„ì„
   â†’ "Heap Dump" ë²„íŠ¼ í´ë¦­
   â†’ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì°¾ê¸°

4. Profiler
   â†’ "Profiler" íƒ­
   â†’ CPU, Memory í”„ë¡œíŒŒì¼ë§

# ì¥ì :
- GUIë¡œ ì§ê´€ì 
- ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
- ì›ê²© ì„œë²„ ì—°ê²° ê°€ëŠ¥ (JMX)

# ë‹¨ì :
- í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ì˜¤ë²„í—¤ë“œ ìˆìŒ
```

**4ë‹¨ê³„: GC Easyë¡œ ë¡œê·¸ ë¶„ì„ (ê¶Œì¥!)**

```bash
# 1. GC ë¡œê·¸ ìˆ˜ì§‘ (1ì‹œê°„~í•˜ë£¨)
java -Xlog:gc*:file=gc.log:time,uptime,level,tags MyApp

# 2. GC Easy ì—…ë¡œë“œ
https://gceasy.io
â†’ Upload gc.log

# 3. ë¶„ì„ ê²°ê³¼ (ìë™ ìƒì„±):

# Key Performance Indicators
- Throughput: 98.5%  â† ì• í”Œë¦¬ì¼€ì´ì…˜ì´ 98.5% ì‹œê°„ ì‹¤í–‰ (ì¢‹ìŒ!)
- Latency (Avg): 12.3ms  â† í‰ê·  pause time
- Latency (Max): 234.5ms  â† ìµœëŒ€ pause time (ì£¼ì˜!)
- Young GC Freq: 10ì´ˆë§ˆë‹¤
- Full GC Freq: 1ì‹œê°„ë§ˆë‹¤

# GC Statistics
- Total GC Time: 1ë¶„ 30ì´ˆ (1.5% of total time)
- Young GC Count: 360íšŒ
- Young GC Time: 1ë¶„ (í‰ê·  10ms)
- Full GC Count: 1íšŒ
- Full GC Time: 30ì´ˆ (ê¸¸ë‹¤! ë¬¸ì œ!)

# Memory Statistics
- Allocated: 100GB  â† ì´ ìƒì„±ëœ ê°ì²´
- Promoted: 2GB  â† Oldë¡œ ìŠ¹ê²©ëœ ê°ì²´ (2%)
- Allocation Rate: 500MB/s  â† ì´ˆë‹¹ ê°ì²´ ìƒì„± ì†ë„

# Problems Detected:
âš ï¸ Full GC pause time too long (30ì´ˆ)
âš ï¸ Old Generation growing continuously (ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì˜ì‹¬)
âš ï¸ Frequent Minor GC (10ì´ˆë§ˆë‹¤ - Young Gen ë¶€ì¡±)

# Recommendations:
1. Heap í¬ê¸° ì¦ê°€: -Xmx4g â†’ -Xmx8g
2. Young Generation ì¦ê°€: -Xmn2g
3. ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ í™•ì¸ (Heap Dump ë¶„ì„)
```

**5ë‹¨ê³„: í”„ë¡œë©”í…Œìš°ìŠ¤ + ê·¸ë¼íŒŒë‚˜ (í”„ë¡œë•ì…˜)**

```bash
# JMX Exporter ì„¤ì •
# 1. jmx_exporter.jar ë‹¤ìš´ë¡œë“œ
wget https://github.com/prometheus/jmx_exporter/releases/download/0.16.1/jmx_prometheus_javaagent-0.16.1.jar

# 2. config.yaml ì‘ì„±
rules:
  - pattern: 'java.lang<type=Memory><HeapMemoryUsage>(\w+)'
    name: jvm_memory_heap_$1
  - pattern: 'java.lang<type=GarbageCollector, name=(.+)><>CollectionCount'
    name: jvm_gc_collection_count
    labels:
      gc: "$1"
  - pattern: 'java.lang<type=GarbageCollector, name=(.+)><>CollectionTime'
    name: jvm_gc_collection_time
    labels:
      gc: "$1"

# 3. ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
java -javaagent:jmx_prometheus_javaagent-0.16.1.jar=9090:config.yaml \
     -Xms4g -Xmx4g \
     MyApp

# 4. í”„ë¡œë©”í…Œìš°ìŠ¤ ìˆ˜ì§‘ (prometheus.yml)
scrape_configs:
  - job_name: 'java-app'
    static_configs:
      - targets: ['localhost:9090']

# 5. ê·¸ë¼íŒŒë‚˜ ëŒ€ì‹œë³´ë“œ
# JVM Micrometer ëŒ€ì‹œë³´ë“œ import (ID: 4701)
- Heap Memory ì‚¬ìš©ëŸ‰ (ì‹œê³„ì—´ ê·¸ë˜í”„)
- GC Count (Minor/Major ë¶„ë¦¬)
- GC Time (pause time ë¶„í¬)
- Allocation Rate (ì´ˆë‹¹ ê°ì²´ ìƒì„±)

# ì•ŒëŒ ì„¤ì •:
- Full GC ë°œìƒ ì‹œ â†’ Slack ì•ŒëŒ
- Heap ì‚¬ìš©ëŸ‰ 90% ì´ˆê³¼ â†’ ì´ë©”ì¼ ì•ŒëŒ
- GC pause time 100ms ì´ˆê³¼ â†’ PagerDuty í˜¸ì¶œ
```

**ë„êµ¬ ì„ íƒ ê°€ì´ë“œ**:

| ìƒí™© | ì¶”ì²œ ë„êµ¬ | ì¥ì  |
|------|----------|------|
| **ê°œë°œ ì¤‘** | VisualVM | ì‹¤ì‹œê°„, ì§ê´€ì  |
| **ì„±ëŠ¥ í…ŒìŠ¤íŠ¸** | GC Easy | ìë™ ë¶„ì„, ì¶”ì²œ |
| **ì¥ì•  ëŒ€ì‘** | jstat + Heap Dump | ë¹ ë¥´ê³  ì •í™• |
| **í”„ë¡œë•ì…˜** | í”„ë¡œë©”í…Œìš°ìŠ¤ + ê·¸ë¼íŒŒë‚˜ | ëª¨ë‹ˆí„°ë§ + ì•ŒëŒ |
| **ë¡œê·¸ ë¶„ì„** | GC Easy | ë¬´ë£Œ, ì‰¬ì›€ |

**ì‹¤ë¬´ ëª¨ë‹ˆí„°ë§ ì²´í¬ë¦¬ìŠ¤íŠ¸**:

```bash
# âœ… 1. GC ë¡œê·¸ ìˆ˜ì§‘ (í•­ìƒ ì¼œë‘ê¸°)
-Xlog:gc*:file=gc.log:time,uptime,level,tags

# âœ… 2. OOM ì‹œ Heap Dump ìƒì„±
-XX:+HeapDumpOnOutOfMemoryError
-XX:HeapDumpPath=/logs/heapdump.hprof

# âœ… 3. ì£¼ìš” ë©”íŠ¸ë¦­ ëª¨ë‹ˆí„°ë§
- Throughput > 95% (GC ì‹œê°„ < 5%)
- Minor GC pause < 50ms
- Full GC pause < 200ms
- Full GC ë¹ˆë„ < í•˜ë£¨ 1íšŒ

# âœ… 4. ì•ŒëŒ ì„¤ì •
- Full GC ë°œìƒ ì‹œ
- Heap ì‚¬ìš©ëŸ‰ 90% ì´ˆê³¼ ì‹œ
- GC pause time 100ms ì´ˆê³¼ ì‹œ

# âœ… 5. ì£¼ê¸°ì  ë¶„ì„
- ë§¤ì£¼: GC ë¡œê·¸ í™•ì¸
- ë§¤ì›”: Heap Dump ë¶„ì„
- ë¶„ê¸°ë³„: GC íŠœë‹ ê²€í† 
```

**ì‹¤ë¬´ íŒ**:
- ğŸ’¡ GC ë¡œê·¸ëŠ” í•­ìƒ ì¼œë‘ì„¸ìš” (ì˜¤ë²„í—¤ë“œ ê±°ì˜ ì—†ìŒ)
- ğŸ’¡ GC EasyëŠ” ë¬´ë£Œì´ê³  ë§¤ìš° ìœ ìš©!
- ğŸ’¡ í”„ë¡œë•ì…˜ì—ì„œëŠ” í”„ë¡œë©”í…Œìš°ìŠ¤ + ê·¸ë¼íŒŒë‚˜ í•„ìˆ˜
- ğŸ’¡ jstatì€ ì¥ì•  ëŒ€ì‘ ì‹œ ê°€ì¥ ë¹ ë¦„
- ğŸ’¡ VisualVMì€ ê°œë°œ/í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œë§Œ

</details>

---

## ğŸ’¡ í•µì‹¬ ê°œë…

```
1. GCëŠ” unreachable ê°ì²´ë¥¼ ìë™ íšŒìˆ˜
2. Generational GC: Young + Old (95%ëŠ” Youngì—ì„œ ì£½ìŒ)
3. Minor GC (ë¹ ë¦„, 1-10ms) vs Major GC (ëŠë¦¼, 100ms~ìˆ˜ ì´ˆ)
4. Stop-The-World: GC ì¤‘ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¼ì‹œ ì •ì§€
5. G1 GCê°€ Java 9+ ê¸°ë³¸ (Region ê¸°ë°˜, ì˜ˆì¸¡ ê°€ëŠ¥í•œ pause time)
```

**ë‹¤ìŒ Part 2**: ì‹¤ì „ íŠœë‹ & ì£¼ë‹ˆì–´ ì‹¤ìˆ˜
