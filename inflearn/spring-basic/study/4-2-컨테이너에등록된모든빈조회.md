# 4-2. ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ëª¨ë“  ë¹ˆ ì¡°íšŒ

## ëª©ì°¨
1. [ë¹ˆ ì¡°íšŒì˜ í•„ìš”ì„±](#ë¹ˆ-ì¡°íšŒì˜-í•„ìš”ì„±)
2. [ëª¨ë“  ë¹ˆ ì¡°íšŒ ë°©ë²•](#ëª¨ë“ -ë¹ˆ-ì¡°íšŒ-ë°©ë²•)
3. [ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆë§Œ ì¡°íšŒí•˜ê¸°](#ì• í”Œë¦¬ì¼€ì´ì…˜-ë¹ˆë§Œ-ì¡°íšŒí•˜ê¸°)
4. [BeanDefinitionì˜ Role](#beandefinitionì˜-role)
5. [ì‹¤ìŠµ ì½”ë“œ](#ì‹¤ìŠµ-ì½”ë“œ)
6. [í•µì‹¬ ì •ë¦¬](#í•µì‹¬-ì •ë¦¬)

---

## ë¹ˆ ì¡°íšŒì˜ í•„ìš”ì„±

ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ë¹ˆì„ ì¡°íšŒí•˜ëŠ” ê²ƒì€ ë‹¤ìŒê³¼ ê°™ì€ ìƒí™©ì—ì„œ ìœ ìš©í•©ë‹ˆë‹¤:

### ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

```mermaid
graph TB
    A[ë¹ˆ ì¡°íšŒ í•„ìš” ìƒí™©] --> B[ë””ë²„ê¹…]
    A --> C[í…ŒìŠ¤íŠ¸]
    A --> D[ë™ì  ë¹ˆ ê´€ë¦¬]
    A --> E[ëª¨ë‹ˆí„°ë§]

    B --> F[ì–´ë–¤ ë¹ˆì´ ë“±ë¡ë˜ì—ˆëŠ”ì§€ í™•ì¸]
    C --> G[ë¹ˆ ë“±ë¡ ì—¬ë¶€ ê²€ì¦]
    D --> H[ëŸ°íƒ€ì„ ë¹ˆ ì œì–´]
    E --> I[ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœ í™•ì¸]
```

### ë¹ˆ ì¡°íšŒê°€ í•„ìš”í•œ ì´ìœ 

1. **ë””ë²„ê¹… ëª©ì **
   - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ì–´ë–¤ ë¹ˆì´ ë“±ë¡ë˜ì—ˆëŠ”ì§€ í™•ì¸
   - ë¹ˆ ì´ë¦„ê³¼ íƒ€ì… ì •ë³´ íŒŒì•…

2. **í…ŒìŠ¤íŠ¸ ì‘ì„±**
   - íŠ¹ì • ë¹ˆì´ ì˜¬ë°”ë¥´ê²Œ ë“±ë¡ë˜ì—ˆëŠ”ì§€ ê²€ì¦
   - ë¹ˆì˜ ê°œìˆ˜ í™•ì¸

3. **ë™ì  í”„ë¡œê·¸ë˜ë°**
   - ëŸ°íƒ€ì„ì— ë¹ˆ ëª©ë¡ì„ ì¡°íšŒí•˜ì—¬ ë™ì ìœ¼ë¡œ ì²˜ë¦¬
   - íŠ¹ì • íƒ€ì…ì˜ ëª¨ë“  ë¹ˆ ì¡°íšŒ

4. **ìŠ¤í”„ë§ ë‚´ë¶€ ì´í•´**
   - ìŠ¤í”„ë§ì´ ìë™ìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ë¹ˆ í™•ì¸
   - ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆê³¼ ìŠ¤í”„ë§ ë‚´ë¶€ ë¹ˆ êµ¬ë¶„

---

## ëª¨ë“  ë¹ˆ ì¡°íšŒ ë°©ë²•

### ê¸°ë³¸ ë¹ˆ ì¡°íšŒ ë©”ì„œë“œ

```java
ApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);

// 1. ëª¨ë“  ë¹ˆ ì´ë¦„ ì¡°íšŒ
String[] beanDefinitionNames = ac.getBeanDefinitionNames();

// 2. ë¹ˆ ì´ë¦„ìœ¼ë¡œ ê°ì²´ ì¡°íšŒ
Object bean = ac.getBean(beanName);

// 3. ë¹ˆ ì •ì˜ ì •ë³´ ì¡°íšŒ
BeanDefinition beanDefinition = ac.getBeanDefinition(beanName);
```

### ë¹ˆ ì¡°íšŒ í”„ë¡œì„¸ìŠ¤

```mermaid
sequenceDiagram
    participant Code as ì‚¬ìš©ì ì½”ë“œ
    participant AC as ApplicationContext
    participant Store as ë¹ˆ ì €ì¥ì†Œ

    Code->>AC: getBeanDefinitionNames()
    AC->>Store: ëª¨ë“  ë¹ˆ ì´ë¦„ ìš”ì²­
    Store->>AC: String[] ë°˜í™˜
    AC->>Code: ë¹ˆ ì´ë¦„ ë°°ì—´ ë°˜í™˜

    loop ê° ë¹ˆ ì´ë¦„
        Code->>AC: getBean(beanName)
        AC->>Store: ë¹ˆ ì¡°íšŒ
        Store->>AC: ë¹ˆ ê°ì²´ ë°˜í™˜
        AC->>Code: ë¹ˆ ê°ì²´ ë°˜í™˜
    end
```

### ëª¨ë“  ë¹ˆ ì¶œë ¥ ì˜ˆì œ

```java
package hello.core.beanfind;

import hello.core.AppConfig;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.config.BeanDefinition;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

public class ApplicationContextInfoTest {

    AnnotationConfigApplicationContext ac =
        new AnnotationConfigApplicationContext(AppConfig.class);

    @Test
    @DisplayName("ëª¨ë“  ë¹ˆ ì¶œë ¥í•˜ê¸°")
    void findAllBean() {
        String[] beanDefinitionNames = ac.getBeanDefinitionNames();

        for (String beanDefinitionName : beanDefinitionNames) {
            Object bean = ac.getBean(beanDefinitionName);
            System.out.println("name = " + beanDefinitionName +
                             ", object = " + bean);
        }
    }
}
```

**ì‹¤í–‰ ê²°ê³¼:**
```
name = org.springframework.context.annotation.internalConfigurationAnnotationProcessor,
object = org.springframework.context.annotation.ConfigurationClassPostProcessor@...

name = org.springframework.context.annotation.internalAutowiredAnnotationProcessor,
object = org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor@...

name = org.springframework.context.event.internalEventListenerProcessor,
object = org.springframework.context.event.EventListenerMethodProcessor@...

name = org.springframework.context.event.internalEventListenerFactory,
object = org.springframework.context.event.DefaultEventListenerFactory@...

name = appConfig, object = hello.core.AppConfig$$SpringCGLIB$$0@...

name = memberService, object = hello.core.member.MemberServiceImpl@...

name = memberRepository, object = hello.core.member.MemoryMemberRepository@...

name = orderService, object = hello.core.order.OrderServiceImpl@...

name = discountPolicy, object = hello.core.discount.RateDiscountPolicy@...
```

---

## ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆë§Œ ì¡°íšŒí•˜ê¸°

### ë¹ˆì˜ ì¢…ë¥˜

ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡ë˜ëŠ” ë¹ˆì€ í¬ê²Œ ë‘ ê°€ì§€ë¡œ ë¶„ë¥˜ë©ë‹ˆë‹¤:

```mermaid
graph TB
    A[ìŠ¤í”„ë§ ë¹ˆ] --> B[ìŠ¤í”„ë§ ë‚´ë¶€ ë¹ˆ]
    A --> C[ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ]

    B --> D[ROLE_INFRASTRUCTURE]
    C --> E[ROLE_APPLICATION]

    D --> F[ìŠ¤í”„ë§ì´ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¹ˆ]
    E --> G[ì‚¬ìš©ìê°€ ì •ì˜í•œ ë¹ˆ]

    style E fill:#9f9,stroke:#333
    style C fill:#9f9,stroke:#333
```

### BeanDefinitionì˜ Role

| Role | ìƒìˆ˜ | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|------|
| **ROLE_APPLICATION** | 0 | ì‚¬ìš©ìê°€ ì •ì˜í•œ ë¹ˆ | memberService, orderService |
| **ROLE_SUPPORT** | 1 | ë³µí•©ì ì¸ ë¹ˆì˜ ë‚´ë¶€ êµ¬ì„± ë¹ˆ | - |
| **ROLE_INFRASTRUCTURE** | 2 | ìŠ¤í”„ë§ì´ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¹ˆ | ConfigurationClassPostProcessor |

### ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆë§Œ í•„í„°ë§í•˜ê¸°

```java
@Test
@DisplayName("ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ ì¶œë ¥í•˜ê¸°")
void findApplicationBean() {
    String[] beanDefinitionNames = ac.getBeanDefinitionNames();

    for (String beanDefinitionName : beanDefinitionNames) {
        BeanDefinition beanDefinition =
            ac.getBeanDefinition(beanDefinitionName);

        // ROLE_APPLICATION: ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ìê°€ ì •ì˜í•œ ë¹ˆ
        // ROLE_INFRASTRUCTURE: ìŠ¤í”„ë§ì´ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¹ˆ
        if (beanDefinition.getRole() == BeanDefinition.ROLE_APPLICATION) {
            Object bean = ac.getBean(beanDefinitionName);
            System.out.println("name = " + beanDefinitionName +
                             ", object = " + bean);
        }
    }
}
```

**ì‹¤í–‰ ê²°ê³¼:**
```
name = appConfig, object = hello.core.AppConfig$$SpringCGLIB$$0@...
name = memberService, object = hello.core.member.MemberServiceImpl@...
name = memberRepository, object = hello.core.member.MemoryMemberRepository@...
name = orderService, object = hello.core.order.OrderServiceImpl@...
name = discountPolicy, object = hello.core.discount.RateDiscountPolicy@...
```

---

## BeanDefinitionì˜ Role

### BeanDefinitionì´ë€?

**BeanDefinition**ì€ ìŠ¤í”„ë§ ë¹ˆì˜ ë©”íƒ€ë°ì´í„° ì •ë³´ë¥¼ ë‹´ê³  ìˆëŠ” ì¸í„°í˜ì´ìŠ¤ì…ë‹ˆë‹¤.

```mermaid
graph TB
    A[BeanDefinition] --> B[ë¹ˆ ì´ë¦„]
    A --> C[ë¹ˆ í´ë˜ìŠ¤ íƒ€ì…]
    A --> D[ìŠ¤ì½”í”„]
    A --> E[ìƒì„±ì ì¸ì]
    A --> F[í”„ë¡œí¼í‹°]
    A --> G[ì´ˆê¸°í™” ë©”ì„œë“œ]
    A --> H[ì†Œë©¸ ë©”ì„œë“œ]
    A --> I[Role]

    style I fill:#ff9,stroke:#333
```

### Roleì˜ í™œìš©

```java
public class BeanRoleExample {

    public static void main(String[] args) {
        AnnotationConfigApplicationContext ac =
            new AnnotationConfigApplicationContext(AppConfig.class);

        String[] beanNames = ac.getBeanDefinitionNames();

        // ì¹´í…Œê³ ë¦¬ë³„ ë¹ˆ ê°œìˆ˜ ì„¸ê¸°
        int applicationBeanCount = 0;
        int infrastructureBeanCount = 0;
        int supportBeanCount = 0;

        for (String beanName : beanNames) {
            BeanDefinition bd = ac.getBeanDefinition(beanName);

            switch (bd.getRole()) {
                case BeanDefinition.ROLE_APPLICATION:
                    applicationBeanCount++;
                    break;
                case BeanDefinition.ROLE_INFRASTRUCTURE:
                    infrastructureBeanCount++;
                    break;
                case BeanDefinition.ROLE_SUPPORT:
                    supportBeanCount++;
                    break;
            }
        }

        System.out.println("ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ: " + applicationBeanCount);
        System.out.println("ì¸í”„ë¼ ë¹ˆ: " + infrastructureBeanCount);
        System.out.println("ì„œí¬íŠ¸ ë¹ˆ: " + supportBeanCount);
    }
}
```

**ì¶œë ¥ ê²°ê³¼:**
```
ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ: 5
ì¸í”„ë¼ ë¹ˆ: 4
ì„œí¬íŠ¸ ë¹ˆ: 0
```

---

## ì‹¤ìŠµ ì½”ë“œ

### ì™„ì „í•œ í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤

```java
package hello.core.beanfind;

import hello.core.AppConfig;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.config.BeanDefinition;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

import static org.assertj.core.api.Assertions.*;

class ApplicationContextInfoTest {

    AnnotationConfigApplicationContext ac =
        new AnnotationConfigApplicationContext(AppConfig.class);

    @Test
    @DisplayName("ëª¨ë“  ë¹ˆ ì¶œë ¥í•˜ê¸°")
    void findAllBean() {
        String[] beanDefinitionNames = ac.getBeanDefinitionNames();

        System.out.println("=== ëª¨ë“  ë¹ˆ ëª©ë¡ ===");
        for (String beanDefinitionName : beanDefinitionNames) {
            Object bean = ac.getBean(beanDefinitionName);
            System.out.println("name = " + beanDefinitionName +
                             ", object = " + bean);
        }

        // ê²€ì¦
        assertThat(beanDefinitionNames.length).isGreaterThan(0);
    }

    @Test
    @DisplayName("ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ ì¶œë ¥í•˜ê¸°")
    void findApplicationBean() {
        String[] beanDefinitionNames = ac.getBeanDefinitionNames();

        System.out.println("=== ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ ëª©ë¡ ===");
        int count = 0;

        for (String beanDefinitionName : beanDefinitionNames) {
            BeanDefinition beanDefinition =
                ac.getBeanDefinition(beanDefinitionName);

            if (beanDefinition.getRole() == BeanDefinition.ROLE_APPLICATION) {
                Object bean = ac.getBean(beanDefinitionName);
                System.out.println("name = " + beanDefinitionName +
                                 ", object = " + bean);
                count++;
            }
        }

        System.out.println("ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ ê°œìˆ˜: " + count);

        // ê²€ì¦: AppConfigì—ì„œ ì •ì˜í•œ ë¹ˆì€ 5ê°œ
        assertThat(count).isEqualTo(5);
    }

    @Test
    @DisplayName("ìŠ¤í”„ë§ ë‚´ë¶€ ë¹ˆ ì¶œë ¥í•˜ê¸°")
    void findInfrastructureBean() {
        String[] beanDefinitionNames = ac.getBeanDefinitionNames();

        System.out.println("=== ìŠ¤í”„ë§ ë‚´ë¶€ ë¹ˆ ëª©ë¡ ===");
        int count = 0;

        for (String beanDefinitionName : beanDefinitionNames) {
            BeanDefinition beanDefinition =
                ac.getBeanDefinition(beanDefinitionName);

            if (beanDefinition.getRole() == BeanDefinition.ROLE_INFRASTRUCTURE) {
                Object bean = ac.getBean(beanDefinitionName);
                System.out.println("name = " + beanDefinitionName +
                                 ", object = " + bean);
                count++;
            }
        }

        System.out.println("ì´ ì¸í”„ë¼ ë¹ˆ ê°œìˆ˜: " + count);

        // ê²€ì¦
        assertThat(count).isGreaterThan(0);
    }

    @Test
    @DisplayName("ë¹ˆ ê°œìˆ˜ í†µê³„")
    void beanStatistics() {
        String[] beanDefinitionNames = ac.getBeanDefinitionNames();

        int totalCount = beanDefinitionNames.length;
        int appCount = 0;
        int infraCount = 0;

        for (String beanName : beanDefinitionNames) {
            BeanDefinition bd = ac.getBeanDefinition(beanName);
            if (bd.getRole() == BeanDefinition.ROLE_APPLICATION) {
                appCount++;
            } else if (bd.getRole() == BeanDefinition.ROLE_INFRASTRUCTURE) {
                infraCount++;
            }
        }

        System.out.println("=== ë¹ˆ í†µê³„ ===");
        System.out.println("ì „ì²´ ë¹ˆ ê°œìˆ˜: " + totalCount);
        System.out.println("ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ: " + appCount);
        System.out.println("ì¸í”„ë¼ ë¹ˆ: " + infraCount);
        System.out.println("ê¸°íƒ€: " + (totalCount - appCount - infraCount));

        // ê²€ì¦
        assertThat(totalCount).isEqualTo(appCount + infraCount);
    }
}
```

### ë¹ˆ ì •ë³´ ìƒì„¸ ì¶œë ¥

```java
@Test
@DisplayName("ë¹ˆ ìƒì„¸ ì •ë³´ ì¶œë ¥")
void beanDetailInfo() {
    String[] beanDefinitionNames = ac.getBeanDefinitionNames();

    for (String beanName : beanDefinitionNames) {
        BeanDefinition bd = ac.getBeanDefinition(beanName);

        if (bd.getRole() == BeanDefinition.ROLE_APPLICATION) {
            System.out.println("\n=== ë¹ˆ ì´ë¦„: " + beanName + " ===");
            System.out.println("í´ë˜ìŠ¤: " + bd.getBeanClassName());
            System.out.println("ìŠ¤ì½”í”„: " + bd.getScope());
            System.out.println("ì¶”ìƒ ë¹ˆ: " + bd.isAbstract());
            System.out.println("ì§€ì—° ì´ˆê¸°í™”: " + bd.isLazyInit());
            System.out.println("Role: " + bd.getRole());
        }
    }
}
```

**ì¶œë ¥ ì˜ˆì‹œ:**
```
=== ë¹ˆ ì´ë¦„: memberService ===
í´ë˜ìŠ¤: null
ìŠ¤ì½”í”„:
ì¶”ìƒ ë¹ˆ: false
ì§€ì—° ì´ˆê¸°í™”: false
Role: 0

=== ë¹ˆ ì´ë¦„: memberRepository ===
í´ë˜ìŠ¤: null
ìŠ¤ì½”í”„:
ì¶”ìƒ ë¹ˆ: false
ì§€ì—° ì´ˆê¸°í™”: false
Role: 0
```

---

## í•µì‹¬ ì •ë¦¬

### 1. ë¹ˆ ì¡°íšŒ í•µì‹¬ ë©”ì„œë“œ

```java
// ëª¨ë“  ë¹ˆ ì´ë¦„ ì¡°íšŒ
String[] beanNames = ac.getBeanDefinitionNames();

// ë¹ˆ ì´ë¦„ìœ¼ë¡œ ê°ì²´ ì¡°íšŒ
Object bean = ac.getBean("ë¹ˆì´ë¦„");

// ë¹ˆ ì •ì˜ ì •ë³´ ì¡°íšŒ
BeanDefinition bd = ac.getBeanDefinition("ë¹ˆì´ë¦„");

// Role í™•ì¸
int role = bd.getRole();
```

### 2. ë¹ˆ ë¶„ë¥˜ ê¸°ì¤€

```mermaid
graph LR
    A[ìŠ¤í”„ë§ ë¹ˆ] --> B{Role ì²´í¬}
    B -->|ROLE_APPLICATION| C[ì‚¬ìš©ì ì •ì˜ ë¹ˆ]
    B -->|ROLE_INFRASTRUCTURE| D[ìŠ¤í”„ë§ ë‚´ë¶€ ë¹ˆ]
    B -->|ROLE_SUPPORT| E[ë³µí•© ë¹ˆ]

    style C fill:#9f9,stroke:#333
```

### 3. ì‹¤ë¬´ í™œìš© íŒ¨í„´

**ë””ë²„ê¹… ì‹œ:**
```java
// ëª¨ë“  ë¹ˆ ì¶œë ¥
ac.getBeanDefinitionNames();
```

**í…ŒìŠ¤íŠ¸ ì‹œ:**
```java
// íŠ¹ì • ë¹ˆ ì¡´ì¬ í™•ì¸
assertThat(ac.containsBean("memberService")).isTrue();

// ë¹ˆ ê°œìˆ˜ í™•ì¸
assertThat(ac.getBeanDefinitionCount()).isGreaterThan(0);
```

**ë™ì  ì²˜ë¦¬ ì‹œ:**
```java
// íŠ¹ì • íƒ€ì…ì˜ ëª¨ë“  ë¹ˆ ì¡°íšŒ
Map<String, MemberRepository> beans =
    ac.getBeansOfType(MemberRepository.class);
```

### 4. ì£¼ì˜ì‚¬í•­

**getBeanDefinitionNames()ì˜ íŠ¹ì§•:**
- ëª¨ë“  ë¹ˆì˜ ì´ë¦„ì„ ë°°ì—´ë¡œ ë°˜í™˜
- ìŠ¤í”„ë§ ë‚´ë¶€ ë¹ˆë„ í¬í•¨
- ìˆœì„œëŠ” ë³´ì¥ë˜ì§€ ì•ŠìŒ

**Role í•„í„°ë§ í•„ìš”ì„±:**
```java
// âŒ ëª¨ë“  ë¹ˆ ì²˜ë¦¬ (ë¹„íš¨ìœ¨)
for (String name : ac.getBeanDefinitionNames()) {
    // ìŠ¤í”„ë§ ë‚´ë¶€ ë¹ˆë„ ì²˜ë¦¬ë¨
}

// âœ… ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆë§Œ ì²˜ë¦¬ (íš¨ìœ¨ì )
for (String name : ac.getBeanDefinitionNames()) {
    BeanDefinition bd = ac.getBeanDefinition(name);
    if (bd.getRole() == BeanDefinition.ROLE_APPLICATION) {
        // ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆë§Œ ì²˜ë¦¬
    }
}
```

### 5. ë¹ˆ ì¡°íšŒ ì²´ê³„

```mermaid
graph TB
    A[ApplicationContext] --> B[getBeanDefinitionNames]
    A --> C[getBean]
    A --> D[getBeanDefinition]

    B --> E[ëª¨ë“  ë¹ˆ ì´ë¦„ ë°°ì—´]
    C --> F[íŠ¹ì • ë¹ˆ ê°ì²´]
    D --> G[ë¹ˆ ë©”íƒ€ì •ë³´]

    G --> H[getRole]
    H --> I{Role ë¶„ë¥˜}
    I -->|0| J[ROLE_APPLICATION]
    I -->|1| K[ROLE_SUPPORT]
    I -->|2| L[ROLE_INFRASTRUCTURE]
```

### 6. ì‹¤ë¬´ íŒ

**ë¡œê¹…ì— í™œìš©:**
```java
@Component
public class BeanLogger {

    @PostConstruct
    public void logBeans() {
        ApplicationContext ac = ... // ì£¼ì…ë°›ìŒ

        log.info("=== ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ ëª©ë¡ ===");
        for (String name : ac.getBeanDefinitionNames()) {
            BeanDefinition bd = ac.getBeanDefinition(name);
            if (bd.getRole() == BeanDefinition.ROLE_APPLICATION) {
                log.info("Bean: {}", name);
            }
        }
    }
}
```

**í…ŒìŠ¤íŠ¸ ìœ í‹¸ë¦¬í‹°:**
```java
public class BeanTestUtils {

    public static int countApplicationBeans(ApplicationContext ac) {
        int count = 0;
        for (String name : ac.getBeanDefinitionNames()) {
            BeanDefinition bd = ac.getBeanDefinition(name);
            if (bd.getRole() == BeanDefinition.ROLE_APPLICATION) {
                count++;
            }
        }
        return count;
    }

    public static List<String> getApplicationBeanNames(ApplicationContext ac) {
        List<String> result = new ArrayList<>();
        for (String name : ac.getBeanDefinitionNames()) {
            BeanDefinition bd = ac.getBeanDefinition(name);
            if (bd.getRole() == BeanDefinition.ROLE_APPLICATION) {
                result.add(name);
            }
        }
        return result;
    }
}
```

---

## ğŸ’¡ ì‹¬í™” ë‚´ìš©

<details>
<summary>ë” ì•Œì•„ë³´ê¸°</summary>

### ë‚´ë¶€ ë™ì‘ ì›ë¦¬

#### BeanDefinitionRegistryì˜ ì—­í• 
ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ë‚´ë¶€ì ìœ¼ë¡œ `BeanDefinitionRegistry`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹ˆ ì •ì˜ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.

```java
public interface BeanDefinitionRegistry {
    void registerBeanDefinition(String beanName, BeanDefinition beanDefinition);
    void removeBeanDefinition(String beanName);
    BeanDefinition getBeanDefinition(String beanName);
    boolean containsBeanDefinition(String beanName);
    String[] getBeanDefinitionNames();
    int getBeanDefinitionCount();
}
```

#### ë¹ˆ ì €ì¥ì†Œ ë‚´ë¶€ êµ¬ì¡°
```java
// ì‹¤ì œ êµ¬í˜„ (ê°„ëµí™”)
public class DefaultListableBeanFactory {
    // ë¹ˆ ì •ì˜ ì •ë³´ ì €ì¥
    private final Map<String, BeanDefinition> beanDefinitionMap =
        new ConcurrentHashMap<>(256);

    // ë¹ˆ ì •ì˜ ì´ë¦„ ëª©ë¡ (ë“±ë¡ ìˆœì„œ ìœ ì§€)
    private volatile List<String> beanDefinitionNames =
        new ArrayList<>(256);

    // ë¹ˆ ì¸ìŠ¤í„´ìŠ¤ ìºì‹œ (ì‹±ê¸€í†¤)
    private final Map<String, Object> singletonObjects =
        new ConcurrentHashMap<>(256);
}
```

### ì‹¤ë¬´ ì ìš© ì‚¬ë¡€

#### 1. ëŸ°íƒ€ì„ ë¹ˆ ì¡°íšŒ ë° ë™ì  ì²˜ë¦¬
```java
@Component
public class DynamicBeanProcessor {

    @Autowired
    private ApplicationContext applicationContext;

    public void processAllRepositories() {
        // ëª¨ë“  Repository íƒ€ì… ë¹ˆ ì¡°íšŒ
        Map<String, Object> repositories =
            applicationContext.getBeansWithAnnotation(Repository.class);

        repositories.forEach((name, bean) -> {
            System.out.println("Repository: " + name);
            // ë™ì  ì²˜ë¦¬ ë¡œì§
        });
    }

    public void findServicesByPattern(String pattern) {
        String[] allBeanNames = applicationContext.getBeanDefinitionNames();

        for (String beanName : allBeanNames) {
            if (beanName.endsWith(pattern)) {
                Object bean = applicationContext.getBean(beanName);
                // íŒ¨í„´ì— ë§ëŠ” ë¹ˆ ì²˜ë¦¬
            }
        }
    }
}
```

#### 2. ë¹ˆ í†µê³„ ë° ëª¨ë‹ˆí„°ë§
```java
@Component
public class BeanMonitor {

    @Autowired
    private ApplicationContext applicationContext;

    @EventListener(ContextRefreshedEvent.class)
    public void onApplicationStart() {
        printBeanStatistics();
    }

    private void printBeanStatistics() {
        String[] beanNames = applicationContext.getBeanDefinitionNames();

        int applicationBeans = 0;
        int infrastructureBeans = 0;

        for (String beanName : beanNames) {
            BeanDefinition bd =
                ((ConfigurableApplicationContext) applicationContext)
                    .getBeanFactory()
                    .getBeanDefinition(beanName);

            if (bd.getRole() == BeanDefinition.ROLE_APPLICATION) {
                applicationBeans++;
            } else {
                infrastructureBeans++;
            }
        }

        log.info("=== Bean Statistics ===");
        log.info("Total Beans: {}", beanNames.length);
        log.info("Application Beans: {}", applicationBeans);
        log.info("Infrastructure Beans: {}", infrastructureBeans);
    }
}
```

#### 3. ì»¤ìŠ¤í…€ ë¹ˆ ìŠ¤ìºë„ˆ
```java
@Component
public class CustomBeanScanner {

    @Autowired
    private ApplicationContext applicationContext;

    // íŠ¹ì • ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ëª¨ë“  ë¹ˆ ì¡°íšŒ
    public <T> List<T> findBeansOfInterface(Class<T> interfaceClass) {
        Map<String, T> beans =
            applicationContext.getBeansOfType(interfaceClass);
        return new ArrayList<>(beans.values());
    }

    // íŠ¹ì • ì• ë…¸í…Œì´ì…˜ì´ ë¶™ì€ ë¹ˆ ì¡°íšŒ
    public List<Object> findBeansWithAnnotation(
            Class<? extends Annotation> annotationType) {
        Map<String, Object> beans =
            applicationContext.getBeansWithAnnotation(annotationType);
        return new ArrayList<>(beans.values());
    }

    // ë¹ˆ ì´ë¦„ìœ¼ë¡œ í•„í„°ë§
    public List<String> findBeanNamesByPrefix(String prefix) {
        String[] allBeanNames = applicationContext.getBeanDefinitionNames();
        return Arrays.stream(allBeanNames)
                .filter(name -> name.startsWith(prefix))
                .collect(Collectors.toList());
    }
}
```

### Anti-pattern ë° ì£¼ì˜ì‚¬í•­

**âŒ ì˜ëª»ëœ ì˜ˆ: ëª¨ë“  ë¹ˆì„ ìˆœíšŒí•˜ë©° ì²˜ë¦¬**
```java
// ì„±ëŠ¥ ë¬¸ì œ ë°œìƒ
@Component
public class BadBeanProcessor {

    @Autowired
    private ApplicationContext applicationContext;

    public void processEveryRequest() {
        // ë§¤ ìš”ì²­ë§ˆë‹¤ ëª¨ë“  ë¹ˆ ì¡°íšŒ - ë¹„íš¨ìœ¨ì !
        String[] beanNames = applicationContext.getBeanDefinitionNames();
        for (String beanName : beanNames) {
            Object bean = applicationContext.getBean(beanName);
            // ì²˜ë¦¬ ë¡œì§
        }
    }
}
```

**âœ… ì˜¬ë°”ë¥¸ ì˜ˆ: ì´ˆê¸°í™” ì‹œì ì— í•œ ë²ˆë§Œ ì¡°íšŒ**
```java
@Component
public class GoodBeanProcessor implements InitializingBean {

    @Autowired
    private ApplicationContext applicationContext;

    private List<String> cachedBeanNames;

    @Override
    public void afterPropertiesSet() {
        // ì´ˆê¸°í™” ì‹œì ì— í•œ ë²ˆë§Œ ì¡°íšŒí•˜ì—¬ ìºì‹±
        cachedBeanNames = Arrays.asList(
            applicationContext.getBeanDefinitionNames()
        );
    }

    public void processRequest() {
        // ìºì‹±ëœ ë°ì´í„° ì‚¬ìš©
        cachedBeanNames.forEach(name -> {
            // ì²˜ë¦¬ ë¡œì§
        });
    }
}
```

**âŒ ì˜ëª»ëœ ì˜ˆ: í”„ë¡œë•ì…˜ì—ì„œ ë¹ˆ ì •ë³´ ë…¸ì¶œ**
```java
// ë³´ì•ˆ ë¬¸ì œ
@RestController
public class BeanInfoController {

    @Autowired
    private ApplicationContext applicationContext;

    @GetMapping("/beans")
    public List<String> getAllBeans() {
        // í”„ë¡œë•ì…˜ì—ì„œ ëª¨ë“  ë¹ˆ ì •ë³´ ë…¸ì¶œ - ìœ„í—˜!
        return Arrays.asList(applicationContext.getBeanDefinitionNames());
    }
}
```

**âœ… ì˜¬ë°”ë¥¸ ì˜ˆ: ê°œë°œ í™˜ê²½ì—ì„œë§Œ ì‚¬ìš©**
```java
@RestController
@Profile("dev")  // ê°œë°œ í™˜ê²½ì—ì„œë§Œ í™œì„±í™”
public class BeanInfoController {

    @Autowired
    private ApplicationContext applicationContext;

    @GetMapping("/actuator/beans")
    public Map<String, Object> getBeanInfo() {
        // ì ì ˆí•œ ê¶Œí•œ ê²€ì‚¬ í›„ ì œê³µ
        return Map.of(
            "count", applicationContext.getBeanDefinitionNames().length,
            "timestamp", System.currentTimeMillis()
        );
    }
}
```

</details>

---

## ë©´ì ‘ ì§ˆë¬¸

### ì´ˆê¸‰ ê°œë°œì (Junior)

**Q1. getBeanDefinitionNames() ë©”ì„œë“œëŠ” ì–´ë–¤ ë¹ˆë“¤ì„ ë°˜í™˜í•˜ë‚˜ìš”?**
<details>
<summary>ë‹µì•ˆ ë³´ê¸°</summary>

`getBeanDefinitionNames()` ë©”ì„œë“œëŠ” **ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ëª¨ë“  ë¹ˆì˜ ì´ë¦„**ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

**í¬í•¨ë˜ëŠ” ë¹ˆ:**
1. **ì‚¬ìš©ìê°€ ì •ì˜í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ**
   - @Beanìœ¼ë¡œ ë“±ë¡í•œ ë¹ˆ
   - @Component, @Service ë“±ìœ¼ë¡œ ìë™ ë“±ë¡ëœ ë¹ˆ

2. **ìŠ¤í”„ë§ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì¸í”„ë¼ ë¹ˆ**
   - ConfigurationClassPostProcessor
   - AutowiredAnnotationBeanPostProcessor
   - EventListenerMethodProcessor ë“±

**ì˜ˆì‹œ:**
```java
ApplicationContext ac =
    new AnnotationConfigApplicationContext(AppConfig.class);

String[] beanNames = ac.getBeanDefinitionNames();
// ì¶œë ¥: ["..internalConfigurationAnnotationProcessor",
//       "appConfig", "memberService", "memberRepository", ...]
```

**íŠ¹ì§•:**
- ìˆœì„œëŠ” ë³´ì¥ë˜ì§€ ì•ŠìŒ
- ëª¨ë“  ë¹ˆ ì •ì˜ê°€ í¬í•¨ë¨ (ì§€ì—° ì´ˆê¸°í™” ë¹ˆ í¬í•¨)
- ë¹ˆ ê°ì²´ê°€ ì•„ë‹Œ ë¹ˆ ì´ë¦„(String)ë§Œ ë°˜í™˜

</details>

**Q2. BeanDefinitionì˜ Roleì´ ë¬´ì—‡ì´ë©°, ì–´ë–¤ ê°’ë“¤ì´ ìˆë‚˜ìš”?**
<details>
<summary>ë‹µì•ˆ ë³´ê¸°</summary>

**BeanDefinitionì˜ Role:**
ë¹ˆì´ ì–´ë–¤ ëª©ì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì†ì„±ì…ë‹ˆë‹¤.

**Role ì¢…ë¥˜:**

1. **ROLE_APPLICATION (0)**
   - ì‚¬ìš©ìê°€ ì •ì˜í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ
   - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹´ë‹¹
   ```java
   @Bean
   public MemberService memberService() {
       return new MemberServiceImpl();
   }
   // Role: ROLE_APPLICATION
   ```

2. **ROLE_SUPPORT (1)**
   - ë³µí•©ì ì¸ ë¹ˆì˜ ë‚´ë¶€ êµ¬ì„± ë¹ˆ
   - ê±°ì˜ ì‚¬ìš©ë˜ì§€ ì•ŠìŒ

3. **ROLE_INFRASTRUCTURE (2)**
   - ìŠ¤í”„ë§ì´ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¹ˆ
   - í”„ë ˆì„ì›Œí¬ ë™ì‘ì— í•„ìš”
   ```java
   // ì˜ˆ: ConfigurationClassPostProcessor
   // Role: ROLE_INFRASTRUCTURE
   ```

**í™œìš© ì˜ˆì‹œ:**
```java
String[] beanNames = ac.getBeanDefinitionNames();

for (String beanName : beanNames) {
    BeanDefinition bd = ac.getBeanDefinition(beanName);

    if (bd.getRole() == BeanDefinition.ROLE_APPLICATION) {
        System.out.println("ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ: " + beanName);
    }
}
```

**ì‹¤ë¬´ í™œìš©:**
- ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆë§Œ í•„í„°ë§í•  ë•Œ ì‚¬ìš©
- ë¹ˆ í†µê³„ ë° ëª¨ë‹ˆí„°ë§
- ë””ë²„ê¹… ì‹œ ìŠ¤í”„ë§ ë‚´ë¶€ ë¹ˆ ì œì™¸

</details>

**Q3. ìŠ¤í”„ë§ ë‚´ë¶€ ë¹ˆê³¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆì„ êµ¬ë¶„í•˜ëŠ” ë°©ë²•ì€?**
<details>
<summary>ë‹µì•ˆ ë³´ê¸°</summary>

**êµ¬ë¶„ ë°©ë²•:**

BeanDefinitionì˜ `getRole()` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬ë¶„í•©ë‹ˆë‹¤.

```java
@Test
void separateBeansTest() {
    ApplicationContext ac =
        new AnnotationConfigApplicationContext(AppConfig.class);

    String[] beanNames = ac.getBeanDefinitionNames();

    List<String> applicationBeans = new ArrayList<>();
    List<String> infrastructureBeans = new ArrayList<>();

    for (String beanName : beanNames) {
        BeanDefinition bd = ac.getBeanDefinition(beanName);

        if (bd.getRole() == BeanDefinition.ROLE_APPLICATION) {
            applicationBeans.add(beanName);
        } else if (bd.getRole() == BeanDefinition.ROLE_INFRASTRUCTURE) {
            infrastructureBeans.add(beanName);
        }
    }

    System.out.println("ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ: " + applicationBeans);
    System.out.println("ì¸í”„ë¼ ë¹ˆ: " + infrastructureBeans);
}
```

**ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ íŠ¹ì§•:**
- ì‚¬ìš©ìê°€ @Bean, @Component ë“±ìœ¼ë¡œ ì •ì˜
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë‹´ë‹¹
- Role = 0 (ROLE_APPLICATION)

**ìŠ¤í”„ë§ ë‚´ë¶€ ë¹ˆ íŠ¹ì§•:**
- ìŠ¤í”„ë§ì´ ìë™ìœ¼ë¡œ ë“±ë¡
- í”„ë ˆì„ì›Œí¬ ë™ì‘ì— í•„ìš”
- Role = 2 (ROLE_INFRASTRUCTURE)
- ì´ë¦„ì´ "internal"ë¡œ ì‹œì‘í•˜ëŠ” ê²½ìš°ê°€ ë§ìŒ

**ì‹¤ë¬´ í™œìš©:**
```java
// ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆë§Œ ì¡°íšŒí•˜ëŠ” ìœ í‹¸ë¦¬í‹°
public List<String> getApplicationBeanNames(ApplicationContext ac) {
    return Arrays.stream(ac.getBeanDefinitionNames())
            .filter(name -> {
                BeanDefinition bd = ac.getBeanDefinition(name);
                return bd.getRole() == BeanDefinition.ROLE_APPLICATION;
            })
            .collect(Collectors.toList());
}
```

</details>

### ì¤‘ê¸‰ ê°œë°œì (Mid-Level)

**Q4. getBeansOfType()ê³¼ getBeanDefinitionNames()ì˜ ì°¨ì´ì ê³¼ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì„¤ëª…í•´ì£¼ì„¸ìš”.**
<details>
<summary>ë‹µì•ˆ ë³´ê¸°</summary>

**ì£¼ìš” ì°¨ì´ì :**

| êµ¬ë¶„ | getBeanDefinitionNames() | getBeansOfType() |
|------|-------------------------|------------------|
| **ë°˜í™˜ íƒ€ì…** | String[] (ë¹ˆ ì´ë¦„) | Map<String, T> (ì´ë¦„+ê°ì²´) |
| **í•„í„°ë§** | ëª¨ë“  ë¹ˆ | íŠ¹ì • íƒ€ì…ë§Œ |
| **ë¹ˆ ê°ì²´** | í¬í•¨ ì•ˆí•¨ | í¬í•¨ |
| **ì„±ëŠ¥** | ë¹ˆ ì´ë¦„ë§Œ ì¡°íšŒ (ë¹ ë¦„) | ë¹ˆ ê°ì²´ ìƒì„± í•„ìš” (ëŠë¦¼) |

**getBeanDefinitionNames() ì‚¬ìš©:**
```java
// ì‹œë‚˜ë¦¬ì˜¤: ë¹ˆ ì´ë¦„ ëª©ë¡ë§Œ í•„ìš”í•œ ê²½ìš°
String[] beanNames = ac.getBeanDefinitionNames();

// ìš©ë„
// 1. ë¹ˆ ê°œìˆ˜ í™•ì¸
System.out.println("ì´ ë¹ˆ ê°œìˆ˜: " + beanNames.length);

// 2. ë¹ˆ ì´ë¦„ íŒ¨í„´ ê²€ìƒ‰
List<String> serviceBeans = Arrays.stream(beanNames)
    .filter(name -> name.endsWith("Service"))
    .collect(Collectors.toList());

// 3. ë¹ˆ ëª©ë¡ ë¡œê¹…
Arrays.stream(beanNames).forEach(System.out::println);
```

**getBeansOfType() ì‚¬ìš©:**
```java
// ì‹œë‚˜ë¦¬ì˜¤: íŠ¹ì • íƒ€ì…ì˜ ë¹ˆ ê°ì²´ê°€ í•„ìš”í•œ ê²½ìš°
Map<String, MemberRepository> repositories =
    ac.getBeansOfType(MemberRepository.class);

// ìš©ë„
// 1. íŠ¹ì • ì¸í„°í˜ì´ìŠ¤ì˜ ëª¨ë“  êµ¬í˜„ì²´ ì¡°íšŒ
repositories.values().forEach(repo -> {
    // ê° Repositoryë¡œ ì‘ì—… ìˆ˜í–‰
    repo.save(member);
});

// 2. ì „ëµ íŒ¨í„´ êµ¬í˜„
public class MultiRepositoryService {
    private final Map<String, MemberRepository> repositories;

    public MultiRepositoryService(ApplicationContext ac) {
        this.repositories = ac.getBeansOfType(MemberRepository.class);
    }

    public void saveToAll(Member member) {
        repositories.values().forEach(repo -> repo.save(member));
    }
}

// 3. í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ
Map<String, PaymentProcessor> processors =
    ac.getBeansOfType(PaymentProcessor.class);
```

**ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­:**
```java
// âŒ ë¹„íš¨ìœ¨ì : ë§¤ë²ˆ ëª¨ë“  ë¹ˆ ê°ì²´ ìƒì„±
public void processRequest() {
    Map<String, MemberRepository> repos =
        ac.getBeansOfType(MemberRepository.class);
    // ì²˜ë¦¬...
}

// âœ… íš¨ìœ¨ì : ì´ˆê¸°í™” ì‹œ í•œ ë²ˆë§Œ ì¡°íšŒ
@Component
public class RepositoryManager implements InitializingBean {
    private Map<String, MemberRepository> repositories;

    @Override
    public void afterPropertiesSet() {
        this.repositories = ac.getBeansOfType(MemberRepository.class);
    }
}
```

**ì„ íƒ ê¸°ì¤€:**
- ë¹ˆ ì´ë¦„ë§Œ í•„ìš” â†’ `getBeanDefinitionNames()`
- ë¹ˆ ê°ì²´ê°€ í•„ìš” â†’ `getBeansOfType()`
- ì „ì²´ ë¹ˆ ëª©ë¡ â†’ `getBeanDefinitionNames()`
- íŠ¹ì • íƒ€ì…ë§Œ â†’ `getBeansOfType()`

</details>

**Q5. ë¹ˆ ì¡°íšŒ ì‹œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì„±ëŠ¥ ì´ìŠˆì™€ ìµœì í™” ë°©ë²•ì„ ì„¤ëª…í•´ì£¼ì„¸ìš”.**
<details>
<summary>ë‹µì•ˆ ë³´ê¸°</summary>

**ì„±ëŠ¥ ì´ìŠˆ:**

1. **ë°˜ë³µì ì¸ ë¹ˆ ì¡°íšŒ**
```java
// âŒ ë‚˜ìœ ì˜ˆ: ë§¤ ìš”ì²­ë§ˆë‹¤ ë¹ˆ ì¡°íšŒ
@RestController
public class OrderController {
    @Autowired
    private ApplicationContext ac;

    @GetMapping("/order")
    public Order createOrder() {
        // ë§¤ë²ˆ ì»¨í…Œì´ë„ˆì—ì„œ ë¹ˆ ì¡°íšŒ - ë¹„íš¨ìœ¨ì !
        MemberService memberService =
            ac.getBean("memberService", MemberService.class);
        return memberService.createOrder();
    }
}
```

2. **ë¶ˆí•„ìš”í•œ ì „ì²´ ë¹ˆ ìŠ¤ìº”**
```java
// âŒ ë‚˜ìœ ì˜ˆ: íŠ¹ì • ë¹ˆ í•˜ë‚˜ë§Œ í•„ìš”í•œë° ì „ì²´ ì¡°íšŒ
public MemberService findMemberService() {
    String[] allBeans = ac.getBeanDefinitionNames();
    for (String beanName : allBeans) {
        Object bean = ac.getBean(beanName);
        if (bean instanceof MemberService) {
            return (MemberService) bean;
        }
    }
    return null;
}
```

3. **íƒ€ì… ì¡°íšŒ ì‹œ ë¹ˆ ìƒì„± ì˜¤ë²„í—¤ë“œ**
```java
// âŒ ë‚˜ìœ ì˜ˆ: ì§€ì—° ì´ˆê¸°í™” ë¹ˆê¹Œì§€ ëª¨ë‘ ìƒì„±
Map<String, HeavyService> services =
    ac.getBeansOfType(HeavyService.class);
// ëª¨ë“  HeavyService ë¹ˆì´ ì¦‰ì‹œ ìƒì„±ë¨
```

**ìµœì í™” ë°©ë²•:**

**1. ì˜ì¡´ì„± ì£¼ì… í™œìš© (ê°€ì¥ ê¶Œì¥)**
```java
// âœ… ì¢‹ì€ ì˜ˆ: ìƒì„±ì ì£¼ì…
@RestController
public class OrderController {
    private final MemberService memberService;  // ìºì‹±ë¨

    @Autowired
    public OrderController(MemberService memberService) {
        this.memberService = memberService;
    }

    @GetMapping("/order")
    public Order createOrder() {
        return memberService.createOrder();  // ë¹ ë¦„!
    }
}
```

**2. ì´ˆê¸°í™” ì‹œì  ìºì‹±**
```java
// âœ… ì¢‹ì€ ì˜ˆ: ì´ˆê¸°í™” ì‹œ í•œ ë²ˆë§Œ ì¡°íšŒ
@Component
public class BeanCache implements InitializingBean {
    @Autowired
    private ApplicationContext ac;

    private List<String> applicationBeanNames;
    private Map<String, MemberRepository> repositories;

    @Override
    public void afterPropertiesSet() {
        // ì´ˆê¸°í™” ì‹œ í•œ ë²ˆë§Œ ì‹¤í–‰
        String[] allBeans = ac.getBeanDefinitionNames();

        applicationBeanNames = Arrays.stream(allBeans)
            .filter(name -> {
                BeanDefinition bd = ac.getBeanDefinition(name);
                return bd.getRole() == BeanDefinition.ROLE_APPLICATION;
            })
            .collect(Collectors.toList());

        repositories = ac.getBeansOfType(MemberRepository.class);
    }

    public List<String> getApplicationBeanNames() {
        return applicationBeanNames;  // ìºì‹±ëœ ë°ì´í„° ë°˜í™˜
    }
}
```

**3. ì§€ì—° ë¡œë”© í™œìš©**
```java
// âœ… ì¢‹ì€ ì˜ˆ: í•„ìš”í•  ë•Œë§Œ ì¡°íšŒ
@Component
public class ServiceLocator {
    @Autowired
    private ApplicationContext ac;

    private MemberService memberService;  // ì§€ì—° ë¡œë”©

    public MemberService getMemberService() {
        if (memberService == null) {
            memberService = ac.getBean(MemberService.class);
        }
        return memberService;
    }
}
```

**4. ë¹ˆ ì´ë¦„ìœ¼ë¡œ ì§ì ‘ ì¡°íšŒ**
```java
// âœ… ì¢‹ì€ ì˜ˆ: ì •í™•í•œ ë¹ˆ ì´ë¦„ìœ¼ë¡œ ì¡°íšŒ
MemberService service =
    ac.getBean("memberService", MemberService.class);
// ë¹ ë¥¸ Map lookup

// âŒ ë‚˜ìœ ì˜ˆ: íƒ€ì…ìœ¼ë¡œë§Œ ì¡°íšŒ í›„ í•„í„°ë§
Map<String, Object> allBeans = ac.getBeansOfType(Object.class);
// ëŠë¦° ì „ì²´ ìŠ¤ìº”
```

**ì„±ëŠ¥ ì¸¡ì • ì˜ˆì‹œ:**
```java
@Component
public class BeanQueryPerformanceTest {

    @Autowired
    private ApplicationContext ac;

    public void measurePerformance() {
        // ë°©ë²• 1: getBeanDefinitionNames()
        long start1 = System.nanoTime();
        String[] beanNames = ac.getBeanDefinitionNames();
        long end1 = System.nanoTime();
        System.out.println("getBeanDefinitionNames: " +
            (end1 - start1) + "ns");

        // ë°©ë²• 2: getBeansOfType()
        long start2 = System.nanoTime();
        Map<String, Object> beans = ac.getBeansOfType(Object.class);
        long end2 = System.nanoTime();
        System.out.println("getBeansOfType: " +
            (end2 - start2) + "ns");

        // getBeansOfTypeì´ í›¨ì”¬ ëŠë¦¼ (ë¹ˆ ê°ì²´ ìƒì„± í•„ìš”)
    }
}
```

**í•µì‹¬ ì›ì¹™:**
1. ê°€ëŠ¥í•˜ë©´ ì˜ì¡´ì„± ì£¼ì… ì‚¬ìš©
2. ëŸ°íƒ€ì„ ì¡°íšŒëŠ” ìµœì†Œí™”
3. í•„ìš”í•˜ë©´ ì´ˆê¸°í™” ì‹œì ì— ìºì‹±
4. ì „ì²´ ë¹ˆ ìŠ¤ìº” ì§€ì–‘

</details>

**Q6. í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ë¹ˆ ì •ë³´ë¥¼ ì•ˆì „í•˜ê²Œ ëª¨ë‹ˆí„°ë§í•˜ëŠ” ë°©ë²•ì€?**
<details>
<summary>ë‹µì•ˆ ë³´ê¸°</summary>

**í”„ë¡œë•ì…˜ í™˜ê²½ì˜ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­:**

**âŒ ìœ„í—˜í•œ ë°©ë²•:**
```java
// ëª¨ë“  ë¹ˆ ì •ë³´ ë…¸ì¶œ - ë³´ì•ˆ ìœ„í—˜!
@RestController
public class BeanInfoController {
    @Autowired
    private ApplicationContext ac;

    @GetMapping("/beans")
    public List<String> getAllBeans() {
        return Arrays.asList(ac.getBeanDefinitionNames());
    }
}
```

**âœ… ì•ˆì „í•œ ë°©ë²•:**

**1. Spring Boot Actuator ì‚¬ìš© (ê¶Œì¥)**
```yaml
# application.yml
management:
  endpoints:
    web:
      exposure:
        include: beans, health, info
  endpoint:
    beans:
      enabled: true

# ë³´ì•ˆ ì„¤ì •
spring:
  security:
    user:
      name: admin
      password: ${ACTUATOR_PASSWORD}

management:
  endpoints:
    web:
      base-path: /actuator
```

```java
// Actuator ì ‘ê·¼ ì œì–´
@Configuration
public class ActuatorSecurityConfig extends WebSecurityConfigurerAdapter {

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http
            .requestMatcher(EndpointRequest.toAnyEndpoint())
            .authorizeRequests()
                .anyRequest().hasRole("ACTUATOR_ADMIN")
            .and()
            .httpBasic();
    }
}
```

**2. í”„ë¡œíŒŒì¼ë³„ ë¶„ë¦¬**
```java
@RestController
@Profile("dev")  // ê°œë°œ í™˜ê²½ì—ì„œë§Œ í™œì„±í™”
public class BeanInfoController {

    @Autowired
    private ApplicationContext ac;

    @GetMapping("/dev/beans")
    public Map<String, Object> getBeanInfo() {
        String[] beanNames = ac.getBeanDefinitionNames();

        return Map.of(
            "totalCount", beanNames.length,
            "applicationBeans", getApplicationBeanCount(),
            "timestamp", System.currentTimeMillis()
        );
    }

    private int getApplicationBeanCount() {
        return (int) Arrays.stream(ac.getBeanDefinitionNames())
            .filter(name -> {
                BeanDefinition bd = ac.getBeanDefinition(name);
                return bd.getRole() == BeanDefinition.ROLE_APPLICATION;
            })
            .count();
    }
}
```

**3. ë¡œê¹… ê¸°ë°˜ ëª¨ë‹ˆí„°ë§**
```java
@Component
public class BeanMonitor {

    private static final Logger log =
        LoggerFactory.getLogger(BeanMonitor.class);

    @Autowired
    private ApplicationContext ac;

    @EventListener(ContextRefreshedEvent.class)
    public void onStartup() {
        if (log.isInfoEnabled()) {
            logBeanStatistics();
        }
    }

    private void logBeanStatistics() {
        String[] beanNames = ac.getBeanDefinitionNames();

        Map<String, Integer> stats = new HashMap<>();
        stats.put("total", beanNames.length);
        stats.put("application", countApplicationBeans());
        stats.put("infrastructure", countInfrastructureBeans());

        log.info("Bean Statistics: {}", stats);

        // ë¯¼ê° ì •ë³´ ì œì™¸í•˜ê³  ë¡œê¹…
        log.debug("Application Beans: {}",
            getApplicationBeanNames());
    }

    private int countApplicationBeans() {
        return (int) Arrays.stream(ac.getBeanDefinitionNames())
            .filter(name -> {
                BeanDefinition bd = ac.getBeanDefinition(name);
                return bd.getRole() == BeanDefinition.ROLE_APPLICATION;
            })
            .count();
    }
}
```

**4. ì»¤ìŠ¤í…€ í—¬ìŠ¤ ì²´í¬**
```java
@Component
public class BeanHealthIndicator implements HealthIndicator {

    @Autowired
    private ApplicationContext ac;

    @Override
    public Health health() {
        int beanCount = ac.getBeanDefinitionCount();
        int applicationBeanCount = countApplicationBeans();

        if (applicationBeanCount == 0) {
            return Health.down()
                .withDetail("reason", "No application beans found")
                .build();
        }

        return Health.up()
            .withDetail("totalBeans", beanCount)
            .withDetail("applicationBeans", applicationBeanCount)
            .build();
    }

    private int countApplicationBeans() {
        return (int) Arrays.stream(ac.getBeanDefinitionNames())
            .filter(name -> {
                BeanDefinition bd = ac.getBeanDefinition(name);
                return bd.getRole() == BeanDefinition.ROLE_APPLICATION;
            })
            .count();
    }
}
```

**5. ë©”íŠ¸ë¦­ ìˆ˜ì§‘**
```java
@Component
public class BeanMetrics {

    @Autowired
    private MeterRegistry meterRegistry;

    @Autowired
    private ApplicationContext ac;

    @PostConstruct
    public void registerMetrics() {
        Gauge.builder("spring.beans.total", ac,
                ctx -> ctx.getBeanDefinitionCount())
            .description("Total number of Spring beans")
            .register(meterRegistry);

        Gauge.builder("spring.beans.application", this,
                BeanMetrics::countApplicationBeans)
            .description("Number of application beans")
            .register(meterRegistry);
    }

    private double countApplicationBeans(BeanMetrics self) {
        return Arrays.stream(ac.getBeanDefinitionNames())
            .filter(name -> {
                BeanDefinition bd = ac.getBeanDefinition(name);
                return bd.getRole() == BeanDefinition.ROLE_APPLICATION;
            })
            .count();
    }
}
```

**í•µì‹¬ ì›ì¹™:**
1. í”„ë¡œë•ì…˜ì—ì„œëŠ” ìƒì„¸ ë¹ˆ ì •ë³´ ë…¸ì¶œ ê¸ˆì§€
2. í†µê³„ ì •ë³´ë§Œ ì œê³µ (ê°œìˆ˜, íƒ€ì… ë¶„í¬ ë“±)
3. ì ì ˆí•œ ì¸ì¦/ì¸ê°€ ì ìš©
4. í”„ë¡œíŒŒì¼ë¡œ í™˜ê²½ ë¶„ë¦¬
5. Actuator ì‚¬ìš© ì‹œ ì—”ë“œí¬ì¸íŠ¸ ë³´ì•ˆ ì„¤ì •

</details>

### ê³ ê¸‰ ê°œë°œì (Senior)

**Q7. ëŒ€ê·œëª¨ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ìˆ˜ì²œ ê°œì˜ ë¹ˆì´ ë“±ë¡ë  ë•Œ, ë¹ˆ ì¡°íšŒ ì„±ëŠ¥ì„ ìµœì í™”í•˜ëŠ” ì „ëµì„ ì„¤ëª…í•´ì£¼ì„¸ìš”.**
<details>
<summary>ë‹µì•ˆ ë³´ê¸°</summary>

**ëŒ€ê·œëª¨ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¹ˆ ê´€ë¦¬ ë¬¸ì œ:**

1. ë¹ˆ ê°œìˆ˜ ì¦ê°€ë¡œ ì¸í•œ ì»¨í…Œì´ë„ˆ ì´ˆê¸°í™” ì‹œê°„ ì¦ê°€
2. ëŸ°íƒ€ì„ ë¹ˆ ì¡°íšŒ ì˜¤ë²„í—¤ë“œ
3. ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¦ê°€

**ìµœì í™” ì „ëµ:**

**1. ë¹ˆ ìŠ¤ìº” ë²”ìœ„ ìµœì í™”**
```java
// âŒ ë‚˜ìœ ì˜ˆ: ë„ˆë¬´ ë„“ì€ ìŠ¤ìº” ë²”ìœ„
@SpringBootApplication
@ComponentScan(basePackages = "com")  // ì „ì²´ íŒ¨í‚¤ì§€ ìŠ¤ìº”
public class Application {
}

// âœ… ì¢‹ì€ ì˜ˆ: í•„ìš”í•œ íŒ¨í‚¤ì§€ë§Œ ìŠ¤ìº”
@SpringBootApplication
@ComponentScan(basePackages = {
    "com.example.service",
    "com.example.repository",
    "com.example.controller"
})
public class Application {
}
```

**2. ì§€ì—° ì´ˆê¸°í™” (Lazy Initialization)**
```java
// ìŠ¤í”„ë§ ë¶€íŠ¸ 2.2+
spring.main.lazy-initialization=true

// ë˜ëŠ” ê°œë³„ ë¹ˆì— ì ìš©
@Configuration
public class AppConfig {

    @Bean
    @Lazy  // ì‹¤ì œ ì‚¬ìš© ì‹œì ì— ë¹ˆ ìƒì„±
    public HeavyService heavyService() {
        return new HeavyService();
    }

    @Bean  // ìì£¼ ì‚¬ìš©í•˜ëŠ” ë¹ˆì€ ì¦‰ì‹œ ë¡œë”©
    public CriticalService criticalService() {
        return new CriticalService();
    }
}
```

**3. ë¹ˆ ì¡°íšŒ ìºì‹± ì „ëµ**
```java
@Component
public class OptimizedBeanLocator {

    @Autowired
    private ApplicationContext ac;

    // íƒ€ì…ë³„ ë¹ˆ ìºì‹œ
    private final ConcurrentHashMap<Class<?>, Object> beanCache =
        new ConcurrentHashMap<>();

    // íƒ€ì…ë³„ ë¹ˆ ëª©ë¡ ìºì‹œ
    private final ConcurrentHashMap<Class<?>, Map<String, ?>>
        beansOfTypeCache = new ConcurrentHashMap<>();

    @SuppressWarnings("unchecked")
    public <T> T getBean(Class<T> type) {
        return (T) beanCache.computeIfAbsent(type,
            t -> ac.getBean(t));
    }

    @SuppressWarnings("unchecked")
    public <T> Map<String, T> getBeansOfType(Class<T> type) {
        return (Map<String, T>) beansOfTypeCache.computeIfAbsent(type,
            t -> ac.getBeansOfType(type));
    }

    // ìºì‹œ ë¬´íš¨í™” (í•„ìš” ì‹œ)
    public void clearCache() {
        beanCache.clear();
        beansOfTypeCache.clear();
    }
}
```

**4. ë¹ˆ ì •ì˜ ì¸ë±ì‹±**
```java
@Component
public class BeanIndexer implements InitializingBean {

    @Autowired
    private ApplicationContext ac;

    // íƒ€ì…ë³„ ì¸ë±ìŠ¤
    private Map<Class<?>, List<String>> typeIndex = new HashMap<>();

    // ì• ë…¸í…Œì´ì…˜ë³„ ì¸ë±ìŠ¤
    private Map<Class<? extends Annotation>, List<String>>
        annotationIndex = new HashMap<>();

    @Override
    public void afterPropertiesSet() {
        buildIndexes();
    }

    private void buildIndexes() {
        String[] beanNames = ac.getBeanDefinitionNames();

        for (String beanName : beanNames) {
            BeanDefinition bd = ac.getBeanDefinition(beanName);

            if (bd.getRole() != BeanDefinition.ROLE_APPLICATION) {
                continue;
            }

            try {
                Class<?> beanType = Class.forName(bd.getBeanClassName());

                // íƒ€ì… ì¸ë±ì‹±
                indexByType(beanName, beanType);

                // ì• ë…¸í…Œì´ì…˜ ì¸ë±ì‹±
                indexByAnnotation(beanName, beanType);

            } catch (Exception e) {
                // ì²˜ë¦¬
            }
        }
    }

    private void indexByType(String beanName, Class<?> type) {
        // í´ë˜ìŠ¤ì™€ ëª¨ë“  ì¸í„°í˜ì´ìŠ¤ì— ëŒ€í•´ ì¸ë±ì‹±
        typeIndex.computeIfAbsent(type, k -> new ArrayList<>())
            .add(beanName);

        for (Class<?> iface : type.getInterfaces()) {
            typeIndex.computeIfAbsent(iface, k -> new ArrayList<>())
                .add(beanName);
        }
    }

    private void indexByAnnotation(String beanName, Class<?> type) {
        for (Annotation annotation : type.getAnnotations()) {
            Class<? extends Annotation> annotationType =
                annotation.annotationType();
            annotationIndex.computeIfAbsent(annotationType,
                k -> new ArrayList<>())
                .add(beanName);
        }
    }

    // ë¹ ë¥¸ ì¡°íšŒ
    public List<String> findBeanNamesByType(Class<?> type) {
        return typeIndex.getOrDefault(type, Collections.emptyList());
    }

    public List<String> findBeanNamesByAnnotation(
            Class<? extends Annotation> annotationType) {
        return annotationIndex.getOrDefault(annotationType,
            Collections.emptyList());
    }
}
```

**5. ì¡°ê±´ë¶€ ë¹ˆ ë“±ë¡**
```java
@Configuration
public class ConditionalBeanConfig {

    // íŠ¹ì • ì¡°ê±´ì—ì„œë§Œ ë¹ˆ ë“±ë¡
    @Bean
    @ConditionalOnProperty(
        name = "feature.advanced.enabled",
        havingValue = "true"
    )
    public AdvancedFeatureService advancedFeatureService() {
        return new AdvancedFeatureService();
    }

    // íŠ¹ì • í”„ë¡œíŒŒì¼ì—ì„œë§Œ ë¹ˆ ë“±ë¡
    @Bean
    @Profile("production")
    public ProductionOnlyService productionOnlyService() {
        return new ProductionOnlyService();
    }

    // íŠ¹ì • í´ë˜ìŠ¤ê°€ ìˆì„ ë•Œë§Œ ë¹ˆ ë“±ë¡
    @Bean
    @ConditionalOnClass(name = "com.example.Optional Service")
    public OptionalService optionalService() {
        return new OptionalService();
    }
}
```

**6. ë¹ˆ ìƒëª…ì£¼ê¸° ìµœì í™”**
```java
@Component
public class OptimizedBean implements SmartInitializingSingleton {

    private Map<String, Service> serviceCache;

    @Override
    public void afterSingletonsInstantiated() {
        // ëª¨ë“  ì‹±ê¸€í†¤ ë¹ˆ ì´ˆê¸°í™” í›„ ì‹¤í–‰
        // í•œ ë²ˆë§Œ ì‹¤í–‰ë˜ëŠ” ë¬´ê±°ìš´ ì´ˆê¸°í™” ì‘ì—…
        this.serviceCache = initializeServiceCache();
    }

    private Map<String, Service> initializeServiceCache() {
        // ë¬´ê±°ìš´ ì´ˆê¸°í™” ë¡œì§
        return new HashMap<>();
    }
}
```

**7. í”„ë¡œíŒŒì¼ ê¸°ë°˜ ë¹ˆ ë¶„ë¦¬**
```java
@Configuration
@Profile("!test")  // í…ŒìŠ¤íŠ¸ í™˜ê²½ ì œì™¸
public class ProductionBeanConfig {
    // í”„ë¡œë•ì…˜ì—ë§Œ í•„ìš”í•œ ë¹ˆë“¤

    @Bean
    public MonitoringService monitoringService() {
        return new MonitoringService();
    }
}

@Configuration
@Profile("test")
public class TestBeanConfig {
    // í…ŒìŠ¤íŠ¸ì—ë§Œ í•„ìš”í•œ ë¹ˆë“¤ (Mock ë“±)

    @Bean
    public MonitoringService monitoringService() {
        return mock(MonitoringService.class);
    }
}
```

**ì„±ëŠ¥ ì¸¡ì •:**
```java
@Component
public class BeanPerformanceMonitor {

    @Autowired
    private ApplicationContext ac;

    @EventListener(ContextRefreshedEvent.class)
    public void measureStartupPerformance() {
        long start = System.currentTimeMillis();

        String[] beanNames = ac.getBeanDefinitionNames();
        int totalBeans = beanNames.length;

        long end = System.currentTimeMillis();

        log.info("=== Bean Startup Performance ===");
        log.info("Total beans: {}", totalBeans);
        log.info("Startup time: {}ms", (end - start));
        log.info("Average per bean: {}ms",
            (end - start) / (double) totalBeans);
    }
}
```

**í•µì‹¬ ì „ëµ ì •ë¦¬:**
1. ë¹ˆ ìŠ¤ìº” ë²”ìœ„ ìµœì†Œí™”
2. ì§€ì—° ì´ˆê¸°í™” ì ê·¹ í™œìš©
3. ë¹ˆ ì¡°íšŒ ê²°ê³¼ ìºì‹±
4. ë¹ˆ ì¸ë±ì‹±ìœ¼ë¡œ ë¹ ë¥¸ ê²€ìƒ‰
5. ì¡°ê±´ë¶€ ë¹ˆ ë“±ë¡ìœ¼ë¡œ ë¶ˆí•„ìš”í•œ ë¹ˆ ì œê±°
6. í”„ë¡œíŒŒì¼ë¡œ í™˜ê²½ë³„ ë¹ˆ ë¶„ë¦¬

</details>

**Q8. BeanDefinitionì˜ ì—­í• ê³¼ ë©”íƒ€ í”„ë¡œê·¸ë˜ë° ê´€ì ì—ì„œì˜ í™œìš© ë°©ë²•ì„ ì„¤ëª…í•´ì£¼ì„¸ìš”.**
<details>
<summary>ë‹µì•ˆ ë³´ê¸°</summary>

**BeanDefinitionì˜ ì—­í• :**

BeanDefinitionì€ ìŠ¤í”„ë§ ë¹ˆì˜ ë©”íƒ€ë°ì´í„°ë¥¼ ë‹´ê³  ìˆëŠ” ì¶”ìƒí™” ê³„ì¸µìœ¼ë¡œ, ë‹¤ì–‘í•œ ì„¤ì • ë°©ì‹(Java, XML, Groovy ë“±)ì„ í†µì¼ëœ í˜•ì‹ìœ¼ë¡œ í‘œí˜„í•©ë‹ˆë‹¤.

**ê¸°ë³¸ ê°œë…:**
```java
// BeanDefinition êµ¬ì¡°
public interface BeanDefinition {
    String getBeanClassName();  // ë¹ˆ í´ë˜ìŠ¤ ì´ë¦„
    String getScope();          // ìŠ¤ì½”í”„ (singleton/prototype ë“±)
    boolean isLazyInit();       // ì§€ì—° ì´ˆê¸°í™” ì—¬ë¶€
    String[] getDependsOn();    // ì˜ì¡´ ë¹ˆ ëª©ë¡
    int getRole();              // ì—­í•  (APPLICATION/INFRASTRUCTURE)
    String getFactoryMethodName();  // íŒ©í† ë¦¬ ë©”ì„œë“œ
    // ...
}
```

**ë©”íƒ€ í”„ë¡œê·¸ë˜ë° í™œìš©:**

**1. ë™ì  ë¹ˆ ë“±ë¡**
```java
@Configuration
public class DynamicBeanRegistrar {

    @Autowired
    private ConfigurableApplicationContext context;

    public void registerBeanDynamically() {
        // BeanDefinition ìƒì„±
        BeanDefinitionRegistry registry =
            (BeanDefinitionRegistry) context.getBeanFactory();

        GenericBeanDefinition beanDefinition =
            new GenericBeanDefinition();
        beanDefinition.setBeanClass(MemberService.class);
        beanDefinition.setScope("singleton");
        beanDefinition.setLazyInit(false);

        // ìƒì„±ì ì¸ì ì„¤ì •
        ConstructorArgumentValues constructorArgs =
            new ConstructorArgumentValues();
        constructorArgs.addGenericArgumentValue(
            new RuntimeBeanReference("memberRepository")
        );
        beanDefinition.setConstructorArgumentValues(constructorArgs);

        // ë¹ˆ ë“±ë¡
        registry.registerBeanDefinition("dynamicMemberService",
            beanDefinition);
    }
}
```

**2. ë¹ˆ ì •ì˜ ìˆ˜ì • (BeanFactoryPostProcessor)**
```java
@Component
public class CustomBeanFactoryPostProcessor
        implements BeanFactoryPostProcessor {

    @Override
    public void postProcessBeanFactory(
            ConfigurableListableBeanFactory beanFactory) {

        String[] beanNames = beanFactory.getBeanDefinitionNames();

        for (String beanName : beanNames) {
            BeanDefinition bd = beanFactory.getBeanDefinition(beanName);

            // ëª¨ë“  ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆì„ í”„ë¡œí† íƒ€ì…ìœ¼ë¡œ ë³€ê²½
            if (bd.getRole() == BeanDefinition.ROLE_APPLICATION) {
                bd.setScope("prototype");
            }

            // íŠ¹ì • íŒ¨í„´ì˜ ë¹ˆì„ ì§€ì—° ì´ˆê¸°í™”ë¡œ ë³€ê²½
            if (beanName.startsWith("heavy")) {
                bd.setLazyInit(true);
            }

            // í”„ë¡œí¼í‹° ê°’ ë™ì  ì„¤ì •
            MutablePropertyValues pvs = bd.getPropertyValues();
            if (pvs.contains("timeout")) {
                pvs.add("timeout", 5000);
            }
        }
    }
}
```

**3. ì¡°ê±´ë¶€ ë¹ˆ ë“±ë¡**
```java
@Component
public class ConditionalBeanRegistrar
        implements BeanDefinitionRegistryPostProcessor {

    @Override
    public void postProcessBeanDefinitionRegistry(
            BeanDefinitionRegistry registry) {

        // í™˜ê²½ ë³€ìˆ˜ì— ë”°ë¼ ë™ì ìœ¼ë¡œ ë¹ˆ ë“±ë¡
        String environment = System.getenv("APP_ENV");

        if ("production".equals(environment)) {
            registerProductionBeans(registry);
        } else {
            registerDevelopmentBeans(registry);
        }
    }

    private void registerProductionBeans(BeanDefinitionRegistry registry) {
        GenericBeanDefinition bd = new GenericBeanDefinition();
        bd.setBeanClass(ProductionDataSource.class);
        bd.setScope("singleton");
        registry.registerBeanDefinition("dataSource", bd);
    }

    private void registerDevelopmentBeans(BeanDefinitionRegistry registry) {
        GenericBeanDefinition bd = new GenericBeanDefinition();
        bd.setBeanClass(H2DataSource.class);
        bd.setScope("singleton");
        registry.registerBeanDefinition("dataSource", bd);
    }

    @Override
    public void postProcessBeanFactory(
            ConfigurableListableBeanFactory beanFactory) {
        // ì¶”ê°€ ì²˜ë¦¬
    }
}
```

**4. í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ êµ¬í˜„**
```java
@Component
public class PluginBeanRegistrar
        implements BeanDefinitionRegistryPostProcessor {

    private static final String PLUGIN_PACKAGE = "com.example.plugins";

    @Override
    public void postProcessBeanDefinitionRegistry(
            BeanDefinitionRegistry registry) {

        // í”ŒëŸ¬ê·¸ì¸ í´ë˜ìŠ¤ ìŠ¤ìº”
        Set<Class<?>> pluginClasses = scanPluginClasses();

        for (Class<?> pluginClass : pluginClasses) {
            if (Plugin.class.isAssignableFrom(pluginClass)) {
                registerPluginBean(registry, pluginClass);
            }
        }
    }

    private void registerPluginBean(
            BeanDefinitionRegistry registry,
            Class<?> pluginClass) {

        GenericBeanDefinition bd = new GenericBeanDefinition();
        bd.setBeanClass(pluginClass);
        bd.setScope("singleton");
        bd.setLazyInit(true);  // í”ŒëŸ¬ê·¸ì¸ì€ ì§€ì—° ë¡œë”©

        // í”ŒëŸ¬ê·¸ì¸ ë©”íƒ€ë°ì´í„° ì¶”ê°€
        bd.setAttribute("pluginVersion",
            pluginClass.getAnnotation(PluginInfo.class).version());

        String beanName = generatePluginBeanName(pluginClass);
        registry.registerBeanDefinition(beanName, bd);
    }

    private Set<Class<?>> scanPluginClasses() {
        // ClassPathScanningCandidateComponentProvider ì‚¬ìš©
        ClassPathScanningCandidateComponentProvider scanner =
            new ClassPathScanningCandidateComponentProvider(false);

        scanner.addIncludeFilter(
            new AnnotationTypeFilter(PluginInfo.class)
        );

        Set<Class<?>> classes = new HashSet<>();
        for (BeanDefinition bd :
                scanner.findCandidateComponents(PLUGIN_PACKAGE)) {
            try {
                classes.add(Class.forName(bd.getBeanClassName()));
            } catch (ClassNotFoundException e) {
                // ì²˜ë¦¬
            }
        }
        return classes;
    }

    private String generatePluginBeanName(Class<?> pluginClass) {
        PluginInfo info = pluginClass.getAnnotation(PluginInfo.class);
        return "plugin_" + info.name();
    }

    @Override
    public void postProcessBeanFactory(
            ConfigurableListableBeanFactory beanFactory) {
    }
}

// í”ŒëŸ¬ê·¸ì¸ ì¸í„°í˜ì´ìŠ¤
public interface Plugin {
    void execute();
}

// í”ŒëŸ¬ê·¸ì¸ ë©”íƒ€ë°ì´í„°
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.TYPE)
public @interface PluginInfo {
    String name();
    String version() default "1.0";
}

// í”ŒëŸ¬ê·¸ì¸ êµ¬í˜„ ì˜ˆì‹œ
@PluginInfo(name = "emailNotification", version = "2.0")
public class EmailNotificationPlugin implements Plugin {
    @Override
    public void execute() {
        // ì´ë©”ì¼ ë°œì†¡ ë¡œì§
    }
}
```

**5. ë¹ˆ ë©”íƒ€ë°ì´í„° ë¶„ì„**
```java
@Component
public class BeanMetadataAnalyzer implements InitializingBean {

    @Autowired
    private ApplicationContext ac;

    @Override
    public void afterPropertiesSet() {
        analyzeBeanMetadata();
    }

    private void analyzeBeanMetadata() {
        String[] beanNames = ac.getBeanDefinitionNames();

        Map<String, Integer> scopeDistribution = new HashMap<>();
        Map<String, Integer> roleDistribution = new HashMap<>();
        List<String> lazyBeans = new ArrayList<>();

        for (String beanName : beanNames) {
            BeanDefinition bd =
                ((ConfigurableApplicationContext) ac)
                    .getBeanFactory()
                    .getBeanDefinition(beanName);

            // ìŠ¤ì½”í”„ ë¶„ì„
            String scope = bd.getScope();
            scopeDistribution.merge(scope.isEmpty() ? "singleton" : scope,
                1, Integer::sum);

            // ì—­í•  ë¶„ì„
            int role = bd.getRole();
            String roleName = getRoleName(role);
            roleDistribution.merge(roleName, 1, Integer::sum);

            // ì§€ì—° ì´ˆê¸°í™” ë¹ˆ ìˆ˜ì§‘
            if (bd.isLazyInit()) {
                lazyBeans.add(beanName);
            }
        }

        printAnalysisResult(scopeDistribution, roleDistribution, lazyBeans);
    }

    private String getRoleName(int role) {
        switch (role) {
            case BeanDefinition.ROLE_APPLICATION:
                return "APPLICATION";
            case BeanDefinition.ROLE_SUPPORT:
                return "SUPPORT";
            case BeanDefinition.ROLE_INFRASTRUCTURE:
                return "INFRASTRUCTURE";
            default:
                return "UNKNOWN";
        }
    }

    private void printAnalysisResult(
            Map<String, Integer> scopeDistribution,
            Map<String, Integer> roleDistribution,
            List<String> lazyBeans) {

        log.info("=== Bean Metadata Analysis ===");
        log.info("Scope Distribution: {}", scopeDistribution);
        log.info("Role Distribution: {}", roleDistribution);
        log.info("Lazy Beans Count: {}", lazyBeans.size());
        log.info("Lazy Beans: {}", lazyBeans);
    }
}
```

**ì‹¤ë¬´ í™œìš© ì‚¬ë¡€:**

1. **ë©€í‹° í…Œë„ŒíŠ¸ ì‹œìŠ¤í…œ**
   - í…Œë„ŒíŠ¸ë³„ ë™ì  ë¹ˆ ë“±ë¡
   - í…Œë„ŒíŠ¸ë³„ ë°ì´í„°ì†ŒìŠ¤ ë¶„ë¦¬

2. **A/B í…ŒìŠ¤íŒ…**
   - ì‹¤í—˜ ê·¸ë£¹ë³„ ë‹¤ë¥¸ ë¹ˆ ë“±ë¡
   - ë™ì  ê¸°ëŠ¥ í† ê¸€

3. **í”ŒëŸ¬ê·¸ì¸ ì•„í‚¤í…ì²˜**
   - ëŸ°íƒ€ì„ í”ŒëŸ¬ê·¸ì¸ ë¡œë”©
   - í”ŒëŸ¬ê·¸ì¸ ë©”íƒ€ë°ì´í„° ê´€ë¦¬

4. **ìë™ ì„¤ì •**
   - Spring Boot Auto-configuration
   - ì¡°ê±´ë¶€ ë¹ˆ ë“±ë¡

**í•µì‹¬:**
- BeanDefinitionì€ ë¹ˆ ë©”íƒ€ë°ì´í„°ì˜ ì¶”ìƒí™”
- ë©”íƒ€ í”„ë¡œê·¸ë˜ë°ìœ¼ë¡œ ë™ì  ë¹ˆ ê´€ë¦¬ ê°€ëŠ¥
- BeanFactoryPostProcessorë¡œ ë¹ˆ ì •ì˜ ìˆ˜ì •
- BeanDefinitionRegistryPostProcessorë¡œ ë¹ˆ ë™ì  ë“±ë¡

</details>

---

## ë‹¤ìŒ í•™ìŠµ ì£¼ì œ

- ìŠ¤í”„ë§ ë¹ˆ ì¡°íšŒ - ê¸°ë³¸ (ì´ë¦„, íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ)
- íŠ¹ì • íƒ€ì…ì˜ ë¹ˆ ì¡°íšŒ
- ë¹ˆì´ ì—†ì„ ë•Œ ì˜ˆì™¸ ì²˜ë¦¬
