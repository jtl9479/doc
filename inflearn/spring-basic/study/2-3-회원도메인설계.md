# 2-3. νμ› λ„λ©”μΈ μ„¤κ³„

## ν•™μµ λ©ν‘
- νμ› λ„λ©”μΈμ μ”κµ¬μ‚¬ν•­μ„ λ¶„μ„ν•κ³  μ„¤κ³„ λ°©λ²•μ„ μ΄ν•΄ν•λ‹¤
- ν‘λ ¥ κ΄€κ³„, ν΄λμ¤ λ‹¤μ΄μ–΄κ·Έλ¨, κ°μ²΄ λ‹¤μ΄μ–΄κ·Έλ¨μ μ°¨μ΄λ¥Ό μ΄ν•΄ν•λ‹¤
- μΈν„°νμ΄μ¤ κΈ°λ° μ„¤κ³„λ¥Ό ν†µν• μ μ—°ν• κµ¬μ΅°λ¥Ό ν•™μµν•λ‹¤
- μ—­ν• κ³Ό κµ¬ν„μ„ λ¶„λ¦¬ν•λ” κ°μ²΄μ§€ν–¥ μ„¤κ³„ μ›μΉ™μ„ μ μ©ν•λ‹¤

## μ—°κ΄€ κ°λ…
- **ν‘λ ¥ κ΄€κ³„ λ‹¤μ΄μ–΄κ·Έλ¨**: κΈ°νμλ„ λ³Ό μ μλ” λ„λ©”μΈ ν‘λ ¥ κ΄€κ³„ (μ—­ν•  μ¤‘μ‹¬)
- **ν΄λμ¤ λ‹¤μ΄μ–΄κ·Έλ¨**: κ°λ°μκ°€ κµ¬μ²΄ν™”ν• μ„¤κ³„ λ‹¤μ΄μ–΄κ·Έλ¨ (μ •μ  κµ¬μ΅°)
- **κ°μ²΄ λ‹¤μ΄μ–΄κ·Έλ¨**: μ‹¤μ  λ°νƒ€μ„μ— μƒμ„±λ κ°μ²΄ μΈμ¤ν„΄μ¤ κ°„μ κ΄€κ³„ (λ™μ  κµ¬μ΅°)
- **μΈν„°νμ΄μ¤ λ¶„λ¦¬**: κµ¬ν„μ²΄ λ³€κ²½ κ°€λ¥μ„±μ— λ€λΉ„ν• μ„¤κ³„ μ „λµ

---

## TL;DR (κ°„λ‹¨ μ”μ•½)

### νμ› λ„λ©”μΈ μ”κµ¬μ‚¬ν•­
- νμ› κ°€μ… λ° μ΅°ν κΈ°λ¥
- νμ› λ“±κΈ‰: BASIC, VIP
- νμ› μ €μ¥μ†: μμ²΄ DB λλ” μ™Έλ¶€ μ‹μ¤ν… μ—°λ™ (λ―Έν™•μ •)

### μ„¤κ³„ μ „λµ
μΈν„°νμ΄μ¤λ¥Ό λ„μ…ν•μ—¬ κµ¬ν„μ²΄λ¥Ό μ‰½κ² κµμ²΄ν•  μ μλ„λ΅ μ„¤κ³„:
- `MemberService` μΈν„°νμ΄μ¤ β†’ `MemberServiceImpl` κµ¬ν„μ²΄
- `MemberRepository` μΈν„°νμ΄μ¤ β†’ `MemoryMemberRepository`, `DbMemberRepository` λ“± κµ¬ν„μ²΄

### 3λ‹¨κ³„ λ‹¤μ΄μ–΄κ·Έλ¨
1. **ν‘λ ¥ κ΄€κ³„**: ν΄λΌμ΄μ–ΈνΈ β†’ νμ› μ„λΉ„μ¤ β†’ νμ› μ €μ¥μ†
2. **ν΄λμ¤ λ‹¤μ΄μ–΄κ·Έλ¨**: μΈν„°νμ΄μ¤μ™€ κµ¬ν„ ν΄λμ¤μ κ΄€κ³„
3. **κ°μ²΄ λ‹¤μ΄μ–΄κ·Έλ¨**: μ‹¤μ  λ©”λ¨λ¦¬μ— μƒμ„±λ κ°μ²΄ μΈμ¤ν„΄μ¤

---

## νμ› λ„λ©”μΈ μ”κµ¬μ‚¬ν•­

### κΈ°λ¥ μ”κµ¬μ‚¬ν•­
```
1. νμ›μ„ κ°€μ…ν•κ³  μ΅°νν•  μ μλ‹¤
2. νμ›μ€ μΌλ°κ³Ό VIP λ‘ κ°€μ§€ λ“±κΈ‰μ΄ μλ‹¤
3. νμ› λ°μ΄ν„°λ” μμ²΄ DBλ¥Ό κµ¬μ¶•ν•  μ μκ³ , μ™Έλ¶€ μ‹μ¤ν…κ³Ό μ—°λ™ν•  μ μλ‹¤ (λ―Έν™•μ •)
```

### λ¶ν™•μ‹¤μ„± λ€μ‘
μ”κµ¬μ‚¬ν•­ μ¤‘ **νμ› μ €μ¥μ†**κ°€ μ•„μ§ ν™•μ •λμ§€ μ•μ•μ§€λ§, κ°λ°μ€ μ§„ν–‰ν•΄μ•Ό ν•λ” μƒν™©μ…λ‹λ‹¤.

> **ν•΄κ²°μ±…**: μΈν„°νμ΄μ¤λ¥Ό λ§λ“¤κ³  κµ¬ν„μ²΄λ¥Ό μ–Έμ λ“ μ§€ κ°μ•„λΌμΈ μ μλ„λ΅ μ„¤κ³„

---

## νμ› λ„λ©”μΈ ν‘λ ¥ κ΄€κ³„

```mermaid
graph LR
    A[ν΄λΌμ΄μ–ΈνΈ] -->|νμ›κ°€μ…/νμ›μ΅°ν| B[νμ› μ„λΉ„μ¤]
    B -->|μ €μ¥/μ΅°ν| C[νμ› μ €μ¥μ† μ—­ν• ]
    C -.κµ¬ν„μ²΄ μ„ νƒ.-> D[λ©”λ¨λ¦¬ νμ› μ €μ¥μ†]
    C -.κµ¬ν„μ²΄ μ„ νƒ.-> E[DB νμ› μ €μ¥μ†]
    C -.κµ¬ν„μ²΄ μ„ νƒ.-> F[μ™Έλ¶€ μ‹μ¤ν… μ—°λ™ νμ› μ €μ¥μ†]

    style C fill:#e1f5ff
    style D fill:#fff4e1
    style E fill:#fff4e1
    style F fill:#fff4e1
```

### ν‘λ ¥ κ΄€κ³„ μ„¤λ…
- **ν΄λΌμ΄μ–ΈνΈ**: νμ› μ„λΉ„μ¤λ¥Ό μ‚¬μ©ν•λ” μ£Όμ²΄ (μ›Ή μ»¨νΈλ΅¤λ¬, ν…μ¤νΈ λ“±)
- **νμ› μ„λΉ„μ¤**: νμ› κ°€μ…κ³Ό μ΅°ν κΈ°λ¥μ„ μ κ³µν•λ” λΉ„μ¦λ‹μ¤ λ΅μ§
- **νμ› μ €μ¥μ† μ—­ν• **: μ¶”μƒν™”λ μ €μ¥μ† μΈν„°νμ΄μ¤
- **κµ¬ν„μ²΄λ“¤**: μ‹¤μ  μ €μ¥μ† κµ¬ν„ (λ©”λ¨λ¦¬, DB, μ™Έλ¶€ μ‹μ¤ν…)

### νΉμ§•
- κΈ°νμλ„ μ΄ν•΄ν•  μ μλ” μμ¤€μ λ‹¤μ΄μ–΄κ·Έλ¨
- **μ—­ν• ** μ¤‘μ‹¬μΌλ΅ ν‘ν„ (κµ¬μ²΄μ μΈ ν΄λμ¤λ… X)
- μ”κµ¬μ‚¬ν•­μ λ¶ν™•μ‹¤μ„±μ„ μΈν„°νμ΄μ¤λ΅ ν•΄κ²°

---

## νμ› ν΄λμ¤ λ‹¤μ΄μ–΄κ·Έλ¨

```mermaid
classDiagram
    class MemberService {
        <<interface>>
        +join(Member)
        +findMember(Long)
    }

    class MemberServiceImpl {
        -MemberRepository memberRepository
        +join(Member)
        +findMember(Long)
    }

    class MemberRepository {
        <<interface>>
        +save(Member)
        +findById(Long)
    }

    class MemoryMemberRepository {
        -Map~Long,Member~ store
        +save(Member)
        +findById(Long)
    }

    class DbMemberRepository {
        +save(Member)
        +findById(Long)
    }

    class Member {
        -Long id
        -String name
        -Grade grade
    }

    class Grade {
        <<enumeration>>
        BASIC
        VIP
    }

    MemberService <|.. MemberServiceImpl : implements
    MemberRepository <|.. MemoryMemberRepository : implements
    MemberRepository <|.. DbMemberRepository : implements
    MemberServiceImpl --> MemberRepository : uses
    MemberRepository ..> Member : uses
    MemberServiceImpl ..> Member : uses
    Member --> Grade : has
```

### ν΄λμ¤ λ‹¤μ΄μ–΄κ·Έλ¨ μ„¤λ…

#### μΈν„°νμ΄μ¤
- **MemberService**: νμ› μ„λΉ„μ¤μ μ—­ν•  μ •μ
  - `join()`: νμ› κ°€μ…
  - `findMember()`: νμ› μ΅°ν

- **MemberRepository**: νμ› μ €μ¥μ†μ μ—­ν•  μ •μ
  - `save()`: νμ› μ €μ¥
  - `findById()`: IDλ΅ νμ› μ΅°ν

#### κµ¬ν„μ²΄
- **MemberServiceImpl**: νμ› μ„λΉ„μ¤ κµ¬ν„ ν΄λμ¤
  - MemberRepositoryμ— μμ΅΄ (μμ΅΄μ„± μ£Όμ… ν•„μ”)

- **MemoryMemberRepository**: λ©”λ¨λ¦¬ κΈ°λ° μ €μ¥μ† (κ°λ° μ΄κΈ°μ©)
- **DbMemberRepository**: λ°μ΄ν„°λ² μ΄μ¤ κΈ°λ° μ €μ¥μ† (μ¶”ν›„ κµ¬ν„)

#### μ—”ν‹°ν‹°
- **Member**: νμ› μ—”ν‹°ν‹° (id, name, grade)
- **Grade**: νμ› λ“±κΈ‰ μ—΄κ±°ν• (BASIC, VIP)

### μ„¤κ³„μ ν•µμ‹¬
```
μΈν„°νμ΄μ¤λ¥Ό ν†µν• μ—­ν• κ³Ό κµ¬ν„μ λ¶„λ¦¬
β†’ κµ¬ν„μ²΄λ¥Ό μμ λ΅­κ² λ³€κ²½ κ°€λ¥
β†’ OCP(κ°λ°©-νμ‡„ μ›μΉ™) μ¤€μ
```

---

## νμ› κ°μ²΄ λ‹¤μ΄μ–΄κ·Έλ¨

```mermaid
graph TD
    A[ν΄λΌμ΄μ–ΈνΈ] -->|μ‚¬μ©| B[νμ› μ„λΉ„μ¤<br/>MemberServiceImpl<br/>κ°μ²΄]
    B -->|μμ΅΄| C[λ©”λ¨λ¦¬ νμ› μ €μ¥μ†<br/>MemoryMemberRepository<br/>κ°μ²΄]

    style A fill:#e8f5e9
    style B fill:#fff3e0
    style C fill:#e3f2fd
```

### κ°μ²΄ λ‹¤μ΄μ–΄κ·Έλ¨μ μλ―Έ

#### λ°νƒ€μ„ κ΄€μ 
- **νμ› μ„λΉ„μ¤ κ°μ²΄**: `new MemberServiceImpl()` λ΅ μƒμ„±λ μΈμ¤ν„΄μ¤
- **λ©”λ¨λ¦¬ νμ› μ €μ¥μ† κ°μ²΄**: `new MemoryMemberRepository()` λ΅ μƒμ„±λ μΈμ¤ν„΄μ¤
- μ‹¤μ  JVM λ©”λ¨λ¦¬μ— μ¬λΌκ°„ κ°μ²΄λ“¤μ κ΄€κ³„

#### ν΄λμ¤ λ‹¤μ΄μ–΄κ·Έλ¨κ³Όμ μ°¨μ΄
| κµ¬λ¶„ | ν΄λμ¤ λ‹¤μ΄μ–΄κ·Έλ¨ | κ°μ²΄ λ‹¤μ΄μ–΄κ·Έλ¨ |
|------|------------------|----------------|
| κ΄€μ  | μ •μ  μ„¤κ³„ | λ™μ  μ‹¤ν–‰ |
| λ‚΄μ© | ν΄λμ¤ κµ¬μ΅°μ™€ κ΄€κ³„ | μ‹¤μ  μΈμ¤ν„΄μ¤ κ΄€κ³„ |
| μ‹μ  | μ»΄νμΌ νƒ€μ„ | λ°νƒ€μ„ |
| ν‘ν„ | λ¨λ“  κ°€λ¥μ„± ν‘ν„ | νΉμ • μ‹μ μ κ°μ²΄ μƒνƒ |

---

## μ‹¬ν™” λ‚΄μ©

### 1. μ—­ν• κ³Ό κµ¬ν„μ λ¶„λ¦¬

#### μ™ μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λ”κ°€?

```java
// β λ‚μ μ: μ§μ ‘ κµ¬ν„μ²΄μ— μμ΅΄
public class MemberServiceImpl {
    private MemoryMemberRepository memberRepository = new MemoryMemberRepository();
    // DBλ΅ λ³€κ²½ν•λ ¤λ©΄ μ½”λ“ μμ • ν•„μ”
}

// β… μΆ‹μ€ μ: μΈν„°νμ΄μ¤μ— μμ΅΄
public class MemberServiceImpl implements MemberService {
    private MemberRepository memberRepository;
    // μƒμ„±μλ‚ setterλ΅ μ£Όμ…λ°›μΌλ©΄ κµ¬ν„μ²΄ λ³€κ²½ μ©μ΄
}
```

#### μΈν„°νμ΄μ¤ μ„¤κ³„μ μ¥μ 
1. **μ μ—°μ„±**: κµ¬ν„μ²΄λ¥Ό μμ λ΅­κ² κµμ²΄ κ°€λ¥
2. **ν…μ¤νΈ μ©μ΄μ„±**: Mock κ°μ²΄λ΅ λ€μ²΄ κ°€λ¥
3. **λ³‘λ ¬ κ°λ°**: μΈν„°νμ΄μ¤λ§ μ •μν•λ©΄ κ°μ κµ¬ν„ κ°€λ¥
4. **λ³€κ²½μ— λ‹«ν€μμ**: ν΄λΌμ΄μ–ΈνΈ μ½”λ“ μμ • μ—†μ΄ κµ¬ν„μ²΄ λ³€κ²½

### 2. λ‹¤μ΄μ–΄κ·Έλ¨λ³„ μ‚¬μ© λ©μ 

#### ν‘λ ¥ κ΄€κ³„ λ‹¤μ΄μ–΄κ·Έλ¨
```
μ‚¬μ© μ‹μ : μ”κµ¬μ‚¬ν•­ λ¶„μ„ λ‹¨κ³„
λ€μƒ: κΈ°νμ, λ„λ©”μΈ μ „λ¬Έκ°€, κ°λ°μ
λ©μ : λΉ„μ¦λ‹μ¤ νλ¦„κ³Ό μ—­ν•  νμ•…
μμ¤€: μ¶”μƒμ , κ°λ…μ 
```

#### ν΄λμ¤ λ‹¤μ΄μ–΄κ·Έλ¨
```
μ‚¬μ© μ‹μ : μ„¤κ³„ λ‹¨κ³„
λ€μƒ: κ°λ°μ
λ©μ : κµ¬ν„ν•  ν΄λμ¤μ™€ μΈν„°νμ΄μ¤ μ •μ
μμ¤€: κµ¬μ²΄μ , κΈ°μ μ 
```

#### κ°μ²΄ λ‹¤μ΄μ–΄κ·Έλ¨
```
μ‚¬μ© μ‹μ : κµ¬ν„/λ””λ²„κΉ… λ‹¨κ³„
λ€μƒ: κ°λ°μ
λ©μ : μ‹¤μ  κ°μ²΄ μƒμ„±κ³Ό μμ΅΄κ΄€κ³„ ν™•μΈ
μμ¤€: λ§¤μ° κµ¬μ²΄μ , λ°νƒ€μ„ μ¤‘μ‹¬
```

---

## Tip

### μ„¤κ³„ μμ„
1. **λ„λ©”μΈ ν‘λ ¥ κ΄€κ³„** λ¨Όμ € κ·Έλ¦¬κΈ° (λΉ„μ¦λ‹μ¤ κ΄€μ )
2. **ν΄λμ¤ λ‹¤μ΄μ–΄κ·Έλ¨** μ‘μ„± (κ°λ° κ΄€μ )
3. **κ°μ²΄ λ‹¤μ΄μ–΄κ·Έλ¨** μΌλ΅ κ²€μ¦ (μ‹¤ν–‰ κ΄€μ )

### μΈν„°νμ΄μ¤ λ„¤μ΄λ°
- Repository μΈν„°νμ΄μ¤: `MemberRepository`
- Repository κµ¬ν„μ²΄: `MemoryMemberRepository`, `DbMemberRepository`
- Service μΈν„°νμ΄μ¤: `MemberService`
- Service κµ¬ν„μ²΄: `MemberServiceImpl` (Impl μ ‘λ―Έμ‚¬ μ‚¬μ©)

### λ„λ©”μΈ μ—”ν‹°ν‹° μ„¤κ³„
```java
// λ„λ©”μΈ μ—”ν‹°ν‹°λ” μμν• λΉ„μ¦λ‹μ¤ λ΅μ§λ§ ν¬ν•¨
public class Member {
    private Long id;
    private String name;
    private Grade grade;

    // λΉ„μ¦λ‹μ¤ λ΅μ§ λ©”μ„λ“ μ¶”κ°€ κ°€λ¥
    public boolean isVip() {
        return this.grade == Grade.VIP;
    }
}
```

---

## μ£Όμμ‚¬ν•­

### 1. κ³Όλ„ν• μΈν„°νμ΄μ¤ μ‚¬μ© μ§€μ–‘
- λ³€κ²½ κ°€λ¥μ„±μ΄ μ—†λ” κ³³μ— λ¬΄λ¶„λ³„ν• μΈν„°νμ΄μ¤ μ‚¬μ©μ€ λ³µμ΅λ„λ§ μ¦κ°€
- μ‹¤μ  λ³€κ²½μ΄ ν•„μ”ν•κ±°λ‚ λ‹¤ν•μ„±μ΄ ν•„μ”ν• κ³³μ—λ§ μΈν„°νμ΄μ¤ λ„μ…

### 2. ν„μ¬ μ„¤κ³„μ λ¬Έμ μ  (μ¤ν¬μΌλ¬)
```java
public class MemberServiceImpl implements MemberService {
    // β οΈ λ¬Έμ : μΈν„°νμ΄μ¤μ™€ κµ¬ν„μ²΄ λ¨λ‘μ— μμ΅΄
    private final MemberRepository memberRepository = new MemoryMemberRepository();
    // DIP(μμ΅΄κ΄€κ³„ μ—­μ „ μ›μΉ™) μ„λ°!
}
```
β†’ μ£Όλ¬Έ λ„λ©”μΈ μ„¤κ³„ ν›„ λ‹¤μ‹ λ‹¤λ£° μμ •

### 3. λ‹¤μ΄μ–΄κ·Έλ¨μ€ μλ‹¨μΌ λΏ
- λ‹¤μ΄μ–΄κ·Έλ¨ μμ²΄κ°€ λ©μ μ΄ μ•„λ‹
- μ»¤λ®¤λ‹μΌ€μ΄μ… λ„κµ¬λ΅ ν™μ©
- μ½”λ“μ™€ λ‹¤μ΄μ–΄κ·Έλ¨μ λ™κΈ°ν™” μ μ§€ λ…Έλ ¥

---

## λ©΄μ ‘ μ§λ¬Έ

### μ΄κΈ‰ - κ°λ… μ΄ν•΄

**Q1. νμ› λ„λ©”μΈ μ„¤κ³„μ—μ„ μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν• μ΄μ λ” λ¬΄μ—‡μΈκ°€μ”?**

A: νμ› μ €μ¥μ†μ κµ¬ν„ λ°©μ‹μ΄ μ•„μ§ ν™•μ •λμ§€ μ•μ•κΈ° λ•λ¬Έμ…λ‹λ‹¤. MemberRepository μΈν„°νμ΄μ¤λ¥Ό λ§λ“¤κ³  MemoryMemberRepository, DbMemberRepository λ“± λ‹¤μ–‘ν• κµ¬ν„μ²΄λ΅ κµμ²΄ν•  μ μλ„λ΅ μ„¤κ³„ν–μµλ‹λ‹¤. μ΄λ ‡κ² ν•λ©΄ λ‚μ¤‘μ— μ €μ¥μ† λ°©μ‹μ΄ λ³€κ²½λμ–΄λ„ MemberServiceμ μ½”λ“λ¥Ό μμ •ν•μ§€ μ•μ•„λ„ λ©λ‹λ‹¤.

**Q2. ν΄λμ¤ λ‹¤μ΄μ–΄κ·Έλ¨κ³Ό κ°μ²΄ λ‹¤μ΄μ–΄κ·Έλ¨μ μ°¨μ΄λ” λ¬΄μ—‡μΈκ°€μ”?**

A: ν΄λμ¤ λ‹¤μ΄μ–΄κ·Έλ¨μ€ μ •μ μΈ μ„¤κ³„ κµ¬μ΅°λ¥Ό λ‚νƒ€λ‚΄λ©°, ν΄λμ¤ κ°„μ κ΄€κ³„μ™€ κ°€λ¥ν• λ¨λ“  κµ¬ν„μ²΄λ¥Ό ν‘ν„ν•©λ‹λ‹¤. λ°λ©΄ κ°μ²΄ λ‹¤μ΄μ–΄κ·Έλ¨μ€ λ°νƒ€μ„μ— μ‹¤μ λ΅ μƒμ„±λ κ°μ²΄ μΈμ¤ν„΄μ¤λ“¤μ κ΄€κ³„λ¥Ό λ³΄μ—¬μ¤λ‹λ‹¤. μλ¥Ό λ“¤μ–΄ ν΄λμ¤ λ‹¤μ΄μ–΄κ·Έλ¨μ—λ” MemoryMemberRepositoryμ™€ DbMemberRepositoryκ°€ λ¨λ‘ ν‘ν„λμ§€λ§, κ°μ²΄ λ‹¤μ΄μ–΄κ·Έλ¨μ—λ” μ‹¤μ  μ‚¬μ© μ¤‘μΈ MemoryMemberRepository μΈμ¤ν„΄μ¤λ§ ν‘ν„λ©λ‹λ‹¤.

### μ¤‘κΈ‰ - μ„¤κ³„ μ›μΉ™

**Q3. ν„μ¬ νμ› λ„λ©”μΈ μ„¤κ³„κ°€ DIPλ¥Ό μ„λ°ν•λ” μ΄μ λ¥Ό μ„¤λ…ν•κ³ , μ–΄λ–»κ² κ°μ„ ν•  μ μλ‚μ”?**

A: MemberServiceImplμ—μ„ `private final MemberRepository memberRepository = new MemoryMemberRepository();` μ²λΌ κµ¬ν„ν•λ©΄, MemberRepository μΈν„°νμ΄μ¤λΏλ§ μ•„λ‹λΌ MemoryMemberRepository κµ¬ν„μ²΄μ—λ„ μ§μ ‘ μμ΅΄ν•κ² λ©λ‹λ‹¤. μ΄λ” DIP(μμ΅΄κ΄€κ³„ μ—­μ „ μ›μΉ™)λ¥Ό μ„λ°ν•©λ‹λ‹¤.

κ°μ„  λ°©λ²•μ€ μƒμ„±μ μ£Όμ…μ„ μ‚¬μ©ν•λ” κ²ƒμ…λ‹λ‹¤:
```java
public class MemberServiceImpl implements MemberService {
    private final MemberRepository memberRepository;

    // μƒμ„±μλ΅ μ£Όμ…λ°›κΈ° (μ™Έλ¶€μ—μ„ κ²°μ •)
    public MemberServiceImpl(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }
}
```
μ΄λ ‡κ² ν•λ©΄ MemberServiceImplμ€ μΈν„°νμ΄μ¤μ—λ§ μμ΅΄ν•κ³ , μ‹¤μ  κµ¬ν„μ²΄λ” μ™Έλ¶€μ—μ„ μ£Όμ…λ°›κ² λ©λ‹λ‹¤.

**Q4. νμ› μ„λΉ„μ¤ μ„¤κ³„μ—μ„ μΈν„°νμ΄μ¤λ¥Ό λ‘λ” κ²ƒκ³Ό λ‘μ§€ μ•λ” κ²ƒμ μ¥λ‹¨μ μ„ λΉ„κµν•΄μ£Όμ„Έμ”.**

A:
**μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λ” κ²½μ°:**
- μ¥μ : κµ¬ν„μ²΄ κµμ²΄ μ©μ΄, ν…μ¤νΈ μ‹ Mock κ°μ²΄ μ‚¬μ© κ°€λ¥, OCP μ¤€μ, λ‹¤ν•μ„± ν™μ©
- λ‹¨μ : ν΄λμ¤ μ μ¦κ°€λ΅ μΈν• λ³µμ΅λ„ μ¦κ°€, μ΄κΈ° μ„¤κ³„ λΉ„μ© μƒμΉ

**μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•μ§€ μ•λ” κ²½μ°:**
- μ¥μ : κµ¬μ΅°κ°€ λ‹¨μν•κ³  μ§κ΄€μ , κ°λ° μ†λ„ λΉ λ¦„
- λ‹¨μ : κµ¬ν„μ²΄ λ³€κ²½ μ‹ ν΄λΌμ΄μ–ΈνΈ μ½”λ“ μμ • ν•„μ”, ν…μ¤νΈ μ–΄λ ¤μ›€, ν™•μ¥μ„± λ¶€μ΅±

μΌλ°μ μΌλ΅ λ³€κ²½ κ°€λ¥μ„±μ΄ μλ” μ €μ¥μ†λ‚ μ™Έλ¶€ μ‹μ¤ν… μ—°λ™ λ¶€λ¶„μ—λ” μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•κ³ , λ‹¨μν• μ ν‹Έλ¦¬ν‹°μ„± ν΄λμ¤μ—λ” κµ¬μ²΄ ν΄λμ¤λ§ μ‚¬μ©ν•λ” κ²ƒμ΄ μΆ‹μµλ‹λ‹¤.

### κ³ κΈ‰ - μ•„ν‚¤ν…μ² μ„¤κ³„

**Q5. νμ› λ„λ©”μΈμ„ ν—¥μ‚¬κ³ λ‚  μ•„ν‚¤ν…μ²(Hexagonal Architecture)λ΅ μ¬μ„¤κ³„ν•λ‹¤λ©΄ μ–΄λ–»κ² κµ¬μ„±ν•μ‹κ² μµλ‹κΉ?**

A: ν—¥μ‚¬κ³ λ‚  μ•„ν‚¤ν…μ²λ” ν¬νΈμ™€ μ–΄λ‘ν„° ν¨ν„΄μΌλ΅λ„ λ¶λ¦¬λ©°, λΉ„μ¦λ‹μ¤ λ΅μ§μ„ μ™Έλ¶€ μμ΅΄μ„±μΌλ΅λ¶€ν„° μ™„μ „ν λ¶„λ¦¬ν•λ” μ•„ν‚¤ν…μ²μ…λ‹λ‹¤.

#### μ¬μ„¤κ³„ κµ¬μ΅°

```
[Domain Core - λΉ„μ¦λ‹μ¤ λ΅μ§]
β”β”€ Member (μ—”ν‹°ν‹°)
β”β”€ Grade (κ°’ κ°μ²΄)
β””β”€ MemberService (λ„λ©”μΈ μ„λΉ„μ¤)

[Port - μΈν„°νμ΄μ¤]
β”β”€ Inbound Port (μ μ¤μΌ€μ΄μ¤)
β”‚  β””β”€ MemberUseCase
β”‚     β”β”€ registerMember()
β”‚     β””β”€ findMember()
β”‚
β””β”€ Outbound Port (μ €μ¥μ† μΈν„°νμ΄μ¤)
   β””β”€ MemberPort
      β”β”€ save()
      β””β”€ findById()

[Adapter - κµ¬ν„μ²΄]
β”β”€ Inbound Adapter (μ™Έλ¶€μ—μ„ λ“¤μ–΄μ¤λ” μ”μ²­)
β”‚  β”β”€ MemberController (Web)
β”‚  β”β”€ MemberCLI (Console)
β”‚  β””β”€ MemberMessageListener (Message Queue)
β”‚
β””β”€ Outbound Adapter (μ™Έλ¶€λ΅ λ‚κ°€λ” μ”μ²­)
   β”β”€ MemoryMemberAdapter
   β”β”€ JpaMemberAdapter
   β””β”€ RedisMemberAdapter
```

#### μ½”λ“ μμ‹

```java
// Domain Core
public class Member {
    private final MemberId id;
    private final MemberName name;
    private final Grade grade;

    // λΉ„μ¦λ‹μ¤ λ΅μ§λ§ ν¬ν•¨
    public boolean isEligibleForDiscount() {
        return grade.isVip();
    }
}

// Inbound Port (μ μ¤μΌ€μ΄μ¤)
public interface MemberUseCase {
    MemberId registerMember(RegisterMemberCommand command);
    MemberInfo findMember(MemberId memberId);
}

// Outbound Port
public interface MemberPort {
    void save(Member member);
    Optional<Member> findById(MemberId memberId);
}

// Inbound Adapter
@RestController
public class MemberController {
    private final MemberUseCase memberUseCase;

    @PostMapping("/members")
    public ResponseEntity<MemberResponse> register(@RequestBody RegisterRequest request) {
        var command = new RegisterMemberCommand(request.getName(), request.getGrade());
        var memberId = memberUseCase.registerMember(command);
        return ResponseEntity.ok(new MemberResponse(memberId));
    }
}

// Outbound Adapter
@Repository
public class JpaMemberAdapter implements MemberPort {
    private final MemberJpaRepository jpaRepository;

    @Override
    public void save(Member member) {
        var entity = MemberEntity.from(member);
        jpaRepository.save(entity);
    }

    @Override
    public Optional<Member> findById(MemberId memberId) {
        return jpaRepository.findById(memberId.getValue())
            .map(MemberEntity::toDomain);
    }
}
```

#### ν—¥μ‚¬κ³ λ‚  μ•„ν‚¤ν…μ²μ μ¥μ 
1. **λΉ„μ¦λ‹μ¤ λ΅μ§μ λ…λ¦½μ„±**: ν”„λ μ„μ›ν¬λ‚ DBμ— μμ΅΄ν•μ§€ μ•μ
2. **ν…μ¤νΈ μ©μ΄μ„±**: ν¬νΈλ§ λ¨ν‚Ήν•λ©΄ λ„λ©”μΈ λ΅μ§ ν…μ¤νΈ κ°€λ¥
3. **μ μ—°ν• ν™•μ¥**: μƒλ΅μ΄ μ–΄λ‘ν„° μ¶”κ°€λ§μΌλ΅ κΈ°λ¥ ν™•μ¥
4. **λ…ν™•ν• μμ΅΄μ„± λ°©ν–¥**: ν•­μƒ μ™Έλ¶€μ—μ„ λ‚΄λ¶€λ΅ (μ–΄λ‘ν„° β†’ ν¬νΈ β†’ λ„λ©”μΈ)

#### ν„μ¬ μ„¤κ³„μ™€μ μ°¨μ΄μ 
- ν„μ¬: Serviceκ°€ λΉ„μ¦λ‹μ¤ λ΅μ§κ³Ό μ €μ¥μ† νΈμ¶μ„ λ¨λ‘ λ‹΄λ‹Ή
- ν—¥μ‚¬κ³ λ‚ : λ„λ©”μΈ λ΅μ§(Core), ν¬νΈ(μΈν„°νμ΄μ¤), μ–΄λ‘ν„°(κµ¬ν„)λ¥Ό λ…ν™•ν λ¶„λ¦¬
- ν„μ¬: Repository μΈν„°νμ΄μ¤κ°€ λ„λ©”μΈκ³Ό κ°™μ€ λ μ΄μ–΄
- ν—¥μ‚¬κ³ λ‚ : Portμ™€ Adapterκ°€ λ…ν™•ν λ¶„λ¦¬λμ–΄ μμ΅΄μ„± λ°©ν–¥μ΄ λ‹¨λ°©ν–¥

#### μ μ© μ‹ κ³ λ ¤μ‚¬ν•­
- μ†κ·λ¨ ν”„λ΅μ νΈμ—μ„λ” κ³Όλ„ν• μ„¤κ³„μΌ μ μμ
- λ„λ©”μΈ λ³µμ΅λ„κ°€ λ†’κ³  μ¥κΈ° μ μ§€λ³΄μκ°€ ν•„μ”ν• ν”„λ΅μ νΈμ— μ ν•©
- μ΄κΈ° λ¬λ‹μ»¤λΈκ°€ μμ§€λ§ μ¥κΈ°μ μΌλ΅ μ μ§€λ³΄μ λΉ„μ© μ κ°

---

## μ „μ²΄ μ”μ•½

νμ› λ„λ©”μΈ μ„¤κ³„λ” **μΈν„°νμ΄μ¤ κΈ°λ° μ„¤κ³„**λ¥Ό ν†µν•΄ μ”κµ¬μ‚¬ν•­μ λ¶ν™•μ‹¤μ„±μ— λ€μ‘ν•©λ‹λ‹¤.

### ν•µμ‹¬ ν¬μΈνΈ
1. **ν‘λ ¥ κ΄€κ³„ λ‹¤μ΄μ–΄κ·Έλ¨**: κΈ°νμμ™€ μ†ν†µν•κΈ° μ„ν• μ—­ν•  μ¤‘μ‹¬ λ‹¤μ΄μ–΄κ·Έλ¨
2. **ν΄λμ¤ λ‹¤μ΄μ–΄κ·Έλ¨**: μ‹¤μ  κµ¬ν„ν•  μΈν„°νμ΄μ¤μ™€ ν΄λμ¤ μ„¤κ³„
3. **κ°μ²΄ λ‹¤μ΄μ–΄κ·Έλ¨**: λ°νƒ€μ„μ— μƒμ„±λ μ‹¤μ  κ°μ²΄λ“¤μ κ΄€κ³„

### μ„¤κ³„ μ „λµ
- MemberServiceμ™€ MemberRepositoryλ¥Ό μΈν„°νμ΄μ¤λ΅ μ •μ
- κµ¬ν„μ²΄λ” μ‰½κ² κµμ²΄ κ°€λ¥ν•λ„λ΅ λ¶„λ¦¬
- μ—­ν• κ³Ό κµ¬ν„μ„ λ‚λ„μ–΄ OCP μ¤€μ

### μ•„μ§ ν•΄κ²°λμ§€ μ•μ€ λ¬Έμ 
ν„μ¬ μ„¤κ³„λ” κµ¬ν„μ²΄λ¥Ό μ§μ ‘ μƒμ„±ν•λ―€λ΅ DIPλ¥Ό μ„λ°ν•©λ‹λ‹¤. μ΄λ” λ‹¤μ μ„Ήμ…μ—μ„ Springμ DI(μμ΅΄μ„± μ£Όμ…)λ¥Ό ν†µν•΄ ν•΄κ²°ν•  μμ •μ…λ‹λ‹¤.

---

## ν•™μµ μ²΄ν¬λ¦¬μ¤νΈ
- [ ] νμ› λ„λ©”μΈμ μ”κµ¬μ‚¬ν•­μ„ μ„¤λ…ν•  μ μλ‹¤
- [ ] ν‘λ ¥ κ΄€κ³„, ν΄λμ¤, κ°μ²΄ λ‹¤μ΄μ–΄κ·Έλ¨μ μ°¨μ΄λ¥Ό μ΄ν•΄ν–λ‹¤
- [ ] μ™ μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λ”μ§€ μ„¤λ…ν•  μ μλ‹¤
- [ ] μ—­ν• κ³Ό κµ¬ν„μ λ¶„λ¦¬κ°€ μ£Όλ” μ΄μ μ„ μ΄ν•΄ν–λ‹¤
- [ ] ν„μ¬ μ„¤κ³„μ DIP μ„λ° λ¬Έμ λ¥Ό μΈμ‹ν–λ‹¤

---

## λ‹¤μ ν•™μµ
λ‹¤μ μ„Ήμ…μ—μ„λ” μ„¤κ³„ν• νμ› λ„λ©”μΈμ„ **μ‹¤μ  μ½”λ“λ΅ κµ¬ν„**ν•©λ‹λ‹¤.
- Member μ—”ν‹°ν‹° μ‘μ„±
- MemberRepository μΈν„°νμ΄μ¤μ™€ MemoryMemberRepository κµ¬ν„
- MemberService μΈν„°νμ΄μ¤μ™€ MemberServiceImpl κµ¬ν„

**[2-4. νμ› λ„λ©”μΈ κ°λ°](2-4-νμ›λ„λ©”μΈκ°λ°.md)** μ—μ„ κ³„μ†λ©λ‹λ‹¤.

---

## π“ μ°Έκ³ μλ£
- [UML ν΄λμ¤ λ‹¤μ΄μ–΄κ·Έλ¨ μ‘μ„±λ²•](https://www.uml-diagrams.org/class-diagrams-overview.html)
- [κ°μ²΄μ§€ν–¥μ μ‚¬μ‹¤κ³Ό μ¤ν•΄ - μ΅°μνΈ](http://www.yes24.com/Product/Goods/18249021) - μ—­ν• , μ±…μ„, ν‘λ ¥ κ°λ…
- [Clean Architecture - Robert C. Martin](http://www.yes24.com/Product/Goods/77283734) - μμ΅΄μ„± κ·μΉ™κ³Ό κ²½κ³„
- [λ„λ©”μΈ μ£Όλ„ μ„¤κ³„ - μ—λ¦­ μ—λ°μ¤](http://www.yes24.com/Product/Goods/5312881) - λ„λ©”μΈ λ¨λΈλ§
- [Hexagonal Architecture - Alistair Cockburn](https://alistair.cockburn.us/hexagonal-architecture/)
